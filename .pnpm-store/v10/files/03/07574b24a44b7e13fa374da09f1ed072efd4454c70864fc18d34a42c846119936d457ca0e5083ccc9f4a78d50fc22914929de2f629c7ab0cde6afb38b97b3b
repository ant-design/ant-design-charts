{"version":3,"file":"index.js","sources":["../src/plugins/web-animations-api/dom/AnimationEvent.ts","../src/plugins/web-animations-api/dom/Animation.ts","../src/plugins/web-animations-api/utils/bezier-easing.ts","../src/plugins/web-animations-api/utils/custom-easing.ts","../src/plugins/web-animations-api/utils/animation.ts","../src/plugins/web-animations-api/utils/interpolation.ts","../src/plugins/web-animations-api/dom/AnimationEffectTiming.ts","../src/plugins/web-animations-api/dom/KeyframeList.ts","../src/plugins/web-animations-api/dom/KeyframeEffect.ts","../src/plugins/web-animations-api/dom/AnimationTimeline.ts","../src/plugins/web-animations-api/index.ts","../src/plugins/camera-api/AdvancedCamera.ts","../src/plugins/camera-api/index.ts","../src/plugins/image-exporter/ImageExporter.ts","../src/plugins/pattern/util.ts","../src/plugins/pattern/dots.ts","../src/plugins/pattern/lines.ts","../src/plugins/pattern/squares.ts","../src/plugins/components/Arrow.ts","../src/plugins/components/Sector2.ts"],"sourcesContent":["import type { EventService } from '@antv/g-lite';\nimport { FederatedEvent } from '@antv/g-lite';\nimport type { Animation } from './Animation';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationPlaybackEvent\n */\n// @ts-ignore\nexport class AnimationEvent\n  extends FederatedEvent\n  implements AnimationPlaybackEvent\n{\n  constructor(\n    manager: EventService | null,\n    target: Animation,\n    public currentTime: number | null,\n    public timelineTime: number,\n  ) {\n    super(manager);\n\n    // @ts-ignore\n    this.target = target;\n    this.type = 'finish';\n    this.bubbles = false;\n    // @ts-ignore\n    this.currentTarget = target;\n    this.defaultPrevented = false;\n    this.eventPhase = this.AT_TARGET;\n    this.timeStamp = Date.now();\n    this.currentTime = currentTime;\n    this.timelineTime = timelineTime;\n  }\n}\n","import type { DisplayObject, IAnimation } from '@antv/g-lite';\nimport { ERROR_MSG_METHOD_NOT_IMPLEMENTED } from '@antv/g-lite';\nimport { AnimationEvent } from './AnimationEvent';\nimport type { AnimationTimeline } from './AnimationTimeline';\nimport type { KeyframeEffect } from './KeyframeEffect';\n\nlet sequenceNumber = 0;\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/Animation\n */\nexport class Animation implements IAnimation {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/effect\n   */\n  effect: KeyframeEffect;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/timeline\n   */\n  timeline: AnimationTimeline;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/id\n   */\n  id: string;\n\n  // animation: InternalAnimation | null;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/pending\n   */\n  get pending() {\n    return (\n      (this._startTime === null && !this._paused && this.playbackRate !== 0) ||\n      this.currentTimePending\n    );\n  }\n  private currentTimePending = false;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/playState\n   */\n  // playState: AnimationPlayState;\n  private _idle = true;\n  private _paused = false;\n  private _finishedFlag = true;\n  get playState(): AnimationPlayState {\n    if (this._idle) return 'idle';\n    if (this._isFinished) return 'finished';\n    if (this._paused) return 'paused';\n    return 'running';\n  }\n\n  /**\n   * record previos state\n   */\n  private oldPlayState: AnimationPlayState | 'pending';\n\n  private _holdTime: number;\n\n  private readyPromise: Promise<any> | undefined;\n  private finishedPromise: Promise<any> | undefined;\n  private resolveReadyPromise: Function;\n  private rejectReadyPromise: Function;\n  private resolveFinishedPromise: Function;\n  private rejectFinishedPromise: Function;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/ready\n   * @example\n    animation.pause();\n    animation.ready.then(function() {\n      // Displays 'running'\n      alert(animation.playState);\n    });\n    animation.play();\n   */\n  get ready() {\n    if (!this.readyPromise) {\n      if (this.timeline.animationsWithPromises.indexOf(this) === -1) {\n        this.timeline.animationsWithPromises.push(this);\n      }\n      this.readyPromise = new Promise((resolve, reject) => {\n        this.resolveReadyPromise = () => {\n          resolve(this);\n        };\n        this.rejectReadyPromise = () => {\n          reject(new Error());\n        };\n      });\n      if (!this.pending) {\n        this.resolveReadyPromise();\n      }\n    }\n    return this.readyPromise;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/finished\n   * @example\n    Promise.all(\n      elem.getAnimations().map(\n        function(animation) {\n          return animation.finished\n        }\n      )\n    ).then(\n      function() {\n        return elem.remove();\n      }\n    );\n   */\n  get finished() {\n    if (!this.finishedPromise) {\n      if (this.timeline.animationsWithPromises.indexOf(this) === -1) {\n        this.timeline.animationsWithPromises.push(this);\n      }\n      this.finishedPromise = new Promise((resolve, reject) => {\n        this.resolveFinishedPromise = () => {\n          resolve(this);\n        };\n        this.rejectFinishedPromise = () => {\n          reject(new Error());\n        };\n      });\n      if (this.playState === 'finished') {\n        this.resolveFinishedPromise();\n      }\n    }\n    return this.finishedPromise;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/onfinish\n   */\n  onfinish: ((this: Animation, ev: AnimationPlaybackEvent) => any) | null;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/oncancel\n   */\n  oncancel: ((this: Animation, ev: AnimationPlaybackEvent) => any) | null;\n\n  /**\n   * get called after each frame when running\n   */\n  onframe: ((this: Animation, ev: AnimationPlaybackEvent) => any) | null;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/currentTime\n   */\n  private _currentTime: number | null = 0;\n  get currentTime(): number | null {\n    this.updatePromises();\n    return this._idle || this.currentTimePending ? null : this._currentTime;\n  }\n  set currentTime(newTime: number | null) {\n    newTime = Number(newTime);\n    if (isNaN(newTime)) return;\n    this.timeline.restart();\n    if (!this._paused && this._startTime !== null) {\n      this._startTime =\n        Number(this.timeline?.currentTime) - newTime / this.playbackRate;\n    }\n    this.currentTimePending = false;\n    if (this._currentTime === newTime) {\n      return;\n    }\n    if (this._idle) {\n      this._idle = false;\n      this._paused = true;\n    }\n    this.tickCurrentTime(newTime, true);\n    this.timeline.applyDirtiedAnimation(this);\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/startTime\n   */\n  private _startTime: number | null;\n  get startTime() {\n    return this._startTime;\n  }\n  set startTime(newTime: number | null) {\n    if (newTime !== null) {\n      this.updatePromises();\n      newTime = Number(newTime);\n      if (isNaN(newTime)) return;\n      if (this._paused || this._idle) return;\n      this._startTime = newTime;\n      this.tickCurrentTime(\n        (Number(this.timeline.currentTime) - this._startTime) *\n          this.playbackRate,\n      );\n      this.timeline.applyDirtiedAnimation(this);\n      this.updatePromises();\n    }\n  }\n\n  private _playbackRate = 1;\n  get playbackRate() {\n    return this._playbackRate;\n  }\n  set playbackRate(value: number) {\n    if (value === this._playbackRate) {\n      return;\n    }\n\n    this.updatePromises();\n    const oldCurrentTime = this.currentTime;\n    this._playbackRate = value;\n    this.startTime = null;\n    if (this.playState !== 'paused' && this.playState !== 'idle') {\n      this._finishedFlag = false;\n      this._idle = false;\n      this.ensureAlive();\n      this.timeline.applyDirtiedAnimation(this);\n    }\n    if (oldCurrentTime !== null) {\n      this.currentTime = oldCurrentTime;\n    }\n    this.updatePromises();\n  }\n\n  get _isFinished() {\n    return (\n      !this._idle &&\n      ((this._playbackRate > 0 &&\n        Number(this._currentTime) >= this._totalDuration) ||\n        (this._playbackRate < 0 && Number(this._currentTime) <= 0))\n    );\n  }\n\n  _totalDuration: number;\n  get totalDuration() {\n    return this._totalDuration;\n  }\n\n  _inEffect: boolean;\n  _inTimeline = true;\n  get _needsTick() {\n    return this.pending || this.playState === 'running' || !this._finishedFlag;\n  }\n\n  constructor(effect: KeyframeEffect, timeline: AnimationTimeline) {\n    this.effect = effect;\n    effect.animation = this;\n    this.timeline = timeline;\n    this.id = `${sequenceNumber++}`;\n\n    this._inEffect = !!this.effect.update(0);\n    this._totalDuration = Number(this.effect?.getComputedTiming().endTime);\n    this._holdTime = 0;\n    this._paused = false;\n    this.oldPlayState = 'idle';\n    this.updatePromises();\n  }\n\n  /**\n   * state machine,\n   * resolve/reject ready/finished Promise according to current state\n   */\n  updatePromises() {\n    if (this.effect.target?.destroyed) {\n      this.readyPromise = undefined;\n      this.finishedPromise = undefined;\n      return false;\n    }\n\n    const { oldPlayState } = this;\n    const newPlayState = this.pending ? 'pending' : this.playState;\n    if (this.readyPromise && newPlayState !== oldPlayState) {\n      if (newPlayState === 'idle') {\n        this.rejectReadyPromise();\n        this.readyPromise = undefined;\n      } else if (oldPlayState === 'pending') {\n        this.resolveReadyPromise();\n      } else if (newPlayState === 'pending') {\n        this.readyPromise = undefined;\n      }\n    }\n    if (this.finishedPromise && newPlayState !== oldPlayState) {\n      if (newPlayState === 'idle') {\n        this.rejectFinishedPromise();\n        this.finishedPromise = undefined;\n      } else if (newPlayState === 'finished') {\n        this.resolveFinishedPromise();\n      } else if (oldPlayState === 'finished') {\n        this.finishedPromise = undefined;\n      }\n    }\n\n    this.oldPlayState = newPlayState;\n    return this.readyPromise || this.finishedPromise;\n  }\n\n  play() {\n    this.updatePromises();\n    this._paused = false;\n    if (this._isFinished || this._idle) {\n      this.rewind();\n      this._startTime = null;\n    }\n    this._finishedFlag = false;\n    this._idle = false;\n    this.ensureAlive();\n    this.timeline.applyDirtiedAnimation(this);\n\n    if (this.timeline.animations.indexOf(this) === -1) {\n      this.timeline.animations.push(this);\n    }\n\n    this.updatePromises();\n  }\n\n  pause() {\n    this.updatePromises();\n    if (this.currentTime) {\n      this._holdTime = this.currentTime;\n    }\n\n    if (!this._isFinished && !this._paused && !this._idle) {\n      this.currentTimePending = true;\n    } else if (this._idle) {\n      this.rewind();\n      this._idle = false;\n    }\n    this._startTime = null;\n    this._paused = true;\n\n    this.updatePromises();\n  }\n\n  finish() {\n    this.updatePromises();\n    if (this._idle) return;\n    this.currentTime = this._playbackRate > 0 ? this._totalDuration : 0;\n    this._startTime = this._totalDuration - this.currentTime;\n    this.currentTimePending = false;\n    this.timeline.applyDirtiedAnimation(this);\n\n    this.updatePromises();\n  }\n\n  cancel() {\n    this.updatePromises();\n    if (!this._inEffect) return;\n\n    this._inEffect = false;\n    this._idle = true;\n    this._paused = false;\n    this._finishedFlag = true;\n    this._currentTime = null;\n    this._startTime = null;\n    this.effect.update(null);\n    // effects are invalid after cancellation as the animation state\n    // needs to un-apply.\n    this.timeline.applyDirtiedAnimation(this);\n\n    this.updatePromises();\n\n    /**\n     * 1. Reject the current finished promise with a DOMException named \"AbortError\".\n     * 2. Let current finished promise be a new promise\n     * @see https://w3c.github.io/csswg-drafts/web-animations-1/#canceling-an-animation-section\n     */\n    // if (this.finishedPromise) {\n    //   this.rejectFinishedPromise();\n    //   this.finishedPromise = undefined;\n    // }\n\n    if (this.oncancel) {\n      const event = new AnimationEvent(\n        null,\n        this,\n        this.currentTime,\n        null,\n      ) as AnimationPlaybackEvent;\n      setTimeout(() => {\n        this.oncancel(event);\n      });\n    }\n  }\n\n  reverse() {\n    this.updatePromises();\n    const oldCurrentTime = this.currentTime;\n\n    this.playbackRate *= -1;\n    this.play();\n\n    if (oldCurrentTime !== null) {\n      this.currentTime = oldCurrentTime;\n    }\n    this.updatePromises();\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/updatePlaybackRate\n   */\n  updatePlaybackRate(playbackRate: number): void {\n    this.playbackRate = playbackRate;\n  }\n\n  targetAnimations() {\n    const target = this.effect?.target as unknown as DisplayObject;\n    return target.getAnimations();\n  }\n  markTarget() {\n    const animations = this.targetAnimations();\n    if (animations.indexOf(this) === -1) {\n      animations.push(this);\n    }\n  }\n  unmarkTarget() {\n    const animations = this.targetAnimations();\n    const index = animations.indexOf(this);\n    if (index !== -1) {\n      animations.splice(index, 1);\n    }\n  }\n\n  tick(timelineTime: number, isAnimationFrame: boolean) {\n    if (!this._idle && !this._paused) {\n      if (this._startTime === null) {\n        if (isAnimationFrame) {\n          this.startTime = timelineTime - this._currentTime / this.playbackRate;\n        }\n      } else if (!this._isFinished) {\n        this.tickCurrentTime(\n          (timelineTime - this._startTime) * this.playbackRate,\n        );\n      }\n    }\n\n    if (isAnimationFrame) {\n      this.currentTimePending = false;\n      this.fireEvents(timelineTime);\n    }\n  }\n\n  private rewind() {\n    if (this.playbackRate >= 0) {\n      this.currentTime = 0;\n    } else if (this._totalDuration < Infinity) {\n      this.currentTime = this._totalDuration;\n    } else {\n      throw new Error(\n        'Unable to rewind negative playback rate animation with infinite duration',\n      );\n    }\n  }\n\n  persist(): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  addEventListener<K extends keyof AnimationEventMap>(\n    type: K,\n    listener: (this: Animation, ev: AnimationEventMap[K]) => any,\n    options?: boolean | AddEventListenerOptions,\n  ): void;\n  addEventListener(\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions,\n  ): void;\n\n  addEventListener(type: any, listener: any, options?: any): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  removeEventListener<K extends keyof AnimationEventMap>(\n    type: K,\n    listener: (this: Animation, ev: AnimationEventMap[K]) => any,\n    options?: boolean | EventListenerOptions,\n  ): void;\n  removeEventListener(\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | EventListenerOptions,\n  ): void;\n\n  removeEventListener(type: any, listener: any, options?: any): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  dispatchEvent(event: Event): boolean {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  onremove: ((this: Animation, ev: Event) => any) | null;\n  // replaceState: AnimationReplaceState;\n  commitStyles(): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  private ensureAlive() {\n    // If an animation is playing backwards and is not fill backwards/both\n    // then it should go out of effect when it reaches the start of its\n    // active interval (currentTime === 0).\n    if (this.playbackRate < 0 && this.currentTime === 0) {\n      this._inEffect = !!this.effect?.update(-1);\n    } else {\n      this._inEffect = !!this.effect?.update(this.currentTime);\n    }\n    if (!this._inTimeline && (this._inEffect || !this._finishedFlag)) {\n      this._inTimeline = true;\n      this.timeline.animations.push(this);\n    }\n  }\n\n  private tickCurrentTime(newTime: number, ignoreLimit?: boolean) {\n    if (newTime !== this._currentTime) {\n      this._currentTime = newTime;\n      if (this._isFinished && !ignoreLimit) {\n        this._currentTime = this._playbackRate > 0 ? this._totalDuration : 0;\n      }\n      this.ensureAlive();\n    }\n  }\n\n  private fireEvents(baseTime: number) {\n    if (this._isFinished) {\n      if (!this._finishedFlag) {\n        if (this.onfinish) {\n          const event = new AnimationEvent(\n            null,\n            this,\n            this.currentTime,\n            baseTime,\n          ) as AnimationPlaybackEvent;\n          setTimeout(() => {\n            if (this.onfinish) {\n              this.onfinish(event);\n            }\n          });\n        }\n        this._finishedFlag = true;\n      }\n    } else {\n      if (this.onframe && this.playState === 'running') {\n        const event = new AnimationEvent(\n          null,\n          this,\n          this.currentTime,\n          baseTime,\n        ) as AnimationPlaybackEvent;\n        this.onframe(event);\n      }\n      this._finishedFlag = false;\n    }\n  }\n}\n","/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nexport const NEWTON_ITERATIONS = 4;\nexport const NEWTON_MIN_SLOPE = 0.001;\nexport const SUBDIVISION_PRECISION = 0.0000001;\nexport const SUBDIVISION_MAX_ITERATIONS = 10;\n\nexport const kSplineTableSize = 11;\nexport const kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nexport const float32ArraySupported = typeof Float32Array === 'function';\n\nexport const A = (aA1: number, aA2: number) => 1.0 - 3.0 * aA2 + 3.0 * aA1;\nexport const B = (aA1: number, aA2: number) => 3.0 * aA2 - 6.0 * aA1;\nexport const C = (aA1: number) => 3.0 * aA1;\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nexport const calcBezier = (aT: number, aA1: number, aA2: number) =>\n  ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nexport const getSlope = (aT: number, aA1: number, aA2: number) =>\n  3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\nexport const binarySubdivide = (\n  aX: number,\n  aA: number,\n  aB: number,\n  mX1: number,\n  mX2: number,\n) => {\n  let currentX: number;\n  let currentT: number;\n  let i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) aB = currentT;\n    else aA = currentT;\n  } while (\n    Math.abs(currentX) > SUBDIVISION_PRECISION &&\n    ++i < SUBDIVISION_MAX_ITERATIONS\n  );\n  return currentT;\n};\n\nexport const newtonRaphsonIterate = (\n  aX: number,\n  aGuessT: number,\n  mX1: number,\n  mX2: number,\n) => {\n  for (let i = 0; i < NEWTON_ITERATIONS; ++i) {\n    const currentSlope = getSlope(aGuessT, mX1, mX2);\n    if (currentSlope === 0.0) return aGuessT;\n\n    const currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n    aGuessT -= currentX / currentSlope;\n  }\n\n  return aGuessT;\n};\n\nexport const bezier = (mX1: number, mY1: number, mX2: number, mY2: number) => {\n  if (!(mX1 >= 0 && mX1 <= 1 && mX2 >= 0 && mX2 <= 1))\n    throw new Error('bezier x values must be in [0, 1] range');\n\n  if (mX1 === mY1 && mX2 === mY2) return (t: number) => t;\n\n  // Precompute samples table\n  const sampleValues = float32ArraySupported\n    ? new Float32Array(kSplineTableSize)\n    : new Array(kSplineTableSize);\n  for (let i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  const getTForX = (aX: number) => {\n    let intervalStart = 0.0;\n    let currentSample = 1;\n    const lastSample = kSplineTableSize - 1;\n\n    for (\n      ;\n      currentSample !== lastSample && sampleValues[currentSample] <= aX;\n      ++currentSample\n    )\n      intervalStart += kSampleStepSize;\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    const dist =\n      (aX - sampleValues[currentSample]) /\n      (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    const guessForT = intervalStart + dist * kSampleStepSize;\n\n    const initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE)\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    if (initialSlope === 0.0) return guessForT;\n\n    return binarySubdivide(\n      aX,\n      intervalStart,\n      intervalStart + kSampleStepSize,\n      mX1,\n      mX2,\n    );\n  };\n\n  return (t: number) => {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (t === 0 || t === 1) return t;\n    return calcBezier(getTForX(t), mY1, mY2);\n  };\n};\n","/**\n * ported from https://github.com/okikio/native/blob/master/packages/animate/src/custom-easing.ts\n */\nimport type { TypeEasingFunction } from '@antv/g-lite';\nimport { clamp } from '@antv/util';\nimport { bezier } from './bezier-easing';\n\nexport const convertToDash = (str: string) => {\n  str = str.replace(/([A-Z])/g, (letter) => `-${letter.toLowerCase()}`);\n\n  // Remove first dash\n  return str.charAt(0) === '-' ? str.substring(1) : str;\n};\n\nexport type TypeColor = string | number | (string | number)[];\nexport type TypeRGBAFunction = (color: TypeColor) => number[];\n\n/**\n  Easing Functions from anime.js, they are tried and true, so, its better to use them instead of other alternatives\n*/\nconst Quad: TypeEasingFunction = (t) => t ** 2;\nconst Cubic: TypeEasingFunction = (t) => t ** 3;\nconst Quart: TypeEasingFunction = (t) => t ** 4;\nconst Quint: TypeEasingFunction = (t) => t ** 5;\nconst Expo: TypeEasingFunction = (t) => t ** 6;\nconst Sine: TypeEasingFunction = (t) => 1 - Math.cos((t * Math.PI) / 2);\nconst Circ: TypeEasingFunction = (t) => 1 - Math.sqrt(1 - t * t);\nconst Back: TypeEasingFunction = (t) => t * t * (3 * t - 2);\n\nconst Bounce: TypeEasingFunction = (t) => {\n  let pow2: number;\n  let b = 4;\n  while (t < ((pow2 = 2 ** --b) - 1) / 11) {}\n  return 1 / 4 ** (3 - b) - 7.5625 * ((pow2 * 3 - 2) / 22 - t) ** 2;\n};\n\nconst Elastic: TypeEasingFunction = (t, params: (string | number)[] = []) => {\n  const [amplitude = 1, period = 0.5] = params;\n  const a = clamp(Number(amplitude), 1, 10);\n  const p = clamp(Number(period), 0.1, 2);\n  if (t === 0 || t === 1) return t;\n  return (\n    -a *\n    2 ** (10 * (t - 1)) *\n    Math.sin(\n      ((t - 1 - (p / (Math.PI * 2)) * Math.asin(1 / a)) * (Math.PI * 2)) / p,\n    )\n  );\n};\n\nconst Spring: TypeEasingFunction = (\n  t: number,\n  params: (string | number)[] = [],\n  duration?: number,\n) => {\n  let [mass = 1, stiffness = 100, damping = 10, velocity = 0] = params;\n\n  mass = clamp(mass as number, 0.1, 1000);\n  stiffness = clamp(stiffness as number, 0.1, 1000);\n  damping = clamp(damping as number, 0.1, 1000);\n  velocity = clamp(velocity as number, 0.1, 1000);\n\n  const w0 = Math.sqrt(stiffness / mass);\n  const zeta = damping / (2 * Math.sqrt(stiffness * mass));\n  const wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;\n  const a = 1;\n  const b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;\n\n  let progress = duration ? (duration * t) / 1000 : t;\n  if (zeta < 1) {\n    progress =\n      Math.exp(-progress * zeta * w0) *\n      (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));\n  } else {\n    progress = (a + b * progress) * Math.exp(-progress * w0);\n  }\n\n  if (t === 0 || t === 1) return t;\n  return 1 - progress;\n};\n\n/**\n * Cache the durations at set easing parameters\n */\n// export const EasingDurationCache: Map<string | TypeEasingFunction, number> = new Map();\n\n/**\n * The threshold for an infinite loop\n */\n// const INTINITE_LOOP_LIMIT = 10000;\n\n/** Convert easing parameters to Array of numbers, e.g. \"spring(2, 500)\" to [2, 500] */\n// export const parseEasingParameters = (str: string) => {\n//   const match = /(\\(|\\s)([^)]+)\\)?/.exec(str);\n//   return match\n//     ? match[2].split(',').map((value) => {\n//         const num = parseFloat(value);\n//         return !Number.isNaN(num) ? num : value.trim();\n//       })\n//     : [];\n// };\n\n/**\n * The spring easing function will only look smooth at certain durations, with certain parameters.\n * This functions returns the optimal duration to create a smooth springy animation based on physics\n *\n * Note: it can also be used to determine the optimal duration of other types of easing function, but be careful of 'in-'\n * easing functions, because of the nature of the function it can sometimes create an infinite loop, I suggest only using\n * `getEasingDuration` for `spring`, specifically 'out-spring' and 'spring'\n */\n// export const getEasingDuration = (easing: string | TypeEasingFunction = 'spring') => {\n//   if (EasingDurationCache.has(easing)) return EasingDurationCache.get(easing);\n\n//   // eslint-disable-next-line @typescript-eslint/no-use-before-define\n//   const easingFunction = typeof easing == 'function' ? easing : getEasingFunction(easing as string);\n//   const params = typeof easing == 'function' ? [] : parseEasingParameters(easing);\n//   const frame = 1 / 6;\n\n//   let elapsed = 0;\n//   let rest = 0;\n//   let count = 0;\n\n//   while (++count < INTINITE_LOOP_LIMIT) {\n//     elapsed += frame;\n//     if (easingFunction(elapsed, params, undefined) === 1) {\n//       rest++;\n//       if (rest >= 16) break;\n//     } else {\n//       rest = 0;\n//     }\n//   }\n\n//   const duration = elapsed * frame * 1000;\n//   EasingDurationCache.set(easing, duration);\n//   return duration;\n// };\n\n/**\n  These Easing Functions are based off of the Sozi Project's easing functions\n  https://github.com/sozi-projects/Sozi/blob/d72e44ebd580dc7579d1e177406ad41e632f961d/src/js/player/Timing.js\n*/\nconst Steps: TypeEasingFunction = (t: number, params = []) => {\n  const [steps = 10, type] = params as [number, string];\n  const trunc = type === 'start' ? Math.ceil : Math.floor;\n  return trunc(clamp(t, 0, 1) * steps) / steps;\n};\n\n// @ts-ignore\nconst Bezier: TypeEasingFunction = (t: number, params: number[] = []) => {\n  const [mX1, mY1, mX2, mY2] = params;\n  return bezier(mX1, mY1, mX2, mY2)(t);\n};\n\n/** The default `ease-in` easing function */\nconst easein: TypeEasingFunction = bezier(0.42, 0.0, 1.0, 1.0);\n\n/** Converts easing functions to their `out`counter parts */\nconst EaseOut = (ease: TypeEasingFunction): TypeEasingFunction => {\n  return (t, params = [], duration?: number) =>\n    1 - ease(1 - t, params, duration);\n};\n\n/** Converts easing functions to their `in-out` counter parts */\nconst EaseInOut = (ease: TypeEasingFunction): TypeEasingFunction => {\n  return (t, params = [], duration?: number) =>\n    t < 0.5\n      ? ease(t * 2, params, duration) / 2\n      : 1 - ease(t * -2 + 2, params, duration) / 2;\n};\n\n/** Converts easing functions to their `out-in` counter parts */\nconst EaseOutIn = (ease: TypeEasingFunction): TypeEasingFunction => {\n  return (t, params = [], duration?: number) => {\n    return t < 0.5\n      ? (1 - ease(1 - t * 2, params, duration)) / 2\n      : (ease(t * 2 - 1, params, duration) + 1) / 2;\n  };\n};\n\n/**\n * The default list of easing functions, do note this is different from {@link EASING}\n */\ntype EasingFunctionType =\n  | 'steps'\n  | 'step-start'\n  | 'step-end'\n  | 'linear'\n  | 'cubic-bezier'\n  | 'ease'\n  | 'in'\n  | 'out'\n  | 'in-out'\n  | 'out-in'\n  | 'in-quad'\n  | 'out-quad'\n  | 'in-out-quad'\n  | 'out-in-quad'\n  | 'in-cubic'\n  | 'out-cubic'\n  | 'in-out-cubic'\n  | 'out-in-cubic'\n  | 'in-quart'\n  | 'out-quart'\n  | 'in-out-quart'\n  | 'out-in-quart'\n  | 'in-quint'\n  | 'out-quint'\n  | 'in-out-quint'\n  | 'out-in-quint'\n  | 'in-expo'\n  | 'out-expo'\n  | 'in-out-expo'\n  | 'out-in-expo'\n  | 'in-sine'\n  | 'out-sine'\n  | 'in-out-sine'\n  | 'out-in-sine'\n  | 'in-circ'\n  | 'out-circ'\n  | 'in-out-circ'\n  | 'out-in-circ'\n  | 'in-back'\n  | 'out-back'\n  | 'in-out-back'\n  | 'out-in-back'\n  | 'in-bounce'\n  | 'out-bounce'\n  | 'in-out-bounce'\n  | 'out-in-bounce'\n  | 'in-elastic'\n  | 'out-elastic'\n  | 'in-out-elastic'\n  | 'out-in-elastic'\n  | 'spring'\n  | 'spring-in'\n  | 'spring-out'\n  | 'spring-in-out'\n  | 'spring-out-in';\nexport const EasingFunctions: Record<EasingFunctionType, TypeEasingFunction> = {\n  steps: Steps,\n  'step-start': (t) => Steps(t, [1, 'start']),\n  'step-end': (t) => Steps(t, [1, 'end']),\n\n  linear: (t) => t,\n  'cubic-bezier': Bezier,\n  ease: (t) => Bezier(t, [0.25, 0.1, 0.25, 1.0]),\n\n  in: easein,\n  out: EaseOut(easein),\n  'in-out': EaseInOut(easein),\n  'out-in': EaseOutIn(easein),\n\n  'in-quad': Quad,\n  'out-quad': EaseOut(Quad),\n  'in-out-quad': EaseInOut(Quad),\n  'out-in-quad': EaseOutIn(Quad),\n\n  'in-cubic': Cubic,\n  'out-cubic': EaseOut(Cubic),\n  'in-out-cubic': EaseInOut(Cubic),\n  'out-in-cubic': EaseOutIn(Cubic),\n\n  'in-quart': Quart,\n  'out-quart': EaseOut(Quart),\n  'in-out-quart': EaseInOut(Quart),\n  'out-in-quart': EaseOutIn(Quart),\n\n  'in-quint': Quint,\n  'out-quint': EaseOut(Quint),\n  'in-out-quint': EaseInOut(Quint),\n  'out-in-quint': EaseOutIn(Quint),\n\n  'in-expo': Expo,\n  'out-expo': EaseOut(Expo),\n  'in-out-expo': EaseInOut(Expo),\n  'out-in-expo': EaseOutIn(Expo),\n\n  'in-sine': Sine,\n  'out-sine': EaseOut(Sine),\n  'in-out-sine': EaseInOut(Sine),\n  'out-in-sine': EaseOutIn(Sine),\n\n  'in-circ': Circ,\n  'out-circ': EaseOut(Circ),\n  'in-out-circ': EaseInOut(Circ),\n  'out-in-circ': EaseOutIn(Circ),\n\n  'in-back': Back,\n  'out-back': EaseOut(Back),\n  'in-out-back': EaseInOut(Back),\n  'out-in-back': EaseOutIn(Back),\n\n  'in-bounce': Bounce,\n  'out-bounce': EaseOut(Bounce),\n  'in-out-bounce': EaseInOut(Bounce),\n  'out-in-bounce': EaseOutIn(Bounce),\n\n  'in-elastic': Elastic,\n  'out-elastic': EaseOut(Elastic),\n  'in-out-elastic': EaseInOut(Elastic),\n  'out-in-elastic': EaseOutIn(Elastic),\n\n  spring: Spring,\n  'spring-in': Spring,\n  'spring-out': EaseOut(Spring),\n  'spring-in-out': EaseInOut(Spring),\n  'spring-out-in': EaseOutIn(Spring),\n};\n\n/**\n * Convert string easing to their proper form\n */\nconst complexEasingSyntax = (ease: string) =>\n  convertToDash(ease)\n    .replace(/^ease-/, '') // Remove the \"ease-\" keyword\n    .replace(/(\\(|\\s).+/, '') // Remove the function brackets and parameters\n    .toLowerCase()\n    .trim();\n\n/** Re-maps a number from one range to another. Numbers outside the range are not clamped to 0 and 1, because out-of-range values are often intentional and useful. */\nexport const getEasingFunction = (ease: string) => {\n  return EasingFunctions[complexEasingSyntax(ease)] || EasingFunctions.linear;\n};\n\n// /**\n//  * Allows you to register new easing functions\n//  */\n// export const registerEasingFunction = (key: string, fn: TypeEasingFunction) => {\n//   Object.assign(EasingFunctions, {\n//     [key]: fn,\n//   });\n// };\n\n// /**\n//  * Allows you to register multiple new easing functions\n//  */\n// export const registerEasingFunctions = (...obj: typeof EasingFunctions[]) => {\n//   Object.assign(EasingFunctions, ...obj);\n// };\n","import type { AnimationEffectTiming } from '../dom/AnimationEffectTiming';\nimport { bezier } from './bezier-easing';\nimport { convertToDash, getEasingFunction } from './custom-easing';\n\nexport const linear = (x: number) => {\n  return x;\n};\n\nconst Start = 1;\nconst Middle = 0.5;\nconst End = 0;\n\nfunction step(count: number, pos: number) {\n  return function (x: number) {\n    if (x >= 1) {\n      return 1;\n    }\n    const stepSize = 1 / count;\n    x += pos * stepSize;\n    return x - (x % stepSize);\n  };\n}\n\nconst numberString = '\\\\s*(-?\\\\d+\\\\.?\\\\d*|-?\\\\.\\\\d+)\\\\s*';\nconst cubicBezierRe = new RegExp(\n  `cubic-bezier\\\\(${numberString},${numberString},${numberString},${numberString}\\\\)`,\n);\nconst step1Re = /steps\\(\\s*(\\d+)\\s*\\)/;\nconst step2Re = /steps\\(\\s*(\\d+)\\s*,\\s*(start|middle|end)\\s*\\)/;\n\nexport function parseEasingFunction(\n  normalizedEasing: string,\n): (t: number) => number {\n  const cubicData = cubicBezierRe.exec(normalizedEasing);\n  if (cubicData) {\n    // @ts-ignore\n    return bezier(...cubicData.slice(1).map(Number));\n  }\n  const step1Data = step1Re.exec(normalizedEasing);\n  if (step1Data) {\n    return step(Number(step1Data[1]), End);\n  }\n  const step2Data = step2Re.exec(normalizedEasing);\n  if (step2Data) {\n    // @ts-ignore\n    return step(\n      Number(step2Data[1]),\n      { start: Start, middle: Middle, end: End }[step2Data[2]],\n    );\n  }\n  return getEasingFunction(normalizedEasing);\n}\n\nexport function calculateActiveDuration(timing: EffectTiming) {\n  // @ts-ignore\n  return Math.abs(repeatedDuration(timing) / (timing.playbackRate || 1));\n}\n\nfunction repeatedDuration(timing: EffectTiming): number {\n  // https://drafts.csswg.org/web-animations/#calculating-the-active-duration\n  if (timing.duration === 0 || timing.iterations === 0) {\n    return 0;\n  }\n\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/duration#value\n  // if (timing.duration === 'auto') {\n  //   timing.duration = 0;\n  // }\n\n  return (\n    (timing.duration === 'auto' ? 0 : Number(timing.duration)) *\n    (timing.iterations ?? 1)\n  );\n}\n\nconst PhaseNone = 0;\nconst PhaseBefore = 1;\nconst PhaseAfter = 2;\nconst PhaseActive = 3;\n\nfunction calculatePhase(\n  activeDuration: number,\n  localTime: number | null,\n  timing: AnimationEffectTiming,\n) {\n  // https://drafts.csswg.org/web-animations/#animation-effect-phases-and-states\n  if (localTime === null) {\n    return PhaseNone;\n  }\n\n  const { endTime } = timing;\n  if (localTime < Math.min(timing.delay, endTime)) {\n    return PhaseBefore;\n  }\n  if (\n    localTime >=\n    Math.min(timing.delay + activeDuration + timing.endDelay, endTime)\n  ) {\n    return PhaseAfter;\n  }\n\n  return PhaseActive;\n}\n\nfunction calculateActiveTime(\n  activeDuration: any,\n  fillMode: string,\n  localTime: number,\n  phase: number,\n  delay: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-active-time\n  switch (phase) {\n    case PhaseBefore:\n      if (fillMode === 'backwards' || fillMode === 'both') return 0;\n      return null;\n    case PhaseActive:\n      return localTime - delay;\n    case PhaseAfter:\n      if (fillMode === 'forwards' || fillMode === 'both') return activeDuration;\n      return null;\n    case PhaseNone:\n      return null;\n  }\n}\n\nfunction calculateOverallProgress(\n  iterationDuration: number,\n  phase: number,\n  iterations: number,\n  activeTime: number,\n  iterationStart: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-overall-progress\n  let overallProgress = iterationStart;\n  if (iterationDuration === 0) {\n    if (phase !== PhaseBefore) {\n      overallProgress += iterations;\n    }\n  } else {\n    overallProgress += activeTime / iterationDuration;\n  }\n  return overallProgress;\n}\n\nfunction calculateSimpleIterationProgress(\n  overallProgress: number,\n  iterationStart: number,\n  phase: number,\n  iterations: number,\n  activeTime: number,\n  iterationDuration: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-simple-iteration-progress\n\n  let simpleIterationProgress =\n    overallProgress === Infinity ? iterationStart % 1 : overallProgress % 1;\n  if (\n    simpleIterationProgress === 0 &&\n    phase === PhaseAfter &&\n    iterations !== 0 &&\n    (activeTime !== 0 || iterationDuration === 0)\n  ) {\n    simpleIterationProgress = 1;\n  }\n  return simpleIterationProgress;\n}\n\nfunction calculateCurrentIteration(\n  phase: number,\n  iterations: number,\n  simpleIterationProgress: number,\n  overallProgress: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-current-iteration\n  if (phase === PhaseAfter && iterations === Infinity) {\n    return Infinity;\n  }\n  if (simpleIterationProgress === 1) {\n    return Math.floor(overallProgress) - 1;\n  }\n  return Math.floor(overallProgress);\n}\n\nfunction calculateDirectedProgress(\n  playbackDirection: string,\n  currentIteration: number,\n  simpleIterationProgress: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-directed-progress\n  let currentDirection = playbackDirection;\n  if (playbackDirection !== 'normal' && playbackDirection !== 'reverse') {\n    let d = currentIteration;\n    if (playbackDirection === 'alternate-reverse') {\n      d += 1;\n    }\n    currentDirection = 'normal';\n    if (d !== Infinity && d % 2 !== 0) {\n      currentDirection = 'reverse';\n    }\n  }\n  if (currentDirection === 'normal') {\n    return simpleIterationProgress;\n  }\n  return 1 - simpleIterationProgress;\n}\n\nexport function calculateIterationProgress(\n  activeDuration: number,\n  localTime: number,\n  timing: AnimationEffectTiming,\n) {\n  const phase = calculatePhase(activeDuration, localTime, timing);\n  const activeTime = calculateActiveTime(\n    activeDuration,\n    timing.fill,\n    localTime,\n    phase,\n    timing.delay,\n  );\n  if (activeTime === null) return null;\n\n  const duration = timing.duration === 'auto' ? 0 : timing.duration;\n  const overallProgress = calculateOverallProgress(\n    duration,\n    phase,\n    timing.iterations,\n    activeTime,\n    timing.iterationStart,\n  );\n  const simpleIterationProgress = calculateSimpleIterationProgress(\n    overallProgress,\n    timing.iterationStart,\n    phase,\n    timing.iterations,\n    activeTime,\n    duration,\n  );\n  const currentIteration = calculateCurrentIteration(\n    phase,\n    timing.iterations,\n    simpleIterationProgress,\n    overallProgress,\n  );\n\n  const directedProgress = calculateDirectedProgress(\n    timing.direction,\n    currentIteration,\n    simpleIterationProgress,\n  );\n\n  timing.currentIteration = currentIteration;\n  timing.progress = directedProgress;\n\n  // https://drafts.csswg.org/web-animations/#calculating-the-transformed-progress\n  // https://drafts.csswg.org/web-animations/#calculating-the-iteration-progress\n  return timing.easingFunction(directedProgress);\n}\n\n/**\n * From: [https://easings.net]\n * Read More about easings on [MDN](https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/easing)\n */\nexport const EASINGS: Record<string, string> = {\n  in: 'ease-in',\n  out: 'ease-out',\n  'in-out': 'ease-in-out',\n\n  // Sine\n  'in-sine': 'cubic-bezier(0.47, 0, 0.745, 0.715)',\n  'out-sine': 'cubic-bezier(0.39, 0.575, 0.565, 1)',\n  'in-out-sine': 'cubic-bezier(0.445, 0.05, 0.55, 0.95)',\n\n  // Quad\n  'in-quad': 'cubic-bezier(0.55, 0.085, 0.68, 0.53)',\n  'out-quad': 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n  'in-out-quad': 'cubic-bezier(0.455, 0.03, 0.515, 0.955)',\n\n  // Cubic\n  'in-cubic': 'cubic-bezier(0.55, 0.055, 0.675, 0.19)',\n  'out-cubic': 'cubic-bezier(0.215, 0.61, 0.355, 1)',\n  'in-out-cubic': 'cubic-bezier(0.645, 0.045, 0.355, 1)',\n\n  // Quart\n  'in-quart': 'cubic-bezier(0.895, 0.03, 0.685, 0.22)',\n  'out-quart': 'cubic-bezier(0.165, 0.84, 0.44, 1)',\n  'in-out-quart': 'cubic-bezier(0.77, 0, 0.175, 1)',\n\n  // Quint\n  'in-quint': 'cubic-bezier(0.755, 0.05, 0.855, 0.06)',\n  'out-quint': 'cubic-bezier(0.23, 1, 0.32, 1)',\n  'in-out-quint': 'cubic-bezier(0.86, 0, 0.07, 1)',\n\n  // Expo\n  'in-expo': 'cubic-bezier(0.95, 0.05, 0.795, 0.035)',\n  'out-expo': 'cubic-bezier(0.19, 1, 0.22, 1)',\n  'in-out-expo': 'cubic-bezier(1, 0, 0, 1)',\n\n  // Circ\n  'in-circ': 'cubic-bezier(0.6, 0.04, 0.98, 0.335)',\n  'out-circ': 'cubic-bezier(0.075, 0.82, 0.165, 1)',\n  'in-out-circ': 'cubic-bezier(0.785, 0.135, 0.15, 0.86)',\n\n  // Back\n  'in-back': 'cubic-bezier(0.6, -0.28, 0.735, 0.045)',\n  'out-back': 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',\n  'in-out-back': 'cubic-bezier(0.68, -0.55, 0.265, 1.55)',\n};\nexport const EasingKeys = Object.keys(EASINGS);\n\n/**\n * Converts users input into a usable easing function string\n */\nexport const getEase = (ease: keyof typeof EASINGS = 'ease'): string => {\n  // Convert camelCase strings into dashed strings, then Remove the \"ease-\" keyword\n  const search = convertToDash(ease).replace(/^ease-/, '');\n  return EASINGS[search] || ease;\n};\n","import type {\n  IAnimationEffectTiming,\n  IElement,\n  Interpolatable,\n  TypeEasingFunction,\n} from '@antv/g-lite';\nimport { propertyMetadataCache, runtime } from '@antv/g-lite';\nimport { isNumber } from '@antv/util';\nimport { parseEasingFunction } from './animation';\n\nexport function convertEffectInput(\n  keyframes: ComputedKeyframe[],\n  timing: IAnimationEffectTiming,\n  target: IElement | null,\n) {\n  const propertySpecificKeyframeGroups = makePropertySpecificKeyframeGroups(\n    keyframes,\n    timing,\n  );\n  const interpolations = makeInterpolations(\n    propertySpecificKeyframeGroups,\n    target,\n  );\n\n  return function (target: IElement, fraction: number) {\n    if (fraction !== null) {\n      interpolations\n        .filter((interpolation) => {\n          return (\n            fraction >= interpolation.applyFrom &&\n            fraction < interpolation.applyTo\n          );\n        })\n        .forEach((interpolation) => {\n          const offsetFraction = fraction - interpolation.startOffset;\n          const localDuration =\n            interpolation.endOffset - interpolation.startOffset;\n          const scaledLocalTime =\n            localDuration === 0 ? 0 : offsetFraction / localDuration;\n          // apply updated attribute\n          target.setAttribute(\n            interpolation.property,\n            interpolation.interpolation(scaledLocalTime),\n            false,\n            false, // disable memoize\n          );\n\n          // if (interpolation.property === 'visibility') {\n          //   console.log(\n          //     scaledLocalTime,\n          //     interpolation.interpolation(scaledLocalTime),\n          //   );\n          // }\n        });\n    } else {\n      for (const property in propertySpecificKeyframeGroups)\n        if (isNotReservedWord(property)) {\n          // clear attribute\n          target.setAttribute(property, null);\n        }\n    }\n  };\n}\n\ninterface PropertySpecificKeyframe {\n  offset: number | null;\n  computedOffset: number;\n  easing: string;\n  easingFunction: TypeEasingFunction;\n  value: any;\n}\n\nfunction isNotReservedWord(member: string) {\n  return (\n    member !== 'offset' &&\n    member !== 'easing' &&\n    member !== 'composite' &&\n    member !== 'computedOffset'\n  );\n}\n\nfunction makePropertySpecificKeyframeGroups(\n  keyframes: ComputedKeyframe[],\n  timing: IAnimationEffectTiming,\n) {\n  const propertySpecificKeyframeGroups: Record<\n    string,\n    PropertySpecificKeyframe[]\n  > = {};\n\n  for (let i = 0; i < keyframes.length; i++) {\n    for (const member in keyframes[i]) {\n      if (isNotReservedWord(member)) {\n        const propertySpecificKeyframe = {\n          offset: keyframes[i].offset,\n          computedOffset: keyframes[i].computedOffset,\n          easing: keyframes[i].easing,\n          easingFunction:\n            parseEasingFunction(keyframes[i].easing) || timing.easingFunction,\n          value: keyframes[i][member],\n        };\n        propertySpecificKeyframeGroups[member] =\n          propertySpecificKeyframeGroups[member] || [];\n        propertySpecificKeyframeGroups[member].push(propertySpecificKeyframe);\n      }\n    }\n  }\n  return propertySpecificKeyframeGroups;\n}\n\nfunction makeInterpolations(\n  propertySpecificKeyframeGroups: Record<string, PropertySpecificKeyframe[]>,\n  target: IElement | null,\n) {\n  const interpolations = [];\n  for (const groupName in propertySpecificKeyframeGroups) {\n    const keyframes = propertySpecificKeyframeGroups[groupName];\n    for (let i = 0; i < keyframes.length - 1; i++) {\n      let startIndex = i;\n      let endIndex = i + 1;\n      const startOffset = keyframes[startIndex].computedOffset;\n      const endOffset = keyframes[endIndex].computedOffset;\n      let applyFrom = startOffset;\n      let applyTo = endOffset;\n\n      if (i === 0) {\n        applyFrom = -Infinity;\n        if (endOffset === 0) {\n          endIndex = startIndex;\n        }\n      }\n      if (i === keyframes.length - 2) {\n        applyTo = Infinity;\n        if (startOffset === 1) {\n          startIndex = endIndex;\n        }\n      }\n\n      interpolations.push({\n        applyFrom,\n        applyTo,\n        startOffset: keyframes[startIndex].computedOffset,\n        endOffset: keyframes[endIndex].computedOffset,\n        easingFunction: keyframes[startIndex].easingFunction,\n        property: groupName,\n        interpolation: propertyInterpolation(\n          groupName,\n          keyframes[startIndex].value,\n          keyframes[endIndex].value,\n          target,\n        ),\n      });\n    }\n  }\n  interpolations.sort((leftInterpolation, rightInterpolation) => {\n    return leftInterpolation.startOffset - rightInterpolation.startOffset;\n  });\n  return interpolations;\n}\n\nconst InterpolationFactory = (\n  from: Interpolatable,\n  to: Interpolatable,\n  convertToString: Function,\n) => {\n  return (f: number) => {\n    const interpolated = interpolate(from, to, f);\n    return isNumber(interpolated)\n      ? interpolated\n      : convertToString(interpolated);\n  };\n};\n\nfunction propertyInterpolation(\n  property: string,\n  left: string | number,\n  right: string | number,\n  target: IElement | null,\n) {\n  const metadata = propertyMetadataCache[property];\n\n  if (metadata && metadata.syntax && metadata.int) {\n    const propertyHandler = runtime.styleValueRegistry.getPropertySyntax(\n      metadata.syntax,\n    );\n\n    if (propertyHandler) {\n      const parser = propertyHandler.parser;\n      const usedLeft = parser ? parser(left, target) : left;\n      const usedRight = parser ? parser(right, target) : right;\n\n      // merger [left, right, n2string()]\n      const interpolationArgs = propertyHandler.mixer(\n        usedLeft,\n        usedRight,\n        target,\n      );\n      if (interpolationArgs) {\n        const interp = InterpolationFactory(\n          // @ts-ignore\n          ...interpolationArgs,\n        );\n        return function (t: number) {\n          if (t === 0) return left;\n          if (t === 1) return right;\n          return interp(t);\n        };\n      }\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  return InterpolationFactory(false, true, function (bool: boolean) {\n    return bool ? right : left;\n  });\n}\n\n/**\n * interpolate with number, boolean, number[], boolean[]\n */\nfunction interpolate(\n  from: Interpolatable,\n  to: Interpolatable,\n  f: number,\n): Interpolatable {\n  if (typeof from === 'number' && typeof to === 'number') {\n    return from * (1 - f) + to * f;\n  }\n  if (\n    (typeof from === 'boolean' && typeof to === 'boolean') ||\n    (typeof from === 'string' && typeof to === 'string') // skip string, eg. path ['M', 10, 10]\n  ) {\n    return f < 0.5 ? from : to;\n  }\n\n  if (Array.isArray(from) && Array.isArray(to)) {\n    // interpolate arrays/matrix\n    const fromLength = from.length;\n    const toLength = to.length;\n    const length = Math.max(fromLength, toLength);\n\n    const r: number[] = [];\n    for (let i = 0; i < length; i++) {\n      r.push(\n        interpolate(\n          from[i < fromLength ? i : fromLength - 1],\n          to[i < toLength ? i : toLength - 1],\n          f,\n        ) as number,\n      );\n    }\n    return r;\n  }\n  throw new Error(`Mismatched interpolation arguments ${from}:${to}`);\n}\n","import { linear, parseEasingFunction } from '../utils/animation';\nimport type { KeyframeEffect } from './KeyframeEffect';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming\n */\nexport class AnimationEffectTiming implements EffectTiming {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/delay\n   */\n  delay = 0;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/direction\n   */\n  direction: PlaybackDirection = 'normal';\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/duration\n   */\n  duration: number | 'auto' = 'auto';\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/easing\n   */\n  private _easing = 'linear';\n  easingFunction = linear;\n  get easing() {\n    return this._easing;\n  }\n  set easing(value: string) {\n    this.easingFunction = parseEasingFunction(value);\n    this._easing = value;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/endDelay\n   */\n  endDelay = 0;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/fill\n   */\n  fill: FillMode = 'auto';\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/iterationStart\n   */\n  iterationStart = 0;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/iterations\n   */\n  iterations = 1;\n\n  /**\n   * @deprecated\n   */\n  playbackRate: number;\n\n  /**\n   * ref to effect\n   */\n  effect: KeyframeEffect;\n\n  composite: string;\n\n  /**\n   * ComputedEffectTiming\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getComputedTiming\n   */\n  activeDuration: number;\n\n  endTime: number;\n\n  currentIteration: number | null = null;\n\n  progress: number | null = null;\n}\n","import { isNil } from '@antv/util';\nimport type { AnimationEffectTiming } from './AnimationEffectTiming';\n\n/**\n * @example\n  {\n    translateY: [200, 300],\n    scale: [1, 10],\n  }\n\n * groups' length can be different, the following config should generate 3 frames:\n  @example\n  {\n    translateY: [200, 300, 400],\n    scale: [1, 10],\n  }\n */\nfunction convertToArrayForm(effectInput: PropertyIndexedKeyframes) {\n  const normalizedEffectInput: Keyframe[] = [];\n\n  for (const property in effectInput) {\n    // skip reserved props\n    if (property in ['easing', 'offset', 'composite']) {\n      continue;\n    }\n\n    // @ts-ignore\n    let values: string[] | (number | null)[] = effectInput[property];\n    if (!Array.isArray(values)) {\n      values = [values];\n    }\n\n    const numKeyframes = values.length;\n    for (let i = 0; i < numKeyframes; i++) {\n      if (!normalizedEffectInput[i]) {\n        const keyframe: Keyframe = {};\n        if ('offset' in effectInput) {\n          keyframe.offset = Number(effectInput.offset);\n        }\n\n        if ('easing' in effectInput) {\n          // @ts-ignore\n          keyframe.easing = effectInput.easing;\n        }\n\n        if ('composite' in effectInput) {\n          // @ts-ignore\n          keyframe.composite = effectInput.composite;\n        }\n        normalizedEffectInput[i] = keyframe;\n      }\n\n      if (values[i] !== undefined && values[i] !== null) {\n        normalizedEffectInput[i][property] = values[i];\n      }\n    }\n  }\n\n  normalizedEffectInput.sort(function (a, b) {\n    return (\n      ((a.computedOffset as number) || 0) - ((b.computedOffset as number) || 0)\n    );\n  });\n  return normalizedEffectInput;\n}\n\nexport function normalizeKeyframes(\n  effectInput: Keyframe[] | PropertyIndexedKeyframes | null,\n  timing?: AnimationEffectTiming,\n): ComputedKeyframe[] {\n  if (effectInput === null) {\n    return [];\n  }\n\n  if (!Array.isArray(effectInput)) {\n    effectInput = convertToArrayForm(effectInput);\n  }\n\n  let keyframes = effectInput.map((originalKeyframe) => {\n    const keyframe: Keyframe = {};\n\n    if (timing?.composite) {\n      // This will be auto if the composite operation specified on the effect is being used.\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API/Keyframe_Formats\n      keyframe.composite = 'auto';\n    }\n\n    for (const member in originalKeyframe) {\n      let memberValue = originalKeyframe[member];\n      if (member === 'offset') {\n        if (memberValue !== null) {\n          memberValue = Number(memberValue);\n          if (!isFinite(memberValue))\n            throw new Error('Keyframe offsets must be numbers.');\n          if (memberValue < 0 || memberValue > 1)\n            throw new Error('Keyframe offsets must be between 0 and 1.');\n          keyframe.computedOffset = memberValue;\n        }\n      } else if (member === 'composite') {\n        // TODO: Support add & accumulate in KeyframeEffect.composite\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect/composite\n        if (\n          ['replace', 'add', 'accumulate', 'auto'].indexOf(\n            memberValue as string,\n          ) === -1\n        ) {\n          throw new Error(`${memberValue} compositing is not supported`);\n        }\n      } else if (member === 'easing') {\n        // TODO: Validate animation-timing-function\n        // @see https://developer.mozilla.org/en-US/docs/Web/CSS/animation-timing-function\n        // memberValue = memberValue;\n        // } else {\n        //   memberValue = '' + memberValue;\n      }\n\n      // assign to keyframe, no need to parse shorthand value\n      keyframe[member] = memberValue;\n    }\n    if (keyframe.offset === undefined) {\n      keyframe.offset = null;\n    }\n    if (keyframe.easing === undefined) {\n      // override with timing.easing\n      keyframe.easing = timing?.easing || 'linear';\n    }\n    if (keyframe.composite === undefined) {\n      keyframe.composite = 'auto';\n    }\n    return keyframe;\n  });\n\n  let everyFrameHasOffset = true;\n  let previousOffset = -Infinity;\n  for (let i = 0; i < keyframes.length; i++) {\n    const { offset } = keyframes[i];\n    if (!isNil(offset)) {\n      if (offset < previousOffset) {\n        throw new TypeError(\n          'Keyframes are not loosely sorted by offset. Sort or specify offsets.',\n        );\n      }\n      previousOffset = offset;\n    } else {\n      everyFrameHasOffset = false;\n    }\n  }\n\n  keyframes = keyframes.filter((keyframe) => {\n    return Number(keyframe.offset) >= 0 && Number(keyframe.offset) <= 1;\n  });\n\n  function spaceKeyframes() {\n    const { length } = keyframes;\n    keyframes[length - 1].computedOffset = Number(\n      keyframes[length - 1].offset ?? 1,\n    );\n    if (length > 1) {\n      keyframes[0].computedOffset = Number(keyframes[0].offset ?? 0);\n    }\n\n    let previousIndex = 0;\n    let previousOffset = Number(keyframes[0].computedOffset);\n    for (let i = 1; i < length; i++) {\n      const offset = keyframes[i].computedOffset;\n      if (!isNil(offset) && !isNil(previousOffset)) {\n        for (let j = 1; j < i - previousIndex; j++)\n          keyframes[previousIndex + j].computedOffset =\n            previousOffset +\n            ((Number(offset) - previousOffset) * j) / (i - previousIndex);\n        previousIndex = i;\n        previousOffset = Number(offset);\n      }\n    }\n  }\n  if (!everyFrameHasOffset) spaceKeyframes();\n\n  return keyframes as ComputedKeyframe[];\n}\n","import { IElement, IKeyframeEffect, runtime } from '@antv/g-lite';\nimport {\n  calculateActiveDuration,\n  calculateIterationProgress,\n  convertEffectInput,\n} from '../utils';\nimport type { Animation } from './Animation';\nimport { AnimationEffectTiming } from './AnimationEffectTiming';\nimport { normalizeKeyframes } from './KeyframeList';\n\nconst fills = 'backwards|forwards|both|none'.split('|');\nconst directions = 'reverse|alternate|alternate-reverse'.split('|');\nexport function makeTiming(\n  timingInput: KeyframeEffectOptions,\n  forGroup: boolean,\n) {\n  const timing = new AnimationEffectTiming();\n  if (forGroup) {\n    timing.fill = 'both';\n    timing.duration = 'auto';\n  }\n  if (typeof timingInput === 'number' && !isNaN(timingInput)) {\n    timing.duration = timingInput;\n  } else if (timingInput !== undefined) {\n    (Object.keys(timingInput) as (keyof EffectTiming)[]).forEach((property) => {\n      if (\n        timingInput[property] !== undefined &&\n        timingInput[property] !== null &&\n        timingInput[property] !== 'auto'\n      ) {\n        if (typeof timing[property] === 'number' || property === 'duration') {\n          if (\n            typeof timingInput[property] !== 'number' ||\n            isNaN(timingInput[property])\n          ) {\n            return;\n          }\n        }\n        if (\n          property === 'fill' &&\n          fills.indexOf(timingInput[property]) === -1\n        ) {\n          return;\n        }\n        if (\n          property === 'direction' &&\n          directions.indexOf(timingInput[property]) === -1\n        ) {\n          return;\n        }\n        // @ts-ignore\n        timing[property] = timingInput[property];\n      }\n    });\n  }\n  return timing;\n}\n\nexport function normalizeTimingInput(\n  timingInput: KeyframeEffectOptions | number | undefined,\n  forGroup: boolean,\n) {\n  timingInput = numericTimingToObject(timingInput ?? { duration: 'auto' });\n  return makeTiming(timingInput, forGroup);\n}\n\nexport function numericTimingToObject(\n  timingInput: KeyframeEffectOptions | number,\n) {\n  if (typeof timingInput === 'number') {\n    if (isNaN(timingInput)) {\n      timingInput = { duration: 'auto' };\n    } else {\n      timingInput = { duration: timingInput };\n    }\n  }\n  return timingInput;\n}\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect\n * @example\n  const circleDownKeyframes = new KeyframeEffect(\n    circle, // element to animate\n    [\n      { transform: 'translateY(0)' }, // keyframe\n      { transform: 'translateY(100)' } // keyframe\n    ],\n    { duration: 3000, fill: 'forwards' } // keyframe options\n  );\n *\n */\nexport class KeyframeEffect implements IKeyframeEffect {\n  composite: CompositeOperation = 'replace';\n  iterationComposite: IterationCompositeOperation = 'replace';\n  // pseudoElement: string | null;\n  target: IElement | null;\n\n  animation: Animation | null;\n\n  timing: AnimationEffectTiming;\n  private computedTiming: ComputedEffectTiming;\n\n  normalizedKeyframes: ComputedKeyframe[];\n\n  private timeFraction: number | null;\n\n  private interpolations: (target: IElement, f: number) => void;\n\n  constructor(\n    target: IElement | null,\n    effectInput: Keyframe[] | PropertyIndexedKeyframes | null,\n    timingInput?: KeyframeEffectOptions | number,\n  ) {\n    this.target = target;\n    this.timing = normalizeTimingInput(timingInput, false);\n    this.timing.effect = this;\n    this.timing.activeDuration = calculateActiveDuration(this.timing);\n    this.timing.endTime = Math.max(\n      0,\n      this.timing.delay + this.timing.activeDuration + this.timing.endDelay,\n    );\n\n    this.normalizedKeyframes = normalizeKeyframes(effectInput, this.timing);\n    this.interpolations = convertEffectInput(\n      this.normalizedKeyframes,\n      this.timing,\n      this.target,\n    );\n\n    // 不支持 proxy 时降级成 this.timing\n    const { Proxy } = runtime.globalThis;\n    this.computedTiming = Proxy\n      ? new Proxy<AnimationEffectTiming>(this.timing, {\n          get: (target, prop) => {\n            if (prop === 'duration') {\n              return target.duration === 'auto' ? 0 : target.duration;\n            }\n            if (prop === 'fill') {\n              return target.fill === 'auto' ? 'none' : target.fill;\n            }\n            if (prop === 'localTime') {\n              return (this.animation && this.animation.currentTime) || null;\n            }\n            if (prop === 'currentIteration') {\n              if (!this.animation || this.animation.playState !== 'running') {\n                return null;\n              }\n              return target.currentIteration || 0;\n            }\n            if (prop === 'progress') {\n              if (!this.animation || this.animation.playState !== 'running') {\n                return null;\n              }\n              return target.progress || 0;\n            }\n            return target[prop];\n          },\n          set: () => {\n            return true;\n          },\n        })\n      : this.timing;\n  }\n\n  applyInterpolations() {\n    this.interpolations(\n      this.target as unknown as IElement,\n      Number(this.timeFraction),\n    );\n  }\n\n  update(localTime: number | null): boolean {\n    if (localTime === null) {\n      return false;\n    }\n    this.timeFraction = calculateIterationProgress(\n      this.timing.activeDuration,\n      localTime,\n      this.timing,\n    );\n    return this.timeFraction !== null;\n  }\n\n  getKeyframes(): ComputedKeyframe[] {\n    return this.normalizedKeyframes;\n  }\n  setKeyframes(keyframes: Keyframe[] | PropertyIndexedKeyframes | null): void {\n    this.normalizedKeyframes = normalizeKeyframes(keyframes);\n  }\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getComputedTiming\n   */\n  getComputedTiming(): ComputedEffectTiming {\n    return this.computedTiming;\n  }\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getTiming\n   */\n  getTiming(): EffectTiming {\n    return this.timing;\n  }\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/updateTiming\n   */\n  updateTiming(timing?: OptionalEffectTiming): void {\n    Object.keys(timing || {}).forEach((name) => {\n      this.timing[name] = timing[name];\n    });\n  }\n}\n","import type {\n  IDocument,\n  IAnimationTimeline,\n  IElement,\n  IAnimation,\n} from '@antv/g-lite';\nimport { Animation } from './Animation';\nimport { KeyframeEffect } from './KeyframeEffect';\n\nexport function compareAnimations(\n  leftAnimation: IAnimation,\n  rightAnimation: IAnimation,\n) {\n  return Number(leftAnimation.id) - Number(rightAnimation.id);\n}\n\n/**\n * @see https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/web-animations-js/index.d.ts\n */\nexport class AnimationTimeline implements IAnimationTimeline {\n  /**\n   * all active animations\n   */\n  animations: Animation[] = [];\n\n  private ticking = false;\n\n  private timelineTicking = false;\n\n  private hasRestartedThisFrame = false;\n\n  animationsWithPromises: Animation[] = [];\n\n  private inTick = false;\n\n  private pendingEffects: (KeyframeEffect | null)[] = [];\n\n  currentTime: number | null = null;\n\n  private rafId = 0;\n  private rafCallbacks: [number, (x: number) => void][] = [];\n\n  private frameId: number;\n\n  constructor(private document: IDocument) {}\n\n  getAnimations() {\n    this.discardAnimations();\n    return this.animations.slice();\n  }\n\n  isTicking() {\n    return this.inTick;\n  }\n\n  play(\n    target: IElement,\n    keyframes: Keyframe[] | PropertyIndexedKeyframes | null,\n    options?: number | KeyframeAnimationOptions,\n  ): Animation {\n    const effect = new KeyframeEffect(target, keyframes, options);\n    const animation = new Animation(effect, this);\n    this.animations.push(animation);\n    this.restartWebAnimationsNextTick();\n    animation.updatePromises();\n    animation.play();\n    animation.updatePromises();\n    return animation;\n  }\n\n  // RAF is supposed to be the last script to occur before frame rendering but not\n  // all browsers behave like this. This function is for synchonously updating an\n  // animation's effects whenever its state is mutated by script to work around\n  // incorrect script execution ordering by the browser.\n  applyDirtiedAnimation(animation: Animation) {\n    if (this.inTick) {\n      return;\n    }\n    // update active animations in displayobject\n    animation.markTarget();\n    const animations = animation.targetAnimations();\n    animations.sort(compareAnimations);\n\n    // clear inactive animations\n    const inactiveAnimations = this.tick(\n      Number(this.currentTime),\n      false,\n      animations.slice(),\n    )[1];\n    inactiveAnimations.forEach((animation) => {\n      const index = this.animations.indexOf(animation);\n      if (index !== -1) {\n        this.animations.splice(index, 1);\n      }\n    });\n    this.applyPendingEffects();\n  }\n\n  restart() {\n    if (!this.ticking) {\n      this.ticking = true;\n      this.requestAnimationFrame(() => {});\n      this.hasRestartedThisFrame = true;\n    }\n    return this.hasRestartedThisFrame;\n  }\n\n  destroy() {\n    this.document.defaultView.cancelAnimationFrame(this.frameId);\n  }\n\n  applyPendingEffects() {\n    this.pendingEffects.forEach((effect) => {\n      effect?.applyInterpolations();\n    });\n    this.pendingEffects = [];\n  }\n\n  private updateAnimationsPromises() {\n    this.animationsWithPromises = this.animationsWithPromises.filter(\n      (animation) => {\n        return animation.updatePromises();\n      },\n    );\n  }\n\n  private discardAnimations() {\n    this.updateAnimationsPromises();\n    this.animations = this.animations.filter((animation) => {\n      return (\n        animation.playState !== 'finished' && animation.playState !== 'idle'\n      );\n    });\n  }\n\n  private restartWebAnimationsNextTick() {\n    if (!this.timelineTicking) {\n      this.timelineTicking = true;\n      this.requestAnimationFrame(this.webAnimationsNextTick);\n    }\n  }\n\n  private webAnimationsNextTick = (t: number) => {\n    this.currentTime = t;\n    this.discardAnimations();\n    if (this.animations.length === 0) {\n      this.timelineTicking = false;\n    } else {\n      this.requestAnimationFrame(this.webAnimationsNextTick);\n    }\n  };\n\n  private processRafCallbacks = (t: number) => {\n    const processing = this.rafCallbacks;\n    this.rafCallbacks = [];\n    if (t < Number(this.currentTime)) t = Number(this.currentTime);\n    this.animations.sort(compareAnimations);\n    this.animations = this.tick(t, true, this.animations)[0];\n    processing.forEach((entry) => {\n      entry[1](t);\n    });\n    this.applyPendingEffects();\n  };\n\n  private rAF(f: (x: number) => void) {\n    const id = this.rafId++;\n    if (this.rafCallbacks.length === 0) {\n      this.frameId = this.document.defaultView.requestAnimationFrame(\n        this.processRafCallbacks,\n      );\n    }\n    this.rafCallbacks.push([id, f]);\n    return id;\n  }\n\n  private requestAnimationFrame(f: (ts: number) => void) {\n    return this.rAF((x: number) => {\n      this.updateAnimationsPromises();\n      f(x);\n      this.updateAnimationsPromises();\n    });\n  }\n\n  tick(t: number, isAnimationFrame: boolean, updatingAnimations: IAnimation[]) {\n    this.inTick = true;\n    this.hasRestartedThisFrame = false;\n\n    this.currentTime = t;\n    this.ticking = false;\n\n    const newPendingClears: (KeyframeEffect | null)[] = [];\n    const newPendingEffects: (KeyframeEffect | null)[] = [];\n    const activeAnimations: Animation[] = [];\n    const inactiveAnimations: Animation[] = [];\n\n    (updatingAnimations as unknown as Animation[]).forEach((animation) => {\n      animation.tick(t, isAnimationFrame);\n\n      if (!animation._inEffect) {\n        newPendingClears.push(animation.effect);\n        animation.unmarkTarget();\n      } else {\n        newPendingEffects.push(animation.effect);\n        animation.markTarget();\n      }\n\n      if (animation._needsTick) this.ticking = true;\n\n      const alive = animation._inEffect || animation._needsTick;\n      animation._inTimeline = alive;\n      if (alive) {\n        activeAnimations.push(animation);\n      } else {\n        inactiveAnimations.push(animation);\n      }\n    });\n\n    this.pendingEffects.push(...newPendingClears);\n    this.pendingEffects.push(...newPendingEffects);\n\n    if (this.ticking) this.requestAnimationFrame(() => {});\n\n    this.inTick = false;\n    return [activeAnimations, inactiveAnimations];\n  }\n}\n","import { runtime } from '@antv/g-lite';\nimport { AnimationTimeline } from './dom/AnimationTimeline';\nimport { parseEasingFunction } from './utils';\n\nexport * from './dom';\nexport { EasingFunctions } from './utils';\n\nruntime.EasingFunction = parseEasingFunction;\nruntime.AnimationTimeline = AnimationTimeline;\n","import {\n  Camera,\n  CameraType,\n  getAngle,\n  createVec3,\n  deg2rad,\n  runtime,\n} from '@antv/g-lite';\nimport { isString, isNumber } from '@antv/util';\nimport { mat4, quat, vec3 } from 'gl-matrix';\nimport type { vec2 } from 'gl-matrix';\nimport type { TypeEasingFunction, Landmark } from '@antv/g-lite';\n\n/**\n * Provides camera action & animation.\n */\nexport class AdvancedCamera extends Camera {\n  /**\n   * switch between multiple landmarks\n   */\n  private landmarks: Landmark[] = [];\n  private landmarkAnimationID: number | undefined;\n\n  /**\n   * Changes the azimuth and elevation with respect to the current camera axes\n   * @param {Number} azimuth the relative azimuth\n   * @param {Number} elevation the relative elevation\n   * @param {Number} roll the relative roll\n   */\n  rotate(azimuth: number, elevation: number, roll: number) {\n    this.relElevation = getAngle(elevation);\n    this.relAzimuth = getAngle(azimuth);\n    this.relRoll = getAngle(roll);\n    this.elevation += this.relElevation;\n    this.azimuth += this.relAzimuth;\n    this.roll += this.relRoll;\n\n    if (this.type === CameraType.EXPLORING) {\n      const rotX = quat.setAxisAngle(\n        quat.create(),\n        [1, 0, 0],\n        deg2rad((this.rotateWorld ? 1 : -1) * this.relElevation),\n      );\n      const rotY = quat.setAxisAngle(\n        quat.create(),\n        [0, 1, 0],\n        deg2rad((this.rotateWorld ? 1 : -1) * this.relAzimuth),\n      );\n\n      const rotZ = quat.setAxisAngle(\n        quat.create(),\n        [0, 0, 1],\n        deg2rad(this.relRoll),\n      );\n      let rotQ = quat.multiply(quat.create(), rotY, rotX);\n      rotQ = quat.multiply(quat.create(), rotQ, rotZ);\n      const rotMatrix = mat4.fromQuat(mat4.create(), rotQ);\n      mat4.translate(this.matrix, this.matrix, [0, 0, -this.distance]);\n      mat4.multiply(this.matrix, this.matrix, rotMatrix);\n      mat4.translate(this.matrix, this.matrix, [0, 0, this.distance]);\n    } else {\n      if (Math.abs(this.elevation) > 90) {\n        return this;\n      }\n      this.computeMatrix();\n    }\n\n    this._getAxes();\n    if (\n      this.type === CameraType.ORBITING ||\n      this.type === CameraType.EXPLORING\n    ) {\n      this._getPosition();\n    } else if (this.type === CameraType.TRACKING) {\n      this._getFocalPoint();\n    }\n\n    this._update();\n    return this;\n  }\n\n  /**\n   * 沿水平(right) & 垂直(up)平移相机\n   */\n  pan(tx: number, ty: number) {\n    const coords = createVec3(tx, ty, 0);\n    const pos = vec3.clone(this.position);\n\n    vec3.add(pos, pos, vec3.scale(vec3.create(), this.right, coords[0]));\n    vec3.add(pos, pos, vec3.scale(vec3.create(), this.up, coords[1]));\n\n    this._setPosition(pos);\n\n    this.triggerUpdate();\n\n    return this;\n  }\n\n  /**\n   * 沿 n 轴移动，当距离视点远时移动速度较快，离视点越近速度越慢\n   */\n  dolly(value: number) {\n    const n = this.forward;\n    const pos = vec3.clone(this.position);\n    let step = value * this.dollyingStep;\n    const updatedDistance = this.distance + value * this.dollyingStep;\n\n    // 限制视点距离范围\n    step =\n      Math.max(Math.min(updatedDistance, this.maxDistance), this.minDistance) -\n      this.distance;\n    pos[0] += step * n[0];\n    pos[1] += step * n[1];\n    pos[2] += step * n[2];\n\n    this._setPosition(pos);\n    if (\n      this.type === CameraType.ORBITING ||\n      this.type === CameraType.EXPLORING\n    ) {\n      // 重新计算视点距离\n      this._getDistance();\n    } else if (this.type === CameraType.TRACKING) {\n      // 保持视距，移动视点位置\n      vec3.add(this.focalPoint, pos, this.distanceVector);\n    }\n\n    this.triggerUpdate();\n    return this;\n  }\n\n  cancelLandmarkAnimation() {\n    if (this.landmarkAnimationID !== undefined) {\n      this.canvas.cancelAnimationFrame(this.landmarkAnimationID);\n    }\n  }\n\n  createLandmark(\n    name: string,\n    params: Partial<{\n      position: vec3 | vec2;\n      focalPoint: vec3 | vec2;\n      zoom: number;\n      roll: number;\n    }> = {},\n  ): Landmark {\n    const {\n      position = this.position,\n      focalPoint = this.focalPoint,\n      roll,\n      zoom,\n    } = params;\n\n    const camera = new runtime.CameraContribution() as AdvancedCamera;\n    camera.setType(this.type, undefined);\n    camera.setPosition(\n      position[0],\n      position[1] ?? this.position[1],\n      position[2] ?? this.position[2],\n    );\n    camera.setFocalPoint(\n      focalPoint[0],\n      focalPoint[1] ?? this.focalPoint[1],\n      focalPoint[2] ?? this.focalPoint[2],\n    );\n    camera.setRoll(roll ?? this.roll);\n    camera.setZoom(zoom ?? this.zoom);\n\n    const landmark: Landmark = {\n      name,\n      matrix: mat4.clone(camera.getWorldTransform()),\n      right: vec3.clone(camera.right),\n      up: vec3.clone(camera.up),\n      forward: vec3.clone(camera.forward),\n      position: vec3.clone(camera.getPosition()),\n      focalPoint: vec3.clone(camera.getFocalPoint()),\n      distanceVector: vec3.clone(camera.getDistanceVector()),\n      distance: camera.getDistance(),\n      dollyingStep: camera.getDollyingStep(),\n      azimuth: camera.getAzimuth(),\n      elevation: camera.getElevation(),\n      roll: camera.getRoll(),\n      relAzimuth: camera.relAzimuth,\n      relElevation: camera.relElevation,\n      relRoll: camera.relRoll,\n      zoom: camera.getZoom(),\n    };\n\n    this.landmarks.push(landmark);\n    return landmark;\n  }\n\n  gotoLandmark(\n    name: string | Landmark,\n    options:\n      | number\n      | Partial<{\n          easing: string;\n          easingFunction: TypeEasingFunction;\n          duration: number;\n          onframe: (t: number) => void;\n          onfinish: () => void;\n        }> = {},\n  ) {\n    const landmark = isString(name)\n      ? this.landmarks.find((l) => l.name === name)\n      : name;\n    if (landmark) {\n      const {\n        easing = 'linear',\n        duration = 100,\n        easingFunction = undefined,\n        onfinish = undefined,\n        onframe = undefined,\n      } = isNumber(options) ? { duration: options } : options;\n      const epsilon = 0.01;\n\n      // cancel ongoing animation\n      this.cancelLandmarkAnimation();\n\n      const destPosition = landmark.position;\n      const destFocalPoint = landmark.focalPoint;\n      const destZoom = landmark.zoom;\n      const destRoll = landmark.roll;\n\n      const easingFunc = easingFunction || runtime.EasingFunction(easing);\n\n      let timeStart: number | undefined;\n      const end = () => {\n        this.setFocalPoint(destFocalPoint);\n        this.setPosition(destPosition);\n        this.setRoll(destRoll);\n        this.setZoom(destZoom);\n        this.computeMatrix();\n        this.triggerUpdate();\n        onfinish?.();\n      };\n\n      if (duration === 0) return end();\n\n      const animate = (timestamp: number) => {\n        if (timeStart === undefined) {\n          timeStart = timestamp;\n        }\n        const elapsed = timestamp - timeStart;\n\n        if (elapsed >= duration) {\n          end();\n          return;\n        }\n        // use the same ease function in animation system\n        const t = easingFunc(elapsed / duration);\n\n        const interFocalPoint = vec3.create();\n        const interPosition = vec3.create();\n        let interZoom = 1;\n        let interRoll = 0;\n\n        vec3.lerp(interFocalPoint, this.focalPoint, destFocalPoint, t);\n        vec3.lerp(interPosition, this.position, destPosition, t);\n        interRoll = this.roll * (1 - t) + destRoll * t;\n        interZoom = this.zoom * (1 - t) + destZoom * t;\n\n        this.setFocalPoint(interFocalPoint);\n        this.setPosition(interPosition);\n        this.setRoll(interRoll);\n        this.setZoom(interZoom);\n\n        const dist =\n          vec3.dist(interFocalPoint, destFocalPoint) +\n          vec3.dist(interPosition, destPosition);\n        if (\n          dist <= epsilon &&\n          destZoom === undefined &&\n          destRoll === undefined\n        ) {\n          return end();\n        }\n\n        this.computeMatrix();\n        this.triggerUpdate();\n\n        if (elapsed < duration) {\n          onframe?.(t);\n          this.landmarkAnimationID = this.canvas.requestAnimationFrame(animate);\n        }\n      };\n\n      this.canvas.requestAnimationFrame(animate);\n    }\n  }\n\n  /**\n   * Sets the camera to a distance such that the area covered by the bounding box is viewed.\n   */\n  // shot(displayObject: DisplayObject) {\n  //   const aabb = displayObject.getBounds();\n\n  //   if (!AABB.isEmpty(aabb)) {\n  //     this.setElevation(0);\n  //     this.setAzimuth(0);\n  //     this.setRoll(0);\n\n  //     const { halfExtents, center } = aabb;\n  //     const maxDim = Math.max(halfExtents[0] * 2, halfExtents[1] * 2);\n\n  //     const cc = center.map((c: number) => Math.round(c * 1000) / 1000) as [number, number, number];\n\n  //     if (maxDim !== 0) {\n  //       const d = (1.5 * maxDim) / Math.tan(this.fov * DEG_2_RAD);\n  //       this.setPosition([cc[0], cc[1], cc[2] + d]);\n  //     }\n\n  //     this.setFocalPoint(cc);\n  //   }\n  // }\n}\n","import { runtime } from '@antv/g-lite';\nimport { AdvancedCamera } from './AdvancedCamera';\n\nexport { AdvancedCamera };\n\nruntime.CameraContribution = AdvancedCamera;\n","import type { Canvas, DataURLOptions } from '@antv/g-lite';\nimport { isBrowser, Rectangle, runtime } from '@antv/g-lite';\nimport html2canvas from 'html2canvas';\nimport type { CanvasOptions, DownloadImageOptions } from './types';\n\nexport interface ImageExporterOptions {\n  canvas: Canvas;\n  defaultFilename?: string;\n}\n\nexport class ImageExporter {\n  constructor(private options: ImageExporterOptions) {}\n\n  /**\n   * return a HTMLCanvasElement which you can call `toDataURL` later\n   *\n   * @example\n   * const canvas = await exporter.toCanvas();\n   * canvas.toDataURL(); // data:\n   */\n  async toCanvas(options: Partial<CanvasOptions> = {}) {\n    const { width, height, document: doc } = this.options.canvas.getConfig();\n    const dpr = this.options.canvas.getContextService().getDPR();\n\n    const {\n      clippingRegion = new Rectangle(0, 0, width, height),\n      beforeDrawImage,\n      afterDrawImage,\n      ignoreElements,\n      ...rest\n    } = options;\n    const dataURL = await this.toDataURL(rest);\n    const image = await this.getOrCreateImage(dataURL);\n\n    const { x: sx, y: sy, width: sWidth, height: sHeight } = clippingRegion;\n\n    // TODO: provide custom `createCanvas` method like `createImage`\n    const canvas = (doc || document).createElement('canvas');\n    canvas.width = sWidth * dpr;\n    canvas.height = sHeight * dpr;\n    const context = canvas.getContext('2d');\n\n    context.scale(dpr, dpr);\n\n    if (beforeDrawImage) {\n      beforeDrawImage(context);\n    }\n\n    const sourceImageMultipiler = image.width > width ? dpr : 1;\n    context.drawImage(\n      image,\n      sx * sourceImageMultipiler,\n      sy * sourceImageMultipiler,\n      sWidth * sourceImageMultipiler,\n      sHeight * sourceImageMultipiler,\n      0,\n      0,\n      sWidth,\n      sHeight,\n    );\n\n    if (!this.isSVG()) {\n      const $dom = this.options.canvas\n        .getContextService()\n        .getDomElement() as HTMLCanvasElement;\n      if ($dom && $dom.parentElement) {\n        // screenshot HTML\n        // @see https://html2canvas.hertzen.com/configuration\n        const canvas = await html2canvas($dom.parentElement, {\n          backgroundColor: null,\n          width,\n          height,\n          x: 0,\n          y: 0,\n          ignoreElements: (element: Element) => {\n            if (element === $dom) {\n              return true;\n            }\n            return ignoreElements && ignoreElements(element);\n          },\n        });\n\n        const image = await this.getOrCreateImage(canvas.toDataURL());\n        context.drawImage(\n          image,\n          sx * sourceImageMultipiler,\n          sy * sourceImageMultipiler,\n          sWidth * sourceImageMultipiler,\n          sHeight * sourceImageMultipiler,\n          0,\n          0,\n          sWidth,\n          sHeight,\n        );\n      }\n    }\n\n    if (afterDrawImage) {\n      afterDrawImage(context);\n    }\n\n    return canvas;\n  }\n\n  /**\n   * generate data url for the whole viewport\n   */\n  private async toDataURL(options: Partial<DataURLOptions> = {}) {\n    return this.options.canvas.getContextService().toDataURL(options);\n  }\n\n  private isSVG() {\n    return (\n      isBrowser &&\n      this.options.canvas.getContextService().getDomElement() instanceof\n        SVGSVGElement\n    );\n  }\n\n  async toSVGDataURL() {\n    if (this.isSVG()) {\n      return this.toDataURL();\n    }\n  }\n\n  downloadImage(options: DownloadImageOptions) {\n    const { document: doc } = this.options.canvas.getConfig();\n\n    // retrieve context at runtime\n    const { defaultFilename } = this.options;\n    const { dataURL, name = defaultFilename || 'g' } = options;\n    const mimeType = dataURL.substring(\n      dataURL.indexOf(':') + 1,\n      dataURL.indexOf(';'),\n    );\n    const suffix = mimeType.split('/')[1];\n\n    // g-svg only support .svg\n    const isSVG = dataURL.startsWith('data:image/svg');\n    const fileName = `${name}.${isSVG ? 'svg' : suffix}`;\n\n    const link: HTMLAnchorElement = (doc || document).createElement('a');\n\n    if (isSVG) {\n      link.addEventListener('click', () => {\n        link.download = fileName;\n        link.href = dataURL;\n      });\n    } else if (window.Blob && window.URL) {\n      const arr = dataURL.split(',');\n      let mime = '';\n      if (arr && arr.length > 0) {\n        const match = arr[0].match(/:(.*?);/);\n        // eslint-disable-next-line prefer-destructuring\n        if (match && match.length >= 2) mime = match[1];\n      }\n\n      const bstr = atob(arr[1]);\n      let n = bstr.length;\n      const u8arr = new Uint8Array(n);\n\n      while (n--) {\n        u8arr[n] = bstr.charCodeAt(n);\n      }\n\n      const blobObj = new Blob([u8arr], { type: mime });\n\n      // account for IE\n      // @see https://stackoverflow.com/a/41434373\n      if (runtime.globalThis.navigator.msSaveBlob) {\n        runtime.globalThis.navigator.msSaveBlob(blobObj, fileName);\n      } else {\n        link.addEventListener('click', () => {\n          link.download = fileName;\n          link.href = window.URL.createObjectURL(blobObj);\n        });\n      }\n    }\n\n    // trigger click\n    if (link.click) {\n      link.click();\n    } else {\n      const e = (doc || document).createEvent('MouseEvents');\n      e.initEvent('click', false, false);\n      link.dispatchEvent(e);\n    }\n  }\n\n  private getOrCreateImage(src: string): Promise<HTMLImageElement> {\n    return new Promise((resolve, reject) => {\n      // @see https://github.com/antvis/g/issues/938\n      const image = this.options.canvas.getConfig().createImage();\n\n      if (image) {\n        image.onload = () => {\n          resolve(image);\n        };\n        image.onerror = (ev) => {\n          reject(ev);\n        };\n        image.crossOrigin = 'Anonymous';\n        image.src = src;\n      }\n    });\n  }\n}\n","/**\n * 计算贴图单元大小\n *\n * @param size 元素大小\n * @param padding 圆点间隔\n * @param isStagger 是否交错\n * @reutrn 返回贴图单元大小\n */\nexport function getUnitPatternSize(\n  size: number,\n  padding: number,\n  isStagger: boolean,\n): number {\n  // 如果交错, unitSize 放大两倍\n  const unitSize = size + padding;\n  return isStagger ? unitSize * 2 : unitSize;\n}\n\n/**\n * 计算有交错情况的元素坐标\n *\n * @param unitSize 贴图单元大小\n * @param isStagger 是否交错\n * @reutrn 元素中心坐标 x,y 数组集合\n */\nexport function getSymbolsPosition(\n  unitSize: number,\n  isStagger: boolean,\n): number[][] {\n  // 如果交错, 交错绘制 dot\n  const symbolsPos = isStagger\n    ? [\n        [unitSize * (1 / 4), unitSize * (1 / 4)],\n        [unitSize * (3 / 4), unitSize * (3 / 4)],\n      ]\n    : [[unitSize * (1 / 2), unitSize * (1 / 2)]];\n  return symbolsPos;\n}\n","import { Circle, Rect } from '@antv/g-lite';\nimport type { DotPatternCfg } from './interfaces';\nimport { getSymbolsPosition, getUnitPatternSize } from './util';\n\nexport const defaultDotPatternCfg = {\n  size: 6,\n  padding: 2,\n  backgroundColor: 'transparent',\n  opacity: 1,\n  fill: '#fff',\n  fillOpacity: 1,\n  stroke: 'transparent',\n  strokeOpacity: 1,\n  lineWidth: 0,\n  isStagger: true,\n};\n\nexport function dots(cfg?: DotPatternCfg): Rect {\n  const dotCfg = {\n    ...defaultDotPatternCfg,\n    ...cfg,\n  };\n\n  const {\n    size,\n    padding,\n    isStagger,\n    backgroundColor,\n    backgroundOpacity,\n    opacity,\n    fill,\n    fillOpacity,\n    lineWidth,\n    stroke,\n    strokeOpacity,\n  } = dotCfg;\n\n  // 计算 画布大小，dots的位置\n  const unitSize = getUnitPatternSize(size, padding, isStagger);\n  const dots = getSymbolsPosition(unitSize, isStagger);\n\n  const background = new Rect({\n    style: {\n      width: unitSize,\n      height: unitSize,\n      fill: backgroundColor,\n      opacity: 1,\n      fillOpacity: backgroundOpacity,\n    },\n  });\n\n  for (const [cx, cy] of dots) {\n    const circle = new Circle({\n      style: {\n        opacity,\n        fill,\n        fillOpacity,\n        cx,\n        cy,\n        r: size / 2,\n        lineWidth,\n        stroke,\n        strokeOpacity,\n      },\n    });\n    background.appendChild(circle);\n  }\n\n  return background;\n}\n","import { Rect, Path } from '@antv/g-lite';\nimport type { LinePatternCfg } from './interfaces';\n\n/**\n * linePattern 的 默认配置\n */\nexport const defaultLinePatternCfg = {\n  spacing: 5,\n  opacity: 1,\n  backgroundColor: 'transparent',\n  backgroundOpacity: 1,\n  strokeOpacity: 1,\n  stroke: '#fff',\n  lineWidth: 2,\n};\n\n/**\n * 创建 linePattern\n */\nexport function lines(cfg?: LinePatternCfg): Rect {\n  const lineCfg = {\n    ...defaultLinePatternCfg,\n    ...cfg,\n  };\n\n  const {\n    spacing,\n    lineWidth,\n    backgroundColor,\n    backgroundOpacity,\n    opacity,\n    stroke,\n    strokeOpacity,\n  } = lineCfg;\n\n  // 计算 pattern 画布的大小， path 所需的 d\n  const width = spacing + lineWidth || 1;\n  const height = spacing + lineWidth || 1;\n  const d = `\n            M 0 0 L ${width} 0\n            M 0 ${height} L ${width} ${height}\n            `;\n\n  const background = new Rect({\n    style: {\n      width,\n      height,\n      fill: backgroundColor,\n      opacity: 1,\n      fillOpacity: backgroundOpacity,\n    },\n  });\n\n  const path = new Path({\n    style: {\n      d,\n      opacity,\n      stroke,\n      strokeOpacity,\n      fillOpacity: 1,\n      lineWidth,\n    },\n  });\n\n  background.appendChild(path);\n\n  return background;\n}\n","import { Rect } from '@antv/g-lite';\nimport type { SquarePatternCfg } from './interfaces';\nimport { getSymbolsPosition, getUnitPatternSize } from './util';\n\n/**\n * squarePattern 的 默认配置\n */\nexport const defaultSquarePatternCfg = {\n  size: 6,\n  padding: 1,\n  isStagger: true,\n  backgroundColor: 'transparent',\n  opacity: 1,\n  fill: '#fff',\n  fillOpacity: 1,\n  stroke: 'transparent',\n  lineWidth: 0,\n};\n\n/**\n * 创建 squarePattern\n */\nexport function squares(cfg?: SquarePatternCfg): Rect {\n  const squareCfg = {\n    ...defaultSquarePatternCfg,\n    ...cfg,\n  };\n\n  const {\n    size,\n    padding,\n    isStagger,\n    backgroundColor,\n    backgroundOpacity,\n    opacity,\n    fill,\n    fillOpacity,\n    stroke,\n    strokeOpacity,\n    lineWidth,\n  } = squareCfg;\n\n  // 计算 画布大小，squares的位置\n  const unitSize = getUnitPatternSize(size, padding, isStagger);\n  const squares = getSymbolsPosition(unitSize, isStagger); // 计算方法与 dots 一样\n\n  const background = new Rect({\n    style: {\n      width: unitSize,\n      height: unitSize,\n      fill: backgroundColor,\n      opacity: 1,\n      fillOpacity: backgroundOpacity,\n    },\n  });\n\n  for (const [x, y] of squares) {\n    const square = new Rect({\n      style: {\n        opacity,\n        fill,\n        fillOpacity,\n        x: x - size / 2,\n        y: y - size / 2,\n        width: size,\n        height: size,\n        lineWidth,\n        stroke,\n        strokeOpacity,\n      },\n    });\n    background.appendChild(square);\n  }\n\n  return background;\n}\n","import type {\n  BaseStyleProps,\n  DisplayObject,\n  DisplayObjectConfig,\n  Line,\n  MutationEvent,\n  Polyline,\n} from '@antv/g-lite';\nimport { CustomElement, ElementEvent, Path, Shape } from '@antv/g-lite';\nimport { isNil } from '@antv/util';\nimport { vec3 } from 'gl-matrix';\n\ntype ArrowHead = boolean | DisplayObject;\ntype ArrowBody = Line | Path | Polyline;\ntype ArrowHeadType = 'default' | 'custom';\nexport interface ArrowStyleProps extends BaseStyleProps {\n  body?: ArrowBody;\n  startHead?: ArrowHead;\n  endHead?: ArrowHead;\n  /**\n   * offset along tangent for start head\n   */\n  startHeadOffset?: number;\n  /**\n   * offset along tangent for end head\n   */\n  endHeadOffset?: number;\n  stroke?: string;\n  lineWidth?: number;\n  opacity?: number;\n  strokeOpacity?: number;\n}\n\n/**\n * support 3 types of arrow line:\n * 1. Line\n * 2. Polyline\n * 3. Path\n *\n * support 2 types of arrow head:\n * 1. default(Path)\n * 2. custom\n */\nexport class Arrow extends CustomElement<ArrowStyleProps> {\n  static tag = 'arrow';\n\n  static PARSED_STYLE_LIST = new Set([\n    ...CustomElement.PARSED_STYLE_LIST,\n    'body',\n    'startHead',\n    'endHead',\n    'startHeadOffset',\n    'endHeadOffset',\n    'stroke',\n    'lineWidth',\n    'opacity',\n    'strokeOpacity',\n  ]);\n\n  private body: Line | Path | Polyline;\n  private startHead?: DisplayObject;\n  private endHead?: DisplayObject;\n  private startHeadPosition: vec3;\n  private startHeadRad: number;\n  private endHeadPosition: vec3;\n  private endHeadRad: number;\n\n  constructor(config: DisplayObjectConfig<ArrowStyleProps>) {\n    super({\n      ...config,\n      type: Arrow.tag,\n    });\n\n    const {\n      body,\n      startHead,\n      endHead,\n      startHeadOffset,\n      endHeadOffset,\n      ...rest\n    } = this.attributes;\n\n    if (!body) {\n      throw new Error(\"Arrow's body is required\");\n    }\n\n    // append arrow body\n    this.body = body;\n    this.appendChild(this.body);\n    this.handleBodyAttributeChanged(this.body);\n\n    if (startHead) {\n      this.appendArrowHead(this.getArrowHeadType(startHead), true);\n    }\n    if (endHead) {\n      this.appendArrowHead(this.getArrowHeadType(endHead), false);\n    }\n\n    this.applyArrowStyle(rest, [this.body, this.startHead, this.endHead]);\n  }\n\n  private handleBodyAttributeChanged(body: ArrowBody) {\n    body.addEventListener(ElementEvent.ATTR_MODIFIED, (e: MutationEvent) => {\n      const { attrName } = e;\n      if (attrName === 'x1' || attrName === 'y1') {\n        if (this.startHead) {\n          this.transformArrowHead(this.startHead, true);\n        }\n      } else if (attrName === 'x2' || attrName === 'y2') {\n        if (this.endHead) {\n          this.transformArrowHead(this.endHead, false);\n        }\n      }\n      // const { nodeName } = body;\n      // if (nodeName === Shape.LINE) {\n      //   body\n      // }\n    });\n  }\n\n  getBody() {\n    return this.body;\n  }\n\n  getStartHead() {\n    return this.startHead;\n  }\n\n  getEndHead() {\n    return this.endHead;\n  }\n\n  attributeChangedCallback<Key extends keyof ArrowStyleProps>(\n    name: Key,\n    oldValue: ArrowStyleProps[Key],\n    newValue: ArrowStyleProps[Key],\n  ) {\n    if (\n      name === 'opacity' ||\n      name === 'strokeOpacity' ||\n      name === 'stroke' ||\n      name === 'lineWidth' ||\n      name === 'increasedLineWidthForHitTesting'\n    ) {\n      this.applyArrowStyle({ [name]: newValue }, [\n        this.body,\n        this.startHead,\n        this.endHead,\n      ]);\n    } else if (name === 'startHead' || name === 'endHead') {\n      const isStart = name === 'startHead';\n      // delete existed arrow head first\n      this.destroyArrowHead(isStart);\n\n      if (newValue) {\n        const {\n          body,\n          startHead,\n          endHead,\n          startHeadOffset,\n          endHeadOffset,\n          ...rest\n        } = this.attributes;\n        // append new arrow head\n\n        this.appendArrowHead(\n          this.getArrowHeadType(newValue as ArrowHead),\n          isStart,\n        );\n        this.applyArrowStyle(rest, [isStart ? this.startHead : this.endHead]);\n      }\n    } else if (name === 'body') {\n      const {\n        body,\n        startHead,\n        endHead,\n        startHeadOffset,\n        endHeadOffset,\n        ...rest\n      } = this.attributes;\n      this.body.destroy();\n      // @ts-ignore\n      this.body = newValue;\n      this.appendChild(this.body);\n      this.applyArrowStyle(rest, [this.body]);\n    } else if (name === 'startHeadOffset') {\n      this.moveArrowHeadAlongTangent(newValue as number, true);\n    } else if (name === 'endHeadOffset') {\n      this.moveArrowHeadAlongTangent(newValue as number, false);\n    }\n  }\n\n  private getArrowHeadType(head: ArrowHead): ArrowHeadType {\n    if (typeof head === 'boolean') {\n      return 'default';\n    }\n    return 'custom';\n  }\n\n  private appendArrowHead(type: ArrowHeadType, isStart: boolean) {\n    let head: DisplayObject;\n    if (type === 'default') {\n      head = this.createDefaultArrowHead();\n    } else {\n      // @ts-ignore\n      head = isStart ? this.attributes.startHead : this.attributes.endHead;\n    }\n\n    // set position & rotation\n    this.transformArrowHead(head, isStart);\n\n    // heads should display on top of body\n    head.setAttribute('zIndex', 1);\n\n    if (isStart) {\n      this.startHead = head;\n    } else {\n      this.endHead = head;\n    }\n\n    this.appendChild(head);\n\n    const offset = isStart\n      ? this.attributes.startHeadOffset\n      : this.attributes.endHeadOffset;\n    if (offset) {\n      this.moveArrowHeadAlongTangent(offset, isStart);\n    }\n  }\n\n  /**\n   * transform arrow head according to arrow line\n   */\n  private transformArrowHead(head: DisplayObject, isStart: boolean) {\n    let position = vec3.create();\n    let rad = 0;\n    let x1 = 0;\n    let x2 = 0;\n    let y1 = 0;\n    let y2 = 0;\n\n    const bodyType = this.body && this.body.nodeName;\n\n    if (bodyType === Shape.LINE) {\n      const {\n        x1: _x1,\n        x2: _x2,\n        y1: _y1,\n        y2: _y2,\n      } = (this.body as Line).attributes;\n      x1 = isStart ? _x2 : _x1;\n      x2 = isStart ? _x1 : _x2;\n      y1 = isStart ? _y2 : _y1;\n      y2 = isStart ? _y1 : _y2;\n    } else if (bodyType === Shape.POLYLINE) {\n      const { points } = (this.body as Polyline).attributes;\n      const { length } = points;\n      x1 = isStart ? points[1][0] : points[length - 2][0];\n      y1 = isStart ? points[1][1] : points[length - 2][1];\n      x2 = isStart ? points[0][0] : points[length - 1][0];\n      y2 = isStart ? points[0][1] : points[length - 1][1];\n    } else if (bodyType === Shape.PATH) {\n      const [p1, p2] = this.getTangent(this.body as Path, isStart);\n      x1 = p1[0];\n      y1 = p1[1];\n      x2 = p2[0];\n      y2 = p2[1];\n    }\n\n    const x = x1 - x2;\n    const y = y1 - y2;\n    rad = Math.atan2(y, x);\n    position = vec3.fromValues(x2, y2, 0);\n\n    if (isStart) {\n      this.startHeadPosition = position;\n      this.startHeadRad = rad;\n    } else {\n      this.endHeadPosition = position;\n      this.endHeadRad = rad;\n    }\n\n    head.setLocalPosition(position);\n    head.setLocalEulerAngles(\n      (rad * 180) / Math.PI + head.getLocalEulerAngles(),\n    );\n  }\n\n  private moveArrowHeadAlongTangent(offset: number, isStart: boolean) {\n    const head = isStart ? this.startHead : this.endHead;\n    if (head) {\n      head.setLocalPosition(\n        vec3.sub(\n          vec3.create(),\n          isStart ? this.startHeadPosition : this.endHeadPosition,\n          vec3.fromValues(\n            Math.cos(isStart ? this.startHeadRad : this.endHeadRad) * offset,\n            Math.sin(isStart ? this.startHeadRad : this.endHeadRad) * offset,\n            0,\n          ),\n        ),\n      );\n    }\n\n    // cut body\n    if (this.body) {\n      // const bodyType = this.body && this.body.nodeName;\n      // if (bodyType === Shape.LINE) {\n      //   const {  } = this.body.style;\n      //   const { x1: _x1, x2: _x2, y1: _y1, y2: _y2 } = (this.body as Line).attributes;\n      //   x1 = isStart ? _x2 : _x1;\n      //   x2 = isStart ? _x1 : _x2;\n      //   y1 = isStart ? _y2 : _y1;\n      //   y2 = isStart ? _y1 : _y2;\n      // }\n    }\n  }\n\n  private destroyArrowHead(isStart: boolean) {\n    if (isStart && this.startHead) {\n      this.startHead.destroy();\n      this.startHead = undefined;\n    }\n    if (!isStart && this.endHead) {\n      this.endHead.destroy();\n      this.endHead = undefined;\n    }\n  }\n\n  private getTangent(path: Path, isStart: boolean): number[][] {\n    return isStart ? path.getStartTangent() : path.getEndTangent();\n  }\n\n  private createDefaultArrowHead() {\n    const { stroke, lineWidth } = this.attributes;\n    const { sin, cos, PI } = Math;\n    const width = 10 * cos(PI / 6);\n    return new Path({\n      style: {\n        // draw an angle '<'\n        d: `M${width / 2},${10 * sin(PI / 6)} L-${width / 2},0 L${width / 2},-${\n          10 * sin(PI / 6)\n        }`,\n        stroke,\n        lineWidth,\n        transformOrigin: 'center',\n      },\n    });\n  }\n\n  private applyArrowStyle(\n    attributes: ArrowStyleProps,\n    objects: (DisplayObject | undefined)[],\n  ) {\n    const {\n      opacity,\n      stroke,\n      strokeOpacity,\n      lineWidth,\n      increasedLineWidthForHitTesting,\n    } = attributes;\n    objects.forEach((shape) => {\n      if (shape) {\n        if (!isNil(opacity)) {\n          shape.style.opacity = opacity;\n        }\n\n        if (!isNil(stroke)) {\n          shape.style.stroke = stroke;\n        }\n\n        if (!isNil(strokeOpacity)) {\n          shape.style.strokeOpacity = strokeOpacity;\n        }\n\n        if (!isNil(lineWidth)) {\n          shape.style.lineWidth = lineWidth;\n        }\n\n        if (!isNil(increasedLineWidthForHitTesting)) {\n          shape.style.increasedLineWidthForHitTesting =\n            increasedLineWidthForHitTesting;\n        }\n      }\n    });\n  }\n}\n","import { Path, deg2rad, CSS, PropertySyntax } from '@antv/g-lite';\nimport { isNumberEqual, PathArray } from '@antv/util';\n\nconst { PI } = Math;\nconst PI2 = PI * 2;\nconst mathSin = Math.sin;\nconst mathCos = Math.cos;\nconst mathACos = Math.acos;\nconst mathATan2 = Math.atan2;\n// const mathAbs = Math.abs;\nconst mathSqrt = Math.sqrt;\nconst mathMax = Math.max;\nconst mathMin = Math.min;\nconst e = 1e-4;\n\n// 注册 css 属性\nconst SECTOR_CSS_PROPERTY = [\n  {\n    name: 'sr',\n    inherits: false,\n    interpolable: true,\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    name: 'sr0',\n    inherits: false,\n    interpolable: true,\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    name: 'startAngle',\n    inherits: false,\n    interpolable: true,\n    syntax: PropertySyntax.ANGLE,\n  },\n  {\n    name: 'endAngle',\n    inherits: false,\n    interpolable: true,\n    syntax: PropertySyntax.ANGLE,\n  },\n];\nSECTOR_CSS_PROPERTY.forEach((property) => {\n  CSS.registerProperty(property);\n});\n\nconst polarToCartesian = (\n  centerX: number,\n  centerY: number,\n  radius: number,\n  angleInRadian: number,\n) => {\n  return {\n    x: centerX + radius * Math.cos(angleInRadian),\n    y: centerY + radius * Math.sin(angleInRadian),\n  };\n};\n\nfunction intersect(\n  x0: number,\n  y0: number,\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n): [number, number] | undefined {\n  const dx10 = x1 - x0;\n  const dy10 = y1 - y0;\n  const dx32 = x3 - x2;\n  const dy32 = y3 - y2;\n  let t = dy32 * dx10 - dx32 * dy10;\n  if (t * t < e) {\n    return;\n  }\n  t = (dx32 * (y0 - y2) - dy32 * (x0 - x2)) / t;\n  return [x0 + t * dx10, y0 + t * dy10];\n}\n\n// Compute perpendicular offset line of length rc.\nfunction computeCornerTangents(\n  x0: number,\n  y0: number,\n  x1: number,\n  y1: number,\n  radius: number,\n  cr: number,\n  clockwise: boolean,\n) {\n  const x01 = x0 - x1;\n  const y01 = y0 - y1;\n  const lo = (clockwise ? cr : -cr) / mathSqrt(x01 * x01 + y01 * y01);\n  const ox = lo * y01;\n  const oy = -lo * x01;\n  const x11 = x0 + ox;\n  const y11 = y0 + oy;\n  const x10 = x1 + ox;\n  const y10 = y1 + oy;\n  const x00 = (x11 + x10) / 2;\n  const y00 = (y11 + y10) / 2;\n  const dx = x10 - x11;\n  const dy = y10 - y11;\n  const d2 = dx * dx + dy * dy;\n  const r = radius - cr;\n  const s = x11 * y10 - x10 * y11;\n  const d = (dy < 0 ? -1 : 1) * mathSqrt(mathMax(0, r * r * d2 - s * s));\n  let cx0 = (s * dy - dx * d) / d2;\n  let cy0 = (-s * dx - dy * d) / d2;\n  const cx1 = (s * dy + dx * d) / d2;\n  const cy1 = (-s * dx + dy * d) / d2;\n  const dx0 = cx0 - x00;\n  const dy0 = cy0 - y00;\n  const dx1 = cx1 - x00;\n  const dy1 = cy1 - y00;\n\n  // Pick the closer of the two intersection points\n  // TODO: Is there a faster way to determine which intersection to use?\n  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) {\n    cx0 = cx1;\n    cy0 = cy1;\n  }\n\n  return {\n    cx: cx0,\n    cy: cy0,\n    x0: -ox,\n    y0: -oy,\n    x1: cx0 * (radius / r - 1),\n    y1: cy0 * (radius / r - 1),\n  };\n}\n\nfunction computeArcSweep(startAngle: number, endAngle: number) {\n  endAngle = endAngle < 0 && startAngle >= 0 ? endAngle + PI2 : endAngle;\n  return endAngle - startAngle <= PI ? 0 : 1;\n}\n\nexport class Sector extends Path {\n  static PARSED_STYLE_LIST = new Set([\n    ...Path.PARSED_STYLE_LIST,\n    'x',\n    'y',\n    'sr',\n    'sr0',\n    'radius',\n    'startAngle',\n    'endAngle',\n  ]);\n\n  // parsedStyle: any;\n  constructor(config) {\n    super(config);\n    this.updatePath();\n  }\n  setAttribute(name, value, force?: boolean) {\n    super.setAttribute(name, value, force);\n    if (['startAngle', 'endAngle', 'sr', 'sr0', 'radius'].indexOf(name) > -1) {\n      this.updatePath();\n    }\n  }\n\n  private updatePath() {\n    // @ts-ignore\n    const { x, y, startAngle, endAngle, sr, sr0, radius } = this.parsedStyle;\n\n    const path = this.createPath(\n      x,\n      y,\n      startAngle ? deg2rad(startAngle) : 0,\n      endAngle ? deg2rad(endAngle) : Math.PI * 2,\n      sr || 0,\n      sr0 || 0,\n      radius || [0, 0, 0, 0],\n    );\n    super.setAttribute('d', path);\n  }\n\n  private createPath(\n    x: number,\n    y: number,\n    startAngle: number,\n    endAngle: number,\n    r: number,\n    r0: number,\n    borderRadius: number[],\n  ): PathArray | undefined {\n    if (r <= 0) {\n      return;\n    }\n    const start = polarToCartesian(x, y, r, startAngle);\n    const end = polarToCartesian(x, y, r, endAngle);\n\n    const innerStart = polarToCartesian(x, y, r0, startAngle);\n    const innerEnd = polarToCartesian(x, y, r0, endAngle);\n\n    // 整圆\n    if (isNumberEqual(endAngle - startAngle, Math.PI * 2)) {\n      // 整个圆是分割成两个圆\n      const middlePoint = polarToCartesian(x, y, r, startAngle + Math.PI);\n      const innerMiddlePoint = polarToCartesian(x, y, r0, startAngle + Math.PI);\n      const circlePathCommands = [\n        ['M', start.x, start.y],\n        ['A', r, r, 0, 1, 1, middlePoint.x, middlePoint.y],\n        ['A', r, r, 0, 1, 1, end.x, end.y],\n        ['M', innerStart.x, innerStart.y],\n      ];\n      if (r0) {\n        circlePathCommands.push([\n          'A',\n          r0,\n          r0,\n          0,\n          1,\n          0,\n          innerMiddlePoint.x,\n          innerMiddlePoint.y,\n        ]);\n        circlePathCommands.push(['A', r0, r0, 0, 1, 0, innerEnd.x, innerEnd.y]);\n      }\n\n      circlePathCommands.push(['M', start.x, start.y]);\n      circlePathCommands.push(['Z']);\n\n      return circlePathCommands as PathArray;\n    }\n\n    const angle = endAngle - startAngle;\n    const xrs = r * mathCos(startAngle);\n    const yrs = r * mathSin(startAngle);\n    const xire = r0 * mathCos(endAngle);\n    const yire = r0 * mathSin(endAngle);\n\n    const xre = r * mathCos(endAngle);\n    const yre = r * mathSin(endAngle);\n    const xirs = r0 * mathCos(startAngle);\n    const yirs = r0 * mathSin(startAngle);\n\n    // 顺时针反向，同 radius\n    const [outStartRadius, outEndRadius, innerEndRadius, innerStartRadius] =\n      borderRadius;\n\n    const halfRadius = (r - r0) / 2;\n    const outStartBorderRadius = mathMin(halfRadius, outStartRadius);\n    const outEndBorderRadius = mathMin(halfRadius, outEndRadius);\n    const innerEndBorderRadius = mathMin(halfRadius, innerEndRadius);\n    const innerStartBorderRadius = mathMin(halfRadius, innerStartRadius);\n\n    const outBorderRadiusMax = mathMax(\n      outStartBorderRadius,\n      outEndBorderRadius,\n    );\n    const innerBorderRadiusMax = mathMax(\n      innerEndBorderRadius,\n      innerStartBorderRadius,\n    );\n\n    let limitedOutBorderRadiusMax = outBorderRadiusMax;\n    let limitedInnerBorderRadiusMax = innerBorderRadiusMax;\n\n    // draw corner radius\n    if (outBorderRadiusMax > e || innerBorderRadiusMax > e) {\n      // restrict the max value of corner radius\n      if (angle < PI) {\n        const it = intersect(xrs, yrs, xirs, yirs, xre, yre, xire, yire);\n        if (it) {\n          const x0 = xrs - it[0];\n          const y0 = yrs - it[1];\n          const x1 = xre - it[0];\n          const y1 = yre - it[1];\n          const a =\n            1 /\n            mathSin(\n              mathACos(\n                (x0 * x1 + y0 * y1) /\n                  (mathSqrt(x0 * x0 + y0 * y0) * mathSqrt(x1 * x1 + y1 * y1)),\n              ) / 2,\n            );\n          const b = mathSqrt(it[0] * it[0] + it[1] * it[1]);\n          limitedOutBorderRadiusMax = mathMin(\n            outBorderRadiusMax,\n            (r - b) / (a + 1),\n          );\n          limitedInnerBorderRadiusMax = mathMin(\n            innerBorderRadiusMax,\n            (r0 - b) / (a - 1),\n          );\n        }\n      }\n    }\n    const arcSweep = computeArcSweep(startAngle, endAngle);\n    const clockwise = true;\n    const sectorPathCommands: PathArray = [] as unknown as PathArray;\n\n    if (limitedOutBorderRadiusMax > e) {\n      const crStart = mathMin(outStartRadius, limitedOutBorderRadiusMax);\n      const crEnd = mathMin(outEndRadius, limitedOutBorderRadiusMax);\n      const ct0 = computeCornerTangents(\n        xirs,\n        yirs,\n        xrs,\n        yrs,\n        r,\n        crStart,\n        clockwise,\n      );\n      const ct1 = computeCornerTangents(\n        xre,\n        yre,\n        xire,\n        yire,\n        r,\n        crEnd,\n        clockwise,\n      );\n\n      sectorPathCommands.push(['M', x + ct0.cx + ct0.x0, y + ct0.cy + ct0.y0]);\n\n      // Have the corners merged?\n      if (limitedOutBorderRadiusMax < outBorderRadiusMax && crStart === crEnd) {\n        const outStartBorderRadiusStartAngle = mathATan2(ct0.y0, ct0.x0);\n        const outStartBorderRadiusEndAngle = mathATan2(ct1.y0, ct1.x0);\n        sectorPathCommands.push([\n          'A',\n          limitedOutBorderRadiusMax,\n          limitedOutBorderRadiusMax,\n          0,\n          computeArcSweep(\n            outStartBorderRadiusStartAngle,\n            outStartBorderRadiusEndAngle,\n          ),\n          1,\n          x + ct1.cx + ct1.x0,\n          y + ct1.cy + ct1.y0,\n        ]);\n      } else {\n        // draw the two corners and the ring\n        if (crStart > 0) {\n          const outStartBorderRadiusStartAngle = mathATan2(ct0.y0, ct0.x0);\n          const outStartBorderRadiusEndAngle = mathATan2(ct0.y1, ct0.x1);\n          const outStartBorderRadiusEndPoint = polarToCartesian(\n            x,\n            y,\n            r,\n            outStartBorderRadiusEndAngle,\n          );\n          sectorPathCommands.push([\n            'A',\n            crStart,\n            crStart,\n            0,\n            computeArcSweep(\n              outStartBorderRadiusStartAngle,\n              outStartBorderRadiusEndAngle,\n            ),\n            1,\n            outStartBorderRadiusEndPoint.x,\n            outStartBorderRadiusEndPoint.y,\n          ]);\n        }\n\n        const outRadiusStartAngle = mathATan2(ct0.cy + ct0.y1, ct0.cx + ct0.x1);\n        const outRadiusEndAngle = mathATan2(ct1.cy + ct1.y1, ct1.cx + ct1.x1);\n        const outRadiusEndPoint = polarToCartesian(x, y, r, outRadiusEndAngle);\n        sectorPathCommands.push([\n          'A',\n          r,\n          r,\n          0,\n          computeArcSweep(outRadiusStartAngle, outRadiusEndAngle),\n          1,\n          outRadiusEndPoint.x,\n          outRadiusEndPoint.y,\n        ]);\n        if (crEnd > 0) {\n          const outEndBorderRadiusStartAngle = mathATan2(ct1.y1, ct1.x1);\n          const outEndBorderRadiusEndAngle = mathATan2(ct1.y0, ct1.x0);\n          sectorPathCommands.push([\n            'A',\n            crEnd,\n            crEnd,\n            0,\n            computeArcSweep(\n              outEndBorderRadiusStartAngle,\n              outEndBorderRadiusEndAngle,\n            ),\n            1,\n            x + ct1.cx + ct1.x0,\n            y + ct1.cy + ct1.y0,\n          ]);\n        }\n      }\n    } else {\n      sectorPathCommands.push(['M', start.x, start.y]);\n      sectorPathCommands.push(['A', r, r, 0, arcSweep, 1, end.x, end.y]);\n    }\n\n    // no inner ring, is a circular sector\n    if (r0 < e) {\n      sectorPathCommands.push(['L', innerEnd.x, innerEnd.y]);\n    }\n    // the inner ring has corners\n    else if (limitedInnerBorderRadiusMax > e) {\n      const crStart = mathMin(innerStartRadius, limitedInnerBorderRadiusMax);\n      const crEnd = mathMin(innerEndRadius, limitedInnerBorderRadiusMax);\n      const ct0 = computeCornerTangents(\n        xire,\n        yire,\n        0,\n        0,\n        r0 - r,\n        crEnd,\n        clockwise,\n      );\n      const ct1 = computeCornerTangents(\n        0,\n        0,\n        xirs,\n        yirs,\n        r0 - r,\n        crStart,\n        clockwise,\n      );\n\n      sectorPathCommands.push(['L', x + ct0.cx + ct0.x0, y + ct0.cy + ct0.y0]);\n\n      // Have the corners merged?\n      if (\n        limitedInnerBorderRadiusMax < innerBorderRadiusMax &&\n        crStart === crEnd\n      ) {\n        const innerStartBorderRadiusStartAngle = mathATan2(ct0.y0, ct0.x0);\n        const innerStartBorderRadiusEndAngle = mathATan2(ct1.y0, ct1.x0);\n        const innerStartBorderRadiusEndPoint = polarToCartesian(\n          x,\n          y,\n          r0,\n          innerStartBorderRadiusEndAngle,\n        );\n        sectorPathCommands.push([\n          'A',\n          limitedOutBorderRadiusMax,\n          limitedOutBorderRadiusMax,\n          0,\n          computeArcSweep(\n            innerStartBorderRadiusStartAngle,\n            innerStartBorderRadiusEndAngle,\n          ),\n          1,\n          innerStartBorderRadiusEndPoint.x,\n          innerStartBorderRadiusEndPoint.y,\n        ]);\n      }\n      // draw the two corners and the ring\n      else {\n        if (crEnd > 0) {\n          const innerStartBorderRadiusStartAngle = mathATan2(ct0.y0, ct0.x0);\n          const innerStartBorderRadiusEndAngle = mathATan2(ct0.y1, ct0.x1);\n          const innerStartBorderRadiusEndPoint = polarToCartesian(\n            x,\n            y,\n            r0 - r,\n            innerStartBorderRadiusEndAngle,\n          );\n          sectorPathCommands.push([\n            'A',\n            crEnd,\n            crEnd,\n            0,\n            computeArcSweep(\n              innerStartBorderRadiusStartAngle,\n              innerStartBorderRadiusEndAngle,\n            ),\n            1,\n            innerStartBorderRadiusEndPoint.x,\n            innerStartBorderRadiusEndPoint.y,\n          ]);\n        }\n        const innerRadiusStartAngle = mathATan2(\n          ct0.cy + ct0.y1,\n          ct0.cx + ct0.x1,\n        );\n        const innerRadiusEndAngle = mathATan2(ct1.cy + ct1.y1, ct1.cx + ct1.x1);\n        const innerRadiusEndPoint = polarToCartesian(\n          x,\n          y,\n          r0,\n          innerRadiusEndAngle,\n        );\n        sectorPathCommands.push([\n          'A',\n          r0,\n          r0,\n          0,\n          computeArcSweep(innerRadiusEndAngle, innerRadiusStartAngle),\n          0,\n          innerRadiusEndPoint.x,\n          innerRadiusEndPoint.y,\n        ]);\n        sectorPathCommands.push([\n          'L',\n          innerRadiusEndPoint.x,\n          innerRadiusEndPoint.y,\n        ]);\n        if (crStart > 0) {\n          const innerEndBorderRadiusStartAngle = mathATan2(ct1.y1, ct1.x1);\n          const innerEndBorderRadiusEndAngle = mathATan2(ct1.y0, ct1.x0);\n          sectorPathCommands.push([\n            'A',\n            crStart,\n            crStart,\n            0,\n            computeArcSweep(\n              innerEndBorderRadiusStartAngle,\n              innerEndBorderRadiusEndAngle,\n            ),\n            1,\n            x + ct1.cx + ct1.x0,\n            y + ct1.cy + ct1.y0,\n          ]);\n        }\n      }\n    }\n    // the inner ring is just a circular arc\n    else {\n      sectorPathCommands.push(['L', innerEnd.x, innerEnd.y]);\n      sectorPathCommands.push([\n        'A',\n        r0,\n        r0,\n        0,\n        arcSweep,\n        0,\n        innerStart.x,\n        innerStart.y,\n      ]);\n    }\n    sectorPathCommands.push(['Z']);\n\n    return sectorPathCommands;\n  }\n}\n"],"names":["AnimationEvent","_FederatedEvent","manager","target","currentTime","timelineTime","_this","_classCallCheck","_callSuper","type","bubbles","currentTarget","defaultPrevented","eventPhase","AT_TARGET","timeStamp","Date","now","_inherits","_createClass","FederatedEvent","sequenceNumber","Animation","effect","timeline","_this$effect","currentTimePending","_idle","_paused","_finishedFlag","_currentTime","_playbackRate","_inTimeline","animation","id","concat","_inEffect","update","_totalDuration","Number","getComputedTiming","endTime","_holdTime","oldPlayState","updatePromises","key","get","_startTime","playbackRate","_isFinished","readyPromise","animationsWithPromises","indexOf","push","Promise","resolve","reject","resolveReadyPromise","rejectReadyPromise","Error","pending","_this2","finishedPromise","resolveFinishedPromise","rejectFinishedPromise","playState","set","newTime","isNaN","restart","_this$timeline","tickCurrentTime","applyDirtiedAnimation","value","oldCurrentTime","startTime","ensureAlive","_this$effect$target","destroyed","undefined","newPlayState","play","rewind","animations","pause","finish","cancel","_this3","oncancel","event","setTimeout","reverse","updatePlaybackRate","targetAnimations","_this$effect2","getAnimations","markTarget","unmarkTarget","index","splice","tick","isAnimationFrame","fireEvents","Infinity","persist","ERROR_MSG_METHOD_NOT_IMPLEMENTED","addEventListener","listener","options","removeEventListener","dispatchEvent","commitStyles","_this$effect3","_this$effect4","ignoreLimit","baseTime","_this4","onfinish","onframe","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","Float32Array","A","aA1","aA2","B","C","calcBezier","aT","getSlope","binarySubdivide","aX","aA","aB","mX1","mX2","currentX","currentT","i","Math","abs","newtonRaphsonIterate","aGuessT","currentSlope","bezier","mY1","mY2","t","sampleValues","Array","getTForX","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","convertToDash","str","replace","letter","toLowerCase","charAt","substring","Quad","pow","Cubic","Quart","Quint","Expo","Sine","cos","PI","Circ","sqrt","Back","Bounce","pow2","b","Elastic","params","arguments","length","_params","_slicedToArray","_params$","amplitude","_params$2","period","a","clamp","p","sin","asin","Spring","duration","_params2","_params2$","mass","_params2$2","stiffness","_params2$3","damping","_params2$4","velocity","w0","zeta","wd","progress","exp","Steps","_ref","_ref2","_ref2$","steps","trunc","ceil","floor","Bezier","_params3","easein","EaseOut","ease","EaseInOut","EaseOutIn","EasingFunctions","stepStart","stepEnd","linear","out","spring","complexEasingSyntax","trim","getEasingFunction","x","Start","Middle","End","step","count","pos","stepSize","numberString","cubicBezierRe","RegExp","step1Re","step2Re","parseEasingFunction","normalizedEasing","cubicData","exec","apply","_toConsumableArray","slice","map","step1Data","step2Data","start","middle","end","calculateActiveDuration","timing","repeatedDuration","_timing$iterations","iterations","PhaseNone","PhaseBefore","PhaseAfter","PhaseActive","calculatePhase","activeDuration","localTime","min","delay","endDelay","calculateActiveTime","fillMode","phase","calculateOverallProgress","iterationDuration","activeTime","iterationStart","overallProgress","calculateSimpleIterationProgress","simpleIterationProgress","calculateCurrentIteration","calculateDirectedProgress","playbackDirection","currentIteration","currentDirection","d","calculateIterationProgress","fill","directedProgress","direction","easingFunction","convertEffectInput","keyframes","propertySpecificKeyframeGroups","makePropertySpecificKeyframeGroups","interpolations","makeInterpolations","fraction","filter","interpolation","applyFrom","applyTo","forEach","offsetFraction","startOffset","localDuration","endOffset","scaledLocalTime","setAttribute","property","isNotReservedWord","member","propertySpecificKeyframe","offset","computedOffset","easing","groupName","startIndex","endIndex","propertyInterpolation","sort","leftInterpolation","rightInterpolation","InterpolationFactory","from","to","convertToString","f","interpolated","interpolate","isNumber","left","right","metadata","propertyMetadataCache","syntax","propertyHandler","runtime","styleValueRegistry","getPropertySyntax","parser","usedLeft","usedRight","interpolationArgs","mixer","interp","bool","isArray","fromLength","toLength","max","r","AnimationEffectTiming","_easing","convertToArrayForm","effectInput","normalizedEffectInput","values","numKeyframes","keyframe","composite","normalizeKeyframes","originalKeyframe","memberValue","isFinite","everyFrameHasOffset","previousOffset","isNil","TypeError","spaceKeyframes","_keyframes$offset","_keyframes","_keyframes$0$offset","previousIndex","j","fills","split","directions","makeTiming","timingInput","forGroup","Object","keys","normalizeTimingInput","numericTimingToObject","KeyframeEffect","iterationComposite","normalizedKeyframes","Proxy","globalThis","computedTiming","prop","applyInterpolations","timeFraction","getKeyframes","setKeyframes","getTiming","updateTiming","name","compareAnimations","leftAnimation","rightAnimation","AnimationTimeline","document","ticking","timelineTicking","hasRestartedThisFrame","inTick","pendingEffects","rafId","rafCallbacks","webAnimationsNextTick","discardAnimations","requestAnimationFrame","processRafCallbacks","processing","entry","applyPendingEffects","isTicking","restartWebAnimationsNextTick","inactiveAnimations","destroy","defaultView","cancelAnimationFrame","frameId","updateAnimationsPromises","rAF","updatingAnimations","_this$pendingEffects","_this$pendingEffects2","newPendingClears","newPendingEffects","activeAnimations","_needsTick","alive","EasingFunction","AdvancedCamera","_Camera","_len","args","_key","landmarks","rotate","azimuth","elevation","roll","relElevation","getAngle","relAzimuth","relRoll","CameraType","EXPLORING","rotX","quat","setAxisAngle","create","deg2rad","rotateWorld","rotY","rotZ","rotQ","multiply","rotMatrix","mat4","fromQuat","translate","matrix","distance","computeMatrix","_getAxes","ORBITING","_getPosition","TRACKING","_getFocalPoint","_update","pan","tx","ty","coords","createVec3","vec3","clone","position","add","scale","up","_setPosition","triggerUpdate","dolly","n","forward","dollyingStep","updatedDistance","maxDistance","minDistance","_getDistance","focalPoint","distanceVector","cancelLandmarkAnimation","landmarkAnimationID","canvas","createLandmark","_position$","_position$2","_focalPoint$","_focalPoint$2","_params$position","_params$focalPoint","zoom","camera","CameraContribution","setType","setPosition","setFocalPoint","setRoll","setZoom","landmark","getWorldTransform","getPosition","getFocalPoint","getDistanceVector","getDistance","getDollyingStep","getAzimuth","getElevation","getRoll","getZoom","gotoLandmark","isString","find","l","_ref$easing","_ref$duration","_ref$easingFunction","_ref$onfinish","_ref$onframe","epsilon","destPosition","destFocalPoint","destZoom","destRoll","easingFunc","timeStart","animate","timestamp","elapsed","interFocalPoint","interPosition","interZoom","interRoll","lerp","Camera","ImageExporter","_toCanvas","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_this$options$canvas$","width","height","doc","dpr","_options$clippingRegi","clippingRegion","beforeDrawImage","afterDrawImage","_ignoreElements","rest","dataURL","image","sx","sy","sWidth","sHeight","context","sourceImageMultipiler","$dom","_canvas","_image","_args","wrap","_context","prev","next","getConfig","getContextService","getDPR","Rectangle","ignoreElements","_objectWithoutProperties","_excluded","toDataURL","sent","getOrCreateImage","y","createElement","getContext","drawImage","isSVG","getDomElement","parentElement","html2canvas","backgroundColor","element","abrupt","stop","toCanvas","_toDataURL","_callee2","_args2","_context2","isBrowser","SVGSVGElement","_toSVGDataURL","_callee3","_context3","toSVGDataURL","downloadImage","_this$options$canvas$2","defaultFilename","_options$name","mimeType","suffix","startsWith","fileName","link","download","href","window","Blob","URL","arr","mime","match","bstr","atob","u8arr","Uint8Array","charCodeAt","blobObj","navigator","msSaveBlob","createObjectURL","click","e","createEvent","initEvent","src","createImage","onload","onerror","ev","crossOrigin","getUnitPatternSize","size","padding","isStagger","unitSize","getSymbolsPosition","symbolsPos","defaultDotPatternCfg","opacity","fillOpacity","stroke","strokeOpacity","lineWidth","dots","cfg","dotCfg","_objectSpread","backgroundOpacity","background","Rect","style","_iterator","_createForOfIteratorHelper","_step","s","done","_step$value","cx","cy","circle","Circle","appendChild","err","defaultLinePatternCfg","spacing","lines","lineCfg","path","Path","defaultSquarePatternCfg","squares","squareCfg","square","Arrow","_CustomElement","config","tag","_this$attributes","attributes","body","startHead","endHead","startHeadOffset","endHeadOffset","handleBodyAttributeChanged","appendArrowHead","getArrowHeadType","applyArrowStyle","ElementEvent","ATTR_MODIFIED","attrName","transformArrowHead","getBody","getStartHead","getEndHead","attributeChangedCallback","oldValue","newValue","_defineProperty","isStart","destroyArrowHead","_this$attributes2","_excluded2","_this$attributes3","_excluded3","moveArrowHeadAlongTangent","head","createDefaultArrowHead","rad","x1","x2","y1","y2","bodyType","nodeName","Shape","LINE","_attributes","_x1","_x2","_y1","_y2","POLYLINE","points","PATH","_this$getTangent","getTangent","_this$getTangent2","p1","p2","atan2","fromValues","startHeadPosition","startHeadRad","endHeadPosition","endHeadRad","setLocalPosition","setLocalEulerAngles","getLocalEulerAngles","sub","getStartTangent","getEndTangent","_this$attributes4","transformOrigin","objects","increasedLineWidthForHitTesting","shape","CustomElement","PARSED_STYLE_LIST","Set","PI2","mathSin","mathCos","mathACos","acos","mathATan2","mathSqrt","mathMax","mathMin","SECTOR_CSS_PROPERTY","inherits","interpolable","PropertySyntax","LENGTH_PERCENTAGE","ANGLE","CSS","registerProperty","polarToCartesian","centerX","centerY","radius","angleInRadian","intersect","x0","y0","x3","y3","dx10","dy10","dx32","dy32","computeCornerTangents","cr","clockwise","x01","y01","lo","ox","oy","x11","y11","x10","y10","x00","y00","dx","dy","d2","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","computeArcSweep","startAngle","endAngle","Sector","_Path","updatePath","force","_superPropGet","_this$parsedStyle","parsedStyle","sr","sr0","createPath","r0","borderRadius","innerStart","innerEnd","isNumberEqual","middlePoint","innerMiddlePoint","circlePathCommands","angle","xrs","yrs","xire","yire","xre","yre","xirs","yirs","_borderRadius","outStartRadius","outEndRadius","innerEndRadius","innerStartRadius","halfRadius","outStartBorderRadius","outEndBorderRadius","innerEndBorderRadius","innerStartBorderRadius","outBorderRadiusMax","innerBorderRadiusMax","limitedOutBorderRadiusMax","limitedInnerBorderRadiusMax","it","arcSweep","sectorPathCommands","crStart","crEnd","ct0","ct1","outStartBorderRadiusStartAngle","outStartBorderRadiusEndAngle","outStartBorderRadiusEndPoint","outRadiusStartAngle","outRadiusEndAngle","outRadiusEndPoint","outEndBorderRadiusStartAngle","outEndBorderRadiusEndAngle","innerStartBorderRadiusStartAngle","innerStartBorderRadiusEndAngle","innerStartBorderRadiusEndPoint","innerRadiusStartAngle","innerRadiusEndAngle","innerRadiusEndPoint","innerEndBorderRadiusStartAngle","innerEndBorderRadiusEndAngle"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA;AACA;AACA;AACA;AACaA,IAAAA,cAAc,0BAAAC,eAAA,EAAA;EAIzB,SAAAD,cAAAA,CACEE,OAA4B,EAC5BC,MAAiB,EACVC,WAA0B,EAC1BC,YAAoB,EAC3B;AAAA,IAAA,IAAAC,KAAA,CAAA;AAAAC,IAAAA,eAAA,OAAAP,cAAA,CAAA,CAAA;AACAM,IAAAA,KAAA,GAAAE,UAAA,CAAAR,IAAAA,EAAAA,cAAA,GAAME,OAAO,CAAA,CAAA,CAAA;;AAEb;IAAAI,KAAA,CALOF,WAA0B,GAA1BA,WAA0B,CAAA;IAAAE,KAAA,CAC1BD,YAAoB,GAApBA,YAAoB,CAAA;IAK3BC,KAAA,CAAKH,MAAM,GAAGA,MAAM,CAAA;IACpBG,KAAA,CAAKG,IAAI,GAAG,QAAQ,CAAA;IACpBH,KAAA,CAAKI,OAAO,GAAG,KAAK,CAAA;AACpB;IACAJ,KAAA,CAAKK,aAAa,GAAGR,MAAM,CAAA;IAC3BG,KAAA,CAAKM,gBAAgB,GAAG,KAAK,CAAA;AAC7BN,IAAAA,KAAA,CAAKO,UAAU,GAAGP,KAAA,CAAKQ,SAAS,CAAA;AAChCR,IAAAA,KAAA,CAAKS,SAAS,GAAGC,IAAI,CAACC,GAAG,EAAE,CAAA;IAC3BX,KAAA,CAAKF,WAAW,GAAGA,WAAW,CAAA;IAC9BE,KAAA,CAAKD,YAAY,GAAGA,YAAY,CAAA;AAAC,IAAA,OAAAC,KAAA,CAAA;AACnC,GAAA;EAACY,SAAA,CAAAlB,cAAA,EAAAC,eAAA,CAAA,CAAA;EAAA,OAAAkB,YAAA,CAAAnB,cAAA,CAAA,CAAA;AAAA,CAAA,CAtBOoB,oBAAc;;ACHxB,IAAIC,cAAc,GAAG,CAAC,CAAA;;AAEtB;AACA;AACA;AACA,IAAaC,SAAS,gBAAA,YAAA;AAyOpB,EAAA,SAAAA,SAAYC,CAAAA,MAAsB,EAAEC,QAA2B,EAAE;AAAA,IAAA,IAAAC,YAAA,CAAA;AAAAlB,IAAAA,eAAA,OAAAe,SAAA,CAAA,CAAA;IAAA,IA9MzDI,CAAAA,kBAAkB,GAAG,KAAK,CAAA;AAElC;AACF;AACA;AACE;IAAA,IACQC,CAAAA,KAAK,GAAG,IAAI,CAAA;IAAA,IACZC,CAAAA,OAAO,GAAG,KAAK,CAAA;IAAA,IACfC,CAAAA,aAAa,GAAG,IAAI,CAAA;AAsG5B;AACF;AACA;IAFE,IAGQC,CAAAA,YAAY,GAAkB,CAAC,CAAA;IAAA,IAgD/BC,CAAAA,aAAa,GAAG,CAAC,CAAA;IAAA,IAwCzBC,CAAAA,WAAW,GAAG,IAAI,CAAA;IAMhB,IAAI,CAACT,MAAM,GAAGA,MAAM,CAAA;IACpBA,MAAM,CAACU,SAAS,GAAG,IAAI,CAAA;IACvB,IAAI,CAACT,QAAQ,GAAGA,QAAQ,CAAA;AACxB,IAAA,IAAI,CAACU,EAAE,GAAA,EAAA,CAAAC,MAAA,CAAMd,cAAc,EAAE,CAAE,CAAA;AAE/B,IAAA,IAAI,CAACe,SAAS,GAAG,CAAC,CAAC,IAAI,CAACb,MAAM,CAACc,MAAM,CAAC,CAAC,CAAC,CAAA;IACxC,IAAI,CAACC,cAAc,GAAGC,MAAM,EAAAd,YAAA,GAAC,IAAI,CAACF,MAAM,cAAAE,YAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAXA,YAAA,CAAae,iBAAiB,EAAE,CAACC,OAAO,CAAC,CAAA;IACtE,IAAI,CAACC,SAAS,GAAG,CAAC,CAAA;IAClB,IAAI,CAACd,OAAO,GAAG,KAAK,CAAA;IACpB,IAAI,CAACe,YAAY,GAAG,MAAM,CAAA;IAC1B,IAAI,CAACC,cAAc,EAAE,CAAA;AACvB,GAAA;;AAEA;AACF;AACA;AACA;EAHE,OAAAzB,YAAA,CAAAG,SAAA,EAAA,CAAA;IAAAuB,GAAA,EAAA,SAAA;IAAAC,GAAA;AAtPA;AACF;AACA;;AAGE;AACF;AACA;;AAGE;AACF;AACA;;AAGE;;AAEA;AACF;AACA;AACE,IAAA,SAAAA,MAAc;AACZ,MAAA,OACG,IAAI,CAACC,UAAU,KAAK,IAAI,IAAI,CAAC,IAAI,CAACnB,OAAO,IAAI,IAAI,CAACoB,YAAY,KAAK,CAAC,IACrE,IAAI,CAACtB,kBAAkB,CAAA;AAE3B,KAAA;AAAC,GAAA,EAAA;IAAAmB,GAAA,EAAA,WAAA;IAAAC,GAAA,EAUD,SAAAA,GAAAA,GAAoC;AAClC,MAAA,IAAI,IAAI,CAACnB,KAAK,EAAE,OAAO,MAAM,CAAA;AAC7B,MAAA,IAAI,IAAI,CAACsB,WAAW,EAAE,OAAO,UAAU,CAAA;AACvC,MAAA,IAAI,IAAI,CAACrB,OAAO,EAAE,OAAO,QAAQ,CAAA;AACjC,MAAA,OAAO,SAAS,CAAA;AAClB,KAAA;;AAEA;AACF;AACA;AAFE,GAAA,EAAA;IAAAiB,GAAA,EAAA,OAAA;IAAAC,GAAA;AAcA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE,IAAA,SAAAA,MAAY;AAAA,MAAA,IAAAxC,KAAA,GAAA,IAAA,CAAA;AACV,MAAA,IAAI,CAAC,IAAI,CAAC4C,YAAY,EAAE;AACtB,QAAA,IAAI,IAAI,CAAC1B,QAAQ,CAAC2B,sBAAsB,CAACC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;UAC7D,IAAI,CAAC5B,QAAQ,CAAC2B,sBAAsB,CAACE,IAAI,CAAC,IAAI,CAAC,CAAA;AACjD,SAAA;QACA,IAAI,CAACH,YAAY,GAAG,IAAII,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;UACnDlD,KAAI,CAACmD,mBAAmB,GAAG,YAAM;YAC/BF,OAAO,CAACjD,KAAI,CAAC,CAAA;WACd,CAAA;UACDA,KAAI,CAACoD,kBAAkB,GAAG,YAAM;AAC9BF,YAAAA,MAAM,CAAC,IAAIG,KAAK,EAAE,CAAC,CAAA;WACpB,CAAA;AACH,SAAC,CAAC,CAAA;AACF,QAAA,IAAI,CAAC,IAAI,CAACC,OAAO,EAAE;UACjB,IAAI,CAACH,mBAAmB,EAAE,CAAA;AAC5B,SAAA;AACF,OAAA;MACA,OAAO,IAAI,CAACP,YAAY,CAAA;AAC1B,KAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdE,GAAA,EAAA;IAAAL,GAAA,EAAA,UAAA;IAAAC,GAAA,EAeA,SAAAA,GAAAA,GAAe;AAAA,MAAA,IAAAe,MAAA,GAAA,IAAA,CAAA;AACb,MAAA,IAAI,CAAC,IAAI,CAACC,eAAe,EAAE;AACzB,QAAA,IAAI,IAAI,CAACtC,QAAQ,CAAC2B,sBAAsB,CAACC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;UAC7D,IAAI,CAAC5B,QAAQ,CAAC2B,sBAAsB,CAACE,IAAI,CAAC,IAAI,CAAC,CAAA;AACjD,SAAA;QACA,IAAI,CAACS,eAAe,GAAG,IAAIR,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;UACtDK,MAAI,CAACE,sBAAsB,GAAG,YAAM;YAClCR,OAAO,CAACM,MAAI,CAAC,CAAA;WACd,CAAA;UACDA,MAAI,CAACG,qBAAqB,GAAG,YAAM;AACjCR,YAAAA,MAAM,CAAC,IAAIG,KAAK,EAAE,CAAC,CAAA;WACpB,CAAA;AACH,SAAC,CAAC,CAAA;AACF,QAAA,IAAI,IAAI,CAACM,SAAS,KAAK,UAAU,EAAE;UACjC,IAAI,CAACF,sBAAsB,EAAE,CAAA;AAC/B,SAAA;AACF,OAAA;MACA,OAAO,IAAI,CAACD,eAAe,CAAA;AAC7B,KAAA;;AAEA;AACF;AACA;;AAGE;AACF;AACA;;AAGE;AACF;AACA;AAFE,GAAA,EAAA;IAAAjB,GAAA,EAAA,aAAA;IAAAC,GAAA,EASA,SAAAA,GAAAA,GAAiC;MAC/B,IAAI,CAACF,cAAc,EAAE,CAAA;AACrB,MAAA,OAAO,IAAI,CAACjB,KAAK,IAAI,IAAI,CAACD,kBAAkB,GAAG,IAAI,GAAG,IAAI,CAACI,YAAY,CAAA;KACxE;AAAAoC,IAAAA,GAAA,EACD,SAAAA,GAAgBC,CAAAA,OAAsB,EAAE;AACtCA,MAAAA,OAAO,GAAG5B,MAAM,CAAC4B,OAAO,CAAC,CAAA;AACzB,MAAA,IAAIC,KAAK,CAACD,OAAO,CAAC,EAAE,OAAA;AACpB,MAAA,IAAI,CAAC3C,QAAQ,CAAC6C,OAAO,EAAE,CAAA;MACvB,IAAI,CAAC,IAAI,CAACzC,OAAO,IAAI,IAAI,CAACmB,UAAU,KAAK,IAAI,EAAE;AAAA,QAAA,IAAAuB,cAAA,CAAA;QAC7C,IAAI,CAACvB,UAAU,GACbR,MAAM,EAAA+B,cAAA,GAAC,IAAI,CAAC9C,QAAQ,MAAA,IAAA,IAAA8C,cAAA,KAAbA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,cAAA,CAAelE,WAAW,CAAC,GAAG+D,OAAO,GAAG,IAAI,CAACnB,YAAY,CAAA;AACpE,OAAA;MACA,IAAI,CAACtB,kBAAkB,GAAG,KAAK,CAAA;AAC/B,MAAA,IAAI,IAAI,CAACI,YAAY,KAAKqC,OAAO,EAAE;AACjC,QAAA,OAAA;AACF,OAAA;MACA,IAAI,IAAI,CAACxC,KAAK,EAAE;QACd,IAAI,CAACA,KAAK,GAAG,KAAK,CAAA;QAClB,IAAI,CAACC,OAAO,GAAG,IAAI,CAAA;AACrB,OAAA;AACA,MAAA,IAAI,CAAC2C,eAAe,CAACJ,OAAO,EAAE,IAAI,CAAC,CAAA;AACnC,MAAA,IAAI,CAAC3C,QAAQ,CAACgD,qBAAqB,CAAC,IAAI,CAAC,CAAA;AAC3C,KAAA;;AAEA;AACF;AACA;AAFE,GAAA,EAAA;IAAA3B,GAAA,EAAA,WAAA;IAAAC,GAAA,EAIA,SAAAA,GAAAA,GAAgB;MACd,OAAO,IAAI,CAACC,UAAU,CAAA;KACvB;AAAAmB,IAAAA,GAAA,EACD,SAAAA,GAAcC,CAAAA,OAAsB,EAAE;MACpC,IAAIA,OAAO,KAAK,IAAI,EAAE;QACpB,IAAI,CAACvB,cAAc,EAAE,CAAA;AACrBuB,QAAAA,OAAO,GAAG5B,MAAM,CAAC4B,OAAO,CAAC,CAAA;AACzB,QAAA,IAAIC,KAAK,CAACD,OAAO,CAAC,EAAE,OAAA;AACpB,QAAA,IAAI,IAAI,CAACvC,OAAO,IAAI,IAAI,CAACD,KAAK,EAAE,OAAA;QAChC,IAAI,CAACoB,UAAU,GAAGoB,OAAO,CAAA;QACzB,IAAI,CAACI,eAAe,CAClB,CAAChC,MAAM,CAAC,IAAI,CAACf,QAAQ,CAACpB,WAAW,CAAC,GAAG,IAAI,CAAC2C,UAAU,IAClD,IAAI,CAACC,YACT,CAAC,CAAA;AACD,QAAA,IAAI,CAACxB,QAAQ,CAACgD,qBAAqB,CAAC,IAAI,CAAC,CAAA;QACzC,IAAI,CAAC5B,cAAc,EAAE,CAAA;AACvB,OAAA;AACF,KAAA;AAAC,GAAA,EAAA;IAAAC,GAAA,EAAA,cAAA;IAAAC,GAAA,EAGD,SAAAA,GAAAA,GAAmB;MACjB,OAAO,IAAI,CAACf,aAAa,CAAA;KAC1B;AAAAmC,IAAAA,GAAA,EACD,SAAAA,GAAiBO,CAAAA,KAAa,EAAE;AAC9B,MAAA,IAAIA,KAAK,KAAK,IAAI,CAAC1C,aAAa,EAAE;AAChC,QAAA,OAAA;AACF,OAAA;MAEA,IAAI,CAACa,cAAc,EAAE,CAAA;AACrB,MAAA,IAAM8B,cAAc,GAAG,IAAI,CAACtE,WAAW,CAAA;MACvC,IAAI,CAAC2B,aAAa,GAAG0C,KAAK,CAAA;MAC1B,IAAI,CAACE,SAAS,GAAG,IAAI,CAAA;MACrB,IAAI,IAAI,CAACV,SAAS,KAAK,QAAQ,IAAI,IAAI,CAACA,SAAS,KAAK,MAAM,EAAE;QAC5D,IAAI,CAACpC,aAAa,GAAG,KAAK,CAAA;QAC1B,IAAI,CAACF,KAAK,GAAG,KAAK,CAAA;QAClB,IAAI,CAACiD,WAAW,EAAE,CAAA;AAClB,QAAA,IAAI,CAACpD,QAAQ,CAACgD,qBAAqB,CAAC,IAAI,CAAC,CAAA;AAC3C,OAAA;MACA,IAAIE,cAAc,KAAK,IAAI,EAAE;QAC3B,IAAI,CAACtE,WAAW,GAAGsE,cAAc,CAAA;AACnC,OAAA;MACA,IAAI,CAAC9B,cAAc,EAAE,CAAA;AACvB,KAAA;AAAC,GAAA,EAAA;IAAAC,GAAA,EAAA,aAAA;IAAAC,GAAA,EAED,SAAAA,GAAAA,GAAkB;AAChB,MAAA,OACE,CAAC,IAAI,CAACnB,KAAK,KACT,IAAI,CAACI,aAAa,GAAG,CAAC,IACtBQ,MAAM,CAAC,IAAI,CAACT,YAAY,CAAC,IAAI,IAAI,CAACQ,cAAc,IAC/C,IAAI,CAACP,aAAa,GAAG,CAAC,IAAIQ,MAAM,CAAC,IAAI,CAACT,YAAY,CAAC,IAAI,CAAE,CAAC,CAAA;AAEjE,KAAA;AAAC,GAAA,EAAA;IAAAe,GAAA,EAAA,eAAA;IAAAC,GAAA,EAGD,SAAAA,GAAAA,GAAoB;MAClB,OAAO,IAAI,CAACR,cAAc,CAAA;AAC5B,KAAA;AAAC,GAAA,EAAA;IAAAO,GAAA,EAAA,YAAA;IAAAC,GAAA,EAID,SAAAA,GAAAA,GAAiB;AACf,MAAA,OAAO,IAAI,CAACc,OAAO,IAAI,IAAI,CAACK,SAAS,KAAK,SAAS,IAAI,CAAC,IAAI,CAACpC,aAAa,CAAA;AAC5E,KAAA;AAAC,GAAA,EAAA;IAAAgB,GAAA,EAAA,gBAAA;AAAA4B,IAAAA,KAAA,EAoBD,SAAA7B,cAAcA,GAAG;AAAA,MAAA,IAAAiC,mBAAA,CAAA;AACf,MAAA,IAAA,CAAAA,mBAAA,GAAI,IAAI,CAACtD,MAAM,CAACpB,MAAM,MAAA,IAAA,IAAA0E,mBAAA,KAAA,KAAA,CAAA,IAAlBA,mBAAA,CAAoBC,SAAS,EAAE;QACjC,IAAI,CAAC5B,YAAY,GAAG6B,SAAS,CAAA;QAC7B,IAAI,CAACjB,eAAe,GAAGiB,SAAS,CAAA;AAChC,QAAA,OAAO,KAAK,CAAA;AACd,OAAA;AAEA,MAAA,IAAQpC,YAAY,GAAK,IAAI,CAArBA,YAAY,CAAA;MACpB,IAAMqC,YAAY,GAAG,IAAI,CAACpB,OAAO,GAAG,SAAS,GAAG,IAAI,CAACK,SAAS,CAAA;AAC9D,MAAA,IAAI,IAAI,CAACf,YAAY,IAAI8B,YAAY,KAAKrC,YAAY,EAAE;QACtD,IAAIqC,YAAY,KAAK,MAAM,EAAE;UAC3B,IAAI,CAACtB,kBAAkB,EAAE,CAAA;UACzB,IAAI,CAACR,YAAY,GAAG6B,SAAS,CAAA;AAC/B,SAAC,MAAM,IAAIpC,YAAY,KAAK,SAAS,EAAE;UACrC,IAAI,CAACc,mBAAmB,EAAE,CAAA;AAC5B,SAAC,MAAM,IAAIuB,YAAY,KAAK,SAAS,EAAE;UACrC,IAAI,CAAC9B,YAAY,GAAG6B,SAAS,CAAA;AAC/B,SAAA;AACF,OAAA;AACA,MAAA,IAAI,IAAI,CAACjB,eAAe,IAAIkB,YAAY,KAAKrC,YAAY,EAAE;QACzD,IAAIqC,YAAY,KAAK,MAAM,EAAE;UAC3B,IAAI,CAAChB,qBAAqB,EAAE,CAAA;UAC5B,IAAI,CAACF,eAAe,GAAGiB,SAAS,CAAA;AAClC,SAAC,MAAM,IAAIC,YAAY,KAAK,UAAU,EAAE;UACtC,IAAI,CAACjB,sBAAsB,EAAE,CAAA;AAC/B,SAAC,MAAM,IAAIpB,YAAY,KAAK,UAAU,EAAE;UACtC,IAAI,CAACmB,eAAe,GAAGiB,SAAS,CAAA;AAClC,SAAA;AACF,OAAA;MAEA,IAAI,CAACpC,YAAY,GAAGqC,YAAY,CAAA;AAChC,MAAA,OAAO,IAAI,CAAC9B,YAAY,IAAI,IAAI,CAACY,eAAe,CAAA;AAClD,KAAA;AAAC,GAAA,EAAA;IAAAjB,GAAA,EAAA,MAAA;AAAA4B,IAAAA,KAAA,EAED,SAAAQ,IAAIA,GAAG;MACL,IAAI,CAACrC,cAAc,EAAE,CAAA;MACrB,IAAI,CAAChB,OAAO,GAAG,KAAK,CAAA;AACpB,MAAA,IAAI,IAAI,CAACqB,WAAW,IAAI,IAAI,CAACtB,KAAK,EAAE;QAClC,IAAI,CAACuD,MAAM,EAAE,CAAA;QACb,IAAI,CAACnC,UAAU,GAAG,IAAI,CAAA;AACxB,OAAA;MACA,IAAI,CAAClB,aAAa,GAAG,KAAK,CAAA;MAC1B,IAAI,CAACF,KAAK,GAAG,KAAK,CAAA;MAClB,IAAI,CAACiD,WAAW,EAAE,CAAA;AAClB,MAAA,IAAI,CAACpD,QAAQ,CAACgD,qBAAqB,CAAC,IAAI,CAAC,CAAA;AAEzC,MAAA,IAAI,IAAI,CAAChD,QAAQ,CAAC2D,UAAU,CAAC/B,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;QACjD,IAAI,CAAC5B,QAAQ,CAAC2D,UAAU,CAAC9B,IAAI,CAAC,IAAI,CAAC,CAAA;AACrC,OAAA;MAEA,IAAI,CAACT,cAAc,EAAE,CAAA;AACvB,KAAA;AAAC,GAAA,EAAA;IAAAC,GAAA,EAAA,OAAA;AAAA4B,IAAAA,KAAA,EAED,SAAAW,KAAKA,GAAG;MACN,IAAI,CAACxC,cAAc,EAAE,CAAA;MACrB,IAAI,IAAI,CAACxC,WAAW,EAAE;AACpB,QAAA,IAAI,CAACsC,SAAS,GAAG,IAAI,CAACtC,WAAW,CAAA;AACnC,OAAA;AAEA,MAAA,IAAI,CAAC,IAAI,CAAC6C,WAAW,IAAI,CAAC,IAAI,CAACrB,OAAO,IAAI,CAAC,IAAI,CAACD,KAAK,EAAE;QACrD,IAAI,CAACD,kBAAkB,GAAG,IAAI,CAAA;AAChC,OAAC,MAAM,IAAI,IAAI,CAACC,KAAK,EAAE;QACrB,IAAI,CAACuD,MAAM,EAAE,CAAA;QACb,IAAI,CAACvD,KAAK,GAAG,KAAK,CAAA;AACpB,OAAA;MACA,IAAI,CAACoB,UAAU,GAAG,IAAI,CAAA;MACtB,IAAI,CAACnB,OAAO,GAAG,IAAI,CAAA;MAEnB,IAAI,CAACgB,cAAc,EAAE,CAAA;AACvB,KAAA;AAAC,GAAA,EAAA;IAAAC,GAAA,EAAA,QAAA;AAAA4B,IAAAA,KAAA,EAED,SAAAY,MAAMA,GAAG;MACP,IAAI,CAACzC,cAAc,EAAE,CAAA;MACrB,IAAI,IAAI,CAACjB,KAAK,EAAE,OAAA;AAChB,MAAA,IAAI,CAACvB,WAAW,GAAG,IAAI,CAAC2B,aAAa,GAAG,CAAC,GAAG,IAAI,CAACO,cAAc,GAAG,CAAC,CAAA;MACnE,IAAI,CAACS,UAAU,GAAG,IAAI,CAACT,cAAc,GAAG,IAAI,CAAClC,WAAW,CAAA;MACxD,IAAI,CAACsB,kBAAkB,GAAG,KAAK,CAAA;AAC/B,MAAA,IAAI,CAACF,QAAQ,CAACgD,qBAAqB,CAAC,IAAI,CAAC,CAAA;MAEzC,IAAI,CAAC5B,cAAc,EAAE,CAAA;AACvB,KAAA;AAAC,GAAA,EAAA;IAAAC,GAAA,EAAA,QAAA;AAAA4B,IAAAA,KAAA,EAED,SAAAa,MAAMA,GAAG;AAAA,MAAA,IAAAC,MAAA,GAAA,IAAA,CAAA;MACP,IAAI,CAAC3C,cAAc,EAAE,CAAA;AACrB,MAAA,IAAI,CAAC,IAAI,CAACR,SAAS,EAAE,OAAA;MAErB,IAAI,CAACA,SAAS,GAAG,KAAK,CAAA;MACtB,IAAI,CAACT,KAAK,GAAG,IAAI,CAAA;MACjB,IAAI,CAACC,OAAO,GAAG,KAAK,CAAA;MACpB,IAAI,CAACC,aAAa,GAAG,IAAI,CAAA;MACzB,IAAI,CAACC,YAAY,GAAG,IAAI,CAAA;MACxB,IAAI,CAACiB,UAAU,GAAG,IAAI,CAAA;AACtB,MAAA,IAAI,CAACxB,MAAM,CAACc,MAAM,CAAC,IAAI,CAAC,CAAA;AACxB;AACA;AACA,MAAA,IAAI,CAACb,QAAQ,CAACgD,qBAAqB,CAAC,IAAI,CAAC,CAAA;MAEzC,IAAI,CAAC5B,cAAc,EAAE,CAAA;;AAErB;AACJ;AACA;AACA;AACA;AACI;AACA;AACA;AACA;;MAEA,IAAI,IAAI,CAAC4C,QAAQ,EAAE;AACjB,QAAA,IAAMC,KAAK,GAAG,IAAIzF,cAAc,CAC9B,IAAI,EACJ,IAAI,EACJ,IAAI,CAACI,WAAW,EAChB,IACF,CAA2B,CAAA;AAC3BsF,QAAAA,UAAU,CAAC,YAAM;AACfH,UAAAA,MAAI,CAACC,QAAQ,CAACC,KAAK,CAAC,CAAA;AACtB,SAAC,CAAC,CAAA;AACJ,OAAA;AACF,KAAA;AAAC,GAAA,EAAA;IAAA5C,GAAA,EAAA,SAAA;AAAA4B,IAAAA,KAAA,EAED,SAAAkB,OAAOA,GAAG;MACR,IAAI,CAAC/C,cAAc,EAAE,CAAA;AACrB,MAAA,IAAM8B,cAAc,GAAG,IAAI,CAACtE,WAAW,CAAA;AAEvC,MAAA,IAAI,CAAC4C,YAAY,IAAI,CAAC,CAAC,CAAA;MACvB,IAAI,CAACiC,IAAI,EAAE,CAAA;MAEX,IAAIP,cAAc,KAAK,IAAI,EAAE;QAC3B,IAAI,CAACtE,WAAW,GAAGsE,cAAc,CAAA;AACnC,OAAA;MACA,IAAI,CAAC9B,cAAc,EAAE,CAAA;AACvB,KAAA;;AAEA;AACF;AACA;AAFE,GAAA,EAAA;IAAAC,GAAA,EAAA,oBAAA;AAAA4B,IAAAA,KAAA,EAGA,SAAAmB,kBAAkBA,CAAC5C,YAAoB,EAAQ;MAC7C,IAAI,CAACA,YAAY,GAAGA,YAAY,CAAA;AAClC,KAAA;AAAC,GAAA,EAAA;IAAAH,GAAA,EAAA,kBAAA;AAAA4B,IAAAA,KAAA,EAED,SAAAoB,gBAAgBA,GAAG;AAAA,MAAA,IAAAC,aAAA,CAAA;AACjB,MAAA,IAAM3F,MAAM,GAAA,CAAA2F,aAAA,GAAG,IAAI,CAACvE,MAAM,MAAA,IAAA,IAAAuE,aAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAXA,aAAA,CAAa3F,MAAkC,CAAA;AAC9D,MAAA,OAAOA,MAAM,CAAC4F,aAAa,EAAE,CAAA;AAC/B,KAAA;AAAC,GAAA,EAAA;IAAAlD,GAAA,EAAA,YAAA;AAAA4B,IAAAA,KAAA,EACD,SAAAuB,UAAUA,GAAG;AACX,MAAA,IAAMb,UAAU,GAAG,IAAI,CAACU,gBAAgB,EAAE,CAAA;MAC1C,IAAIV,UAAU,CAAC/B,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;AACnC+B,QAAAA,UAAU,CAAC9B,IAAI,CAAC,IAAI,CAAC,CAAA;AACvB,OAAA;AACF,KAAA;AAAC,GAAA,EAAA;IAAAR,GAAA,EAAA,cAAA;AAAA4B,IAAAA,KAAA,EACD,SAAAwB,YAAYA,GAAG;AACb,MAAA,IAAMd,UAAU,GAAG,IAAI,CAACU,gBAAgB,EAAE,CAAA;AAC1C,MAAA,IAAMK,KAAK,GAAGf,UAAU,CAAC/B,OAAO,CAAC,IAAI,CAAC,CAAA;AACtC,MAAA,IAAI8C,KAAK,KAAK,CAAC,CAAC,EAAE;AAChBf,QAAAA,UAAU,CAACgB,MAAM,CAACD,KAAK,EAAE,CAAC,CAAC,CAAA;AAC7B,OAAA;AACF,KAAA;AAAC,GAAA,EAAA;IAAArD,GAAA,EAAA,MAAA;AAAA4B,IAAAA,KAAA,EAED,SAAA2B,IAAIA,CAAC/F,YAAoB,EAAEgG,gBAAyB,EAAE;MACpD,IAAI,CAAC,IAAI,CAAC1E,KAAK,IAAI,CAAC,IAAI,CAACC,OAAO,EAAE;AAChC,QAAA,IAAI,IAAI,CAACmB,UAAU,KAAK,IAAI,EAAE;AAC5B,UAAA,IAAIsD,gBAAgB,EAAE;YACpB,IAAI,CAAC1B,SAAS,GAAGtE,YAAY,GAAG,IAAI,CAACyB,YAAY,GAAG,IAAI,CAACkB,YAAY,CAAA;AACvE,WAAA;AACF,SAAC,MAAM,IAAI,CAAC,IAAI,CAACC,WAAW,EAAE;AAC5B,UAAA,IAAI,CAACsB,eAAe,CAClB,CAAClE,YAAY,GAAG,IAAI,CAAC0C,UAAU,IAAI,IAAI,CAACC,YAC1C,CAAC,CAAA;AACH,SAAA;AACF,OAAA;AAEA,MAAA,IAAIqD,gBAAgB,EAAE;QACpB,IAAI,CAAC3E,kBAAkB,GAAG,KAAK,CAAA;AAC/B,QAAA,IAAI,CAAC4E,UAAU,CAACjG,YAAY,CAAC,CAAA;AAC/B,OAAA;AACF,KAAA;AAAC,GAAA,EAAA;IAAAwC,GAAA,EAAA,QAAA;AAAA4B,IAAAA,KAAA,EAED,SAAQS,MAAMA,GAAG;AACf,MAAA,IAAI,IAAI,CAAClC,YAAY,IAAI,CAAC,EAAE;QAC1B,IAAI,CAAC5C,WAAW,GAAG,CAAC,CAAA;AACtB,OAAC,MAAM,IAAI,IAAI,CAACkC,cAAc,GAAGiE,QAAQ,EAAE;AACzC,QAAA,IAAI,CAACnG,WAAW,GAAG,IAAI,CAACkC,cAAc,CAAA;AACxC,OAAC,MAAM;AACL,QAAA,MAAM,IAAIqB,KAAK,CACb,0EACF,CAAC,CAAA;AACH,OAAA;AACF,KAAA;AAAC,GAAA,EAAA;IAAAd,GAAA,EAAA,SAAA;AAAA4B,IAAAA,KAAA,EAED,SAAA+B,OAAOA,GAAS;AACd,MAAA,MAAM,IAAI7C,KAAK,CAAC8C,sCAAgC,CAAC,CAAA;AACnD,KAAA;AAAC,GAAA,EAAA;IAAA5D,GAAA,EAAA,kBAAA;IAAA4B,KAAA,EAaD,SAAAiC,gBAAgBA,CAACjG,IAAS,EAAEkG,QAAa,EAAEC,OAAa,EAAQ;AAC9D,MAAA,MAAM,IAAIjD,KAAK,CAAC8C,sCAAgC,CAAC,CAAA;AACnD,KAAA;AAAC,GAAA,EAAA;IAAA5D,GAAA,EAAA,qBAAA;IAAA4B,KAAA,EAYD,SAAAoC,mBAAmBA,CAACpG,IAAS,EAAEkG,QAAa,EAAEC,OAAa,EAAQ;AACjE,MAAA,MAAM,IAAIjD,KAAK,CAAC8C,sCAAgC,CAAC,CAAA;AACnD,KAAA;AAAC,GAAA,EAAA;IAAA5D,GAAA,EAAA,eAAA;AAAA4B,IAAAA,KAAA,EAED,SAAAqC,aAAaA,CAACrB,KAAY,EAAW;AACnC,MAAA,MAAM,IAAI9B,KAAK,CAAC8C,sCAAgC,CAAC,CAAA;AACnD,KAAA;AAAC,GAAA,EAAA;IAAA5D,GAAA,EAAA,cAAA;IAAA4B,KAAA;AAED;IACA,SAAAsC,YAAYA,GAAS;AACnB,MAAA,MAAM,IAAIpD,KAAK,CAAC8C,sCAAgC,CAAC,CAAA;AACnD,KAAA;AAAC,GAAA,EAAA;IAAA5D,GAAA,EAAA,aAAA;AAAA4B,IAAAA,KAAA,EAED,SAAQG,WAAWA,GAAG;AACpB;AACA;AACA;MACA,IAAI,IAAI,CAAC5B,YAAY,GAAG,CAAC,IAAI,IAAI,CAAC5C,WAAW,KAAK,CAAC,EAAE;AAAA,QAAA,IAAA4G,aAAA,CAAA;AACnD,QAAA,IAAI,CAAC5E,SAAS,GAAG,CAAC,EAAA4E,CAAAA,aAAA,GAAC,IAAI,CAACzF,MAAM,MAAAyF,IAAAA,IAAAA,aAAA,eAAXA,aAAA,CAAa3E,MAAM,CAAC,CAAC,CAAC,CAAC,CAAA,CAAA;AAC5C,OAAC,MAAM;AAAA,QAAA,IAAA4E,aAAA,CAAA;QACL,IAAI,CAAC7E,SAAS,GAAG,CAAC,GAAA6E,aAAA,GAAC,IAAI,CAAC1F,MAAM,cAAA0F,aAAA,KAAA,KAAA,CAAA,IAAXA,aAAA,CAAa5E,MAAM,CAAC,IAAI,CAACjC,WAAW,CAAC,CAAA,CAAA;AAC1D,OAAA;AACA,MAAA,IAAI,CAAC,IAAI,CAAC4B,WAAW,KAAK,IAAI,CAACI,SAAS,IAAI,CAAC,IAAI,CAACP,aAAa,CAAC,EAAE;QAChE,IAAI,CAACG,WAAW,GAAG,IAAI,CAAA;QACvB,IAAI,CAACR,QAAQ,CAAC2D,UAAU,CAAC9B,IAAI,CAAC,IAAI,CAAC,CAAA;AACrC,OAAA;AACF,KAAA;AAAC,GAAA,EAAA;IAAAR,GAAA,EAAA,iBAAA;AAAA4B,IAAAA,KAAA,EAED,SAAQF,eAAeA,CAACJ,OAAe,EAAE+C,WAAqB,EAAE;AAC9D,MAAA,IAAI/C,OAAO,KAAK,IAAI,CAACrC,YAAY,EAAE;QACjC,IAAI,CAACA,YAAY,GAAGqC,OAAO,CAAA;AAC3B,QAAA,IAAI,IAAI,CAAClB,WAAW,IAAI,CAACiE,WAAW,EAAE;AACpC,UAAA,IAAI,CAACpF,YAAY,GAAG,IAAI,CAACC,aAAa,GAAG,CAAC,GAAG,IAAI,CAACO,cAAc,GAAG,CAAC,CAAA;AACtE,SAAA;QACA,IAAI,CAACsC,WAAW,EAAE,CAAA;AACpB,OAAA;AACF,KAAA;AAAC,GAAA,EAAA;IAAA/B,GAAA,EAAA,YAAA;AAAA4B,IAAAA,KAAA,EAED,SAAQ6B,UAAUA,CAACa,QAAgB,EAAE;AAAA,MAAA,IAAAC,MAAA,GAAA,IAAA,CAAA;MACnC,IAAI,IAAI,CAACnE,WAAW,EAAE;AACpB,QAAA,IAAI,CAAC,IAAI,CAACpB,aAAa,EAAE;UACvB,IAAI,IAAI,CAACwF,QAAQ,EAAE;AACjB,YAAA,IAAM5B,KAAK,GAAG,IAAIzF,cAAc,CAC9B,IAAI,EACJ,IAAI,EACJ,IAAI,CAACI,WAAW,EAChB+G,QACF,CAA2B,CAAA;AAC3BzB,YAAAA,UAAU,CAAC,YAAM;cACf,IAAI0B,MAAI,CAACC,QAAQ,EAAE;AACjBD,gBAAAA,MAAI,CAACC,QAAQ,CAAC5B,KAAK,CAAC,CAAA;AACtB,eAAA;AACF,aAAC,CAAC,CAAA;AACJ,WAAA;UACA,IAAI,CAAC5D,aAAa,GAAG,IAAI,CAAA;AAC3B,SAAA;AACF,OAAC,MAAM;QACL,IAAI,IAAI,CAACyF,OAAO,IAAI,IAAI,CAACrD,SAAS,KAAK,SAAS,EAAE;AAChD,UAAA,IAAMwB,MAAK,GAAG,IAAIzF,cAAc,CAC9B,IAAI,EACJ,IAAI,EACJ,IAAI,CAACI,WAAW,EAChB+G,QACF,CAA2B,CAAA;AAC3B,UAAA,IAAI,CAACG,OAAO,CAAC7B,MAAK,CAAC,CAAA;AACrB,SAAA;QACA,IAAI,CAAC5D,aAAa,GAAG,KAAK,CAAA;AAC5B,OAAA;AACF,KAAA;AAAC,GAAA,CAAA,CAAA,CAAA;AAAA,CAAA;;ACtiBH;AACA;AACA;AACA;AACA;;AAEA;AACO,IAAM0F,iBAAiB,GAAG,CAAC,CAAA;AAC3B,IAAMC,gBAAgB,GAAG,KAAK,CAAA;AAC9B,IAAMC,qBAAqB,GAAG,SAAS,CAAA;AACvC,IAAMC,0BAA0B,GAAG,EAAE,CAAA;AAErC,IAAMC,gBAAgB,GAAG,EAAE,CAAA;AAC3B,IAAMC,eAAe,GAAG,GAAG,IAAID,gBAAgB,GAAG,GAAG,CAAC,CAAA;AAEtD,IAAME,qBAAqB,GAAG,OAAOC,YAAY,KAAK,UAAU,CAAA;AAEhE,IAAMC,CAAC,GAAG,SAAJA,CAACA,CAAIC,GAAW,EAAEC,GAAW,EAAA;EAAA,OAAK,GAAG,GAAG,GAAG,GAAGA,GAAG,GAAG,GAAG,GAAGD,GAAG,CAAA;AAAA,CAAA,CAAA;AACnE,IAAME,CAAC,GAAG,SAAJA,CAACA,CAAIF,GAAW,EAAEC,GAAW,EAAA;AAAA,EAAA,OAAK,GAAG,GAAGA,GAAG,GAAG,GAAG,GAAGD,GAAG,CAAA;AAAA,CAAA,CAAA;AAC7D,IAAMG,CAAC,GAAG,SAAJA,CAACA,CAAIH,GAAW,EAAA;EAAA,OAAK,GAAG,GAAGA,GAAG,CAAA;AAAA,CAAA,CAAA;;AAE3C;AACO,IAAMI,UAAU,GAAG,SAAbA,UAAUA,CAAIC,EAAU,EAAEL,GAAW,EAAEC,GAAW,EAAA;EAAA,OAC7D,CAAC,CAACF,CAAC,CAACC,GAAG,EAAEC,GAAG,CAAC,GAAGI,EAAE,GAAGH,CAAC,CAACF,GAAG,EAAEC,GAAG,CAAC,IAAII,EAAE,GAAGF,CAAC,CAACH,GAAG,CAAC,IAAIK,EAAE,CAAA;AAAA,CAAA,CAAA;;AAEvD;AACO,IAAMC,QAAQ,GAAG,SAAXA,QAAQA,CAAID,EAAU,EAAEL,GAAW,EAAEC,GAAW,EAAA;EAAA,OAC3D,GAAG,GAAGF,CAAC,CAACC,GAAG,EAAEC,GAAG,CAAC,GAAGI,EAAE,GAAGA,EAAE,GAAG,GAAG,GAAGH,CAAC,CAACF,GAAG,EAAEC,GAAG,CAAC,GAAGI,EAAE,GAAGF,CAAC,CAACH,GAAG,CAAC,CAAA;AAAA,CAAA,CAAA;AACxD,IAAMO,eAAe,GAAG,SAAlBA,eAAeA,CAC1BC,EAAU,EACVC,EAAU,EACVC,EAAU,EACVC,GAAW,EACXC,GAAW,EACR;AACH,EAAA,IAAIC,QAAgB,CAAA;AACpB,EAAA,IAAIC,QAAgB,CAAA;EACpB,IAAIC,CAAC,GAAG,CAAC,CAAA;EACT,GAAG;IACDD,QAAQ,GAAGL,EAAE,GAAG,CAACC,EAAE,GAAGD,EAAE,IAAI,GAAG,CAAA;IAC/BI,QAAQ,GAAGT,UAAU,CAACU,QAAQ,EAAEH,GAAG,EAAEC,GAAG,CAAC,GAAGJ,EAAE,CAAA;IAC9C,IAAIK,QAAQ,GAAG,GAAG,EAAEH,EAAE,GAAGI,QAAQ,CAAC,KAC7BL,EAAE,GAAGK,QAAQ,CAAA;AACpB,GAAC,QACCE,IAAI,CAACC,GAAG,CAACJ,QAAQ,CAAC,GAAGpB,qBAAqB,IAC1C,EAAEsB,CAAC,GAAGrB,0BAA0B,EAAA;AAElC,EAAA,OAAOoB,QAAQ,CAAA;AACjB,CAAC,CAAA;AAEM,IAAMI,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAC/BV,EAAU,EACVW,OAAe,EACfR,GAAW,EACXC,GAAW,EACR;EACH,KAAK,IAAIG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGxB,iBAAiB,EAAE,EAAEwB,CAAC,EAAE;IAC1C,IAAMK,YAAY,GAAGd,QAAQ,CAACa,OAAO,EAAER,GAAG,EAAEC,GAAG,CAAC,CAAA;AAChD,IAAA,IAAIQ,YAAY,KAAK,GAAG,EAAE,OAAOD,OAAO,CAAA;IAExC,IAAMN,QAAQ,GAAGT,UAAU,CAACe,OAAO,EAAER,GAAG,EAAEC,GAAG,CAAC,GAAGJ,EAAE,CAAA;IACnDW,OAAO,IAAIN,QAAQ,GAAGO,YAAY,CAAA;AACpC,GAAA;AAEA,EAAA,OAAOD,OAAO,CAAA;AAChB,CAAC,CAAA;AAEM,IAAME,MAAM,GAAG,SAATA,MAAMA,CAAIV,GAAW,EAAEW,GAAW,EAAEV,GAAW,EAAEW,GAAW,EAAK;EAC5E,IAAI,EAAEZ,GAAG,IAAI,CAAC,IAAIA,GAAG,IAAI,CAAC,IAAIC,GAAG,IAAI,CAAC,IAAIA,GAAG,IAAI,CAAC,CAAC,EACjD,MAAM,IAAIjF,KAAK,CAAC,yCAAyC,CAAC,CAAA;EAE5D,IAAIgF,GAAG,KAAKW,GAAG,IAAIV,GAAG,KAAKW,GAAG,EAAE,OAAO,UAACC,CAAS,EAAA;AAAA,IAAA,OAAKA,CAAC,CAAA;AAAA,GAAA,CAAA;;AAEvD;AACA,EAAA,IAAMC,YAAY,GAAG5B,qBAAqB,GACtC,IAAIC,YAAY,CAACH,gBAAgB,CAAC,GAClC,IAAI+B,KAAK,CAAC/B,gBAAgB,CAAC,CAAA;EAC/B,KAAK,IAAIoB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGpB,gBAAgB,EAAE,EAAEoB,CAAC,EAAE;AACzCU,IAAAA,YAAY,CAACV,CAAC,CAAC,GAAGX,UAAU,CAACW,CAAC,GAAGnB,eAAe,EAAEe,GAAG,EAAEC,GAAG,CAAC,CAAA;AAC7D,GAAA;AAEA,EAAA,IAAMe,QAAQ,GAAG,SAAXA,QAAQA,CAAInB,EAAU,EAAK;IAC/B,IAAIoB,aAAa,GAAG,GAAG,CAAA;IACvB,IAAIC,aAAa,GAAG,CAAC,CAAA;AACrB,IAAA,IAAMC,UAAU,GAAGnC,gBAAgB,GAAG,CAAC,CAAA;AAEvC,IAAA,OAEEkC,aAAa,KAAKC,UAAU,IAAIL,YAAY,CAACI,aAAa,CAAC,IAAIrB,EAAE,EACjE,EAAEqB,aAAa,EAEfD,aAAa,IAAIhC,eAAe,CAAA;AAClC,IAAA,EAAEiC,aAAa,CAAA;;AAEf;IACA,IAAME,IAAI,GACR,CAACvB,EAAE,GAAGiB,YAAY,CAACI,aAAa,CAAC,KAChCJ,YAAY,CAACI,aAAa,GAAG,CAAC,CAAC,GAAGJ,YAAY,CAACI,aAAa,CAAC,CAAC,CAAA;AACjE,IAAA,IAAMG,SAAS,GAAGJ,aAAa,GAAGG,IAAI,GAAGnC,eAAe,CAAA;IAExD,IAAMqC,YAAY,GAAG3B,QAAQ,CAAC0B,SAAS,EAAErB,GAAG,EAAEC,GAAG,CAAC,CAAA;AAClD,IAAA,IAAIqB,YAAY,IAAIzC,gBAAgB,EAClC,OAAO0B,oBAAoB,CAACV,EAAE,EAAEwB,SAAS,EAAErB,GAAG,EAAEC,GAAG,CAAC,CAAA;AACtD,IAAA,IAAIqB,YAAY,KAAK,GAAG,EAAE,OAAOD,SAAS,CAAA;AAE1C,IAAA,OAAOzB,eAAe,CACpBC,EAAE,EACFoB,aAAa,EACbA,aAAa,GAAGhC,eAAe,EAC/Be,GAAG,EACHC,GACF,CAAC,CAAA;GACF,CAAA;EAED,OAAO,UAACY,CAAS,EAAK;AACpB;IACA,IAAIA,CAAC,KAAK,CAAC,IAAIA,CAAC,KAAK,CAAC,EAAE,OAAOA,CAAC,CAAA;IAChC,OAAOpB,UAAU,CAACuB,QAAQ,CAACH,CAAC,CAAC,EAAEF,GAAG,EAAEC,GAAG,CAAC,CAAA;GACzC,CAAA;AACH,CAAC;;AChHM,IAAMW,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,GAAW,EAAK;EAC5CA,GAAG,GAAGA,GAAG,CAACC,OAAO,CAAC,UAAU,EAAE,UAACC,MAAM,EAAA;AAAA,IAAA,OAAA,GAAA,CAAAlI,MAAA,CAASkI,MAAM,CAACC,WAAW,EAAE,CAAA,CAAA;AAAA,GAAE,CAAC,CAAA;;AAErE;AACA,EAAA,OAAOH,GAAG,CAACI,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,GAAGJ,GAAG,CAACK,SAAS,CAAC,CAAC,CAAC,GAAGL,GAAG,CAAA;AACvD,CAAC,CAAA;AAKD;AACA;AACA;AACA,IAAMM,IAAwB,GAAG,SAA3BA,IAAwBA,CAAIjB,CAAC,EAAA;AAAA,EAAA,OAAAR,IAAA,CAAA0B,GAAA,CAAKlB,CAAC,EAAI,CAAC,CAAA,CAAA;AAAA,CAAA,CAAA;AAC9C,IAAMmB,KAAyB,GAAG,SAA5BA,KAAyBA,CAAInB,CAAC,EAAA;AAAA,EAAA,OAAAR,IAAA,CAAA0B,GAAA,CAAKlB,CAAC,EAAI,CAAC,CAAA,CAAA;AAAA,CAAA,CAAA;AAC/C,IAAMoB,KAAyB,GAAG,SAA5BA,KAAyBA,CAAIpB,CAAC,EAAA;AAAA,EAAA,OAAAR,IAAA,CAAA0B,GAAA,CAAKlB,CAAC,EAAI,CAAC,CAAA,CAAA;AAAA,CAAA,CAAA;AAC/C,IAAMqB,KAAyB,GAAG,SAA5BA,KAAyBA,CAAIrB,CAAC,EAAA;AAAA,EAAA,OAAAR,IAAA,CAAA0B,GAAA,CAAKlB,CAAC,EAAI,CAAC,CAAA,CAAA;AAAA,CAAA,CAAA;AAC/C,IAAMsB,IAAwB,GAAG,SAA3BA,IAAwBA,CAAItB,CAAC,EAAA;AAAA,EAAA,OAAAR,IAAA,CAAA0B,GAAA,CAAKlB,CAAC,EAAI,CAAC,CAAA,CAAA;AAAA,CAAA,CAAA;AAC9C,IAAMuB,IAAwB,GAAG,SAA3BA,IAAwBA,CAAIvB,CAAC,EAAA;AAAA,EAAA,OAAK,CAAC,GAAGR,IAAI,CAACgC,GAAG,CAAExB,CAAC,GAAGR,IAAI,CAACiC,EAAE,GAAI,CAAC,CAAC,CAAA;AAAA,CAAA,CAAA;AACvE,IAAMC,IAAwB,GAAG,SAA3BA,IAAwBA,CAAI1B,CAAC,EAAA;EAAA,OAAK,CAAC,GAAGR,IAAI,CAACmC,IAAI,CAAC,CAAC,GAAG3B,CAAC,GAAGA,CAAC,CAAC,CAAA;AAAA,CAAA,CAAA;AAChE,IAAM4B,IAAwB,GAAG,SAA3BA,IAAwBA,CAAI5B,CAAC,EAAA;EAAA,OAAKA,CAAC,GAAGA,CAAC,IAAI,CAAC,GAAGA,CAAC,GAAG,CAAC,CAAC,CAAA;AAAA,CAAA,CAAA;AAE3D,IAAM6B,MAA0B,GAAG,SAA7BA,MAA0BA,CAAI7B,CAAC,EAAK;AACxC,EAAA,IAAI8B,IAAY,CAAA;EAChB,IAAIC,CAAC,GAAG,CAAC,CAAA;AACT,EAAA,OAAO/B,CAAC,GAAG,CAAC,CAAC8B,IAAI,GAAAtC,IAAA,CAAA0B,GAAA,CAAG,CAAC,EAAI,EAAEa,CAAC,CAAA,IAAI,CAAC,IAAI,EAAE,EAAE,EAAC;AAC1C,EAAA,OAAO,CAAC,GAAAvC,IAAA,CAAA0B,GAAA,CAAG,CAAC,EAAK,CAAC,GAAGa,CAAC,CAAC,GAAG,MAAM,GAAAvC,IAAA,CAAA0B,GAAA,CAAI,CAACY,IAAI,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG9B,CAAC,EAAK,CAAC,CAAA,CAAA;AACnE,CAAC,CAAA;AAED,IAAMgC,OAA2B,GAAG,SAA9BA,OAA2BA,CAAIhC,CAAC,EAAuC;AAAA,EAAA,IAArCiC,MAA2B,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA3G,SAAA,GAAA2G,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE,CAAA;AACtE,EAAA,IAAAE,OAAA,GAAAC,cAAA,CAAsCJ,MAAM,EAAA,CAAA,CAAA;AAAAK,IAAAA,QAAA,GAAAF,OAAA,CAAA,CAAA,CAAA;AAArCG,IAAAA,SAAS,GAAAD,QAAA,KAAG,KAAA,CAAA,GAAA,CAAC,GAAAA,QAAA;AAAAE,IAAAA,SAAA,GAAAJ,OAAA,CAAA,CAAA,CAAA;AAAEK,IAAAA,MAAM,GAAAD,SAAA,KAAG,KAAA,CAAA,GAAA,GAAG,GAAAA,SAAA,CAAA;AAClC,EAAA,IAAME,CAAC,GAAGC,UAAK,CAAC5J,MAAM,CAACwJ,SAAS,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAA;AACzC,EAAA,IAAMK,CAAC,GAAGD,UAAK,CAAC5J,MAAM,CAAC0J,MAAM,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAA;EACvC,IAAIzC,CAAC,KAAK,CAAC,IAAIA,CAAC,KAAK,CAAC,EAAE,OAAOA,CAAC,CAAA;EAChC,OACE,CAAC0C,CAAC,GAAAlD,IAAA,CAAA0B,GAAA,CACF,CAAC,EAAK,EAAE,IAAIlB,CAAC,GAAG,CAAC,CAAC,CAAC,GACnBR,IAAI,CAACqD,GAAG,CACL,CAAC7C,CAAC,GAAG,CAAC,GAAI4C,CAAC,IAAIpD,IAAI,CAACiC,EAAE,GAAG,CAAC,CAAC,GAAIjC,IAAI,CAACsD,IAAI,CAAC,CAAC,GAAGJ,CAAC,CAAC,KAAKlD,IAAI,CAACiC,EAAE,GAAG,CAAC,CAAC,GAAImB,CACvE,CAAC,CAAA;AAEL,CAAC,CAAA;AAED,IAAMG,MAA0B,GAAG,SAA7BA,MAA0BA,CAC9B/C,CAAS,EAGN;AAAA,EAAA,IAFHiC,MAA2B,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA3G,SAAA,GAAA2G,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE,CAAA;EAAA,IAChCc,QAAiB,GAAAd,SAAA,CAAAC,MAAA,GAAAD,CAAAA,GAAAA,SAAA,MAAA3G,SAAA,CAAA;AAEjB,EAAA,IAAA0H,QAAA,GAAAZ,cAAA,CAA8DJ,MAAM,EAAA,CAAA,CAAA;AAAAiB,IAAAA,SAAA,GAAAD,QAAA,CAAA,CAAA,CAAA;AAA/DE,IAAAA,IAAI,GAAAD,SAAA,KAAG,KAAA,CAAA,GAAA,CAAC,GAAAA,SAAA;AAAAE,IAAAA,UAAA,GAAAH,QAAA,CAAA,CAAA,CAAA;AAAEI,IAAAA,SAAS,GAAAD,UAAA,KAAG,KAAA,CAAA,GAAA,GAAG,GAAAA,UAAA;AAAAE,IAAAA,UAAA,GAAAL,QAAA,CAAA,CAAA,CAAA;AAAEM,IAAAA,OAAO,GAAAD,UAAA,KAAG,KAAA,CAAA,GAAA,EAAE,GAAAA,UAAA;AAAAE,IAAAA,UAAA,GAAAP,QAAA,CAAA,CAAA,CAAA;AAAEQ,IAAAA,QAAQ,GAAAD,UAAA,KAAG,KAAA,CAAA,GAAA,CAAC,GAAAA,UAAA,CAAA;EAE1DL,IAAI,GAAGR,UAAK,CAACQ,IAAI,EAAY,GAAG,EAAE,IAAI,CAAC,CAAA;EACvCE,SAAS,GAAGV,UAAK,CAACU,SAAS,EAAY,GAAG,EAAE,IAAI,CAAC,CAAA;EACjDE,OAAO,GAAGZ,UAAK,CAACY,OAAO,EAAY,GAAG,EAAE,IAAI,CAAC,CAAA;EAC7CE,QAAQ,GAAGd,UAAK,CAACc,QAAQ,EAAY,GAAG,EAAE,IAAI,CAAC,CAAA;EAE/C,IAAMC,EAAE,GAAGlE,IAAI,CAACmC,IAAI,CAAC0B,SAAS,GAAGF,IAAI,CAAC,CAAA;AACtC,EAAA,IAAMQ,IAAI,GAAGJ,OAAO,IAAI,CAAC,GAAG/D,IAAI,CAACmC,IAAI,CAAC0B,SAAS,GAAGF,IAAI,CAAC,CAAC,CAAA;AACxD,EAAA,IAAMS,EAAE,GAAGD,IAAI,GAAG,CAAC,GAAGD,EAAE,GAAGlE,IAAI,CAACmC,IAAI,CAAC,CAAC,GAAGgC,IAAI,GAAGA,IAAI,CAAC,GAAG,CAAC,CAAA;EACzD,IAAMjB,CAAC,GAAG,CAAC,CAAA;AACX,EAAA,IAAMX,CAAC,GAAG4B,IAAI,GAAG,CAAC,GAAG,CAACA,IAAI,GAAGD,EAAE,GAAG,CAACD,QAAQ,IAAIG,EAAE,GAAG,CAACH,QAAQ,GAAGC,EAAE,CAAA;EAElE,IAAIG,QAAQ,GAAGb,QAAQ,GAAIA,QAAQ,GAAGhD,CAAC,GAAI,IAAI,GAAGA,CAAC,CAAA;EACnD,IAAI2D,IAAI,GAAG,CAAC,EAAE;AACZE,IAAAA,QAAQ,GACNrE,IAAI,CAACsE,GAAG,CAAC,CAACD,QAAQ,GAAGF,IAAI,GAAGD,EAAE,CAAC,IAC9BhB,CAAC,GAAGlD,IAAI,CAACgC,GAAG,CAACoC,EAAE,GAAGC,QAAQ,CAAC,GAAG9B,CAAC,GAAGvC,IAAI,CAACqD,GAAG,CAACe,EAAE,GAAGC,QAAQ,CAAC,CAAC,CAAA;AAC/D,GAAC,MAAM;AACLA,IAAAA,QAAQ,GAAG,CAACnB,CAAC,GAAGX,CAAC,GAAG8B,QAAQ,IAAIrE,IAAI,CAACsE,GAAG,CAAC,CAACD,QAAQ,GAAGH,EAAE,CAAC,CAAA;AAC1D,GAAA;EAEA,IAAI1D,CAAC,KAAK,CAAC,IAAIA,CAAC,KAAK,CAAC,EAAE,OAAOA,CAAC,CAAA;EAChC,OAAO,CAAC,GAAG6D,QAAQ,CAAA;AACrB,CAAC,CAAA;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAME,KAAyB,GAAG,SAA5BA,KAAyBA,CAAI/D,CAAS,EAAkB;AAAA,EAAA,IAAhBiC,MAAM,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA3G,SAAA,GAAA2G,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE,CAAA;EACvD,IAAA8B,IAAA,GAA2B/B,MAAM;IAAAgC,KAAA,GAAA5B,cAAA,CAAA2B,IAAA,EAAA,CAAA,CAAA;AAAAE,IAAAA,MAAA,GAAAD,KAAA,CAAA,CAAA,CAAA;AAA1BE,IAAAA,KAAK,GAAAD,MAAA,KAAG,KAAA,CAAA,GAAA,EAAE,GAAAA,MAAA;AAAEjN,IAAAA,IAAI,GAAAgN,KAAA,CAAA,CAAA,CAAA,CAAA;AACvB,EAAA,IAAMG,KAAK,GAAGnN,IAAI,KAAK,OAAO,GAAGuI,IAAI,CAAC6E,IAAI,GAAG7E,IAAI,CAAC8E,KAAK,CAAA;AACvD,EAAA,OAAOF,KAAK,CAACzB,UAAK,CAAC3C,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAGmE,KAAK,CAAC,GAAGA,KAAK,CAAA;AAC9C,CAAC,CAAA;;AAED;AACA,IAAMI,MAA0B,GAAG,SAA7BA,MAA0BA,CAAIvE,CAAS,EAA4B;AAAA,EAAA,IAA1BiC,MAAgB,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA3G,SAAA,GAAA2G,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE,CAAA;AAClE,EAAA,IAAAsC,QAAA,GAAAnC,cAAA,CAA6BJ,MAAM,EAAA,CAAA,CAAA;AAA5B9C,IAAAA,GAAG,GAAAqF,QAAA,CAAA,CAAA,CAAA;AAAE1E,IAAAA,GAAG,GAAA0E,QAAA,CAAA,CAAA,CAAA;AAAEpF,IAAAA,GAAG,GAAAoF,QAAA,CAAA,CAAA,CAAA;AAAEzE,IAAAA,GAAG,GAAAyE,QAAA,CAAA,CAAA,CAAA,CAAA;AACzB,EAAA,OAAO3E,MAAM,CAACV,GAAG,EAAEW,GAAG,EAAEV,GAAG,EAAEW,GAAG,CAAC,CAACC,CAAC,CAAC,CAAA;AACtC,CAAC,CAAA;;AAED;AACA,IAAMyE,MAA0B,GAAG5E,MAAM,CAAC,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAA;;AAE9D;AACA,IAAM6E,OAAO,GAAG,SAAVA,OAAOA,CAAIC,IAAwB,EAAyB;AAChE,EAAA,OAAO,UAAC3E,CAAC,EAAA;AAAA,IAAA,IAAEiC,MAAM,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA3G,SAAA,GAAA2G,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE,CAAA;IAAA,IAAEc,QAAiB,GAAAd,SAAA,CAAAC,MAAA,GAAAD,CAAAA,GAAAA,SAAA,MAAA3G,SAAA,CAAA;IAAA,OACvC,CAAC,GAAGoJ,IAAI,CAAC,CAAC,GAAG3E,CAAC,EAAEiC,MAAM,EAAEe,QAAQ,CAAC,CAAA;AAAA,GAAA,CAAA;AACrC,CAAC,CAAA;;AAED;AACA,IAAM4B,SAAS,GAAG,SAAZA,SAASA,CAAID,IAAwB,EAAyB;AAClE,EAAA,OAAO,UAAC3E,CAAC,EAAA;AAAA,IAAA,IAAEiC,MAAM,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA3G,SAAA,GAAA2G,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE,CAAA;IAAA,IAAEc,QAAiB,GAAAd,SAAA,CAAAC,MAAA,GAAAD,CAAAA,GAAAA,SAAA,MAAA3G,SAAA,CAAA;AAAA,IAAA,OACvCyE,CAAC,GAAG,GAAG,GACH2E,IAAI,CAAC3E,CAAC,GAAG,CAAC,EAAEiC,MAAM,EAAEe,QAAQ,CAAC,GAAG,CAAC,GACjC,CAAC,GAAG2B,IAAI,CAAC3E,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,EAAEiC,MAAM,EAAEe,QAAQ,CAAC,GAAG,CAAC,CAAA;AAAA,GAAA,CAAA;AAClD,CAAC,CAAA;;AAED;AACA,IAAM6B,SAAS,GAAG,SAAZA,SAASA,CAAIF,IAAwB,EAAyB;EAClE,OAAO,UAAC3E,CAAC,EAAqC;AAAA,IAAA,IAAnCiC,MAAM,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA3G,SAAA,GAAA2G,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE,CAAA;IAAA,IAAEc,QAAiB,GAAAd,SAAA,CAAAC,MAAA,GAAAD,CAAAA,GAAAA,SAAA,MAAA3G,SAAA,CAAA;AACvC,IAAA,OAAOyE,CAAC,GAAG,GAAG,GACV,CAAC,CAAC,GAAG2E,IAAI,CAAC,CAAC,GAAG3E,CAAC,GAAG,CAAC,EAAEiC,MAAM,EAAEe,QAAQ,CAAC,IAAI,CAAC,GAC3C,CAAC2B,IAAI,CAAC3E,CAAC,GAAG,CAAC,GAAG,CAAC,EAAEiC,MAAM,EAAEe,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;GAChD,CAAA;AACH,CAAC,CAAA;;AAED;AACA;AACA;;AAyDO,IAAM8B,eAA+D,GAAG;AAC7EX,EAAAA,KAAK,EAAEJ,KAAK;AACZ,EAAA,YAAY,EAAE,SAAdgB,SAAYA,CAAG/E,CAAC,EAAA;IAAA,OAAK+D,KAAK,CAAC/D,CAAC,EAAE,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAA;AAAA,GAAA;AAC3C,EAAA,UAAU,EAAE,SAAZgF,OAAUA,CAAGhF,CAAC,EAAA;IAAA,OAAK+D,KAAK,CAAC/D,CAAC,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAA;AAAA,GAAA;AAEvCiF,EAAAA,MAAM,EAAE,SAARA,MAAMA,CAAGjF,CAAC,EAAA;AAAA,IAAA,OAAKA,CAAC,CAAA;AAAA,GAAA;AAChB,EAAA,cAAc,EAAEuE,MAAM;AACtBI,EAAAA,IAAI,EAAE,SAANA,IAAIA,CAAG3E,CAAC,EAAA;AAAA,IAAA,OAAKuE,MAAM,CAACvE,CAAC,EAAE,CAAC,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC,CAAA;AAAA,GAAA;AAE9C,EAAA,IAAA,EAAIyE,MAAM;AACVS,EAAAA,GAAG,EAAER,OAAO,CAACD,MAAM,CAAC;AACpB,EAAA,QAAQ,EAAEG,SAAS,CAACH,MAAM,CAAC;AAC3B,EAAA,QAAQ,EAAEI,SAAS,CAACJ,MAAM,CAAC;AAE3B,EAAA,SAAS,EAAExD,IAAI;AACf,EAAA,UAAU,EAAEyD,OAAO,CAACzD,IAAI,CAAC;AACzB,EAAA,aAAa,EAAE2D,SAAS,CAAC3D,IAAI,CAAC;AAC9B,EAAA,aAAa,EAAE4D,SAAS,CAAC5D,IAAI,CAAC;AAE9B,EAAA,UAAU,EAAEE,KAAK;AACjB,EAAA,WAAW,EAAEuD,OAAO,CAACvD,KAAK,CAAC;AAC3B,EAAA,cAAc,EAAEyD,SAAS,CAACzD,KAAK,CAAC;AAChC,EAAA,cAAc,EAAE0D,SAAS,CAAC1D,KAAK,CAAC;AAEhC,EAAA,UAAU,EAAEC,KAAK;AACjB,EAAA,WAAW,EAAEsD,OAAO,CAACtD,KAAK,CAAC;AAC3B,EAAA,cAAc,EAAEwD,SAAS,CAACxD,KAAK,CAAC;AAChC,EAAA,cAAc,EAAEyD,SAAS,CAACzD,KAAK,CAAC;AAEhC,EAAA,UAAU,EAAEC,KAAK;AACjB,EAAA,WAAW,EAAEqD,OAAO,CAACrD,KAAK,CAAC;AAC3B,EAAA,cAAc,EAAEuD,SAAS,CAACvD,KAAK,CAAC;AAChC,EAAA,cAAc,EAAEwD,SAAS,CAACxD,KAAK,CAAC;AAEhC,EAAA,SAAS,EAAEC,IAAI;AACf,EAAA,UAAU,EAAEoD,OAAO,CAACpD,IAAI,CAAC;AACzB,EAAA,aAAa,EAAEsD,SAAS,CAACtD,IAAI,CAAC;AAC9B,EAAA,aAAa,EAAEuD,SAAS,CAACvD,IAAI,CAAC;AAE9B,EAAA,SAAS,EAAEC,IAAI;AACf,EAAA,UAAU,EAAEmD,OAAO,CAACnD,IAAI,CAAC;AACzB,EAAA,aAAa,EAAEqD,SAAS,CAACrD,IAAI,CAAC;AAC9B,EAAA,aAAa,EAAEsD,SAAS,CAACtD,IAAI,CAAC;AAE9B,EAAA,SAAS,EAAEG,IAAI;AACf,EAAA,UAAU,EAAEgD,OAAO,CAAChD,IAAI,CAAC;AACzB,EAAA,aAAa,EAAEkD,SAAS,CAAClD,IAAI,CAAC;AAC9B,EAAA,aAAa,EAAEmD,SAAS,CAACnD,IAAI,CAAC;AAE9B,EAAA,SAAS,EAAEE,IAAI;AACf,EAAA,UAAU,EAAE8C,OAAO,CAAC9C,IAAI,CAAC;AACzB,EAAA,aAAa,EAAEgD,SAAS,CAAChD,IAAI,CAAC;AAC9B,EAAA,aAAa,EAAEiD,SAAS,CAACjD,IAAI,CAAC;AAE9B,EAAA,WAAW,EAAEC,MAAM;AACnB,EAAA,YAAY,EAAE6C,OAAO,CAAC7C,MAAM,CAAC;AAC7B,EAAA,eAAe,EAAE+C,SAAS,CAAC/C,MAAM,CAAC;AAClC,EAAA,eAAe,EAAEgD,SAAS,CAAChD,MAAM,CAAC;AAElC,EAAA,YAAY,EAAEG,OAAO;AACrB,EAAA,aAAa,EAAE0C,OAAO,CAAC1C,OAAO,CAAC;AAC/B,EAAA,gBAAgB,EAAE4C,SAAS,CAAC5C,OAAO,CAAC;AACpC,EAAA,gBAAgB,EAAE6C,SAAS,CAAC7C,OAAO,CAAC;AAEpCmD,EAAAA,MAAM,EAAEpC,MAAM;AACd,EAAA,WAAW,EAAEA,MAAM;AACnB,EAAA,YAAY,EAAE2B,OAAO,CAAC3B,MAAM,CAAC;AAC7B,EAAA,eAAe,EAAE6B,SAAS,CAAC7B,MAAM,CAAC;EAClC,eAAe,EAAE8B,SAAS,CAAC9B,MAAM,CAAA;AACnC,EAAC;;AAED;AACA;AACA;AACA,IAAMqC,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAIT,IAAY,EAAA;EAAA,OACvCjE,aAAa,CAACiE,IAAI,CAAC,CAChB/D,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC;AAAC,GACtBA,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC;AAAC,GACzBE,WAAW,EAAE,CACbuE,IAAI,EAAE,CAAA;AAAA,CAAA,CAAA;;AAEX;AACO,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAIX,IAAY,EAAK;EACjD,OAAOG,eAAe,CAACM,mBAAmB,CAACT,IAAI,CAAC,CAAC,IAAIG,eAAe,CAACG,MAAM,CAAA;AAC7E,CAAC,CAAA;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AC9UO,IAAMA,MAAM,GAAG,SAATA,MAAMA,CAAIM,CAAS,EAAK;AACnC,EAAA,OAAOA,CAAC,CAAA;AACV,CAAC,CAAA;AAED,IAAMC,KAAK,GAAG,CAAC,CAAA;AACf,IAAMC,MAAM,GAAG,GAAG,CAAA;AAClB,IAAMC,GAAG,GAAG,CAAC,CAAA;AAEb,SAASC,IAAIA,CAACC,KAAa,EAAEC,GAAW,EAAE;EACxC,OAAO,UAAUN,CAAS,EAAE;IAC1B,IAAIA,CAAC,IAAI,CAAC,EAAE;AACV,MAAA,OAAO,CAAC,CAAA;AACV,KAAA;AACA,IAAA,IAAMO,QAAQ,GAAG,CAAC,GAAGF,KAAK,CAAA;IAC1BL,CAAC,IAAIM,GAAG,GAAGC,QAAQ,CAAA;AACnB,IAAA,OAAOP,CAAC,GAAIA,CAAC,GAAGO,QAAS,CAAA;GAC1B,CAAA;AACH,CAAA;AAEA,IAAMC,YAAY,GAAG,oCAAoC,CAAA;AACzD,IAAMC,aAAa,GAAG,IAAIC,MAAM,mBAAAtN,MAAA,CACZoN,YAAY,EAAApN,GAAAA,CAAAA,CAAAA,MAAA,CAAIoN,YAAY,EAAA,GAAA,CAAA,CAAApN,MAAA,CAAIoN,YAAY,OAAApN,MAAA,CAAIoN,YAAY,EAAA,KAAA,CAChF,CAAC,CAAA;AACD,IAAMG,OAAO,GAAG,sBAAsB,CAAA;AACtC,IAAMC,OAAO,GAAG,+CAA+C,CAAA;AAExD,SAASC,mBAAmBA,CACjCC,gBAAwB,EACD;AACvB,EAAA,IAAMC,SAAS,GAAGN,aAAa,CAACO,IAAI,CAACF,gBAAgB,CAAC,CAAA;AACtD,EAAA,IAAIC,SAAS,EAAE;AACb;AACA,IAAA,OAAOzG,MAAM,CAAA2G,KAAA,CAAAC,KAAAA,CAAAA,EAAAA,kBAAA,CAAIH,SAAS,CAACI,KAAK,CAAC,CAAC,CAAC,CAACC,GAAG,CAAC5N,MAAM,CAAC,CAAC,CAAA,CAAA;AAClD,GAAA;AACA,EAAA,IAAM6N,SAAS,GAAGV,OAAO,CAACK,IAAI,CAACF,gBAAgB,CAAC,CAAA;AAChD,EAAA,IAAIO,SAAS,EAAE;IACb,OAAOjB,IAAI,CAAC5M,MAAM,CAAC6N,SAAS,CAAC,CAAC,CAAC,CAAC,EAAElB,GAAG,CAAC,CAAA;AACxC,GAAA;AACA,EAAA,IAAMmB,SAAS,GAAGV,OAAO,CAACI,IAAI,CAACF,gBAAgB,CAAC,CAAA;AAChD,EAAA,IAAIQ,SAAS,EAAE;AACb;IACA,OAAOlB,IAAI,CACT5M,MAAM,CAAC8N,SAAS,CAAC,CAAC,CAAC,CAAC,EACpB;AAAEC,MAAAA,KAAK,EAAEtB,KAAK;AAAEuB,MAAAA,MAAM,EAAEtB,MAAM;AAAEuB,MAAAA,GAAG,EAAEtB,GAAAA;AAAI,KAAC,CAACmB,SAAS,CAAC,CAAC,CAAC,CACzD,CAAC,CAAA;AACH,GAAA;EACA,OAAOvB,iBAAiB,CAACe,gBAAgB,CAAC,CAAA;AAC5C,CAAA;AAEO,SAASY,uBAAuBA,CAACC,MAAoB,EAAE;AAC5D;AACA,EAAA,OAAO1H,IAAI,CAACC,GAAG,CAAC0H,gBAAgB,CAACD,MAAM,CAAC,IAAIA,MAAM,CAAC1N,YAAY,IAAI,CAAC,CAAC,CAAC,CAAA;AACxE,CAAA;AAEA,SAAS2N,gBAAgBA,CAACD,MAAoB,EAAU;AAAA,EAAA,IAAAE,kBAAA,CAAA;AACtD;EACA,IAAIF,MAAM,CAAClE,QAAQ,KAAK,CAAC,IAAIkE,MAAM,CAACG,UAAU,KAAK,CAAC,EAAE;AACpD,IAAA,OAAO,CAAC,CAAA;AACV,GAAA;;AAEA;AACA;AACA;AACA;;EAEA,OACE,CAACH,MAAM,CAAClE,QAAQ,KAAK,MAAM,GAAG,CAAC,GAAGjK,MAAM,CAACmO,MAAM,CAAClE,QAAQ,CAAC,KAAAoE,CAAAA,kBAAA,GACxDF,MAAM,CAACG,UAAU,MAAAD,IAAAA,IAAAA,kBAAA,KAAAA,KAAAA,CAAAA,GAAAA,kBAAA,GAAI,CAAC,CAAC,CAAA;AAE5B,CAAA;AAEA,IAAME,SAAS,GAAG,CAAC,CAAA;AACnB,IAAMC,WAAW,GAAG,CAAC,CAAA;AACrB,IAAMC,UAAU,GAAG,CAAC,CAAA;AACpB,IAAMC,WAAW,GAAG,CAAC,CAAA;AAErB,SAASC,cAAcA,CACrBC,cAAsB,EACtBC,SAAwB,EACxBV,MAA6B,EAC7B;AACA;EACA,IAAIU,SAAS,KAAK,IAAI,EAAE;AACtB,IAAA,OAAON,SAAS,CAAA;AAClB,GAAA;AAEA,EAAA,IAAQrO,OAAO,GAAKiO,MAAM,CAAlBjO,OAAO,CAAA;AACf,EAAA,IAAI2O,SAAS,GAAGpI,IAAI,CAACqI,GAAG,CAACX,MAAM,CAACY,KAAK,EAAE7O,OAAO,CAAC,EAAE;AAC/C,IAAA,OAAOsO,WAAW,CAAA;AACpB,GAAA;AACA,EAAA,IACEK,SAAS,IACTpI,IAAI,CAACqI,GAAG,CAACX,MAAM,CAACY,KAAK,GAAGH,cAAc,GAAGT,MAAM,CAACa,QAAQ,EAAE9O,OAAO,CAAC,EAClE;AACA,IAAA,OAAOuO,UAAU,CAAA;AACnB,GAAA;AAEA,EAAA,OAAOC,WAAW,CAAA;AACpB,CAAA;AAEA,SAASO,mBAAmBA,CAC1BL,cAAmB,EACnBM,QAAgB,EAChBL,SAAiB,EACjBM,KAAa,EACbJ,KAAa,EACb;AACA;AACA,EAAA,QAAQI,KAAK;AACX,IAAA,KAAKX,WAAW;MACd,IAAIU,QAAQ,KAAK,WAAW,IAAIA,QAAQ,KAAK,MAAM,EAAE,OAAO,CAAC,CAAA;AAC7D,MAAA,OAAO,IAAI,CAAA;AACb,IAAA,KAAKR,WAAW;MACd,OAAOG,SAAS,GAAGE,KAAK,CAAA;AAC1B,IAAA,KAAKN,UAAU;MACb,IAAIS,QAAQ,KAAK,UAAU,IAAIA,QAAQ,KAAK,MAAM,EAAE,OAAON,cAAc,CAAA;AACzE,MAAA,OAAO,IAAI,CAAA;AACb,IAAA,KAAKL,SAAS;AACZ,MAAA,OAAO,IAAI,CAAA;AACf,GAAA;AACF,CAAA;AAEA,SAASa,wBAAwBA,CAC/BC,iBAAyB,EACzBF,KAAa,EACbb,UAAkB,EAClBgB,UAAkB,EAClBC,cAAsB,EACtB;AACA;EACA,IAAIC,eAAe,GAAGD,cAAc,CAAA;EACpC,IAAIF,iBAAiB,KAAK,CAAC,EAAE;IAC3B,IAAIF,KAAK,KAAKX,WAAW,EAAE;AACzBgB,MAAAA,eAAe,IAAIlB,UAAU,CAAA;AAC/B,KAAA;AACF,GAAC,MAAM;IACLkB,eAAe,IAAIF,UAAU,GAAGD,iBAAiB,CAAA;AACnD,GAAA;AACA,EAAA,OAAOG,eAAe,CAAA;AACxB,CAAA;AAEA,SAASC,gCAAgCA,CACvCD,eAAuB,EACvBD,cAAsB,EACtBJ,KAAa,EACbb,UAAkB,EAClBgB,UAAkB,EAClBD,iBAAyB,EACzB;AACA;;AAEA,EAAA,IAAIK,uBAAuB,GACzBF,eAAe,KAAKxL,QAAQ,GAAGuL,cAAc,GAAG,CAAC,GAAGC,eAAe,GAAG,CAAC,CAAA;EACzE,IACEE,uBAAuB,KAAK,CAAC,IAC7BP,KAAK,KAAKV,UAAU,IACpBH,UAAU,KAAK,CAAC,KACfgB,UAAU,KAAK,CAAC,IAAID,iBAAiB,KAAK,CAAC,CAAC,EAC7C;AACAK,IAAAA,uBAAuB,GAAG,CAAC,CAAA;AAC7B,GAAA;AACA,EAAA,OAAOA,uBAAuB,CAAA;AAChC,CAAA;AAEA,SAASC,yBAAyBA,CAChCR,KAAa,EACbb,UAAkB,EAClBoB,uBAA+B,EAC/BF,eAAuB,EACvB;AACA;AACA,EAAA,IAAIL,KAAK,KAAKV,UAAU,IAAIH,UAAU,KAAKtK,QAAQ,EAAE;AACnD,IAAA,OAAOA,QAAQ,CAAA;AACjB,GAAA;EACA,IAAI0L,uBAAuB,KAAK,CAAC,EAAE;AACjC,IAAA,OAAOjJ,IAAI,CAAC8E,KAAK,CAACiE,eAAe,CAAC,GAAG,CAAC,CAAA;AACxC,GAAA;AACA,EAAA,OAAO/I,IAAI,CAAC8E,KAAK,CAACiE,eAAe,CAAC,CAAA;AACpC,CAAA;AAEA,SAASI,yBAAyBA,CAChCC,iBAAyB,EACzBC,gBAAwB,EACxBJ,uBAA+B,EAC/B;AACA;EACA,IAAIK,gBAAgB,GAAGF,iBAAiB,CAAA;AACxC,EAAA,IAAIA,iBAAiB,KAAK,QAAQ,IAAIA,iBAAiB,KAAK,SAAS,EAAE;IACrE,IAAIG,CAAC,GAAGF,gBAAgB,CAAA;IACxB,IAAID,iBAAiB,KAAK,mBAAmB,EAAE;AAC7CG,MAAAA,CAAC,IAAI,CAAC,CAAA;AACR,KAAA;AACAD,IAAAA,gBAAgB,GAAG,QAAQ,CAAA;IAC3B,IAAIC,CAAC,KAAKhM,QAAQ,IAAIgM,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;AACjCD,MAAAA,gBAAgB,GAAG,SAAS,CAAA;AAC9B,KAAA;AACF,GAAA;EACA,IAAIA,gBAAgB,KAAK,QAAQ,EAAE;AACjC,IAAA,OAAOL,uBAAuB,CAAA;AAChC,GAAA;EACA,OAAO,CAAC,GAAGA,uBAAuB,CAAA;AACpC,CAAA;AAEO,SAASO,0BAA0BA,CACxCrB,cAAsB,EACtBC,SAAiB,EACjBV,MAA6B,EAC7B;EACA,IAAMgB,KAAK,GAAGR,cAAc,CAACC,cAAc,EAAEC,SAAS,EAAEV,MAAM,CAAC,CAAA;AAC/D,EAAA,IAAMmB,UAAU,GAAGL,mBAAmB,CACpCL,cAAc,EACdT,MAAM,CAAC+B,IAAI,EACXrB,SAAS,EACTM,KAAK,EACLhB,MAAM,CAACY,KACT,CAAC,CAAA;AACD,EAAA,IAAIO,UAAU,KAAK,IAAI,EAAE,OAAO,IAAI,CAAA;AAEpC,EAAA,IAAMrF,QAAQ,GAAGkE,MAAM,CAAClE,QAAQ,KAAK,MAAM,GAAG,CAAC,GAAGkE,MAAM,CAAClE,QAAQ,CAAA;AACjE,EAAA,IAAMuF,eAAe,GAAGJ,wBAAwB,CAC9CnF,QAAQ,EACRkF,KAAK,EACLhB,MAAM,CAACG,UAAU,EACjBgB,UAAU,EACVnB,MAAM,CAACoB,cACT,CAAC,CAAA;AACD,EAAA,IAAMG,uBAAuB,GAAGD,gCAAgC,CAC9DD,eAAe,EACfrB,MAAM,CAACoB,cAAc,EACrBJ,KAAK,EACLhB,MAAM,CAACG,UAAU,EACjBgB,UAAU,EACVrF,QACF,CAAC,CAAA;AACD,EAAA,IAAM6F,gBAAgB,GAAGH,yBAAyB,CAChDR,KAAK,EACLhB,MAAM,CAACG,UAAU,EACjBoB,uBAAuB,EACvBF,eACF,CAAC,CAAA;EAED,IAAMW,gBAAgB,GAAGP,yBAAyB,CAChDzB,MAAM,CAACiC,SAAS,EAChBN,gBAAgB,EAChBJ,uBACF,CAAC,CAAA;EAEDvB,MAAM,CAAC2B,gBAAgB,GAAGA,gBAAgB,CAAA;EAC1C3B,MAAM,CAACrD,QAAQ,GAAGqF,gBAAgB,CAAA;;AAElC;AACA;AACA,EAAA,OAAOhC,MAAM,CAACkC,cAAc,CAACF,gBAAgB,CAAC,CAAA;AAChD;;ACvPO,SAASG,kBAAkBA,CAChCC,SAA6B,EAC7BpC,MAA8B,EAC9BvQ,MAAuB,EACvB;AACA,EAAA,IAAM4S,8BAA8B,GAAGC,kCAAkC,CACvEF,SAAS,EACTpC,MACF,CAAC,CAAA;AACD,EAAA,IAAMuC,cAAc,GAAGC,kBAAkB,CACvCH,8BAA8B,EAC9B5S,MACF,CAAC,CAAA;AAED,EAAA,OAAO,UAAUA,MAAgB,EAAEgT,QAAgB,EAAE;IACnD,IAAIA,QAAQ,KAAK,IAAI,EAAE;AACrBF,MAAAA,cAAc,CACXG,MAAM,CAAC,UAACC,aAAa,EAAK;QACzB,OACEF,QAAQ,IAAIE,aAAa,CAACC,SAAS,IACnCH,QAAQ,GAAGE,aAAa,CAACE,OAAO,CAAA;AAEpC,OAAC,CAAC,CACDC,OAAO,CAAC,UAACH,aAAa,EAAK;AAC1B,QAAA,IAAMI,cAAc,GAAGN,QAAQ,GAAGE,aAAa,CAACK,WAAW,CAAA;QAC3D,IAAMC,aAAa,GACjBN,aAAa,CAACO,SAAS,GAAGP,aAAa,CAACK,WAAW,CAAA;QACrD,IAAMG,eAAe,GACnBF,aAAa,KAAK,CAAC,GAAG,CAAC,GAAGF,cAAc,GAAGE,aAAa,CAAA;AAC1D;AACAxT,QAAAA,MAAM,CAAC2T,YAAY,CACjBT,aAAa,CAACU,QAAQ,EACtBV,aAAa,CAACA,aAAa,CAACQ,eAAe,CAAC,EAC5C,KAAK,EACL,KAAK;SACN,CAAA;;AAED;AACA;AACA;AACA;AACA;AACA;AACF,OAAC,CAAC,CAAA;AACN,KAAC,MAAM;MACL,KAAK,IAAME,QAAQ,IAAIhB,8BAA8B,EACnD,IAAIiB,iBAAiB,CAACD,QAAQ,CAAC,EAAE;AAC/B;AACA5T,QAAAA,MAAM,CAAC2T,YAAY,CAACC,QAAQ,EAAE,IAAI,CAAC,CAAA;AACrC,OAAA;AACJ,KAAA;GACD,CAAA;AACH,CAAA;AAUA,SAASC,iBAAiBA,CAACC,MAAc,EAAE;AACzC,EAAA,OACEA,MAAM,KAAK,QAAQ,IACnBA,MAAM,KAAK,QAAQ,IACnBA,MAAM,KAAK,WAAW,IACtBA,MAAM,KAAK,gBAAgB,CAAA;AAE/B,CAAA;AAEA,SAASjB,kCAAkCA,CACzCF,SAA6B,EAC7BpC,MAA8B,EAC9B;EACA,IAAMqC,8BAGL,GAAG,EAAE,CAAA;AAEN,EAAA,KAAK,IAAIhK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+J,SAAS,CAACnH,MAAM,EAAE5C,CAAC,EAAE,EAAE;AACzC,IAAA,KAAK,IAAMkL,MAAM,IAAInB,SAAS,CAAC/J,CAAC,CAAC,EAAE;AACjC,MAAA,IAAIiL,iBAAiB,CAACC,MAAM,CAAC,EAAE;AAC7B,QAAA,IAAMC,wBAAwB,GAAG;AAC/BC,UAAAA,MAAM,EAAErB,SAAS,CAAC/J,CAAC,CAAC,CAACoL,MAAM;AAC3BC,UAAAA,cAAc,EAAEtB,SAAS,CAAC/J,CAAC,CAAC,CAACqL,cAAc;AAC3CC,UAAAA,MAAM,EAAEvB,SAAS,CAAC/J,CAAC,CAAC,CAACsL,MAAM;AAC3BzB,UAAAA,cAAc,EACZhD,mBAAmB,CAACkD,SAAS,CAAC/J,CAAC,CAAC,CAACsL,MAAM,CAAC,IAAI3D,MAAM,CAACkC,cAAc;AACnEnO,UAAAA,KAAK,EAAEqO,SAAS,CAAC/J,CAAC,CAAC,CAACkL,MAAM,CAAA;SAC3B,CAAA;QACDlB,8BAA8B,CAACkB,MAAM,CAAC,GACpClB,8BAA8B,CAACkB,MAAM,CAAC,IAAI,EAAE,CAAA;AAC9ClB,QAAAA,8BAA8B,CAACkB,MAAM,CAAC,CAAC5Q,IAAI,CAAC6Q,wBAAwB,CAAC,CAAA;AACvE,OAAA;AACF,KAAA;AACF,GAAA;AACA,EAAA,OAAOnB,8BAA8B,CAAA;AACvC,CAAA;AAEA,SAASG,kBAAkBA,CACzBH,8BAA0E,EAC1E5S,MAAuB,EACvB;EACA,IAAM8S,cAAc,GAAG,EAAE,CAAA;AACzB,EAAA,KAAK,IAAMqB,SAAS,IAAIvB,8BAA8B,EAAE;AACtD,IAAA,IAAMD,SAAS,GAAGC,8BAA8B,CAACuB,SAAS,CAAC,CAAA;AAC3D,IAAA,KAAK,IAAIvL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+J,SAAS,CAACnH,MAAM,GAAG,CAAC,EAAE5C,CAAC,EAAE,EAAE;MAC7C,IAAIwL,UAAU,GAAGxL,CAAC,CAAA;AAClB,MAAA,IAAIyL,QAAQ,GAAGzL,CAAC,GAAG,CAAC,CAAA;AACpB,MAAA,IAAM2K,WAAW,GAAGZ,SAAS,CAACyB,UAAU,CAAC,CAACH,cAAc,CAAA;AACxD,MAAA,IAAMR,SAAS,GAAGd,SAAS,CAAC0B,QAAQ,CAAC,CAACJ,cAAc,CAAA;MACpD,IAAId,SAAS,GAAGI,WAAW,CAAA;MAC3B,IAAIH,OAAO,GAAGK,SAAS,CAAA;MAEvB,IAAI7K,CAAC,KAAK,CAAC,EAAE;QACXuK,SAAS,GAAG,CAAC/M,QAAQ,CAAA;QACrB,IAAIqN,SAAS,KAAK,CAAC,EAAE;AACnBY,UAAAA,QAAQ,GAAGD,UAAU,CAAA;AACvB,SAAA;AACF,OAAA;AACA,MAAA,IAAIxL,CAAC,KAAK+J,SAAS,CAACnH,MAAM,GAAG,CAAC,EAAE;AAC9B4H,QAAAA,OAAO,GAAGhN,QAAQ,CAAA;QAClB,IAAImN,WAAW,KAAK,CAAC,EAAE;AACrBa,UAAAA,UAAU,GAAGC,QAAQ,CAAA;AACvB,SAAA;AACF,OAAA;MAEAvB,cAAc,CAAC5P,IAAI,CAAC;AAClBiQ,QAAAA,SAAS,EAATA,SAAS;AACTC,QAAAA,OAAO,EAAPA,OAAO;AACPG,QAAAA,WAAW,EAAEZ,SAAS,CAACyB,UAAU,CAAC,CAACH,cAAc;AACjDR,QAAAA,SAAS,EAAEd,SAAS,CAAC0B,QAAQ,CAAC,CAACJ,cAAc;AAC7CxB,QAAAA,cAAc,EAAEE,SAAS,CAACyB,UAAU,CAAC,CAAC3B,cAAc;AACpDmB,QAAAA,QAAQ,EAAEO,SAAS;AACnBjB,QAAAA,aAAa,EAAEoB,qBAAqB,CAClCH,SAAS,EACTxB,SAAS,CAACyB,UAAU,CAAC,CAAC9P,KAAK,EAC3BqO,SAAS,CAAC0B,QAAQ,CAAC,CAAC/P,KAAK,EACzBtE,MACF,CAAA;AACF,OAAC,CAAC,CAAA;AACJ,KAAA;AACF,GAAA;AACA8S,EAAAA,cAAc,CAACyB,IAAI,CAAC,UAACC,iBAAiB,EAAEC,kBAAkB,EAAK;AAC7D,IAAA,OAAOD,iBAAiB,CAACjB,WAAW,GAAGkB,kBAAkB,CAAClB,WAAW,CAAA;AACvE,GAAC,CAAC,CAAA;AACF,EAAA,OAAOT,cAAc,CAAA;AACvB,CAAA;AAEA,IAAM4B,oBAAoB,GAAG,SAAvBA,oBAAoBA,CACxBC,IAAoB,EACpBC,EAAkB,EAClBC,eAAyB,EACtB;EACH,OAAO,UAACC,CAAS,EAAK;IACpB,IAAMC,YAAY,GAAGC,WAAW,CAACL,IAAI,EAAEC,EAAE,EAAEE,CAAC,CAAC,CAAA;IAC7C,OAAOG,aAAQ,CAACF,YAAY,CAAC,GACzBA,YAAY,GACZF,eAAe,CAACE,YAAY,CAAC,CAAA;GAClC,CAAA;AACH,CAAC,CAAA;AAED,SAAST,qBAAqBA,CAC5BV,QAAgB,EAChBsB,IAAqB,EACrBC,KAAsB,EACtBnV,MAAuB,EACvB;AACA,EAAA,IAAMoV,QAAQ,GAAGC,2BAAqB,CAACzB,QAAQ,CAAC,CAAA;EAEhD,IAAIwB,QAAQ,IAAIA,QAAQ,CAACE,MAAM,IAAIF,QAAQ,OAAI,EAAE;IAC/C,IAAMG,eAAe,GAAGC,aAAO,CAACC,kBAAkB,CAACC,iBAAiB,CAClEN,QAAQ,CAACE,MACX,CAAC,CAAA;AAED,IAAA,IAAIC,eAAe,EAAE;AACnB,MAAA,IAAMI,MAAM,GAAGJ,eAAe,CAACI,MAAM,CAAA;MACrC,IAAMC,QAAQ,GAAGD,MAAM,GAAGA,MAAM,CAACT,IAAI,EAAElV,MAAM,CAAC,GAAGkV,IAAI,CAAA;MACrD,IAAMW,SAAS,GAAGF,MAAM,GAAGA,MAAM,CAACR,KAAK,EAAEnV,MAAM,CAAC,GAAGmV,KAAK,CAAA;;AAExD;MACA,IAAMW,iBAAiB,GAAGP,eAAe,CAACQ,KAAK,CAC7CH,QAAQ,EACRC,SAAS,EACT7V,MACF,CAAC,CAAA;AACD,MAAA,IAAI8V,iBAAiB,EAAE;QACrB,IAAME,MAAM,GAAGtB,oBAAoB,CAAA7E,KAAA,SAAAC,kBAAA,CAE9BgG,iBAAiB,CACtB,CAAC,CAAA;QACD,OAAO,UAAUzM,CAAS,EAAE;AAC1B,UAAA,IAAIA,CAAC,KAAK,CAAC,EAAE,OAAO6L,IAAI,CAAA;AACxB,UAAA,IAAI7L,CAAC,KAAK,CAAC,EAAE,OAAO8L,KAAK,CAAA;UACzB,OAAOa,MAAM,CAAC3M,CAAC,CAAC,CAAA;SACjB,CAAA;AACH,OAAA;AACF,KAAA;AACF,GAAA;;AAEA;EACA,OAAOqL,oBAAoB,CAAC,KAAK,EAAE,IAAI,EAAE,UAAUuB,IAAa,EAAE;AAChE,IAAA,OAAOA,IAAI,GAAGd,KAAK,GAAGD,IAAI,CAAA;AAC5B,GAAC,CAAC,CAAA;AACJ,CAAA;;AAEA;AACA;AACA;AACA,SAASF,WAAWA,CAClBL,IAAoB,EACpBC,EAAkB,EAClBE,CAAS,EACO;EAChB,IAAI,OAAOH,IAAI,KAAK,QAAQ,IAAI,OAAOC,EAAE,KAAK,QAAQ,EAAE;IACtD,OAAOD,IAAI,IAAI,CAAC,GAAGG,CAAC,CAAC,GAAGF,EAAE,GAAGE,CAAC,CAAA;AAChC,GAAA;AACA,EAAA,IACG,OAAOH,IAAI,KAAK,SAAS,IAAI,OAAOC,EAAE,KAAK,SAAS,IACpD,OAAOD,IAAI,KAAK,QAAQ,IAAI,OAAOC,EAAE,KAAK,QAAS;IACpD;AACA,IAAA,OAAOE,CAAC,GAAG,GAAG,GAAGH,IAAI,GAAGC,EAAE,CAAA;AAC5B,GAAA;AAEA,EAAA,IAAIrL,KAAK,CAAC2M,OAAO,CAACvB,IAAI,CAAC,IAAIpL,KAAK,CAAC2M,OAAO,CAACtB,EAAE,CAAC,EAAE;AAC5C;AACA,IAAA,IAAMuB,UAAU,GAAGxB,IAAI,CAACnJ,MAAM,CAAA;AAC9B,IAAA,IAAM4K,QAAQ,GAAGxB,EAAE,CAACpJ,MAAM,CAAA;IAC1B,IAAMA,MAAM,GAAG3C,IAAI,CAACwN,GAAG,CAACF,UAAU,EAAEC,QAAQ,CAAC,CAAA;IAE7C,IAAME,CAAW,GAAG,EAAE,CAAA;IACtB,KAAK,IAAI1N,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4C,MAAM,EAAE5C,CAAC,EAAE,EAAE;AAC/B0N,MAAAA,CAAC,CAACpT,IAAI,CACJ8R,WAAW,CACTL,IAAI,CAAC/L,CAAC,GAAGuN,UAAU,GAAGvN,CAAC,GAAGuN,UAAU,GAAG,CAAC,CAAC,EACzCvB,EAAE,CAAChM,CAAC,GAAGwN,QAAQ,GAAGxN,CAAC,GAAGwN,QAAQ,GAAG,CAAC,CAAC,EACnCtB,CACF,CACF,CAAC,CAAA;AACH,KAAA;AACA,IAAA,OAAOwB,CAAC,CAAA;AACV,GAAA;EACA,MAAM,IAAI9S,KAAK,CAAA,qCAAA,CAAAxB,MAAA,CAAuC2S,IAAI,EAAA,GAAA,CAAA,CAAA3S,MAAA,CAAI4S,EAAE,CAAE,CAAC,CAAA;AACrE;;AC3PA;AACA;AACA;AACA,IAAa2B,qBAAqB,gBAAA,YAAA;AAAA,EAAA,SAAAA,qBAAA,GAAA;AAAAnW,IAAAA,eAAA,OAAAmW,qBAAA,CAAA,CAAA;AAChC;AACF;AACA;IAFE,IAGApF,CAAAA,KAAK,GAAG,CAAC,CAAA;AAET;AACF;AACA;IAFE,IAGAqB,CAAAA,SAAS,GAAsB,QAAQ,CAAA;AAEvC;AACF;AACA;IAFE,IAGAnG,CAAAA,QAAQ,GAAoB,MAAM,CAAA;AAElC;AACF;AACA;IAFE,IAGQmK,CAAAA,OAAO,GAAG,QAAQ,CAAA;IAAA,IAC1B/D,CAAAA,cAAc,GAAGnE,MAAM,CAAA;AASvB;AACF;AACA;IAFE,IAGA8C,CAAAA,QAAQ,GAAG,CAAC,CAAA;AAEZ;AACF;AACA;IAFE,IAGAkB,CAAAA,IAAI,GAAa,MAAM,CAAA;AAEvB;AACF;AACA;IAFE,IAGAX,CAAAA,cAAc,GAAG,CAAC,CAAA;AAElB;AACF;AACA;IAFE,IAGAjB,CAAAA,UAAU,GAAG,CAAC,CAAA;IAAA,IAsBdwB,CAAAA,gBAAgB,GAAkB,IAAI,CAAA;IAAA,IAEtChF,CAAAA,QAAQ,GAAkB,IAAI,CAAA;AAAA,GAAA;EAAA,OAAAlM,YAAA,CAAAuV,qBAAA,EAAA,CAAA;IAAA7T,GAAA,EAAA,QAAA;IAAAC,GAAA,EAlD9B,SAAAA,GAAAA,GAAa;MACX,OAAO,IAAI,CAAC6T,OAAO,CAAA;KACpB;AAAAzS,IAAAA,GAAA,EACD,SAAAA,GAAWO,CAAAA,KAAa,EAAE;AACxB,MAAA,IAAI,CAACmO,cAAc,GAAGhD,mBAAmB,CAACnL,KAAK,CAAC,CAAA;MAChD,IAAI,CAACkS,OAAO,GAAGlS,KAAK,CAAA;AACtB,KAAA;AAAC,GAAA,CAAA,CAAA,CAAA;AAAA,CAAA,EAAA;;AC9BH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASmS,kBAAkBA,CAACC,WAAqC,EAAE;EACjE,IAAMC,qBAAiC,GAAG,EAAE,CAAA;AAE5C,EAAA,KAAK,IAAM/C,QAAQ,IAAI8C,WAAW,EAAE;AAClC;IACA,IAAI9C,QAAQ,IAAI,CAAC,QAAQ,EAAE,QAAQ,EAAE,WAAW,CAAC,EAAE;AACjD,MAAA,SAAA;AACF,KAAA;;AAEA;AACA,IAAA,IAAIgD,MAAoC,GAAGF,WAAW,CAAC9C,QAAQ,CAAC,CAAA;AAChE,IAAA,IAAI,CAACrK,KAAK,CAAC2M,OAAO,CAACU,MAAM,CAAC,EAAE;MAC1BA,MAAM,GAAG,CAACA,MAAM,CAAC,CAAA;AACnB,KAAA;AAEA,IAAA,IAAMC,YAAY,GAAGD,MAAM,CAACpL,MAAM,CAAA;IAClC,KAAK,IAAI5C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGiO,YAAY,EAAEjO,CAAC,EAAE,EAAE;AACrC,MAAA,IAAI,CAAC+N,qBAAqB,CAAC/N,CAAC,CAAC,EAAE;QAC7B,IAAMkO,QAAkB,GAAG,EAAE,CAAA;QAC7B,IAAI,QAAQ,IAAIJ,WAAW,EAAE;UAC3BI,QAAQ,CAAC9C,MAAM,GAAG5R,MAAM,CAACsU,WAAW,CAAC1C,MAAM,CAAC,CAAA;AAC9C,SAAA;QAEA,IAAI,QAAQ,IAAI0C,WAAW,EAAE;AAC3B;AACAI,UAAAA,QAAQ,CAAC5C,MAAM,GAAGwC,WAAW,CAACxC,MAAM,CAAA;AACtC,SAAA;QAEA,IAAI,WAAW,IAAIwC,WAAW,EAAE;AAC9B;AACAI,UAAAA,QAAQ,CAACC,SAAS,GAAGL,WAAW,CAACK,SAAS,CAAA;AAC5C,SAAA;AACAJ,QAAAA,qBAAqB,CAAC/N,CAAC,CAAC,GAAGkO,QAAQ,CAAA;AACrC,OAAA;AAEA,MAAA,IAAIF,MAAM,CAAChO,CAAC,CAAC,KAAKhE,SAAS,IAAIgS,MAAM,CAAChO,CAAC,CAAC,KAAK,IAAI,EAAE;QACjD+N,qBAAqB,CAAC/N,CAAC,CAAC,CAACgL,QAAQ,CAAC,GAAGgD,MAAM,CAAChO,CAAC,CAAC,CAAA;AAChD,OAAA;AACF,KAAA;AACF,GAAA;AAEA+N,EAAAA,qBAAqB,CAACpC,IAAI,CAAC,UAAUxI,CAAC,EAAEX,CAAC,EAAE;AACzC,IAAA,OACE,CAAEW,CAAC,CAACkI,cAAc,IAAe,CAAC,KAAM7I,CAAC,CAAC6I,cAAc,IAAe,CAAC,CAAC,CAAA;AAE7E,GAAC,CAAC,CAAA;AACF,EAAA,OAAO0C,qBAAqB,CAAA;AAC9B,CAAA;AAEO,SAASK,kBAAkBA,CAChCN,WAAyD,EACzDnG,MAA8B,EACV;EACpB,IAAImG,WAAW,KAAK,IAAI,EAAE;AACxB,IAAA,OAAO,EAAE,CAAA;AACX,GAAA;AAEA,EAAA,IAAI,CAACnN,KAAK,CAAC2M,OAAO,CAACQ,WAAW,CAAC,EAAE;AAC/BA,IAAAA,WAAW,GAAGD,kBAAkB,CAACC,WAAW,CAAC,CAAA;AAC/C,GAAA;EAEA,IAAI/D,SAAS,GAAG+D,WAAW,CAAC1G,GAAG,CAAC,UAACiH,gBAAgB,EAAK;IACpD,IAAMH,QAAkB,GAAG,EAAE,CAAA;AAE7B,IAAA,IAAIvG,MAAM,KAANA,IAAAA,IAAAA,MAAM,eAANA,MAAM,CAAEwG,SAAS,EAAE;AACrB;AACA;MACAD,QAAQ,CAACC,SAAS,GAAG,MAAM,CAAA;AAC7B,KAAA;AAEA,IAAA,KAAK,IAAMjD,MAAM,IAAImD,gBAAgB,EAAE;AACrC,MAAA,IAAIC,WAAW,GAAGD,gBAAgB,CAACnD,MAAM,CAAC,CAAA;MAC1C,IAAIA,MAAM,KAAK,QAAQ,EAAE;QACvB,IAAIoD,WAAW,KAAK,IAAI,EAAE;AACxBA,UAAAA,WAAW,GAAG9U,MAAM,CAAC8U,WAAW,CAAC,CAAA;UACjC,IAAI,CAACC,QAAQ,CAACD,WAAW,CAAC,EACxB,MAAM,IAAI1T,KAAK,CAAC,mCAAmC,CAAC,CAAA;AACtD,UAAA,IAAI0T,WAAW,GAAG,CAAC,IAAIA,WAAW,GAAG,CAAC,EACpC,MAAM,IAAI1T,KAAK,CAAC,2CAA2C,CAAC,CAAA;UAC9DsT,QAAQ,CAAC7C,cAAc,GAAGiD,WAAW,CAAA;AACvC,SAAA;AACF,OAAC,MAAM,IAAIpD,MAAM,KAAK,WAAW,EAAE;AACjC;AACA;AACA,QAAA,IACE,CAAC,SAAS,EAAE,KAAK,EAAE,YAAY,EAAE,MAAM,CAAC,CAAC7Q,OAAO,CAC9CiU,WACF,CAAC,KAAK,CAAC,CAAC,EACR;AACA,UAAA,MAAM,IAAI1T,KAAK,CAAA,EAAA,CAAAxB,MAAA,CAAIkV,WAAW,kCAA+B,CAAC,CAAA;AAChE,SAAA;AACF,OAAC,MAAM,CAKL;;AAGF;AACAJ,MAAAA,QAAQ,CAAChD,MAAM,CAAC,GAAGoD,WAAW,CAAA;AAChC,KAAA;AACA,IAAA,IAAIJ,QAAQ,CAAC9C,MAAM,KAAKpP,SAAS,EAAE;MACjCkS,QAAQ,CAAC9C,MAAM,GAAG,IAAI,CAAA;AACxB,KAAA;AACA,IAAA,IAAI8C,QAAQ,CAAC5C,MAAM,KAAKtP,SAAS,EAAE;AACjC;AACAkS,MAAAA,QAAQ,CAAC5C,MAAM,GAAG,CAAA3D,MAAM,KAAA,IAAA,IAANA,MAAM,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAANA,MAAM,CAAE2D,MAAM,KAAI,QAAQ,CAAA;AAC9C,KAAA;AACA,IAAA,IAAI4C,QAAQ,CAACC,SAAS,KAAKnS,SAAS,EAAE;MACpCkS,QAAQ,CAACC,SAAS,GAAG,MAAM,CAAA;AAC7B,KAAA;AACA,IAAA,OAAOD,QAAQ,CAAA;AACjB,GAAC,CAAC,CAAA;EAEF,IAAIM,mBAAmB,GAAG,IAAI,CAAA;EAC9B,IAAIC,cAAc,GAAG,CAACjR,QAAQ,CAAA;AAC9B,EAAA,KAAK,IAAIwC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+J,SAAS,CAACnH,MAAM,EAAE5C,CAAC,EAAE,EAAE;AACzC,IAAA,IAAQoL,MAAM,GAAKrB,SAAS,CAAC/J,CAAC,CAAC,CAAvBoL,MAAM,CAAA;AACd,IAAA,IAAI,CAACsD,UAAK,CAACtD,MAAM,CAAC,EAAE;MAClB,IAAIA,MAAM,GAAGqD,cAAc,EAAE;AAC3B,QAAA,MAAM,IAAIE,SAAS,CACjB,sEACF,CAAC,CAAA;AACH,OAAA;AACAF,MAAAA,cAAc,GAAGrD,MAAM,CAAA;AACzB,KAAC,MAAM;AACLoD,MAAAA,mBAAmB,GAAG,KAAK,CAAA;AAC7B,KAAA;AACF,GAAA;AAEAzE,EAAAA,SAAS,GAAGA,SAAS,CAACM,MAAM,CAAC,UAAC6D,QAAQ,EAAK;AACzC,IAAA,OAAO1U,MAAM,CAAC0U,QAAQ,CAAC9C,MAAM,CAAC,IAAI,CAAC,IAAI5R,MAAM,CAAC0U,QAAQ,CAAC9C,MAAM,CAAC,IAAI,CAAC,CAAA;AACrE,GAAC,CAAC,CAAA;EAEF,SAASwD,cAAcA,GAAG;AAAA,IAAA,IAAAC,iBAAA,CAAA;IACxB,IAAAC,UAAA,GAAmB/E,SAAS;MAApBnH,MAAM,GAAAkM,UAAA,CAANlM,MAAM,CAAA;IACdmH,SAAS,CAACnH,MAAM,GAAG,CAAC,CAAC,CAACyI,cAAc,GAAG7R,MAAM,CAAAqV,CAAAA,iBAAA,GAC3C9E,SAAS,CAACnH,MAAM,GAAG,CAAC,CAAC,CAACwI,MAAM,MAAAyD,IAAAA,IAAAA,iBAAA,KAAAA,KAAAA,CAAAA,GAAAA,iBAAA,GAAI,CAClC,CAAC,CAAA;IACD,IAAIjM,MAAM,GAAG,CAAC,EAAE;AAAA,MAAA,IAAAmM,mBAAA,CAAA;MACdhF,SAAS,CAAC,CAAC,CAAC,CAACsB,cAAc,GAAG7R,MAAM,CAAAuV,CAAAA,mBAAA,GAAChF,SAAS,CAAC,CAAC,CAAC,CAACqB,MAAM,MAAA,IAAA,IAAA2D,mBAAA,KAAAA,KAAAA,CAAAA,GAAAA,mBAAA,GAAI,CAAC,CAAC,CAAA;AAChE,KAAA;IAEA,IAAIC,aAAa,GAAG,CAAC,CAAA;IACrB,IAAIP,cAAc,GAAGjV,MAAM,CAACuQ,SAAS,CAAC,CAAC,CAAC,CAACsB,cAAc,CAAC,CAAA;IACxD,KAAK,IAAIrL,EAAC,GAAG,CAAC,EAAEA,EAAC,GAAG4C,MAAM,EAAE5C,EAAC,EAAE,EAAE;AAC/B,MAAA,IAAMoL,OAAM,GAAGrB,SAAS,CAAC/J,EAAC,CAAC,CAACqL,cAAc,CAAA;MAC1C,IAAI,CAACqD,UAAK,CAACtD,OAAM,CAAC,IAAI,CAACsD,UAAK,CAACD,cAAc,CAAC,EAAE;AAC5C,QAAA,KAAK,IAAIQ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGjP,EAAC,GAAGgP,aAAa,EAAEC,CAAC,EAAE,EACxClF,SAAS,CAACiF,aAAa,GAAGC,CAAC,CAAC,CAAC5D,cAAc,GACzCoD,cAAc,GACb,CAACjV,MAAM,CAAC4R,OAAM,CAAC,GAAGqD,cAAc,IAAIQ,CAAC,IAAKjP,EAAC,GAAGgP,aAAa,CAAC,CAAA;AACjEA,QAAAA,aAAa,GAAGhP,EAAC,CAAA;AACjByO,QAAAA,cAAc,GAAGjV,MAAM,CAAC4R,OAAM,CAAC,CAAA;AACjC,OAAA;AACF,KAAA;AACF,GAAA;AACA,EAAA,IAAI,CAACoD,mBAAmB,EAAEI,cAAc,EAAE,CAAA;AAE1C,EAAA,OAAO7E,SAAS,CAAA;AAClB;;ACxKA,IAAMmF,KAAK,GAAG,8BAA8B,CAACC,KAAK,CAAC,GAAG,CAAC,CAAA;AACvD,IAAMC,UAAU,GAAG,qCAAqC,CAACD,KAAK,CAAC,GAAG,CAAC,CAAA;AAC5D,SAASE,UAAUA,CACxBC,WAAkC,EAClCC,QAAiB,EACjB;AACA,EAAA,IAAM5H,MAAM,GAAG,IAAIgG,qBAAqB,EAAE,CAAA;AAC1C,EAAA,IAAI4B,QAAQ,EAAE;IACZ5H,MAAM,CAAC+B,IAAI,GAAG,MAAM,CAAA;IACpB/B,MAAM,CAAClE,QAAQ,GAAG,MAAM,CAAA;AAC1B,GAAA;EACA,IAAI,OAAO6L,WAAW,KAAK,QAAQ,IAAI,CAACjU,KAAK,CAACiU,WAAW,CAAC,EAAE;IAC1D3H,MAAM,CAAClE,QAAQ,GAAG6L,WAAW,CAAA;AAC/B,GAAC,MAAM,IAAIA,WAAW,KAAKtT,SAAS,EAAE;IACnCwT,MAAM,CAACC,IAAI,CAACH,WAAW,CAAC,CAA4B7E,OAAO,CAAC,UAACO,QAAQ,EAAK;MACzE,IACEsE,WAAW,CAACtE,QAAQ,CAAC,KAAKhP,SAAS,IACnCsT,WAAW,CAACtE,QAAQ,CAAC,KAAK,IAAI,IAC9BsE,WAAW,CAACtE,QAAQ,CAAC,KAAK,MAAM,EAChC;QACA,IAAI,OAAOrD,MAAM,CAACqD,QAAQ,CAAC,KAAK,QAAQ,IAAIA,QAAQ,KAAK,UAAU,EAAE;AACnE,UAAA,IACE,OAAOsE,WAAW,CAACtE,QAAQ,CAAC,KAAK,QAAQ,IACzC3P,KAAK,CAACiU,WAAW,CAACtE,QAAQ,CAAC,CAAC,EAC5B;AACA,YAAA,OAAA;AACF,WAAA;AACF,SAAA;AACA,QAAA,IACEA,QAAQ,KAAK,MAAM,IACnBkE,KAAK,CAAC7U,OAAO,CAACiV,WAAW,CAACtE,QAAQ,CAAC,CAAC,KAAK,CAAC,CAAC,EAC3C;AACA,UAAA,OAAA;AACF,SAAA;AACA,QAAA,IACEA,QAAQ,KAAK,WAAW,IACxBoE,UAAU,CAAC/U,OAAO,CAACiV,WAAW,CAACtE,QAAQ,CAAC,CAAC,KAAK,CAAC,CAAC,EAChD;AACA,UAAA,OAAA;AACF,SAAA;AACA;AACArD,QAAAA,MAAM,CAACqD,QAAQ,CAAC,GAAGsE,WAAW,CAACtE,QAAQ,CAAC,CAAA;AAC1C,OAAA;AACF,KAAC,CAAC,CAAA;AACJ,GAAA;AACA,EAAA,OAAOrD,MAAM,CAAA;AACf,CAAA;AAEO,SAAS+H,oBAAoBA,CAClCJ,WAAuD,EACvDC,QAAiB,EACjB;EACAD,WAAW,GAAGK,qBAAqB,CAACL,WAAW,aAAXA,WAAW,KAAA,KAAA,CAAA,GAAXA,WAAW,GAAI;AAAE7L,IAAAA,QAAQ,EAAE,MAAA;AAAO,GAAC,CAAC,CAAA;AACxE,EAAA,OAAO4L,UAAU,CAACC,WAAW,EAAEC,QAAQ,CAAC,CAAA;AAC1C,CAAA;AAEO,SAASI,qBAAqBA,CACnCL,WAA2C,EAC3C;AACA,EAAA,IAAI,OAAOA,WAAW,KAAK,QAAQ,EAAE;AACnC,IAAA,IAAIjU,KAAK,CAACiU,WAAW,CAAC,EAAE;AACtBA,MAAAA,WAAW,GAAG;AAAE7L,QAAAA,QAAQ,EAAE,MAAA;OAAQ,CAAA;AACpC,KAAC,MAAM;AACL6L,MAAAA,WAAW,GAAG;AAAE7L,QAAAA,QAAQ,EAAE6L,WAAAA;OAAa,CAAA;AACzC,KAAA;AACF,GAAA;AACA,EAAA,OAAOA,WAAW,CAAA;AACpB,CAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAaM,cAAc,gBAAA,YAAA;AAGzB;;AAcA,EAAA,SAAAA,eACExY,MAAuB,EACvB0W,WAAyD,EACzDwB,WAA4C,EAC5C;AAAA,IAAA,IAAA/X,KAAA,GAAA,IAAA,CAAA;AAAAC,IAAAA,eAAA,OAAAoY,cAAA,CAAA,CAAA;IAAA,IApBFzB,CAAAA,SAAS,GAAuB,SAAS,CAAA;IAAA,IACzC0B,CAAAA,kBAAkB,GAAgC,SAAS,CAAA;IAoBzD,IAAI,CAACzY,MAAM,GAAGA,MAAM,CAAA;IACpB,IAAI,CAACuQ,MAAM,GAAG+H,oBAAoB,CAACJ,WAAW,EAAE,KAAK,CAAC,CAAA;AACtD,IAAA,IAAI,CAAC3H,MAAM,CAACnP,MAAM,GAAG,IAAI,CAAA;IACzB,IAAI,CAACmP,MAAM,CAACS,cAAc,GAAGV,uBAAuB,CAAC,IAAI,CAACC,MAAM,CAAC,CAAA;AACjE,IAAA,IAAI,CAACA,MAAM,CAACjO,OAAO,GAAGuG,IAAI,CAACwN,GAAG,CAC5B,CAAC,EACD,IAAI,CAAC9F,MAAM,CAACY,KAAK,GAAG,IAAI,CAACZ,MAAM,CAACS,cAAc,GAAG,IAAI,CAACT,MAAM,CAACa,QAC/D,CAAC,CAAA;IAED,IAAI,CAACsH,mBAAmB,GAAG1B,kBAAkB,CAACN,WAAW,EAAE,IAAI,CAACnG,MAAM,CAAC,CAAA;AACvE,IAAA,IAAI,CAACuC,cAAc,GAAGJ,kBAAkB,CACtC,IAAI,CAACgG,mBAAmB,EACxB,IAAI,CAACnI,MAAM,EACX,IAAI,CAACvQ,MACP,CAAC,CAAA;;AAED;AACA,IAAA,IAAQ2Y,KAAK,GAAKnD,aAAO,CAACoD,UAAU,CAA5BD,KAAK,CAAA;IACb,IAAI,CAACE,cAAc,GAAGF,KAAK,GACvB,IAAIA,KAAK,CAAwB,IAAI,CAACpI,MAAM,EAAE;AAC5C5N,MAAAA,GAAG,EAAE,SAALA,GAAGA,CAAG3C,MAAM,EAAE8Y,IAAI,EAAK;QACrB,IAAIA,IAAI,KAAK,UAAU,EAAE;UACvB,OAAO9Y,MAAM,CAACqM,QAAQ,KAAK,MAAM,GAAG,CAAC,GAAGrM,MAAM,CAACqM,QAAQ,CAAA;AACzD,SAAA;QACA,IAAIyM,IAAI,KAAK,MAAM,EAAE;UACnB,OAAO9Y,MAAM,CAACsS,IAAI,KAAK,MAAM,GAAG,MAAM,GAAGtS,MAAM,CAACsS,IAAI,CAAA;AACtD,SAAA;QACA,IAAIwG,IAAI,KAAK,WAAW,EAAE;UACxB,OAAQ3Y,KAAI,CAAC2B,SAAS,IAAI3B,KAAI,CAAC2B,SAAS,CAAC7B,WAAW,IAAK,IAAI,CAAA;AAC/D,SAAA;QACA,IAAI6Y,IAAI,KAAK,kBAAkB,EAAE;AAC/B,UAAA,IAAI,CAAC3Y,KAAI,CAAC2B,SAAS,IAAI3B,KAAI,CAAC2B,SAAS,CAACgC,SAAS,KAAK,SAAS,EAAE;AAC7D,YAAA,OAAO,IAAI,CAAA;AACb,WAAA;AACA,UAAA,OAAO9D,MAAM,CAACkS,gBAAgB,IAAI,CAAC,CAAA;AACrC,SAAA;QACA,IAAI4G,IAAI,KAAK,UAAU,EAAE;AACvB,UAAA,IAAI,CAAC3Y,KAAI,CAAC2B,SAAS,IAAI3B,KAAI,CAAC2B,SAAS,CAACgC,SAAS,KAAK,SAAS,EAAE;AAC7D,YAAA,OAAO,IAAI,CAAA;AACb,WAAA;AACA,UAAA,OAAO9D,MAAM,CAACkN,QAAQ,IAAI,CAAC,CAAA;AAC7B,SAAA;QACA,OAAOlN,MAAM,CAAC8Y,IAAI,CAAC,CAAA;OACpB;AACD/U,MAAAA,GAAG,EAAE,SAALA,GAAGA,GAAQ;AACT,QAAA,OAAO,IAAI,CAAA;AACb,OAAA;AACF,KAAC,CAAC,GACF,IAAI,CAACwM,MAAM,CAAA;AACjB,GAAA;EAAC,OAAAvP,YAAA,CAAAwX,cAAA,EAAA,CAAA;IAAA9V,GAAA,EAAA,qBAAA;AAAA4B,IAAAA,KAAA,EAED,SAAAyU,mBAAmBA,GAAG;AACpB,MAAA,IAAI,CAACjG,cAAc,CACjB,IAAI,CAAC9S,MAAM,EACXoC,MAAM,CAAC,IAAI,CAAC4W,YAAY,CAC1B,CAAC,CAAA;AACH,KAAA;AAAC,GAAA,EAAA;IAAAtW,GAAA,EAAA,QAAA;AAAA4B,IAAAA,KAAA,EAED,SAAApC,MAAMA,CAAC+O,SAAwB,EAAW;MACxC,IAAIA,SAAS,KAAK,IAAI,EAAE;AACtB,QAAA,OAAO,KAAK,CAAA;AACd,OAAA;AACA,MAAA,IAAI,CAAC+H,YAAY,GAAG3G,0BAA0B,CAC5C,IAAI,CAAC9B,MAAM,CAACS,cAAc,EAC1BC,SAAS,EACT,IAAI,CAACV,MACP,CAAC,CAAA;AACD,MAAA,OAAO,IAAI,CAACyI,YAAY,KAAK,IAAI,CAAA;AACnC,KAAA;AAAC,GAAA,EAAA;IAAAtW,GAAA,EAAA,cAAA;AAAA4B,IAAAA,KAAA,EAED,SAAA2U,YAAYA,GAAuB;MACjC,OAAO,IAAI,CAACP,mBAAmB,CAAA;AACjC,KAAA;AAAC,GAAA,EAAA;IAAAhW,GAAA,EAAA,cAAA;AAAA4B,IAAAA,KAAA,EACD,SAAA4U,YAAYA,CAACvG,SAAuD,EAAQ;AAC1E,MAAA,IAAI,CAAC+F,mBAAmB,GAAG1B,kBAAkB,CAACrE,SAAS,CAAC,CAAA;AAC1D,KAAA;AACA;AACF;AACA;AAFE,GAAA,EAAA;IAAAjQ,GAAA,EAAA,mBAAA;AAAA4B,IAAAA,KAAA,EAGA,SAAAjC,iBAAiBA,GAAyB;MACxC,OAAO,IAAI,CAACwW,cAAc,CAAA;AAC5B,KAAA;AACA;AACF;AACA;AAFE,GAAA,EAAA;IAAAnW,GAAA,EAAA,WAAA;AAAA4B,IAAAA,KAAA,EAGA,SAAA6U,SAASA,GAAiB;MACxB,OAAO,IAAI,CAAC5I,MAAM,CAAA;AACpB,KAAA;AACA;AACF;AACA;AAFE,GAAA,EAAA;IAAA7N,GAAA,EAAA,cAAA;AAAA4B,IAAAA,KAAA,EAGA,SAAA8U,YAAYA,CAAC7I,MAA6B,EAAQ;AAAA,MAAA,IAAA7M,MAAA,GAAA,IAAA,CAAA;AAChD0U,MAAAA,MAAM,CAACC,IAAI,CAAC9H,MAAM,IAAI,EAAE,CAAC,CAAC8C,OAAO,CAAC,UAACgG,IAAI,EAAK;QAC1C3V,MAAI,CAAC6M,MAAM,CAAC8I,IAAI,CAAC,GAAG9I,MAAM,CAAC8I,IAAI,CAAC,CAAA;AAClC,OAAC,CAAC,CAAA;AACJ,KAAA;AAAC,GAAA,CAAA,CAAA,CAAA;AAAA,CAAA;;ACxMI,SAASC,iBAAiBA,CAC/BC,aAAyB,EACzBC,cAA0B,EAC1B;AACA,EAAA,OAAOpX,MAAM,CAACmX,aAAa,CAACxX,EAAE,CAAC,GAAGK,MAAM,CAACoX,cAAc,CAACzX,EAAE,CAAC,CAAA;AAC7D,CAAA;;AAEA;AACA;AACA;AACA,IAAa0X,iBAAiB,gBAAA,YAAA;EAyB5B,SAAAA,iBAAAA,CAAoBC,QAAmB,EAAE;AAAA,IAAA,IAAAvZ,KAAA,GAAA,IAAA,CAAA;AAAAC,IAAAA,eAAA,OAAAqZ,iBAAA,CAAA,CAAA;AAxBzC;AACF;AACA;IAFE,IAGAzU,CAAAA,UAAU,GAAgB,EAAE,CAAA;IAAA,IAEpB2U,CAAAA,OAAO,GAAG,KAAK,CAAA;IAAA,IAEfC,CAAAA,eAAe,GAAG,KAAK,CAAA;IAAA,IAEvBC,CAAAA,qBAAqB,GAAG,KAAK,CAAA;IAAA,IAErC7W,CAAAA,sBAAsB,GAAgB,EAAE,CAAA;IAAA,IAEhC8W,CAAAA,MAAM,GAAG,KAAK,CAAA;IAAA,IAEdC,CAAAA,cAAc,GAA8B,EAAE,CAAA;IAAA,IAEtD9Z,CAAAA,WAAW,GAAkB,IAAI,CAAA;IAAA,IAEzB+Z,CAAAA,KAAK,GAAG,CAAC,CAAA;IAAA,IACTC,CAAAA,YAAY,GAAoC,EAAE,CAAA;AAAA,IAAA,IAAA,CAsGlDC,qBAAqB,GAAG,UAAC7Q,CAAS,EAAK;MAC7ClJ,KAAI,CAACF,WAAW,GAAGoJ,CAAC,CAAA;MACpBlJ,KAAI,CAACga,iBAAiB,EAAE,CAAA;AACxB,MAAA,IAAIha,KAAI,CAAC6E,UAAU,CAACwG,MAAM,KAAK,CAAC,EAAE;QAChCrL,KAAI,CAACyZ,eAAe,GAAG,KAAK,CAAA;AAC9B,OAAC,MAAM;AACLzZ,QAAAA,KAAI,CAACia,qBAAqB,CAACja,KAAI,CAAC+Z,qBAAqB,CAAC,CAAA;AACxD,OAAA;KACD,CAAA;AAAA,IAAA,IAAA,CAEOG,mBAAmB,GAAG,UAAChR,CAAS,EAAK;AAC3C,MAAA,IAAMiR,UAAU,GAAGna,KAAI,CAAC8Z,YAAY,CAAA;MACpC9Z,KAAI,CAAC8Z,YAAY,GAAG,EAAE,CAAA;AACtB,MAAA,IAAI5Q,CAAC,GAAGjH,MAAM,CAACjC,KAAI,CAACF,WAAW,CAAC,EAAEoJ,CAAC,GAAGjH,MAAM,CAACjC,KAAI,CAACF,WAAW,CAAC,CAAA;AAC9DE,MAAAA,KAAI,CAAC6E,UAAU,CAACuP,IAAI,CAAC+E,iBAAiB,CAAC,CAAA;AACvCnZ,MAAAA,KAAI,CAAC6E,UAAU,GAAG7E,KAAI,CAAC8F,IAAI,CAACoD,CAAC,EAAE,IAAI,EAAElJ,KAAI,CAAC6E,UAAU,CAAC,CAAC,CAAC,CAAC,CAAA;AACxDsV,MAAAA,UAAU,CAACjH,OAAO,CAAC,UAACkH,KAAK,EAAK;AAC5BA,QAAAA,KAAK,CAAC,CAAC,CAAC,CAAClR,CAAC,CAAC,CAAA;AACb,OAAC,CAAC,CAAA;MACFlJ,KAAI,CAACqa,mBAAmB,EAAE,CAAA;KAC3B,CAAA;IAAA,IAtHmBd,CAAAA,QAAmB,GAAnBA,QAAmB,CAAA;AAAG,GAAA;EAAC,OAAA1Y,YAAA,CAAAyY,iBAAA,EAAA,CAAA;IAAA/W,GAAA,EAAA,eAAA;AAAA4B,IAAAA,KAAA,EAE3C,SAAAsB,aAAaA,GAAG;MACd,IAAI,CAACuU,iBAAiB,EAAE,CAAA;AACxB,MAAA,OAAO,IAAI,CAACnV,UAAU,CAAC+K,KAAK,EAAE,CAAA;AAChC,KAAA;AAAC,GAAA,EAAA;IAAArN,GAAA,EAAA,WAAA;AAAA4B,IAAAA,KAAA,EAED,SAAAmW,SAASA,GAAG;MACV,OAAO,IAAI,CAACX,MAAM,CAAA;AACpB,KAAA;AAAC,GAAA,EAAA;IAAApX,GAAA,EAAA,MAAA;IAAA4B,KAAA,EAED,SAAAQ,IAAIA,CACF9E,MAAgB,EAChB2S,SAAuD,EACvDlM,OAA2C,EAChC;MACX,IAAMrF,MAAM,GAAG,IAAIoX,cAAc,CAACxY,MAAM,EAAE2S,SAAS,EAAElM,OAAO,CAAC,CAAA;MAC7D,IAAM3E,SAAS,GAAG,IAAIX,SAAS,CAACC,MAAM,EAAE,IAAI,CAAC,CAAA;AAC7C,MAAA,IAAI,CAAC4D,UAAU,CAAC9B,IAAI,CAACpB,SAAS,CAAC,CAAA;MAC/B,IAAI,CAAC4Y,4BAA4B,EAAE,CAAA;MACnC5Y,SAAS,CAACW,cAAc,EAAE,CAAA;MAC1BX,SAAS,CAACgD,IAAI,EAAE,CAAA;MAChBhD,SAAS,CAACW,cAAc,EAAE,CAAA;AAC1B,MAAA,OAAOX,SAAS,CAAA;AAClB,KAAA;;AAEA;AACA;AACA;AACA;AAAA,GAAA,EAAA;IAAAY,GAAA,EAAA,uBAAA;AAAA4B,IAAAA,KAAA,EACA,SAAAD,qBAAqBA,CAACvC,SAAoB,EAAE;AAAA,MAAA,IAAA4B,MAAA,GAAA,IAAA,CAAA;MAC1C,IAAI,IAAI,CAACoW,MAAM,EAAE;AACf,QAAA,OAAA;AACF,OAAA;AACA;MACAhY,SAAS,CAAC+D,UAAU,EAAE,CAAA;AACtB,MAAA,IAAMb,UAAU,GAAGlD,SAAS,CAAC4D,gBAAgB,EAAE,CAAA;AAC/CV,MAAAA,UAAU,CAACuP,IAAI,CAAC+E,iBAAiB,CAAC,CAAA;;AAElC;MACA,IAAMqB,kBAAkB,GAAG,IAAI,CAAC1U,IAAI,CAClC7D,MAAM,CAAC,IAAI,CAACnC,WAAW,CAAC,EACxB,KAAK,EACL+E,UAAU,CAAC+K,KAAK,EAClB,CAAC,CAAC,CAAC,CAAC,CAAA;AACJ4K,MAAAA,kBAAkB,CAACtH,OAAO,CAAC,UAACvR,SAAS,EAAK;QACxC,IAAMiE,KAAK,GAAGrC,MAAI,CAACsB,UAAU,CAAC/B,OAAO,CAACnB,SAAS,CAAC,CAAA;AAChD,QAAA,IAAIiE,KAAK,KAAK,CAAC,CAAC,EAAE;UAChBrC,MAAI,CAACsB,UAAU,CAACgB,MAAM,CAACD,KAAK,EAAE,CAAC,CAAC,CAAA;AAClC,SAAA;AACF,OAAC,CAAC,CAAA;MACF,IAAI,CAACyU,mBAAmB,EAAE,CAAA;AAC5B,KAAA;AAAC,GAAA,EAAA;IAAA9X,GAAA,EAAA,SAAA;AAAA4B,IAAAA,KAAA,EAED,SAAAJ,OAAOA,GAAG;AACR,MAAA,IAAI,CAAC,IAAI,CAACyV,OAAO,EAAE;QACjB,IAAI,CAACA,OAAO,GAAG,IAAI,CAAA;AACnB,QAAA,IAAI,CAACS,qBAAqB,CAAC,YAAM,EAAE,CAAC,CAAA;QACpC,IAAI,CAACP,qBAAqB,GAAG,IAAI,CAAA;AACnC,OAAA;MACA,OAAO,IAAI,CAACA,qBAAqB,CAAA;AACnC,KAAA;AAAC,GAAA,EAAA;IAAAnX,GAAA,EAAA,SAAA;AAAA4B,IAAAA,KAAA,EAED,SAAAsW,OAAOA,GAAG;MACR,IAAI,CAAClB,QAAQ,CAACmB,WAAW,CAACC,oBAAoB,CAAC,IAAI,CAACC,OAAO,CAAC,CAAA;AAC9D,KAAA;AAAC,GAAA,EAAA;IAAArY,GAAA,EAAA,qBAAA;AAAA4B,IAAAA,KAAA,EAED,SAAAkW,mBAAmBA,GAAG;AACpB,MAAA,IAAI,CAACT,cAAc,CAAC1G,OAAO,CAAC,UAACjS,MAAM,EAAK;AACtCA,QAAAA,MAAM,aAANA,MAAM,KAAA,KAAA,CAAA,IAANA,MAAM,CAAE2X,mBAAmB,EAAE,CAAA;AAC/B,OAAC,CAAC,CAAA;MACF,IAAI,CAACgB,cAAc,GAAG,EAAE,CAAA;AAC1B,KAAA;AAAC,GAAA,EAAA;IAAArX,GAAA,EAAA,0BAAA;AAAA4B,IAAAA,KAAA,EAED,SAAQ0W,wBAAwBA,GAAG;MACjC,IAAI,CAAChY,sBAAsB,GAAG,IAAI,CAACA,sBAAsB,CAACiQ,MAAM,CAC9D,UAACnR,SAAS,EAAK;AACb,QAAA,OAAOA,SAAS,CAACW,cAAc,EAAE,CAAA;AACnC,OACF,CAAC,CAAA;AACH,KAAA;AAAC,GAAA,EAAA;IAAAC,GAAA,EAAA,mBAAA;AAAA4B,IAAAA,KAAA,EAED,SAAQ6V,iBAAiBA,GAAG;MAC1B,IAAI,CAACa,wBAAwB,EAAE,CAAA;MAC/B,IAAI,CAAChW,UAAU,GAAG,IAAI,CAACA,UAAU,CAACiO,MAAM,CAAC,UAACnR,SAAS,EAAK;QACtD,OACEA,SAAS,CAACgC,SAAS,KAAK,UAAU,IAAIhC,SAAS,CAACgC,SAAS,KAAK,MAAM,CAAA;AAExE,OAAC,CAAC,CAAA;AACJ,KAAA;AAAC,GAAA,EAAA;IAAApB,GAAA,EAAA,8BAAA;AAAA4B,IAAAA,KAAA,EAED,SAAQoW,4BAA4BA,GAAG;AACrC,MAAA,IAAI,CAAC,IAAI,CAACd,eAAe,EAAE;QACzB,IAAI,CAACA,eAAe,GAAG,IAAI,CAAA;AAC3B,QAAA,IAAI,CAACQ,qBAAqB,CAAC,IAAI,CAACF,qBAAqB,CAAC,CAAA;AACxD,OAAA;AACF,KAAA;AAAC,GAAA,EAAA;IAAAxX,GAAA,EAAA,KAAA;AAAA4B,IAAAA,KAAA,EAwBD,SAAQ2W,GAAGA,CAACnG,CAAsB,EAAE;AAClC,MAAA,IAAM/S,EAAE,GAAG,IAAI,CAACiY,KAAK,EAAE,CAAA;AACvB,MAAA,IAAI,IAAI,CAACC,YAAY,CAACzO,MAAM,KAAK,CAAC,EAAE;AAClC,QAAA,IAAI,CAACuP,OAAO,GAAG,IAAI,CAACrB,QAAQ,CAACmB,WAAW,CAACT,qBAAqB,CAC5D,IAAI,CAACC,mBACP,CAAC,CAAA;AACH,OAAA;MACA,IAAI,CAACJ,YAAY,CAAC/W,IAAI,CAAC,CAACnB,EAAE,EAAE+S,CAAC,CAAC,CAAC,CAAA;AAC/B,MAAA,OAAO/S,EAAE,CAAA;AACX,KAAA;AAAC,GAAA,EAAA;IAAAW,GAAA,EAAA,uBAAA;AAAA4B,IAAAA,KAAA,EAED,SAAQ8V,qBAAqBA,CAACtF,CAAuB,EAAE;AAAA,MAAA,IAAA1P,MAAA,GAAA,IAAA,CAAA;AACrD,MAAA,OAAO,IAAI,CAAC6V,GAAG,CAAC,UAACrM,CAAS,EAAK;QAC7BxJ,MAAI,CAAC4V,wBAAwB,EAAE,CAAA;QAC/BlG,CAAC,CAAClG,CAAC,CAAC,CAAA;QACJxJ,MAAI,CAAC4V,wBAAwB,EAAE,CAAA;AACjC,OAAC,CAAC,CAAA;AACJ,KAAA;AAAC,GAAA,EAAA;IAAAtY,GAAA,EAAA,MAAA;IAAA4B,KAAA,EAED,SAAA2B,IAAIA,CAACoD,CAAS,EAAEnD,gBAAyB,EAAEgV,kBAAgC,EAAE;AAAA,MAAA,IAAAjU,MAAA,GAAA,IAAA;QAAAkU,oBAAA;QAAAC,qBAAA,CAAA;MAC3E,IAAI,CAACtB,MAAM,GAAG,IAAI,CAAA;MAClB,IAAI,CAACD,qBAAqB,GAAG,KAAK,CAAA;MAElC,IAAI,CAAC5Z,WAAW,GAAGoJ,CAAC,CAAA;MACpB,IAAI,CAACsQ,OAAO,GAAG,KAAK,CAAA;MAEpB,IAAM0B,gBAA2C,GAAG,EAAE,CAAA;MACtD,IAAMC,iBAA4C,GAAG,EAAE,CAAA;MACvD,IAAMC,gBAA6B,GAAG,EAAE,CAAA;MACxC,IAAMZ,kBAA+B,GAAG,EAAE,CAAA;AAEzCO,MAAAA,kBAAkB,CAA4B7H,OAAO,CAAC,UAACvR,SAAS,EAAK;AACpEA,QAAAA,SAAS,CAACmE,IAAI,CAACoD,CAAC,EAAEnD,gBAAgB,CAAC,CAAA;AAEnC,QAAA,IAAI,CAACpE,SAAS,CAACG,SAAS,EAAE;AACxBoZ,UAAAA,gBAAgB,CAACnY,IAAI,CAACpB,SAAS,CAACV,MAAM,CAAC,CAAA;UACvCU,SAAS,CAACgE,YAAY,EAAE,CAAA;AAC1B,SAAC,MAAM;AACLwV,UAAAA,iBAAiB,CAACpY,IAAI,CAACpB,SAAS,CAACV,MAAM,CAAC,CAAA;UACxCU,SAAS,CAAC+D,UAAU,EAAE,CAAA;AACxB,SAAA;QAEA,IAAI/D,SAAS,CAAC0Z,UAAU,EAAEvU,MAAI,CAAC0S,OAAO,GAAG,IAAI,CAAA;QAE7C,IAAM8B,KAAK,GAAG3Z,SAAS,CAACG,SAAS,IAAIH,SAAS,CAAC0Z,UAAU,CAAA;QACzD1Z,SAAS,CAACD,WAAW,GAAG4Z,KAAK,CAAA;AAC7B,QAAA,IAAIA,KAAK,EAAE;AACTF,UAAAA,gBAAgB,CAACrY,IAAI,CAACpB,SAAS,CAAC,CAAA;AAClC,SAAC,MAAM;AACL6Y,UAAAA,kBAAkB,CAACzX,IAAI,CAACpB,SAAS,CAAC,CAAA;AACpC,SAAA;AACF,OAAC,CAAC,CAAA;AAEF,MAAA,CAAAqZ,oBAAA,GAAA,IAAI,CAACpB,cAAc,EAAC7W,IAAI,CAAA2M,KAAA,CAAAsL,oBAAA,EAAIE,gBAAgB,CAAC,CAAA;AAC7C,MAAA,CAAAD,qBAAA,GAAA,IAAI,CAACrB,cAAc,EAAC7W,IAAI,CAAA2M,KAAA,CAAAuL,qBAAA,EAAIE,iBAAiB,CAAC,CAAA;MAE9C,IAAI,IAAI,CAAC3B,OAAO,EAAE,IAAI,CAACS,qBAAqB,CAAC,YAAM,EAAE,CAAC,CAAA;MAEtD,IAAI,CAACN,MAAM,GAAG,KAAK,CAAA;AACnB,MAAA,OAAO,CAACyB,gBAAgB,EAAEZ,kBAAkB,CAAC,CAAA;AAC/C,KAAA;AAAC,GAAA,CAAA,CAAA,CAAA;AAAA,CAAA;;ACzNHnF,aAAO,CAACkG,cAAc,GAAGjM,mBAAmB,CAAA;AAC5C+F,aAAO,CAACiE,iBAAiB,GAAGA,iBAAiB;;ACK7C;AACA;AACA;AACakC,IAAAA,cAAc,0BAAAC,OAAA,EAAA;AAAA,EAAA,SAAAD,cAAA,GAAA;AAAA,IAAA,IAAAxb,KAAA,CAAA;AAAAC,IAAAA,eAAA,OAAAub,cAAA,CAAA,CAAA;AAAA,IAAA,KAAA,IAAAE,IAAA,GAAAtQ,SAAA,CAAAC,MAAA,EAAAsQ,IAAA,GAAAvS,IAAAA,KAAA,CAAAsS,IAAA,GAAAE,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAF,IAAA,EAAAE,IAAA,EAAA,EAAA;AAAAD,MAAAA,IAAA,CAAAC,IAAA,CAAAxQ,GAAAA,SAAA,CAAAwQ,IAAA,CAAA,CAAA;AAAA,KAAA;AAAA5b,IAAAA,KAAA,GAAAE,UAAA,CAAA,IAAA,EAAAsb,cAAA,EAAA3Z,EAAAA,CAAAA,MAAA,CAAA8Z,IAAA,CAAA,CAAA,CAAA;AACzB;AACF;AACA;IAFE3b,KAAA,CAGQ6b,SAAS,GAAe,EAAE,CAAA;AAAA,IAAA,OAAA7b,KAAA,CAAA;AAAA,GAAA;EAAAY,SAAA,CAAA4a,cAAA,EAAAC,OAAA,CAAA,CAAA;EAAA,OAAA5a,YAAA,CAAA2a,cAAA,EAAA,CAAA;IAAAjZ,GAAA,EAAA,QAAA;IAAA4B,KAAA;AAGlC;AACF;AACA;AACA;AACA;AACA;AACE,IAAA,SAAA2X,MAAMA,CAACC,OAAe,EAAEC,SAAiB,EAAEC,IAAY,EAAE;AACvD,MAAA,IAAI,CAACC,YAAY,GAAGC,cAAQ,CAACH,SAAS,CAAC,CAAA;AACvC,MAAA,IAAI,CAACI,UAAU,GAAGD,cAAQ,CAACJ,OAAO,CAAC,CAAA;AACnC,MAAA,IAAI,CAACM,OAAO,GAAGF,cAAQ,CAACF,IAAI,CAAC,CAAA;AAC7B,MAAA,IAAI,CAACD,SAAS,IAAI,IAAI,CAACE,YAAY,CAAA;AACnC,MAAA,IAAI,CAACH,OAAO,IAAI,IAAI,CAACK,UAAU,CAAA;AAC/B,MAAA,IAAI,CAACH,IAAI,IAAI,IAAI,CAACI,OAAO,CAAA;AAEzB,MAAA,IAAI,IAAI,CAAClc,IAAI,KAAKmc,gBAAU,CAACC,SAAS,EAAE;AACtC,QAAA,IAAMC,IAAI,GAAGC,aAAI,CAACC,YAAY,CAC5BD,aAAI,CAACE,MAAM,EAAE,EACb,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACTC,aAAO,CAAC,CAAC,IAAI,CAACC,WAAW,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,IAAI,CAACX,YAAY,CACzD,CAAC,CAAA;AACD,QAAA,IAAMY,IAAI,GAAGL,aAAI,CAACC,YAAY,CAC5BD,aAAI,CAACE,MAAM,EAAE,EACb,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACTC,aAAO,CAAC,CAAC,IAAI,CAACC,WAAW,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,IAAI,CAACT,UAAU,CACvD,CAAC,CAAA;QAED,IAAMW,IAAI,GAAGN,aAAI,CAACC,YAAY,CAC5BD,aAAI,CAACE,MAAM,EAAE,EACb,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACTC,aAAO,CAAC,IAAI,CAACP,OAAO,CACtB,CAAC,CAAA;AACD,QAAA,IAAIW,IAAI,GAAGP,aAAI,CAACQ,QAAQ,CAACR,aAAI,CAACE,MAAM,EAAE,EAAEG,IAAI,EAAEN,IAAI,CAAC,CAAA;AACnDQ,QAAAA,IAAI,GAAGP,aAAI,CAACQ,QAAQ,CAACR,aAAI,CAACE,MAAM,EAAE,EAAEK,IAAI,EAAED,IAAI,CAAC,CAAA;AAC/C,QAAA,IAAMG,SAAS,GAAGC,aAAI,CAACC,QAAQ,CAACD,aAAI,CAACR,MAAM,EAAE,EAAEK,IAAI,CAAC,CAAA;QACpDG,aAAI,CAACE,SAAS,CAAC,IAAI,CAACC,MAAM,EAAE,IAAI,CAACA,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAACC,QAAQ,CAAC,CAAC,CAAA;AAChEJ,QAAAA,aAAI,CAACF,QAAQ,CAAC,IAAI,CAACK,MAAM,EAAE,IAAI,CAACA,MAAM,EAAEJ,SAAS,CAAC,CAAA;QAClDC,aAAI,CAACE,SAAS,CAAC,IAAI,CAACC,MAAM,EAAE,IAAI,CAACA,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAACC,QAAQ,CAAC,CAAC,CAAA;AACjE,OAAC,MAAM;QACL,IAAI7U,IAAI,CAACC,GAAG,CAAC,IAAI,CAACqT,SAAS,CAAC,GAAG,EAAE,EAAE;AACjC,UAAA,OAAO,IAAI,CAAA;AACb,SAAA;QACA,IAAI,CAACwB,aAAa,EAAE,CAAA;AACtB,OAAA;MAEA,IAAI,CAACC,QAAQ,EAAE,CAAA;AACf,MAAA,IACE,IAAI,CAACtd,IAAI,KAAKmc,gBAAU,CAACoB,QAAQ,IACjC,IAAI,CAACvd,IAAI,KAAKmc,gBAAU,CAACC,SAAS,EAClC;QACA,IAAI,CAACoB,YAAY,EAAE,CAAA;OACpB,MAAM,IAAI,IAAI,CAACxd,IAAI,KAAKmc,gBAAU,CAACsB,QAAQ,EAAE;QAC5C,IAAI,CAACC,cAAc,EAAE,CAAA;AACvB,OAAA;MAEA,IAAI,CAACC,OAAO,EAAE,CAAA;AACd,MAAA,OAAO,IAAI,CAAA;AACb,KAAA;;AAEA;AACF;AACA;AAFE,GAAA,EAAA;IAAAvb,GAAA,EAAA,KAAA;AAAA4B,IAAAA,KAAA,EAGA,SAAA4Z,GAAGA,CAACC,EAAU,EAAEC,EAAU,EAAE;MAC1B,IAAMC,MAAM,GAAGC,gBAAU,CAACH,EAAE,EAAEC,EAAE,EAAE,CAAC,CAAC,CAAA;MACpC,IAAMlP,GAAG,GAAGqP,aAAI,CAACC,KAAK,CAAC,IAAI,CAACC,QAAQ,CAAC,CAAA;MAErCF,aAAI,CAACG,GAAG,CAACxP,GAAG,EAAEA,GAAG,EAAEqP,aAAI,CAACI,KAAK,CAACJ,aAAI,CAACzB,MAAM,EAAE,EAAE,IAAI,CAAC3H,KAAK,EAAEkJ,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;MACpEE,aAAI,CAACG,GAAG,CAACxP,GAAG,EAAEA,GAAG,EAAEqP,aAAI,CAACI,KAAK,CAACJ,aAAI,CAACzB,MAAM,EAAE,EAAE,IAAI,CAAC8B,EAAE,EAAEP,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;AAEjE,MAAA,IAAI,CAACQ,YAAY,CAAC3P,GAAG,CAAC,CAAA;MAEtB,IAAI,CAAC4P,aAAa,EAAE,CAAA;AAEpB,MAAA,OAAO,IAAI,CAAA;AACb,KAAA;;AAEA;AACF;AACA;AAFE,GAAA,EAAA;IAAApc,GAAA,EAAA,OAAA;AAAA4B,IAAAA,KAAA,EAGA,SAAAya,KAAKA,CAACza,KAAa,EAAE;AACnB,MAAA,IAAM0a,CAAC,GAAG,IAAI,CAACC,OAAO,CAAA;MACtB,IAAM/P,GAAG,GAAGqP,aAAI,CAACC,KAAK,CAAC,IAAI,CAACC,QAAQ,CAAC,CAAA;AACrC,MAAA,IAAIzP,IAAI,GAAG1K,KAAK,GAAG,IAAI,CAAC4a,YAAY,CAAA;MACpC,IAAMC,eAAe,GAAG,IAAI,CAACzB,QAAQ,GAAGpZ,KAAK,GAAG,IAAI,CAAC4a,YAAY,CAAA;;AAEjE;MACAlQ,IAAI,GACFnG,IAAI,CAACwN,GAAG,CAACxN,IAAI,CAACqI,GAAG,CAACiO,eAAe,EAAE,IAAI,CAACC,WAAW,CAAC,EAAE,IAAI,CAACC,WAAW,CAAC,GACvE,IAAI,CAAC3B,QAAQ,CAAA;MACfxO,GAAG,CAAC,CAAC,CAAC,IAAIF,IAAI,GAAGgQ,CAAC,CAAC,CAAC,CAAC,CAAA;MACrB9P,GAAG,CAAC,CAAC,CAAC,IAAIF,IAAI,GAAGgQ,CAAC,CAAC,CAAC,CAAC,CAAA;MACrB9P,GAAG,CAAC,CAAC,CAAC,IAAIF,IAAI,GAAGgQ,CAAC,CAAC,CAAC,CAAC,CAAA;AAErB,MAAA,IAAI,CAACH,YAAY,CAAC3P,GAAG,CAAC,CAAA;AACtB,MAAA,IACE,IAAI,CAAC5O,IAAI,KAAKmc,gBAAU,CAACoB,QAAQ,IACjC,IAAI,CAACvd,IAAI,KAAKmc,gBAAU,CAACC,SAAS,EAClC;AACA;QACA,IAAI,CAAC4C,YAAY,EAAE,CAAA;OACpB,MAAM,IAAI,IAAI,CAAChf,IAAI,KAAKmc,gBAAU,CAACsB,QAAQ,EAAE;AAC5C;AACAQ,QAAAA,aAAI,CAACG,GAAG,CAAC,IAAI,CAACa,UAAU,EAAErQ,GAAG,EAAE,IAAI,CAACsQ,cAAc,CAAC,CAAA;AACrD,OAAA;MAEA,IAAI,CAACV,aAAa,EAAE,CAAA;AACpB,MAAA,OAAO,IAAI,CAAA;AACb,KAAA;AAAC,GAAA,EAAA;IAAApc,GAAA,EAAA,yBAAA;AAAA4B,IAAAA,KAAA,EAED,SAAAmb,uBAAuBA,GAAG;AACxB,MAAA,IAAI,IAAI,CAACC,mBAAmB,KAAK9a,SAAS,EAAE;QAC1C,IAAI,CAAC+a,MAAM,CAAC7E,oBAAoB,CAAC,IAAI,CAAC4E,mBAAmB,CAAC,CAAA;AAC5D,OAAA;AACF,KAAA;AAAC,GAAA,EAAA;IAAAhd,GAAA,EAAA,gBAAA;AAAA4B,IAAAA,KAAA,EAED,SAAAsb,cAAcA,CACZvG,IAAY,EAOF;AAAA,MAAA,IAAAwG,UAAA,EAAAC,WAAA,EAAAC,YAAA,EAAAC,aAAA,CAAA;AAAA,MAAA,IANV1U,MAKE,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA3G,SAAA,GAAA2G,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE,CAAA;AAEP,MAAA,IAAA0U,gBAAA,GAKI3U,MAAM,CAJRmT,QAAQ;AAARA,QAAAA,QAAQ,GAAAwB,gBAAA,KAAA,KAAA,CAAA,GAAG,IAAI,CAACxB,QAAQ,GAAAwB,gBAAA;QAAAC,kBAAA,GAItB5U,MAAM,CAHRiU,UAAU;AAAVA,QAAAA,UAAU,GAAAW,kBAAA,KAAA,KAAA,CAAA,GAAG,IAAI,CAACX,UAAU,GAAAW,kBAAA;QAC5B9D,IAAI,GAEF9Q,MAAM,CAFR8Q,IAAI;QACJ+D,IAAI,GACF7U,MAAM,CADR6U,IAAI,CAAA;AAGN,MAAA,IAAMC,MAAM,GAAG,IAAI5K,aAAO,CAAC6K,kBAAkB,EAAoB,CAAA;MACjED,MAAM,CAACE,OAAO,CAAC,IAAI,CAAChgB,IAAI,EAAEsE,SAAS,CAAC,CAAA;AACpCwb,MAAAA,MAAM,CAACG,WAAW,CAChB9B,QAAQ,CAAC,CAAC,CAAC,EAAAoB,CAAAA,UAAA,GACXpB,QAAQ,CAAC,CAAC,CAAC,MAAA,IAAA,IAAAoB,UAAA,KAAAA,KAAAA,CAAAA,GAAAA,UAAA,GAAI,IAAI,CAACpB,QAAQ,CAAC,CAAC,CAAC,EAAAqB,CAAAA,WAAA,GAC/BrB,QAAQ,CAAC,CAAC,CAAC,MAAA,IAAA,IAAAqB,WAAA,KAAAA,KAAAA,CAAAA,GAAAA,WAAA,GAAI,IAAI,CAACrB,QAAQ,CAAC,CAAC,CAChC,CAAC,CAAA;AACD2B,MAAAA,MAAM,CAACI,aAAa,CAClBjB,UAAU,CAAC,CAAC,CAAC,EAAAQ,CAAAA,YAAA,GACbR,UAAU,CAAC,CAAC,CAAC,MAAA,IAAA,IAAAQ,YAAA,KAAAA,KAAAA,CAAAA,GAAAA,YAAA,GAAI,IAAI,CAACR,UAAU,CAAC,CAAC,CAAC,EAAAS,CAAAA,aAAA,GACnCT,UAAU,CAAC,CAAC,CAAC,MAAA,IAAA,IAAAS,aAAA,KAAAA,KAAAA,CAAAA,GAAAA,aAAA,GAAI,IAAI,CAACT,UAAU,CAAC,CAAC,CACpC,CAAC,CAAA;AACDa,MAAAA,MAAM,CAACK,OAAO,CAACrE,IAAI,KAAJA,IAAAA,IAAAA,IAAI,KAAJA,KAAAA,CAAAA,GAAAA,IAAI,GAAI,IAAI,CAACA,IAAI,CAAC,CAAA;AACjCgE,MAAAA,MAAM,CAACM,OAAO,CAACP,IAAI,KAAJA,IAAAA,IAAAA,IAAI,KAAJA,KAAAA,CAAAA,GAAAA,IAAI,GAAI,IAAI,CAACA,IAAI,CAAC,CAAA;AAEjC,MAAA,IAAMQ,QAAkB,GAAG;AACzBtH,QAAAA,IAAI,EAAJA,IAAI;QACJoE,MAAM,EAAEH,aAAI,CAACkB,KAAK,CAAC4B,MAAM,CAACQ,iBAAiB,EAAE,CAAC;QAC9CzL,KAAK,EAAEoJ,aAAI,CAACC,KAAK,CAAC4B,MAAM,CAACjL,KAAK,CAAC;QAC/ByJ,EAAE,EAAEL,aAAI,CAACC,KAAK,CAAC4B,MAAM,CAACxB,EAAE,CAAC;QACzBK,OAAO,EAAEV,aAAI,CAACC,KAAK,CAAC4B,MAAM,CAACnB,OAAO,CAAC;QACnCR,QAAQ,EAAEF,aAAI,CAACC,KAAK,CAAC4B,MAAM,CAACS,WAAW,EAAE,CAAC;QAC1CtB,UAAU,EAAEhB,aAAI,CAACC,KAAK,CAAC4B,MAAM,CAACU,aAAa,EAAE,CAAC;QAC9CtB,cAAc,EAAEjB,aAAI,CAACC,KAAK,CAAC4B,MAAM,CAACW,iBAAiB,EAAE,CAAC;AACtDrD,QAAAA,QAAQ,EAAE0C,MAAM,CAACY,WAAW,EAAE;AAC9B9B,QAAAA,YAAY,EAAEkB,MAAM,CAACa,eAAe,EAAE;AACtC/E,QAAAA,OAAO,EAAEkE,MAAM,CAACc,UAAU,EAAE;AAC5B/E,QAAAA,SAAS,EAAEiE,MAAM,CAACe,YAAY,EAAE;AAChC/E,QAAAA,IAAI,EAAEgE,MAAM,CAACgB,OAAO,EAAE;QACtB7E,UAAU,EAAE6D,MAAM,CAAC7D,UAAU;QAC7BF,YAAY,EAAE+D,MAAM,CAAC/D,YAAY;QACjCG,OAAO,EAAE4D,MAAM,CAAC5D,OAAO;AACvB2D,QAAAA,IAAI,EAAEC,MAAM,CAACiB,OAAO,EAAC;OACtB,CAAA;AAED,MAAA,IAAI,CAACrF,SAAS,CAAC9Y,IAAI,CAACyd,QAAQ,CAAC,CAAA;AAC7B,MAAA,OAAOA,QAAQ,CAAA;AACjB,KAAA;AAAC,GAAA,EAAA;IAAAje,GAAA,EAAA,cAAA;AAAA4B,IAAAA,KAAA,EAED,SAAAgd,YAAYA,CACVjI,IAAuB,EAUvB;AAAA,MAAA,IAAA3V,MAAA,GAAA,IAAA,CAAA;AAAA,MAAA,IATA+C,OAQM,GAAA8E,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA3G,SAAA,GAAA2G,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE,CAAA;AAEX,MAAA,IAAMoV,QAAQ,GAAGY,aAAQ,CAAClI,IAAI,CAAC,GAC3B,IAAI,CAAC2C,SAAS,CAACwF,IAAI,CAAC,UAACC,CAAC,EAAA;AAAA,QAAA,OAAKA,CAAC,CAACpI,IAAI,KAAKA,IAAI,CAAA;AAAA,OAAA,CAAC,GAC3CA,IAAI,CAAA;AACR,MAAA,IAAIsH,QAAQ,EAAE;AACZ,QAAA,IAAAtT,IAAA,GAMI4H,aAAQ,CAACxO,OAAO,CAAC,GAAG;AAAE4F,YAAAA,QAAQ,EAAE5F,OAAAA;AAAQ,WAAC,GAAGA,OAAO;UAAAib,WAAA,GAAArU,IAAA,CALrD6G,MAAM;AAANA,UAAAA,MAAM,GAAAwN,WAAA,KAAG,KAAA,CAAA,GAAA,QAAQ,GAAAA,WAAA;UAAAC,aAAA,GAAAtU,IAAA,CACjBhB,QAAQ;AAARA,UAAAA,QAAQ,GAAAsV,aAAA,KAAG,KAAA,CAAA,GAAA,GAAG,GAAAA,aAAA;UAAAC,mBAAA,GAAAvU,IAAA,CACdoF,cAAc;AAAdA,UAAAA,cAAc,GAAAmP,mBAAA,KAAGhd,KAAAA,CAAAA,GAAAA,SAAS,GAAAgd,mBAAA;UAAAC,aAAA,GAAAxU,IAAA,CAC1BnG,QAAQ;AAARA,UAAAA,QAAQ,GAAA2a,aAAA,KAAGjd,KAAAA,CAAAA,GAAAA,SAAS,GAAAid,aAAA;UAAAC,YAAA,GAAAzU,IAAA,CACpBlG,OAAO;AAAPA,UAAAA,OAAO,GAAA2a,YAAA,KAAGld,KAAAA,CAAAA,GAAAA,SAAS,GAAAkd,YAAA,CAAA;QAErB,IAAMC,OAAO,GAAG,IAAI,CAAA;;AAEpB;QACA,IAAI,CAACtC,uBAAuB,EAAE,CAAA;AAE9B,QAAA,IAAMuC,YAAY,GAAGrB,QAAQ,CAAClC,QAAQ,CAAA;AACtC,QAAA,IAAMwD,cAAc,GAAGtB,QAAQ,CAACpB,UAAU,CAAA;AAC1C,QAAA,IAAM2C,QAAQ,GAAGvB,QAAQ,CAACR,IAAI,CAAA;AAC9B,QAAA,IAAMgC,QAAQ,GAAGxB,QAAQ,CAACvE,IAAI,CAAA;QAE9B,IAAMgG,UAAU,GAAG3P,cAAc,IAAI+C,aAAO,CAACkG,cAAc,CAACxH,MAAM,CAAC,CAAA;AAEnE,QAAA,IAAImO,SAA6B,CAAA;AACjC,QAAA,IAAMhS,GAAG,GAAG,SAANA,GAAGA,GAAS;AAChB3M,UAAAA,MAAI,CAAC8c,aAAa,CAACyB,cAAc,CAAC,CAAA;AAClCve,UAAAA,MAAI,CAAC6c,WAAW,CAACyB,YAAY,CAAC,CAAA;AAC9Bte,UAAAA,MAAI,CAAC+c,OAAO,CAAC0B,QAAQ,CAAC,CAAA;AACtBze,UAAAA,MAAI,CAACgd,OAAO,CAACwB,QAAQ,CAAC,CAAA;UACtBxe,MAAI,CAACia,aAAa,EAAE,CAAA;UACpBja,MAAI,CAACob,aAAa,EAAE,CAAA;AACpB5X,UAAAA,QAAQ,KAARA,IAAAA,IAAAA,QAAQ,KAARA,KAAAA,CAAAA,IAAAA,QAAQ,EAAI,CAAA;SACb,CAAA;AAED,QAAA,IAAImF,QAAQ,KAAK,CAAC,EAAE,OAAOgE,GAAG,EAAE,CAAA;AAEhC,QAAA,IAAMiS,QAAO,GAAG,SAAVA,OAAOA,CAAIC,SAAiB,EAAK;UACrC,IAAIF,SAAS,KAAKzd,SAAS,EAAE;AAC3Byd,YAAAA,SAAS,GAAGE,SAAS,CAAA;AACvB,WAAA;AACA,UAAA,IAAMC,OAAO,GAAGD,SAAS,GAAGF,SAAS,CAAA;UAErC,IAAIG,OAAO,IAAInW,QAAQ,EAAE;AACvBgE,YAAAA,GAAG,EAAE,CAAA;AACL,YAAA,OAAA;AACF,WAAA;AACA;AACA,UAAA,IAAMhH,CAAC,GAAG+Y,UAAU,CAACI,OAAO,GAAGnW,QAAQ,CAAC,CAAA;AAExC,UAAA,IAAMoW,eAAe,GAAGlE,aAAI,CAACzB,MAAM,EAAE,CAAA;AACrC,UAAA,IAAM4F,aAAa,GAAGnE,aAAI,CAACzB,MAAM,EAAE,CAAA;UACnC,IAAI6F,SAAS,GAAG,CAAC,CAAA;UACjB,IAAIC,SAAS,GAAG,CAAC,CAAA;AAEjBrE,UAAAA,aAAI,CAACsE,IAAI,CAACJ,eAAe,EAAE/e,MAAI,CAAC6b,UAAU,EAAE0C,cAAc,EAAE5Y,CAAC,CAAC,CAAA;AAC9DkV,UAAAA,aAAI,CAACsE,IAAI,CAACH,aAAa,EAAEhf,MAAI,CAAC+a,QAAQ,EAAEuD,YAAY,EAAE3Y,CAAC,CAAC,CAAA;AACxDuZ,UAAAA,SAAS,GAAGlf,MAAI,CAAC0Y,IAAI,IAAI,CAAC,GAAG/S,CAAC,CAAC,GAAG8Y,QAAQ,GAAG9Y,CAAC,CAAA;AAC9CsZ,UAAAA,SAAS,GAAGjf,MAAI,CAACyc,IAAI,IAAI,CAAC,GAAG9W,CAAC,CAAC,GAAG6Y,QAAQ,GAAG7Y,CAAC,CAAA;AAE9C3F,UAAAA,MAAI,CAAC8c,aAAa,CAACiC,eAAe,CAAC,CAAA;AACnC/e,UAAAA,MAAI,CAAC6c,WAAW,CAACmC,aAAa,CAAC,CAAA;AAC/Bhf,UAAAA,MAAI,CAAC+c,OAAO,CAACmC,SAAS,CAAC,CAAA;AACvBlf,UAAAA,MAAI,CAACgd,OAAO,CAACiC,SAAS,CAAC,CAAA;AAEvB,UAAA,IAAM/Y,IAAI,GACR2U,aAAI,CAAC3U,IAAI,CAAC6Y,eAAe,EAAER,cAAc,CAAC,GAC1C1D,aAAI,CAAC3U,IAAI,CAAC8Y,aAAa,EAAEV,YAAY,CAAC,CAAA;UACxC,IACEpY,IAAI,IAAImY,OAAO,IACfG,QAAQ,KAAKtd,SAAS,IACtBud,QAAQ,KAAKvd,SAAS,EACtB;YACA,OAAOyL,GAAG,EAAE,CAAA;AACd,WAAA;UAEA3M,MAAI,CAACia,aAAa,EAAE,CAAA;UACpBja,MAAI,CAACob,aAAa,EAAE,CAAA;UAEpB,IAAI0D,OAAO,GAAGnW,QAAQ,EAAE;AACtBlF,YAAAA,OAAO,aAAPA,OAAO,KAAA,KAAA,CAAA,IAAPA,OAAO,CAAGkC,CAAC,CAAC,CAAA;YACZ3F,MAAI,CAACgc,mBAAmB,GAAGhc,MAAI,CAACic,MAAM,CAACvF,qBAAqB,CAACkI,QAAO,CAAC,CAAA;AACvE,WAAA;SACD,CAAA;AAED,QAAA,IAAI,CAAC3C,MAAM,CAACvF,qBAAqB,CAACkI,QAAO,CAAC,CAAA;AAC5C,OAAA;AACF,KAAA;;AAEA;AACF;AACA;AACE;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAAA,GAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CA3SkCQ,YAAM;;ACX1CtN,aAAO,CAAC6K,kBAAkB,GAAG1E,cAAc;;;ACK3C,IAAaoH,aAAa,gBAAA,YAAA;EACxB,SAAAA,aAAAA,CAAoBtc,OAA6B,EAAE;AAAArG,IAAAA,eAAA,OAAA2iB,aAAA,CAAA,CAAA;IAAA,IAA/Btc,CAAAA,OAA6B,GAA7BA,OAA6B,CAAA;AAAG,GAAA;;AAEpD;AACF;AACA;AACA;AACA;AACA;AACA;EANE,OAAAzF,YAAA,CAAA+hB,aAAA,EAAA,CAAA;IAAArgB,GAAA,EAAA,UAAA;IAAA4B,KAAA,GAAA,YAAA;MAAA,IAAA0e,SAAA,GAAAC,iBAAA,cAAAC,mBAAA,EAAAC,CAAAA,IAAA,CAOA,SAAAC,OAAA,GAAA;AAAA,QAAA,IAAA3c,OAAA;UAAA4c,qBAAA;UAAAC,KAAA;UAAAC,MAAA;UAAAC,GAAA;UAAAC,GAAA;UAAAC,qBAAA;UAAAC,cAAA;UAAAC,eAAA;UAAAC,cAAA;UAAAC,eAAA;UAAAC,IAAA;UAAAC,OAAA;UAAAC,KAAA;UAAAC,EAAA;UAAAC,EAAA;UAAAC,MAAA;UAAAC,OAAA;UAAA1E,MAAA;UAAA2E,OAAA;UAAAC,qBAAA;UAAAC,IAAA;UAAAC,OAAA;UAAAC,MAAA;AAAAC,UAAAA,KAAA,GAAApZ,SAAA,CAAA;AAAA,QAAA,OAAA2X,mBAAA,EAAA,CAAA0B,IAAA,CAAA,UAAAC,QAAA,EAAA;AAAA,UAAA,OAAA,CAAA,EAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;AAAA,YAAA,KAAA,CAAA;AAAete,cAAAA,OAA+B,GAAAke,KAAA,CAAAnZ,MAAA,GAAAmZ,CAAAA,IAAAA,KAAA,CAAA/f,CAAAA,CAAAA,KAAAA,SAAA,GAAA+f,KAAA,CAAG,CAAA,CAAA,GAAA,EAAE,CAAA;cAAAtB,qBAAA,GACR,IAAI,CAAC5c,OAAO,CAACkZ,MAAM,CAACqF,SAAS,EAAE,EAAhE1B,KAAK,GAAAD,qBAAA,CAALC,KAAK,EAAEC,MAAM,GAAAF,qBAAA,CAANE,MAAM,EAAYC,GAAG,GAAAH,qBAAA,CAAb3J,QAAQ,CAAA;AACzB+J,cAAAA,GAAG,GAAG,IAAI,CAAChd,OAAO,CAACkZ,MAAM,CAACsF,iBAAiB,EAAE,CAACC,MAAM,EAAE,CAAA;cAAAxB,qBAAA,GAQxDjd,OAAO,CALTkd,cAAc,EAAdA,cAAc,GAAAD,qBAAA,KAAG,KAAA,CAAA,GAAA,IAAIyB,eAAS,CAAC,CAAC,EAAE,CAAC,EAAE7B,KAAK,EAAEC,MAAM,CAAC,GAAAG,qBAAA,EACnDE,eAAe,GAIbnd,OAAO,CAJTmd,eAAe,EACfC,cAAc,GAGZpd,OAAO,CAHTod,cAAc,EACduB,eAAc,GAEZ3e,OAAO,CAFT2e,cAAc,EACXrB,IAAI,GAAAsB,wBAAA,CACL5e,OAAO,EAAA6e,WAAA,CAAA,CAAA;AAAAT,cAAAA,QAAA,CAAAE,IAAA,GAAA,CAAA,CAAA;AAAA,cAAA,OACW,IAAI,CAACQ,SAAS,CAACxB,IAAI,CAAC,CAAA;AAAA,YAAA,KAAA,CAAA;cAApCC,OAAO,GAAAa,QAAA,CAAAW,IAAA,CAAA;AAAAX,cAAAA,QAAA,CAAAE,IAAA,GAAA,CAAA,CAAA;AAAA,cAAA,OACO,IAAI,CAACU,gBAAgB,CAACzB,OAAO,CAAC,CAAA;AAAA,YAAA,KAAA,CAAA;cAA5CC,KAAK,GAAAY,QAAA,CAAAW,IAAA,CAAA;cAEAtB,EAAE,GAA4CP,cAAc,CAA/D/U,CAAC,EAASuV,EAAE,GAAqCR,cAAc,CAAxD+B,CAAC,EAAatB,MAAM,GAAsBT,cAAc,CAAjDL,KAAK,EAAkBe,OAAO,GAAKV,cAAc,CAAlCJ,MAAM,CAE3C;cACM5D,MAAM,GAAG,CAAC6D,GAAG,IAAI9J,QAAQ,EAAEiM,aAAa,CAAC,QAAQ,CAAC,CAAA;AACxDhG,cAAAA,MAAM,CAAC2D,KAAK,GAAGc,MAAM,GAAGX,GAAG,CAAA;AAC3B9D,cAAAA,MAAM,CAAC4D,MAAM,GAAGc,OAAO,GAAGZ,GAAG,CAAA;AACvBa,cAAAA,OAAO,GAAG3E,MAAM,CAACiG,UAAU,CAAC,IAAI,CAAC,CAAA;AAEvCtB,cAAAA,OAAO,CAAC3F,KAAK,CAAC8E,GAAG,EAAEA,GAAG,CAAC,CAAA;AAEvB,cAAA,IAAIG,eAAe,EAAE;gBACnBA,eAAe,CAACU,OAAO,CAAC,CAAA;AAC1B,eAAA;cAEMC,qBAAqB,GAAGN,KAAK,CAACX,KAAK,GAAGA,KAAK,GAAGG,GAAG,GAAG,CAAC,CAAA;AAC3Da,cAAAA,OAAO,CAACuB,SAAS,CACf5B,KAAK,EACLC,EAAE,GAAGK,qBAAqB,EAC1BJ,EAAE,GAAGI,qBAAqB,EAC1BH,MAAM,GAAGG,qBAAqB,EAC9BF,OAAO,GAAGE,qBAAqB,EAC/B,CAAC,EACD,CAAC,EACDH,MAAM,EACNC,OACF,CAAC,CAAA;AAAC,cAAA,IAEG,IAAI,CAACyB,KAAK,EAAE,EAAA;AAAAjB,gBAAAA,QAAA,CAAAE,IAAA,GAAA,CAAA,CAAA;AAAA,gBAAA,MAAA;AAAA,eAAA;AACTP,cAAAA,IAAI,GAAG,IAAI,CAAC/d,OAAO,CAACkZ,MAAM,CAC7BsF,iBAAiB,EAAE,CACnBc,aAAa,EAAE,CAAA;AAAA,cAAA,IAAA,EACdvB,IAAI,IAAIA,IAAI,CAACwB,aAAa,CAAA,EAAA;AAAAnB,gBAAAA,QAAA,CAAAE,IAAA,GAAA,CAAA,CAAA;AAAA,gBAAA,MAAA;AAAA,eAAA;AAAAF,cAAAA,QAAA,CAAAE,IAAA,GAAA,CAAA,CAAA;AAAA,cAAA,OAGPkB,WAAW,CAACzB,IAAI,CAACwB,aAAa,EAAE;AACnDE,gBAAAA,eAAe,EAAE,IAAI;AACrB5C,gBAAAA,KAAK,EAALA,KAAK;AACLC,gBAAAA,MAAM,EAANA,MAAM;AACN3U,gBAAAA,CAAC,EAAE,CAAC;AACJ8W,gBAAAA,CAAC,EAAE,CAAC;AACJN,gBAAAA,cAAc,EAAE,SAAhBA,cAAcA,CAAGe,OAAgB,EAAK;kBACpC,IAAIA,OAAO,KAAK3B,IAAI,EAAE;AACpB,oBAAA,OAAO,IAAI,CAAA;AACb,mBAAA;AACA,kBAAA,OAAOY,eAAc,IAAIA,eAAc,CAACe,OAAO,CAAC,CAAA;AAClD,iBAAA;AACF,eAAC,CAAC,CAAA;AAAA,YAAA,KAAA,CAAA;cAZIxG,OAAM,GAAAkF,QAAA,CAAAW,IAAA,CAAA;AAAAX,cAAAA,QAAA,CAAAE,IAAA,GAAA,CAAA,CAAA;cAAA,OAcQ,IAAI,CAACU,gBAAgB,CAAC9F,OAAM,CAAC4F,SAAS,EAAE,CAAC,CAAA;AAAA,YAAA,KAAA,CAAA;cAAvDtB,MAAK,GAAAY,QAAA,CAAAW,IAAA,CAAA;AACXlB,cAAAA,OAAO,CAACuB,SAAS,CACf5B,MAAK,EACLC,EAAE,GAAGK,qBAAqB,EAC1BJ,EAAE,GAAGI,qBAAqB,EAC1BH,MAAM,GAAGG,qBAAqB,EAC9BF,OAAO,GAAGE,qBAAqB,EAC/B,CAAC,EACD,CAAC,EACDH,MAAM,EACNC,OACF,CAAC,CAAA;AAAC,YAAA,KAAA,CAAA;AAIN,cAAA,IAAIR,cAAc,EAAE;gBAClBA,cAAc,CAACS,OAAO,CAAC,CAAA;AACzB,eAAA;AAAC,cAAA,OAAAO,QAAA,CAAAuB,MAAA,CAAA,QAAA,EAEMzG,MAAM,CAAA,CAAA;AAAA,YAAA,KAAA,CAAA,CAAA;AAAA,YAAA,KAAA,KAAA;cAAA,OAAAkF,QAAA,CAAAwB,IAAA,EAAA,CAAA;AAAA,WAAA;AAAA,SAAA,EAAAjD,OAAA,EAAA,IAAA,CAAA,CAAA;OACd,CAAA,CAAA,CAAA;AAAA,MAAA,SAlFKkD,QAAQA,GAAA;AAAA,QAAA,OAAAtD,SAAA,CAAAnT,KAAA,CAAA,IAAA,EAAAtE,SAAA,CAAA,CAAA;AAAA,OAAA;AAAA,MAAA,OAAR+a,QAAQ,CAAA;AAAA,KAAA,EAAA;AAoFd;AACF;AACA;AAFE,KAAA;AAAA,GAAA,EAAA;IAAA5jB,GAAA,EAAA,WAAA;IAAA4B,KAAA,GAAA,YAAA;MAAA,IAAAiiB,UAAA,GAAAtD,iBAAA,cAAAC,mBAAA,EAAAC,CAAAA,IAAA,CAGA,SAAAqD,QAAA,GAAA;AAAA,QAAA,IAAA/f,OAAA;AAAAggB,UAAAA,MAAA,GAAAlb,SAAA,CAAA;AAAA,QAAA,OAAA2X,mBAAA,EAAA,CAAA0B,IAAA,CAAA,UAAA8B,SAAA,EAAA;AAAA,UAAA,OAAA,CAAA,EAAA,QAAAA,SAAA,CAAA5B,IAAA,GAAA4B,SAAA,CAAA3B,IAAA;AAAA,YAAA,KAAA,CAAA;AAAwBte,cAAAA,OAAgC,GAAAggB,MAAA,CAAAjb,MAAA,GAAAib,CAAAA,IAAAA,MAAA,CAAA7hB,CAAAA,CAAAA,KAAAA,SAAA,GAAA6hB,MAAA,CAAG,CAAA,CAAA,GAAA,EAAE,CAAA;AAAA,cAAA,OAAAC,SAAA,CAAAN,MAAA,CACpD,QAAA,EAAA,IAAI,CAAC3f,OAAO,CAACkZ,MAAM,CAACsF,iBAAiB,EAAE,CAACM,SAAS,CAAC9e,OAAO,CAAC,CAAA,CAAA;AAAA,YAAA,KAAA,CAAA,CAAA;AAAA,YAAA,KAAA,KAAA;cAAA,OAAAigB,SAAA,CAAAL,IAAA,EAAA,CAAA;AAAA,WAAA;AAAA,SAAA,EAAAG,QAAA,EAAA,IAAA,CAAA,CAAA;OAClE,CAAA,CAAA,CAAA;AAAA,MAAA,SAFajB,SAASA,GAAA;AAAA,QAAA,OAAAgB,UAAA,CAAA1W,KAAA,CAAA,IAAA,EAAAtE,SAAA,CAAA,CAAA;AAAA,OAAA;AAAA,MAAA,OAATga,SAAS,CAAA;AAAA,KAAA,EAAA,CAAA;AAAA,GAAA,EAAA;IAAA7iB,GAAA,EAAA,OAAA;AAAA4B,IAAAA,KAAA,EAIvB,SAAQwhB,KAAKA,GAAG;AACd,MAAA,OACEa,eAAS,IACT,IAAI,CAAClgB,OAAO,CAACkZ,MAAM,CAACsF,iBAAiB,EAAE,CAACc,aAAa,EAAE,YACrDa,aAAa,CAAA;AAEnB,KAAA;AAAC,GAAA,EAAA;IAAAlkB,GAAA,EAAA,cAAA;IAAA4B,KAAA,EAAA,YAAA;MAAA,IAAAuiB,aAAA,GAAA5D,iBAAA,cAAAC,mBAAA,EAAAC,CAAAA,IAAA,CAED,SAAA2D,QAAA,GAAA;AAAA,QAAA,OAAA5D,mBAAA,EAAA,CAAA0B,IAAA,CAAA,UAAAmC,SAAA,EAAA;AAAA,UAAA,OAAA,CAAA,EAAA,QAAAA,SAAA,CAAAjC,IAAA,GAAAiC,SAAA,CAAAhC,IAAA;AAAA,YAAA,KAAA,CAAA;AAAA,cAAA,IAAA,CACM,IAAI,CAACe,KAAK,EAAE,EAAA;AAAAiB,gBAAAA,SAAA,CAAAhC,IAAA,GAAA,CAAA,CAAA;AAAA,gBAAA,MAAA;AAAA,eAAA;cAAA,OAAAgC,SAAA,CAAAX,MAAA,CAAA,QAAA,EACP,IAAI,CAACb,SAAS,EAAE,CAAA,CAAA;AAAA,YAAA,KAAA,CAAA,CAAA;AAAA,YAAA,KAAA,KAAA;cAAA,OAAAwB,SAAA,CAAAV,IAAA,EAAA,CAAA;AAAA,WAAA;AAAA,SAAA,EAAAS,QAAA,EAAA,IAAA,CAAA,CAAA;OAE1B,CAAA,CAAA,CAAA;AAAA,MAAA,SAJKE,YAAYA,GAAA;AAAA,QAAA,OAAAH,aAAA,CAAAhX,KAAA,CAAA,IAAA,EAAAtE,SAAA,CAAA,CAAA;AAAA,OAAA;AAAA,MAAA,OAAZyb,YAAY,CAAA;AAAA,KAAA,EAAA;AAAA,GAAA,EAAA;IAAAtkB,GAAA,EAAA,eAAA;AAAA4B,IAAAA,KAAA,EAMlB,SAAA2iB,aAAaA,CAACxgB,OAA6B,EAAE;MAC3C,IAAAygB,sBAAA,GAA0B,IAAI,CAACzgB,OAAO,CAACkZ,MAAM,CAACqF,SAAS,EAAE;QAAvCxB,GAAG,GAAA0D,sBAAA,CAAbxN,QAAQ,CAAA;;AAEhB;AACA,MAAA,IAAQyN,eAAe,GAAK,IAAI,CAAC1gB,OAAO,CAAhC0gB,eAAe,CAAA;AACvB,MAAA,IAAQnD,OAAO,GAAoCvd,OAAO,CAAlDud,OAAO;QAAAoD,aAAA,GAAoC3gB,OAAO,CAAzC4S,IAAI;AAAJA,QAAAA,IAAI,GAAA+N,aAAA,KAAA,KAAA,CAAA,GAAGD,eAAe,IAAI,GAAG,GAAAC,aAAA,CAAA;MAC9C,IAAMC,QAAQ,GAAGrD,OAAO,CAAC3Z,SAAS,CAChC2Z,OAAO,CAAC/gB,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EACxB+gB,OAAO,CAAC/gB,OAAO,CAAC,GAAG,CACrB,CAAC,CAAA;MACD,IAAMqkB,MAAM,GAAGD,QAAQ,CAACtP,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;;AAErC;AACA,MAAA,IAAM+N,KAAK,GAAG9B,OAAO,CAACuD,UAAU,CAAC,gBAAgB,CAAC,CAAA;AAClD,MAAA,IAAMC,QAAQ,GAAA,EAAA,CAAAxlB,MAAA,CAAMqX,IAAI,EAAA,GAAA,CAAA,CAAArX,MAAA,CAAI8jB,KAAK,GAAG,KAAK,GAAGwB,MAAM,CAAE,CAAA;MAEpD,IAAMG,IAAuB,GAAG,CAACjE,GAAG,IAAI9J,QAAQ,EAAEiM,aAAa,CAAC,GAAG,CAAC,CAAA;AAEpE,MAAA,IAAIG,KAAK,EAAE;AACT2B,QAAAA,IAAI,CAAClhB,gBAAgB,CAAC,OAAO,EAAE,YAAM;UACnCkhB,IAAI,CAACC,QAAQ,GAAGF,QAAQ,CAAA;UACxBC,IAAI,CAACE,IAAI,GAAG3D,OAAO,CAAA;AACrB,SAAC,CAAC,CAAA;OACH,MAAM,IAAI4D,MAAM,CAACC,IAAI,IAAID,MAAM,CAACE,GAAG,EAAE;AACpC,QAAA,IAAMC,GAAG,GAAG/D,OAAO,CAACjM,KAAK,CAAC,GAAG,CAAC,CAAA;QAC9B,IAAIiQ,IAAI,GAAG,EAAE,CAAA;AACb,QAAA,IAAID,GAAG,IAAIA,GAAG,CAACvc,MAAM,GAAG,CAAC,EAAE;UACzB,IAAMyc,KAAK,GAAGF,GAAG,CAAC,CAAC,CAAC,CAACE,KAAK,CAAC,SAAS,CAAC,CAAA;AACrC;AACA,UAAA,IAAIA,KAAK,IAAIA,KAAK,CAACzc,MAAM,IAAI,CAAC,EAAEwc,IAAI,GAAGC,KAAK,CAAC,CAAC,CAAC,CAAA;AACjD,SAAA;QAEA,IAAMC,IAAI,GAAGC,IAAI,CAACJ,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;AACzB,QAAA,IAAI/I,CAAC,GAAGkJ,IAAI,CAAC1c,MAAM,CAAA;AACnB,QAAA,IAAM4c,KAAK,GAAG,IAAIC,UAAU,CAACrJ,CAAC,CAAC,CAAA;QAE/B,OAAOA,CAAC,EAAE,EAAE;UACVoJ,KAAK,CAACpJ,CAAC,CAAC,GAAGkJ,IAAI,CAACI,UAAU,CAACtJ,CAAC,CAAC,CAAA;AAC/B,SAAA;QAEA,IAAMuJ,OAAO,GAAG,IAAIV,IAAI,CAAC,CAACO,KAAK,CAAC,EAAE;AAAE9nB,UAAAA,IAAI,EAAE0nB,IAAAA;AAAK,SAAC,CAAC,CAAA;;AAEjD;AACA;AACA,QAAA,IAAIxS,aAAO,CAACoD,UAAU,CAAC4P,SAAS,CAACC,UAAU,EAAE;UAC3CjT,aAAO,CAACoD,UAAU,CAAC4P,SAAS,CAACC,UAAU,CAACF,OAAO,EAAEf,QAAQ,CAAC,CAAA;AAC5D,SAAC,MAAM;AACLC,UAAAA,IAAI,CAAClhB,gBAAgB,CAAC,OAAO,EAAE,YAAM;YACnCkhB,IAAI,CAACC,QAAQ,GAAGF,QAAQ,CAAA;YACxBC,IAAI,CAACE,IAAI,GAAGC,MAAM,CAACE,GAAG,CAACY,eAAe,CAACH,OAAO,CAAC,CAAA;AACjD,WAAC,CAAC,CAAA;AACJ,SAAA;AACF,OAAA;;AAEA;MACA,IAAId,IAAI,CAACkB,KAAK,EAAE;QACdlB,IAAI,CAACkB,KAAK,EAAE,CAAA;AACd,OAAC,MAAM;QACL,IAAMC,CAAC,GAAG,CAACpF,GAAG,IAAI9J,QAAQ,EAAEmP,WAAW,CAAC,aAAa,CAAC,CAAA;QACtDD,CAAC,CAACE,SAAS,CAAC,OAAO,EAAE,KAAK,EAAE,KAAK,CAAC,CAAA;AAClCrB,QAAAA,IAAI,CAAC9gB,aAAa,CAACiiB,CAAC,CAAC,CAAA;AACvB,OAAA;AACF,KAAA;AAAC,GAAA,EAAA;IAAAlmB,GAAA,EAAA,kBAAA;AAAA4B,IAAAA,KAAA,EAED,SAAQmhB,gBAAgBA,CAACsD,GAAW,EAA6B;AAAA,MAAA,IAAA5oB,KAAA,GAAA,IAAA,CAAA;AAC/D,MAAA,OAAO,IAAIgD,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;AACtC;AACA,QAAA,IAAM4gB,KAAK,GAAG9jB,KAAI,CAACsG,OAAO,CAACkZ,MAAM,CAACqF,SAAS,EAAE,CAACgE,WAAW,EAAE,CAAA;AAE3D,QAAA,IAAI/E,KAAK,EAAE;UACTA,KAAK,CAACgF,MAAM,GAAG,YAAM;YACnB7lB,OAAO,CAAC6gB,KAAK,CAAC,CAAA;WACf,CAAA;AACDA,UAAAA,KAAK,CAACiF,OAAO,GAAG,UAACC,EAAE,EAAK;YACtB9lB,MAAM,CAAC8lB,EAAE,CAAC,CAAA;WACX,CAAA;UACDlF,KAAK,CAACmF,WAAW,GAAG,WAAW,CAAA;UAC/BnF,KAAK,CAAC8E,GAAG,GAAGA,GAAG,CAAA;AACjB,SAAA;AACF,OAAC,CAAC,CAAA;AACJ,KAAA;AAAC,GAAA,CAAA,CAAA,CAAA;AAAA,CAAA;;AC7MH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASM,kBAAkBA,CAChCC,IAAY,EACZC,OAAe,EACfC,SAAkB,EACV;AACR;AACA,EAAA,IAAMC,QAAQ,GAAGH,IAAI,GAAGC,OAAO,CAAA;AAC/B,EAAA,OAAOC,SAAS,GAAGC,QAAQ,GAAG,CAAC,GAAGA,QAAQ,CAAA;AAC5C,CAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,kBAAkBA,CAChCD,QAAgB,EAChBD,SAAkB,EACN;AACZ;EACA,IAAMG,UAAU,GAAGH,SAAS,GACxB,CACE,CAACC,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAC,EAAEA,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EACxC,CAACA,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAC,EAAEA,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CACzC,GACD,CAAC,CAACA,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAC,EAAEA,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;AAC9C,EAAA,OAAOE,UAAU,CAAA;AACnB;;ACjCO,IAAMC,oBAAoB,GAAG;AAClCN,EAAAA,IAAI,EAAE,CAAC;AACPC,EAAAA,OAAO,EAAE,CAAC;AACVrD,EAAAA,eAAe,EAAE,aAAa;AAC9B2D,EAAAA,OAAO,EAAE,CAAC;AACVvX,EAAAA,IAAI,EAAE,MAAM;AACZwX,EAAAA,WAAW,EAAE,CAAC;AACdC,EAAAA,MAAM,EAAE,aAAa;AACrBC,EAAAA,aAAa,EAAE,CAAC;AAChBC,EAAAA,SAAS,EAAE,CAAC;AACZT,EAAAA,SAAS,EAAE,IAAA;AACb,EAAC;AAEM,SAASU,IAAIA,CAACC,GAAmB,EAAQ;EAC9C,IAAMC,MAAM,GAAAC,aAAA,CAAAA,aAAA,CACPT,EAAAA,EAAAA,oBAAoB,CACpBO,EAAAA,GAAG,CACP,CAAA;AAED,EAAA,IACEb,IAAI,GAWFc,MAAM,CAXRd,IAAI;IACJC,OAAO,GAULa,MAAM,CAVRb,OAAO;IACPC,SAAS,GASPY,MAAM,CATRZ,SAAS;IACTtD,eAAe,GAQbkE,MAAM,CARRlE,eAAe;IACfoE,iBAAiB,GAOfF,MAAM,CAPRE,iBAAiB;IACjBT,OAAO,GAMLO,MAAM,CANRP,OAAO;IACPvX,IAAI,GAKF8X,MAAM,CALR9X,IAAI;IACJwX,WAAW,GAITM,MAAM,CAJRN,WAAW;IACXG,SAAS,GAGPG,MAAM,CAHRH,SAAS;IACTF,MAAM,GAEJK,MAAM,CAFRL,MAAM;IACNC,aAAa,GACXI,MAAM,CADRJ,aAAa,CAAA;;AAGf;EACA,IAAMP,QAAQ,GAAGJ,kBAAkB,CAACC,IAAI,EAAEC,OAAO,EAAEC,SAAS,CAAC,CAAA;AAC7D,EAAA,IAAMU,IAAI,GAAGR,kBAAkB,CAACD,QAAQ,EAAED,SAAS,CAAC,CAAA;AAEpD,EAAA,IAAMe,UAAU,GAAG,IAAIC,UAAI,CAAC;AAC1BC,IAAAA,KAAK,EAAE;AACLnH,MAAAA,KAAK,EAAEmG,QAAQ;AACflG,MAAAA,MAAM,EAAEkG,QAAQ;AAChBnX,MAAAA,IAAI,EAAE4T,eAAe;AACrB2D,MAAAA,OAAO,EAAE,CAAC;AACVC,MAAAA,WAAW,EAAEQ,iBAAAA;AACf,KAAA;AACF,GAAC,CAAC,CAAA;AAAC,EAAA,IAAAI,SAAA,GAAAC,0BAAA,CAEoBT,IAAI,CAAA;IAAAU,KAAA,CAAA;AAAA,EAAA,IAAA;IAA3B,KAAAF,SAAA,CAAAG,CAAA,EAAAD,EAAAA,CAAAA,CAAAA,KAAA,GAAAF,SAAA,CAAA1L,CAAA,EAAA8L,EAAAA,IAAA,GAA6B;AAAA,MAAA,IAAAC,WAAA,GAAArf,cAAA,CAAAkf,KAAA,CAAAtmB,KAAA,EAAA,CAAA,CAAA;AAAjB0mB,QAAAA,EAAE,GAAAD,WAAA,CAAA,CAAA,CAAA;AAAEE,QAAAA,EAAE,GAAAF,WAAA,CAAA,CAAA,CAAA,CAAA;AAChB,MAAA,IAAMG,MAAM,GAAG,IAAIC,YAAM,CAAC;AACxBV,QAAAA,KAAK,EAAE;AACLZ,UAAAA,OAAO,EAAPA,OAAO;AACPvX,UAAAA,IAAI,EAAJA,IAAI;AACJwX,UAAAA,WAAW,EAAXA,WAAW;AACXkB,UAAAA,EAAE,EAAFA,EAAE;AACFC,UAAAA,EAAE,EAAFA,EAAE;UACF3U,CAAC,EAAEgT,IAAI,GAAG,CAAC;AACXW,UAAAA,SAAS,EAATA,SAAS;AACTF,UAAAA,MAAM,EAANA,MAAM;AACNC,UAAAA,aAAa,EAAbA,aAAAA;AACF,SAAA;AACF,OAAC,CAAC,CAAA;AACFO,MAAAA,UAAU,CAACa,WAAW,CAACF,MAAM,CAAC,CAAA;AAChC,KAAA;AAAC,GAAA,CAAA,OAAAG,GAAA,EAAA;IAAAX,SAAA,CAAA9B,CAAA,CAAAyC,GAAA,CAAA,CAAA;AAAA,GAAA,SAAA;AAAAX,IAAAA,SAAA,CAAA5V,CAAA,EAAA,CAAA;AAAA,GAAA;AAED,EAAA,OAAOyV,UAAU,CAAA;AACnB;;AClEA;AACA;AACA;AACO,IAAMe,qBAAqB,GAAG;AACnCC,EAAAA,OAAO,EAAE,CAAC;AACV1B,EAAAA,OAAO,EAAE,CAAC;AACV3D,EAAAA,eAAe,EAAE,aAAa;AAC9BoE,EAAAA,iBAAiB,EAAE,CAAC;AACpBN,EAAAA,aAAa,EAAE,CAAC;AAChBD,EAAAA,MAAM,EAAE,MAAM;AACdE,EAAAA,SAAS,EAAE,CAAA;AACb,EAAC;;AAED;AACA;AACA;AACO,SAASuB,KAAKA,CAACrB,GAAoB,EAAQ;EAChD,IAAMsB,OAAO,GAAApB,aAAA,CAAAA,aAAA,CACRiB,EAAAA,EAAAA,qBAAqB,CACrBnB,EAAAA,GAAG,CACP,CAAA;AAED,EAAA,IACEoB,OAAO,GAOLE,OAAO,CAPTF,OAAO;IACPtB,SAAS,GAMPwB,OAAO,CANTxB,SAAS;IACT/D,eAAe,GAKbuF,OAAO,CALTvF,eAAe;IACfoE,iBAAiB,GAIfmB,OAAO,CAJTnB,iBAAiB;IACjBT,OAAO,GAGL4B,OAAO,CAHT5B,OAAO;IACPE,MAAM,GAEJ0B,OAAO,CAFT1B,MAAM;IACNC,aAAa,GACXyB,OAAO,CADTzB,aAAa,CAAA;;AAGf;AACA,EAAA,IAAM1G,KAAK,GAAGiI,OAAO,GAAGtB,SAAS,IAAI,CAAC,CAAA;AACtC,EAAA,IAAM1G,MAAM,GAAGgI,OAAO,GAAGtB,SAAS,IAAI,CAAC,CAAA;AACvC,EAAA,IAAM7X,CAAC,GAAApQ,wBAAAA,CAAAA,MAAA,CACashB,KAAK,0BAAAthB,MAAA,CACTuhB,MAAM,EAAA,KAAA,CAAA,CAAAvhB,MAAA,CAAMshB,KAAK,OAAAthB,MAAA,CAAIuhB,MAAM,EAChC,gBAAA,CAAA,CAAA;AAEX,EAAA,IAAMgH,UAAU,GAAG,IAAIC,UAAI,CAAC;AAC1BC,IAAAA,KAAK,EAAE;AACLnH,MAAAA,KAAK,EAALA,KAAK;AACLC,MAAAA,MAAM,EAANA,MAAM;AACNjR,MAAAA,IAAI,EAAE4T,eAAe;AACrB2D,MAAAA,OAAO,EAAE,CAAC;AACVC,MAAAA,WAAW,EAAEQ,iBAAAA;AACf,KAAA;AACF,GAAC,CAAC,CAAA;AAEF,EAAA,IAAMoB,IAAI,GAAG,IAAIC,UAAI,CAAC;AACpBlB,IAAAA,KAAK,EAAE;AACLrY,MAAAA,CAAC,EAADA,CAAC;AACDyX,MAAAA,OAAO,EAAPA,OAAO;AACPE,MAAAA,MAAM,EAANA,MAAM;AACNC,MAAAA,aAAa,EAAbA,aAAa;AACbF,MAAAA,WAAW,EAAE,CAAC;AACdG,MAAAA,SAAS,EAATA,SAAAA;AACF,KAAA;AACF,GAAC,CAAC,CAAA;AAEFM,EAAAA,UAAU,CAACa,WAAW,CAACM,IAAI,CAAC,CAAA;AAE5B,EAAA,OAAOnB,UAAU,CAAA;AACnB;;AC/DA;AACA;AACA;AACO,IAAMqB,uBAAuB,GAAG;AACrCtC,EAAAA,IAAI,EAAE,CAAC;AACPC,EAAAA,OAAO,EAAE,CAAC;AACVC,EAAAA,SAAS,EAAE,IAAI;AACftD,EAAAA,eAAe,EAAE,aAAa;AAC9B2D,EAAAA,OAAO,EAAE,CAAC;AACVvX,EAAAA,IAAI,EAAE,MAAM;AACZwX,EAAAA,WAAW,EAAE,CAAC;AACdC,EAAAA,MAAM,EAAE,aAAa;AACrBE,EAAAA,SAAS,EAAE,CAAA;AACb,EAAC;;AAED;AACA;AACA;AACO,SAAS4B,OAAOA,CAAC1B,GAAsB,EAAQ;EACpD,IAAM2B,SAAS,GAAAzB,aAAA,CAAAA,aAAA,CACVuB,EAAAA,EAAAA,uBAAuB,CACvBzB,EAAAA,GAAG,CACP,CAAA;AAED,EAAA,IACEb,IAAI,GAWFwC,SAAS,CAXXxC,IAAI;IACJC,OAAO,GAULuC,SAAS,CAVXvC,OAAO;IACPC,SAAS,GASPsC,SAAS,CATXtC,SAAS;IACTtD,eAAe,GAQb4F,SAAS,CARX5F,eAAe;IACfoE,iBAAiB,GAOfwB,SAAS,CAPXxB,iBAAiB;IACjBT,OAAO,GAMLiC,SAAS,CANXjC,OAAO;IACPvX,IAAI,GAKFwZ,SAAS,CALXxZ,IAAI;IACJwX,WAAW,GAITgC,SAAS,CAJXhC,WAAW;IACXC,MAAM,GAGJ+B,SAAS,CAHX/B,MAAM;IACNC,aAAa,GAEX8B,SAAS,CAFX9B,aAAa;IACbC,SAAS,GACP6B,SAAS,CADX7B,SAAS,CAAA;;AAGX;EACA,IAAMR,QAAQ,GAAGJ,kBAAkB,CAACC,IAAI,EAAEC,OAAO,EAAEC,SAAS,CAAC,CAAA;EAC7D,IAAMqC,OAAO,GAAGnC,kBAAkB,CAACD,QAAQ,EAAED,SAAS,CAAC,CAAC;;AAExD,EAAA,IAAMe,UAAU,GAAG,IAAIC,UAAI,CAAC;AAC1BC,IAAAA,KAAK,EAAE;AACLnH,MAAAA,KAAK,EAAEmG,QAAQ;AACflG,MAAAA,MAAM,EAAEkG,QAAQ;AAChBnX,MAAAA,IAAI,EAAE4T,eAAe;AACrB2D,MAAAA,OAAO,EAAE,CAAC;AACVC,MAAAA,WAAW,EAAEQ,iBAAAA;AACf,KAAA;AACF,GAAC,CAAC,CAAA;AAAC,EAAA,IAAAI,SAAA,GAAAC,0BAAA,CAEkBkB,OAAO,CAAA;IAAAjB,KAAA,CAAA;AAAA,EAAA,IAAA;IAA5B,KAAAF,SAAA,CAAAG,CAAA,EAAAD,EAAAA,CAAAA,CAAAA,KAAA,GAAAF,SAAA,CAAA1L,CAAA,EAAA8L,EAAAA,IAAA,GAA8B;AAAA,MAAA,IAAAC,WAAA,GAAArf,cAAA,CAAAkf,KAAA,CAAAtmB,KAAA,EAAA,CAAA,CAAA;AAAlBsK,QAAAA,CAAC,GAAAmc,WAAA,CAAA,CAAA,CAAA;AAAErF,QAAAA,CAAC,GAAAqF,WAAA,CAAA,CAAA,CAAA,CAAA;AACd,MAAA,IAAMgB,MAAM,GAAG,IAAIvB,UAAI,CAAC;AACtBC,QAAAA,KAAK,EAAE;AACLZ,UAAAA,OAAO,EAAPA,OAAO;AACPvX,UAAAA,IAAI,EAAJA,IAAI;AACJwX,UAAAA,WAAW,EAAXA,WAAW;AACXlb,UAAAA,CAAC,EAAEA,CAAC,GAAG0a,IAAI,GAAG,CAAC;AACf5D,UAAAA,CAAC,EAAEA,CAAC,GAAG4D,IAAI,GAAG,CAAC;AACfhG,UAAAA,KAAK,EAAEgG,IAAI;AACX/F,UAAAA,MAAM,EAAE+F,IAAI;AACZW,UAAAA,SAAS,EAATA,SAAS;AACTF,UAAAA,MAAM,EAANA,MAAM;AACNC,UAAAA,aAAa,EAAbA,aAAAA;AACF,SAAA;AACF,OAAC,CAAC,CAAA;AACFO,MAAAA,UAAU,CAACa,WAAW,CAACW,MAAM,CAAC,CAAA;AAChC,KAAA;AAAC,GAAA,CAAA,OAAAV,GAAA,EAAA;IAAAX,SAAA,CAAA9B,CAAA,CAAAyC,GAAA,CAAA,CAAA;AAAA,GAAA,SAAA;AAAAX,IAAAA,SAAA,CAAA5V,CAAA,EAAA,CAAA;AAAA,GAAA;AAED,EAAA,OAAOyV,UAAU,CAAA;AACnB;;;;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACayB,IAAAA,KAAK,0BAAAC,cAAA,EAAA;EAwBhB,SAAAD,KAAAA,CAAYE,MAA4C,EAAE;AAAA,IAAA,IAAA/rB,KAAA,CAAA;AAAAC,IAAAA,eAAA,OAAA4rB,KAAA,CAAA,CAAA;IACxD7rB,KAAA,GAAAE,UAAA,CAAA2rB,IAAAA,EAAAA,KAAA,GAAA3B,aAAA,CAAAA,aAAA,CAAA,EAAA,EACK6B,MAAM,CAAA,EAAA,EAAA,EAAA;MACT5rB,IAAI,EAAE0rB,KAAK,CAACG,GAAAA;AAAG,KAAA,CAAA,CAAA,CAAA,CAAA;AAGjB,IAAA,IAAAC,gBAAA,GAOIjsB,KAAA,CAAKksB,UAAU,CAAA;MANjBC,IAAI,GAAAF,gBAAA,CAAJE,IAAI,CAAA;MACJC,SAAS,GAAAH,gBAAA,CAATG,SAAS,CAAA;MACTC,OAAO,GAAAJ,gBAAA,CAAPI,OAAO,CAAA;MACQJ,gBAAA,CAAfK,eAAe,CAAA;MACFL,gBAAA,CAAbM,aAAa,CAAA;AACV3I,UAAAA,IAAI,GAAAsB,wBAAA,CAAA+G,gBAAA,EAAA9G,SAAA,EAAA;IAGT,IAAI,CAACgH,IAAI,EAAE;AACT,MAAA,MAAM,IAAI9oB,KAAK,CAAC,0BAA0B,CAAC,CAAA;AAC7C,KAAA;;AAEA;IACArD,KAAA,CAAKmsB,IAAI,GAAGA,IAAI,CAAA;AAChBnsB,IAAAA,KAAA,CAAKirB,WAAW,CAACjrB,KAAA,CAAKmsB,IAAI,CAAC,CAAA;AAC3BnsB,IAAAA,KAAA,CAAKwsB,0BAA0B,CAACxsB,KAAA,CAAKmsB,IAAI,CAAC,CAAA;AAE1C,IAAA,IAAIC,SAAS,EAAE;MACbpsB,KAAA,CAAKysB,eAAe,CAACzsB,KAAA,CAAK0sB,gBAAgB,CAACN,SAAS,CAAC,EAAE,IAAI,CAAC,CAAA;AAC9D,KAAA;AACA,IAAA,IAAIC,OAAO,EAAE;MACXrsB,KAAA,CAAKysB,eAAe,CAACzsB,KAAA,CAAK0sB,gBAAgB,CAACL,OAAO,CAAC,EAAE,KAAK,CAAC,CAAA;AAC7D,KAAA;AAEArsB,IAAAA,KAAA,CAAK2sB,eAAe,CAAC/I,IAAI,EAAE,CAAC5jB,KAAA,CAAKmsB,IAAI,EAAEnsB,KAAA,CAAKosB,SAAS,EAAEpsB,KAAA,CAAKqsB,OAAO,CAAC,CAAC,CAAA;AAAC,IAAA,OAAArsB,KAAA,CAAA;AACxE,GAAA;EAACY,SAAA,CAAAirB,KAAA,EAAAC,cAAA,CAAA,CAAA;EAAA,OAAAjrB,YAAA,CAAAgrB,KAAA,EAAA,CAAA;IAAAtpB,GAAA,EAAA,4BAAA;AAAA4B,IAAAA,KAAA,EAED,SAAQqoB,0BAA0BA,CAACL,IAAe,EAAE;AAAA,MAAA,IAAA5oB,MAAA,GAAA,IAAA,CAAA;MAClD4oB,IAAI,CAAC/lB,gBAAgB,CAACwmB,kBAAY,CAACC,aAAa,EAAE,UAACpE,CAAgB,EAAK;AACtE,QAAA,IAAQqE,QAAQ,GAAKrE,CAAC,CAAdqE,QAAQ,CAAA;AAChB,QAAA,IAAIA,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,IAAI,EAAE;UAC1C,IAAIvpB,MAAI,CAAC6oB,SAAS,EAAE;YAClB7oB,MAAI,CAACwpB,kBAAkB,CAACxpB,MAAI,CAAC6oB,SAAS,EAAE,IAAI,CAAC,CAAA;AAC/C,WAAA;SACD,MAAM,IAAIU,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,IAAI,EAAE;UACjD,IAAIvpB,MAAI,CAAC8oB,OAAO,EAAE;YAChB9oB,MAAI,CAACwpB,kBAAkB,CAACxpB,MAAI,CAAC8oB,OAAO,EAAE,KAAK,CAAC,CAAA;AAC9C,WAAA;AACF,SAAA;AACA;AACA;AACA;AACA;AACF,OAAC,CAAC,CAAA;AACJ,KAAA;AAAC,GAAA,EAAA;IAAA9pB,GAAA,EAAA,SAAA;AAAA4B,IAAAA,KAAA,EAED,SAAA6oB,OAAOA,GAAG;MACR,OAAO,IAAI,CAACb,IAAI,CAAA;AAClB,KAAA;AAAC,GAAA,EAAA;IAAA5pB,GAAA,EAAA,cAAA;AAAA4B,IAAAA,KAAA,EAED,SAAA8oB,YAAYA,GAAG;MACb,OAAO,IAAI,CAACb,SAAS,CAAA;AACvB,KAAA;AAAC,GAAA,EAAA;IAAA7pB,GAAA,EAAA,YAAA;AAAA4B,IAAAA,KAAA,EAED,SAAA+oB,UAAUA,GAAG;MACX,OAAO,IAAI,CAACb,OAAO,CAAA;AACrB,KAAA;AAAC,GAAA,EAAA;IAAA9pB,GAAA,EAAA,0BAAA;IAAA4B,KAAA,EAED,SAAAgpB,wBAAwBA,CACtBjU,IAAS,EACTkU,QAA8B,EAC9BC,QAA8B,EAC9B;AACA,MAAA,IACEnU,IAAI,KAAK,SAAS,IAClBA,IAAI,KAAK,eAAe,IACxBA,IAAI,KAAK,QAAQ,IACjBA,IAAI,KAAK,WAAW,IACpBA,IAAI,KAAK,iCAAiC,EAC1C;QACA,IAAI,CAACyT,eAAe,CAAAW,eAAA,KAAIpU,IAAI,EAAGmU,QAAQ,CAAA,EAAI,CACzC,IAAI,CAAClB,IAAI,EACT,IAAI,CAACC,SAAS,EACd,IAAI,CAACC,OAAO,CACb,CAAC,CAAA;OACH,MAAM,IAAInT,IAAI,KAAK,WAAW,IAAIA,IAAI,KAAK,SAAS,EAAE;AACrD,QAAA,IAAMqU,OAAO,GAAGrU,IAAI,KAAK,WAAW,CAAA;AACpC;AACA,QAAA,IAAI,CAACsU,gBAAgB,CAACD,OAAO,CAAC,CAAA;AAE9B,QAAA,IAAIF,QAAQ,EAAE;AACZ,UAAA,IAAAI,iBAAA,GAOI,IAAI,CAACvB,UAAU,CAAA;YANbuB,iBAAA,CAAJtB,IAAI,CAAA;YACKsB,iBAAA,CAATrB,SAAS,CAAA;YACFqB,iBAAA,CAAPpB,OAAO,CAAA;YACQoB,iBAAA,CAAfnB,eAAe,CAAA;YACFmB,iBAAA,CAAblB,aAAa,CAAA;AACV3I,gBAAAA,IAAI,GAAAsB,wBAAA,CAAAuI,iBAAA,EAAAC,UAAA,EAAA;AAET;;UAEA,IAAI,CAACjB,eAAe,CAClB,IAAI,CAACC,gBAAgB,CAACW,QAAqB,CAAC,EAC5CE,OACF,CAAC,CAAA;AACD,UAAA,IAAI,CAACZ,eAAe,CAAC/I,IAAI,EAAE,CAAC2J,OAAO,GAAG,IAAI,CAACnB,SAAS,GAAG,IAAI,CAACC,OAAO,CAAC,CAAC,CAAA;AACvE,SAAA;AACF,OAAC,MAAM,IAAInT,IAAI,KAAK,MAAM,EAAE;AAC1B,QAAA,IAAAyU,iBAAA,GAOI,IAAI,CAACzB,UAAU,CAAA;UANbyB,iBAAA,CAAJxB,IAAI,CAAA;UACKwB,iBAAA,CAATvB,SAAS,CAAA;UACFuB,iBAAA,CAAPtB,OAAO,CAAA;UACQsB,iBAAA,CAAfrB,eAAe,CAAA;UACFqB,iBAAA,CAAbpB,aAAa,CAAA;AACV3I,cAAAA,KAAI,GAAAsB,wBAAA,CAAAyI,iBAAA,EAAAC,UAAA,EAAA;AAET,QAAA,IAAI,CAACzB,IAAI,CAAC1R,OAAO,EAAE,CAAA;AACnB;QACA,IAAI,CAAC0R,IAAI,GAAGkB,QAAQ,CAAA;AACpB,QAAA,IAAI,CAACpC,WAAW,CAAC,IAAI,CAACkB,IAAI,CAAC,CAAA;QAC3B,IAAI,CAACQ,eAAe,CAAC/I,KAAI,EAAE,CAAC,IAAI,CAACuI,IAAI,CAAC,CAAC,CAAA;AACzC,OAAC,MAAM,IAAIjT,IAAI,KAAK,iBAAiB,EAAE;AACrC,QAAA,IAAI,CAAC2U,yBAAyB,CAACR,QAAQ,EAAY,IAAI,CAAC,CAAA;AAC1D,OAAC,MAAM,IAAInU,IAAI,KAAK,eAAe,EAAE;AACnC,QAAA,IAAI,CAAC2U,yBAAyB,CAACR,QAAQ,EAAY,KAAK,CAAC,CAAA;AAC3D,OAAA;AACF,KAAA;AAAC,GAAA,EAAA;IAAA9qB,GAAA,EAAA,kBAAA;AAAA4B,IAAAA,KAAA,EAED,SAAQuoB,gBAAgBA,CAACoB,IAAe,EAAiB;AACvD,MAAA,IAAI,OAAOA,IAAI,KAAK,SAAS,EAAE;AAC7B,QAAA,OAAO,SAAS,CAAA;AAClB,OAAA;AACA,MAAA,OAAO,QAAQ,CAAA;AACjB,KAAA;AAAC,GAAA,EAAA;IAAAvrB,GAAA,EAAA,iBAAA;AAAA4B,IAAAA,KAAA,EAED,SAAQsoB,eAAeA,CAACtsB,IAAmB,EAAEotB,OAAgB,EAAE;AAC7D,MAAA,IAAIO,IAAmB,CAAA;MACvB,IAAI3tB,IAAI,KAAK,SAAS,EAAE;AACtB2tB,QAAAA,IAAI,GAAG,IAAI,CAACC,sBAAsB,EAAE,CAAA;AACtC,OAAC,MAAM;AACL;AACAD,QAAAA,IAAI,GAAGP,OAAO,GAAG,IAAI,CAACrB,UAAU,CAACE,SAAS,GAAG,IAAI,CAACF,UAAU,CAACG,OAAO,CAAA;AACtE,OAAA;;AAEA;AACA,MAAA,IAAI,CAACU,kBAAkB,CAACe,IAAI,EAAEP,OAAO,CAAC,CAAA;;AAEtC;AACAO,MAAAA,IAAI,CAACta,YAAY,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAA;AAE9B,MAAA,IAAI+Z,OAAO,EAAE;QACX,IAAI,CAACnB,SAAS,GAAG0B,IAAI,CAAA;AACvB,OAAC,MAAM;QACL,IAAI,CAACzB,OAAO,GAAGyB,IAAI,CAAA;AACrB,OAAA;AAEA,MAAA,IAAI,CAAC7C,WAAW,CAAC6C,IAAI,CAAC,CAAA;AAEtB,MAAA,IAAMja,MAAM,GAAG0Z,OAAO,GAClB,IAAI,CAACrB,UAAU,CAACI,eAAe,GAC/B,IAAI,CAACJ,UAAU,CAACK,aAAa,CAAA;AACjC,MAAA,IAAI1Y,MAAM,EAAE;AACV,QAAA,IAAI,CAACga,yBAAyB,CAACha,MAAM,EAAE0Z,OAAO,CAAC,CAAA;AACjD,OAAA;AACF,KAAA;;AAEA;AACF;AACA;AAFE,GAAA,EAAA;IAAAhrB,GAAA,EAAA,oBAAA;AAAA4B,IAAAA,KAAA,EAGA,SAAQ4oB,kBAAkBA,CAACe,IAAmB,EAAEP,OAAgB,EAAE;AAChE,MAAA,IAAIjP,QAAQ,GAAGF,aAAI,CAACzB,MAAM,EAAE,CAAA;MAC5B,IAAIqR,GAAG,GAAG,CAAC,CAAA;MACX,IAAIC,EAAE,GAAG,CAAC,CAAA;MACV,IAAIC,EAAE,GAAG,CAAC,CAAA;MACV,IAAIC,EAAE,GAAG,CAAC,CAAA;MACV,IAAIC,EAAE,GAAG,CAAC,CAAA;MAEV,IAAMC,QAAQ,GAAG,IAAI,CAAClC,IAAI,IAAI,IAAI,CAACA,IAAI,CAACmC,QAAQ,CAAA;AAEhD,MAAA,IAAID,QAAQ,KAAKE,WAAK,CAACC,IAAI,EAAE;AAC3B,QAAA,IAAAC,WAAA,GAKK,IAAI,CAACtC,IAAI,CAAUD,UAAU;UAJ5BwC,GAAG,GAAAD,WAAA,CAAPR,EAAE;UACEU,GAAG,GAAAF,WAAA,CAAPP,EAAE;UACEU,GAAG,GAAAH,WAAA,CAAPN,EAAE;UACEU,GAAG,GAAAJ,WAAA,CAAPL,EAAE,CAAA;AAEJH,QAAAA,EAAE,GAAGV,OAAO,GAAGoB,GAAG,GAAGD,GAAG,CAAA;AACxBR,QAAAA,EAAE,GAAGX,OAAO,GAAGmB,GAAG,GAAGC,GAAG,CAAA;AACxBR,QAAAA,EAAE,GAAGZ,OAAO,GAAGsB,GAAG,GAAGD,GAAG,CAAA;AACxBR,QAAAA,EAAE,GAAGb,OAAO,GAAGqB,GAAG,GAAGC,GAAG,CAAA;AAC1B,OAAC,MAAM,IAAIR,QAAQ,KAAKE,WAAK,CAACO,QAAQ,EAAE;QACtC,IAAQC,MAAM,GAAM,IAAI,CAAC5C,IAAI,CAAcD,UAAU,CAA7C6C,MAAM,CAAA;AACd,QAAA,IAAQ1jB,MAAM,GAAK0jB,MAAM,CAAjB1jB,MAAM,CAAA;AACd4iB,QAAAA,EAAE,GAAGV,OAAO,GAAGwB,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGA,MAAM,CAAC1jB,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;AACnD8iB,QAAAA,EAAE,GAAGZ,OAAO,GAAGwB,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGA,MAAM,CAAC1jB,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;AACnD6iB,QAAAA,EAAE,GAAGX,OAAO,GAAGwB,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGA,MAAM,CAAC1jB,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;AACnD+iB,QAAAA,EAAE,GAAGb,OAAO,GAAGwB,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGA,MAAM,CAAC1jB,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;AACrD,OAAC,MAAM,IAAIgjB,QAAQ,KAAKE,WAAK,CAACS,IAAI,EAAE;QAClC,IAAAC,gBAAA,GAAiB,IAAI,CAACC,UAAU,CAAC,IAAI,CAAC/C,IAAI,EAAUoB,OAAO,CAAC;UAAA4B,iBAAA,GAAA5jB,cAAA,CAAA0jB,gBAAA,EAAA,CAAA,CAAA;AAArDG,UAAAA,EAAE,GAAAD,iBAAA,CAAA,CAAA,CAAA;AAAEE,UAAAA,EAAE,GAAAF,iBAAA,CAAA,CAAA,CAAA,CAAA;AACblB,QAAAA,EAAE,GAAGmB,EAAE,CAAC,CAAC,CAAC,CAAA;AACVjB,QAAAA,EAAE,GAAGiB,EAAE,CAAC,CAAC,CAAC,CAAA;AACVlB,QAAAA,EAAE,GAAGmB,EAAE,CAAC,CAAC,CAAC,CAAA;AACVjB,QAAAA,EAAE,GAAGiB,EAAE,CAAC,CAAC,CAAC,CAAA;AACZ,OAAA;AAEA,MAAA,IAAM5gB,CAAC,GAAGwf,EAAE,GAAGC,EAAE,CAAA;AACjB,MAAA,IAAM3I,CAAC,GAAG4I,EAAE,GAAGC,EAAE,CAAA;MACjBJ,GAAG,GAAGtlB,IAAI,CAAC4mB,KAAK,CAAC/J,CAAC,EAAE9W,CAAC,CAAC,CAAA;MACtB6P,QAAQ,GAAGF,aAAI,CAACmR,UAAU,CAACrB,EAAE,EAAEE,EAAE,EAAE,CAAC,CAAC,CAAA;AAErC,MAAA,IAAIb,OAAO,EAAE;QACX,IAAI,CAACiC,iBAAiB,GAAGlR,QAAQ,CAAA;QACjC,IAAI,CAACmR,YAAY,GAAGzB,GAAG,CAAA;AACzB,OAAC,MAAM;QACL,IAAI,CAAC0B,eAAe,GAAGpR,QAAQ,CAAA;QAC/B,IAAI,CAACqR,UAAU,GAAG3B,GAAG,CAAA;AACvB,OAAA;AAEAF,MAAAA,IAAI,CAAC8B,gBAAgB,CAACtR,QAAQ,CAAC,CAAA;AAC/BwP,MAAAA,IAAI,CAAC+B,mBAAmB,CACrB7B,GAAG,GAAG,GAAG,GAAItlB,IAAI,CAACiC,EAAE,GAAGmjB,IAAI,CAACgC,mBAAmB,EAClD,CAAC,CAAA;AACH,KAAA;AAAC,GAAA,EAAA;IAAAvtB,GAAA,EAAA,2BAAA;AAAA4B,IAAAA,KAAA,EAED,SAAQ0pB,yBAAyBA,CAACha,MAAc,EAAE0Z,OAAgB,EAAE;MAClE,IAAMO,IAAI,GAAGP,OAAO,GAAG,IAAI,CAACnB,SAAS,GAAG,IAAI,CAACC,OAAO,CAAA;AACpD,MAAA,IAAIyB,IAAI,EAAE;AACRA,QAAAA,IAAI,CAAC8B,gBAAgB,CACnBxR,aAAI,CAAC2R,GAAG,CACN3R,aAAI,CAACzB,MAAM,EAAE,EACb4Q,OAAO,GAAG,IAAI,CAACiC,iBAAiB,GAAG,IAAI,CAACE,eAAe,EACvDtR,aAAI,CAACmR,UAAU,CACb7mB,IAAI,CAACgC,GAAG,CAAC6iB,OAAO,GAAG,IAAI,CAACkC,YAAY,GAAG,IAAI,CAACE,UAAU,CAAC,GAAG9b,MAAM,EAChEnL,IAAI,CAACqD,GAAG,CAACwhB,OAAO,GAAG,IAAI,CAACkC,YAAY,GAAG,IAAI,CAACE,UAAU,CAAC,GAAG9b,MAAM,EAChE,CACF,CACF,CACF,CAAC,CAAA;AACH,OAAA;;AAEA;MACA,IAAI,IAAI,CAACsY,IAAI,EAAE,CASb;AAEJ,KAAA;AAAC,GAAA,EAAA;IAAA5pB,GAAA,EAAA,kBAAA;AAAA4B,IAAAA,KAAA,EAED,SAAQqpB,gBAAgBA,CAACD,OAAgB,EAAE;AACzC,MAAA,IAAIA,OAAO,IAAI,IAAI,CAACnB,SAAS,EAAE;AAC7B,QAAA,IAAI,CAACA,SAAS,CAAC3R,OAAO,EAAE,CAAA;QACxB,IAAI,CAAC2R,SAAS,GAAG3nB,SAAS,CAAA;AAC5B,OAAA;AACA,MAAA,IAAI,CAAC8oB,OAAO,IAAI,IAAI,CAAClB,OAAO,EAAE;AAC5B,QAAA,IAAI,CAACA,OAAO,CAAC5R,OAAO,EAAE,CAAA;QACtB,IAAI,CAAC4R,OAAO,GAAG5nB,SAAS,CAAA;AAC1B,OAAA;AACF,KAAA;AAAC,GAAA,EAAA;IAAAlC,GAAA,EAAA,YAAA;AAAA4B,IAAAA,KAAA,EAED,SAAQ+qB,UAAUA,CAAC3D,IAAU,EAAEgC,OAAgB,EAAc;AAC3D,MAAA,OAAOA,OAAO,GAAGhC,IAAI,CAACyE,eAAe,EAAE,GAAGzE,IAAI,CAAC0E,aAAa,EAAE,CAAA;AAChE,KAAA;AAAC,GAAA,EAAA;IAAA1tB,GAAA,EAAA,wBAAA;AAAA4B,IAAAA,KAAA,EAED,SAAQ4pB,sBAAsBA,GAAG;AAC/B,MAAA,IAAAmC,iBAAA,GAA8B,IAAI,CAAChE,UAAU;QAArCtC,MAAM,GAAAsG,iBAAA,CAANtG,MAAM;QAAEE,SAAS,GAAAoG,iBAAA,CAATpG,SAAS,CAAA;AACzB,MAAA,IAAQ/d,GAAG,GAAcrD,IAAI,CAArBqD,GAAG;QAAErB,GAAG,GAAShC,IAAI,CAAhBgC,GAAG;QAAEC,EAAE,GAAKjC,IAAI,CAAXiC,EAAE,CAAA;MACpB,IAAMwY,KAAK,GAAG,EAAE,GAAGzY,GAAG,CAACC,EAAE,GAAG,CAAC,CAAC,CAAA;MAC9B,OAAO,IAAI6gB,UAAI,CAAC;AACdlB,QAAAA,KAAK,EAAE;AACL;AACArY,UAAAA,CAAC,MAAApQ,MAAA,CAAMshB,KAAK,GAAG,CAAC,OAAAthB,MAAA,CAAI,EAAE,GAAGkK,GAAG,CAACpB,EAAE,GAAG,CAAC,CAAC,SAAA9I,MAAA,CAAMshB,KAAK,GAAG,CAAC,EAAAthB,MAAAA,CAAAA,CAAAA,MAAA,CAAOshB,KAAK,GAAG,CAAC,EAAAthB,IAAAA,CAAAA,CAAAA,MAAA,CACjE,EAAE,GAAGkK,GAAG,CAACpB,EAAE,GAAG,CAAC,CAAC,CAChB;AACFif,UAAAA,MAAM,EAANA,MAAM;AACNE,UAAAA,SAAS,EAATA,SAAS;AACTqG,UAAAA,eAAe,EAAE,QAAA;AACnB,SAAA;AACF,OAAC,CAAC,CAAA;AACJ,KAAA;AAAC,GAAA,EAAA;IAAA5tB,GAAA,EAAA,iBAAA;AAAA4B,IAAAA,KAAA,EAED,SAAQwoB,eAAeA,CACrBT,UAA2B,EAC3BkE,OAAsC,EACtC;AACA,MAAA,IACE1G,OAAO,GAKLwC,UAAU,CALZxC,OAAO;QACPE,MAAM,GAIJsC,UAAU,CAJZtC,MAAM;QACNC,aAAa,GAGXqC,UAAU,CAHZrC,aAAa;QACbC,SAAS,GAEPoC,UAAU,CAFZpC,SAAS;QACTuG,+BAA+B,GAC7BnE,UAAU,CADZmE,+BAA+B,CAAA;AAEjCD,MAAAA,OAAO,CAACld,OAAO,CAAC,UAACod,KAAK,EAAK;AACzB,QAAA,IAAIA,KAAK,EAAE;AACT,UAAA,IAAI,CAACnZ,UAAK,CAACuS,OAAO,CAAC,EAAE;AACnB4G,YAAAA,KAAK,CAAChG,KAAK,CAACZ,OAAO,GAAGA,OAAO,CAAA;AAC/B,WAAA;AAEA,UAAA,IAAI,CAACvS,UAAK,CAACyS,MAAM,CAAC,EAAE;AAClB0G,YAAAA,KAAK,CAAChG,KAAK,CAACV,MAAM,GAAGA,MAAM,CAAA;AAC7B,WAAA;AAEA,UAAA,IAAI,CAACzS,UAAK,CAAC0S,aAAa,CAAC,EAAE;AACzByG,YAAAA,KAAK,CAAChG,KAAK,CAACT,aAAa,GAAGA,aAAa,CAAA;AAC3C,WAAA;AAEA,UAAA,IAAI,CAAC1S,UAAK,CAAC2S,SAAS,CAAC,EAAE;AACrBwG,YAAAA,KAAK,CAAChG,KAAK,CAACR,SAAS,GAAGA,SAAS,CAAA;AACnC,WAAA;AAEA,UAAA,IAAI,CAAC3S,UAAK,CAACkZ,+BAA+B,CAAC,EAAE;AAC3CC,YAAAA,KAAK,CAAChG,KAAK,CAAC+F,+BAA+B,GACzCA,+BAA+B,CAAA;AACnC,WAAA;AACF,SAAA;AACF,OAAC,CAAC,CAAA;AACJ,KAAA;AAAC,GAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CAtVwBE,mBAAa,EAAA;AAA3B1E,KAAK,CACTG,GAAG,GAAG,OAAO,CAAA;AADTH,KAAK,CAGT2E,iBAAiB,GAAG,IAAIC,GAAG,CAAA5uB,EAAAA,CAAAA,MAAA,CAAA8N,kBAAA,CAC7B4gB,mBAAa,CAACC,iBAAiB,IAClC,MAAM,EACN,WAAW,EACX,SAAS,EACT,iBAAiB,EACjB,eAAe,EACf,QAAQ,EACR,WAAW,EACX,SAAS,EACT,eAAe,EAChB,CAAC;;ACtDJ,IAAQ7lB,EAAE,GAAKjC,IAAI,CAAXiC,EAAE,CAAA;AACV,IAAM+lB,GAAG,GAAG/lB,EAAE,GAAG,CAAC,CAAA;AAClB,IAAMgmB,OAAO,GAAGjoB,IAAI,CAACqD,GAAG,CAAA;AACxB,IAAM6kB,OAAO,GAAGloB,IAAI,CAACgC,GAAG,CAAA;AACxB,IAAMmmB,QAAQ,GAAGnoB,IAAI,CAACooB,IAAI,CAAA;AAC1B,IAAMC,SAAS,GAAGroB,IAAI,CAAC4mB,KAAK,CAAA;AAC5B;AACA,IAAM0B,QAAQ,GAAGtoB,IAAI,CAACmC,IAAI,CAAA;AAC1B,IAAMomB,OAAO,GAAGvoB,IAAI,CAACwN,GAAG,CAAA;AACxB,IAAMgb,OAAO,GAAGxoB,IAAI,CAACqI,GAAG,CAAA;AACxB,IAAM0X,CAAC,GAAG,IAAI,CAAA;;AAEd;AACA,IAAM0I,mBAAmB,GAAG,CAC1B;AACEjY,EAAAA,IAAI,EAAE,IAAI;AACVkY,EAAAA,QAAQ,EAAE,KAAK;AACfC,EAAAA,YAAY,EAAE,IAAI;EAClBlc,MAAM,EAAEmc,oBAAc,CAACC,iBAAAA;AACzB,CAAC,EACD;AACErY,EAAAA,IAAI,EAAE,KAAK;AACXkY,EAAAA,QAAQ,EAAE,KAAK;AACfC,EAAAA,YAAY,EAAE,IAAI;EAClBlc,MAAM,EAAEmc,oBAAc,CAACC,iBAAAA;AACzB,CAAC,EACD;AACErY,EAAAA,IAAI,EAAE,YAAY;AAClBkY,EAAAA,QAAQ,EAAE,KAAK;AACfC,EAAAA,YAAY,EAAE,IAAI;EAClBlc,MAAM,EAAEmc,oBAAc,CAACE,KAAAA;AACzB,CAAC,EACD;AACEtY,EAAAA,IAAI,EAAE,UAAU;AAChBkY,EAAAA,QAAQ,EAAE,KAAK;AACfC,EAAAA,YAAY,EAAE,IAAI;EAClBlc,MAAM,EAAEmc,oBAAc,CAACE,KAAAA;AACzB,CAAC,CACF,CAAA;AACDL,mBAAmB,CAACje,OAAO,CAAC,UAACO,QAAQ,EAAK;AACxCge,EAAAA,SAAG,CAACC,gBAAgB,CAACje,QAAQ,CAAC,CAAA;AAChC,CAAC,CAAC,CAAA;AAEF,IAAMke,gBAAgB,GAAG,SAAnBA,gBAAgBA,CACpBC,OAAe,EACfC,OAAe,EACfC,MAAc,EACdC,aAAqB,EAClB;EACH,OAAO;IACLtjB,CAAC,EAAEmjB,OAAO,GAAGE,MAAM,GAAGppB,IAAI,CAACgC,GAAG,CAACqnB,aAAa,CAAC;IAC7CxM,CAAC,EAAEsM,OAAO,GAAGC,MAAM,GAAGppB,IAAI,CAACqD,GAAG,CAACgmB,aAAa,CAAA;GAC7C,CAAA;AACH,CAAC,CAAA;AAED,SAASC,SAASA,CAChBC,EAAU,EACVC,EAAU,EACVjE,EAAU,EACVE,EAAU,EACVD,EAAU,EACVE,EAAU,EACV+D,EAAU,EACVC,EAAU,EACoB;AAC9B,EAAA,IAAMC,IAAI,GAAGpE,EAAE,GAAGgE,EAAE,CAAA;AACpB,EAAA,IAAMK,IAAI,GAAGnE,EAAE,GAAG+D,EAAE,CAAA;AACpB,EAAA,IAAMK,IAAI,GAAGJ,EAAE,GAAGjE,EAAE,CAAA;AACpB,EAAA,IAAMsE,IAAI,GAAGJ,EAAE,GAAGhE,EAAE,CAAA;EACpB,IAAIllB,CAAC,GAAGspB,IAAI,GAAGH,IAAI,GAAGE,IAAI,GAAGD,IAAI,CAAA;AACjC,EAAA,IAAIppB,CAAC,GAAGA,CAAC,GAAGuf,CAAC,EAAE;AACb,IAAA,OAAA;AACF,GAAA;AACAvf,EAAAA,CAAC,GAAG,CAACqpB,IAAI,IAAIL,EAAE,GAAG9D,EAAE,CAAC,GAAGoE,IAAI,IAAIP,EAAE,GAAG/D,EAAE,CAAC,IAAIhlB,CAAC,CAAA;AAC7C,EAAA,OAAO,CAAC+oB,EAAE,GAAG/oB,CAAC,GAAGmpB,IAAI,EAAEH,EAAE,GAAGhpB,CAAC,GAAGopB,IAAI,CAAC,CAAA;AACvC,CAAA;;AAEA;AACA,SAASG,qBAAqBA,CAC5BR,EAAU,EACVC,EAAU,EACVjE,EAAU,EACVE,EAAU,EACV2D,MAAc,EACdY,EAAU,EACVC,SAAkB,EAClB;AACA,EAAA,IAAMC,GAAG,GAAGX,EAAE,GAAGhE,EAAE,CAAA;AACnB,EAAA,IAAM4E,GAAG,GAAGX,EAAE,GAAG/D,EAAE,CAAA;AACnB,EAAA,IAAM2E,EAAE,GAAG,CAACH,SAAS,GAAGD,EAAE,GAAG,CAACA,EAAE,IAAI1B,QAAQ,CAAC4B,GAAG,GAAGA,GAAG,GAAGC,GAAG,GAAGA,GAAG,CAAC,CAAA;AACnE,EAAA,IAAME,EAAE,GAAGD,EAAE,GAAGD,GAAG,CAAA;AACnB,EAAA,IAAMG,EAAE,GAAG,CAACF,EAAE,GAAGF,GAAG,CAAA;AACpB,EAAA,IAAMK,GAAG,GAAGhB,EAAE,GAAGc,EAAE,CAAA;AACnB,EAAA,IAAMG,GAAG,GAAGhB,EAAE,GAAGc,EAAE,CAAA;AACnB,EAAA,IAAMG,GAAG,GAAGlF,EAAE,GAAG8E,EAAE,CAAA;AACnB,EAAA,IAAMK,GAAG,GAAGjF,EAAE,GAAG6E,EAAE,CAAA;AACnB,EAAA,IAAMK,GAAG,GAAG,CAACJ,GAAG,GAAGE,GAAG,IAAI,CAAC,CAAA;AAC3B,EAAA,IAAMG,GAAG,GAAG,CAACJ,GAAG,GAAGE,GAAG,IAAI,CAAC,CAAA;AAC3B,EAAA,IAAMG,EAAE,GAAGJ,GAAG,GAAGF,GAAG,CAAA;AACpB,EAAA,IAAMO,EAAE,GAAGJ,GAAG,GAAGF,GAAG,CAAA;EACpB,IAAMO,EAAE,GAAGF,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE,CAAA;AAC5B,EAAA,IAAMrd,CAAC,GAAG2b,MAAM,GAAGY,EAAE,CAAA;EACrB,IAAMhI,CAAC,GAAGuI,GAAG,GAAGG,GAAG,GAAGD,GAAG,GAAGD,GAAG,CAAA;AAC/B,EAAA,IAAMjhB,CAAC,GAAG,CAACuhB,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,IAAIxC,QAAQ,CAACC,OAAO,CAAC,CAAC,EAAE9a,CAAC,GAAGA,CAAC,GAAGsd,EAAE,GAAG/I,CAAC,GAAGA,CAAC,CAAC,CAAC,CAAA;EACtE,IAAIgJ,GAAG,GAAG,CAAChJ,CAAC,GAAG8I,EAAE,GAAGD,EAAE,GAAGthB,CAAC,IAAIwhB,EAAE,CAAA;AAChC,EAAA,IAAIE,GAAG,GAAG,CAAC,CAACjJ,CAAC,GAAG6I,EAAE,GAAGC,EAAE,GAAGvhB,CAAC,IAAIwhB,EAAE,CAAA;EACjC,IAAMG,GAAG,GAAG,CAAClJ,CAAC,GAAG8I,EAAE,GAAGD,EAAE,GAAGthB,CAAC,IAAIwhB,EAAE,CAAA;AAClC,EAAA,IAAMI,GAAG,GAAG,CAAC,CAACnJ,CAAC,GAAG6I,EAAE,GAAGC,EAAE,GAAGvhB,CAAC,IAAIwhB,EAAE,CAAA;AACnC,EAAA,IAAMK,GAAG,GAAGJ,GAAG,GAAGL,GAAG,CAAA;AACrB,EAAA,IAAMU,GAAG,GAAGJ,GAAG,GAAGL,GAAG,CAAA;AACrB,EAAA,IAAMU,GAAG,GAAGJ,GAAG,GAAGP,GAAG,CAAA;AACrB,EAAA,IAAMY,GAAG,GAAGJ,GAAG,GAAGP,GAAG,CAAA;;AAErB;AACA;AACA,EAAA,IAAIQ,GAAG,GAAGA,GAAG,GAAGC,GAAG,GAAGA,GAAG,GAAGC,GAAG,GAAGA,GAAG,GAAGC,GAAG,GAAGA,GAAG,EAAE;AACjDP,IAAAA,GAAG,GAAGE,GAAG,CAAA;AACTD,IAAAA,GAAG,GAAGE,GAAG,CAAA;AACX,GAAA;EAEA,OAAO;AACLhJ,IAAAA,EAAE,EAAE6I,GAAG;AACP5I,IAAAA,EAAE,EAAE6I,GAAG;IACP1B,EAAE,EAAE,CAACc,EAAE;IACPb,EAAE,EAAE,CAACc,EAAE;IACP/E,EAAE,EAAEyF,GAAG,IAAI5B,MAAM,GAAG3b,CAAC,GAAG,CAAC,CAAC;AAC1BgY,IAAAA,EAAE,EAAEwF,GAAG,IAAI7B,MAAM,GAAG3b,CAAC,GAAG,CAAC,CAAA;GAC1B,CAAA;AACH,CAAA;AAEA,SAAS+d,eAAeA,CAACC,UAAkB,EAAEC,QAAgB,EAAE;AAC7DA,EAAAA,QAAQ,GAAGA,QAAQ,GAAG,CAAC,IAAID,UAAU,IAAI,CAAC,GAAGC,QAAQ,GAAG1D,GAAG,GAAG0D,QAAQ,CAAA;EACtE,OAAOA,QAAQ,GAAGD,UAAU,IAAIxpB,EAAE,GAAG,CAAC,GAAG,CAAC,CAAA;AAC5C,CAAA;AAEa0pB,IAAAA,MAAM,0BAAAC,KAAA,EAAA;AAYjB;EACA,SAAAD,MAAAA,CAAYtI,MAAM,EAAE;AAAA,IAAA,IAAA/rB,KAAA,CAAA;AAAAC,IAAAA,eAAA,OAAAo0B,MAAA,CAAA,CAAA;AAClBr0B,IAAAA,KAAA,GAAAE,UAAA,CAAAm0B,IAAAA,EAAAA,MAAA,GAAMtI,MAAM,CAAA,CAAA,CAAA;IACZ/rB,KAAA,CAAKu0B,UAAU,EAAE,CAAA;AAAC,IAAA,OAAAv0B,KAAA,CAAA;AACpB,GAAA;EAACY,SAAA,CAAAyzB,MAAA,EAAAC,KAAA,CAAA,CAAA;EAAA,OAAAzzB,YAAA,CAAAwzB,MAAA,EAAA,CAAA;IAAA9xB,GAAA,EAAA,cAAA;IAAA4B,KAAA,EACD,SAAAqP,YAAYA,CAAC0F,IAAI,EAAE/U,KAAK,EAAEqwB,KAAe,EAAE;AACzCC,MAAAA,aAAA,CAAAJ,MAAA,EAAA,cAAA,EAAA,IAAA,EAAA,CAAA,CAAA,CAAA,CAAmBnb,IAAI,EAAE/U,KAAK,EAAEqwB,KAAK,CAAA,CAAA,CAAA;AACrC,MAAA,IAAI,CAAC,YAAY,EAAE,UAAU,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC1xB,OAAO,CAACoW,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE;QACxE,IAAI,CAACqb,UAAU,EAAE,CAAA;AACnB,OAAA;AACF,KAAA;AAAC,GAAA,EAAA;IAAAhyB,GAAA,EAAA,YAAA;AAAA4B,IAAAA,KAAA,EAED,SAAQowB,UAAUA,GAAG;AACnB;AACA,MAAA,IAAAG,iBAAA,GAAwD,IAAI,CAACC,WAAW;QAAhElmB,CAAC,GAAAimB,iBAAA,CAADjmB,CAAC;QAAE8W,CAAC,GAAAmP,iBAAA,CAADnP,CAAC;QAAE4O,UAAU,GAAAO,iBAAA,CAAVP,UAAU;QAAEC,QAAQ,GAAAM,iBAAA,CAARN,QAAQ;QAAEQ,EAAE,GAAAF,iBAAA,CAAFE,EAAE;QAAEC,GAAG,GAAAH,iBAAA,CAAHG,GAAG;QAAE/C,MAAM,GAAA4C,iBAAA,CAAN5C,MAAM,CAAA;MAEnD,IAAMvG,IAAI,GAAG,IAAI,CAACuJ,UAAU,CAC1BrmB,CAAC,EACD8W,CAAC,EACD4O,UAAU,GAAGvX,aAAO,CAACuX,UAAU,CAAC,GAAG,CAAC,EACpCC,QAAQ,GAAGxX,aAAO,CAACwX,QAAQ,CAAC,GAAG1rB,IAAI,CAACiC,EAAE,GAAG,CAAC,EAC1CiqB,EAAE,IAAI,CAAC,EACPC,GAAG,IAAI,CAAC,EACR/C,MAAM,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CACvB,CAAC,CAAA;AACD2C,MAAAA,aAAA,CAAAJ,MAAA,EAAmB,cAAA,EAAA,IAAA,EAAA,CAAA,CAAA,CAAA,CAAA,GAAG,EAAE9I,IAAI,CAAA,CAAA,CAAA;AAC9B,KAAA;AAAC,GAAA,EAAA;IAAAhpB,GAAA,EAAA,YAAA;AAAA4B,IAAAA,KAAA,EAED,SAAQ2wB,UAAUA,CAChBrmB,CAAS,EACT8W,CAAS,EACT4O,UAAkB,EAClBC,QAAgB,EAChBje,CAAS,EACT4e,EAAU,EACVC,YAAsB,EACC;MACvB,IAAI7e,CAAC,IAAI,CAAC,EAAE;AACV,QAAA,OAAA;AACF,OAAA;MACA,IAAMnG,KAAK,GAAG2hB,gBAAgB,CAACljB,CAAC,EAAE8W,CAAC,EAAEpP,CAAC,EAAEge,UAAU,CAAC,CAAA;MACnD,IAAMjkB,GAAG,GAAGyhB,gBAAgB,CAACljB,CAAC,EAAE8W,CAAC,EAAEpP,CAAC,EAAEie,QAAQ,CAAC,CAAA;MAE/C,IAAMa,UAAU,GAAGtD,gBAAgB,CAACljB,CAAC,EAAE8W,CAAC,EAAEwP,EAAE,EAAEZ,UAAU,CAAC,CAAA;MACzD,IAAMe,QAAQ,GAAGvD,gBAAgB,CAACljB,CAAC,EAAE8W,CAAC,EAAEwP,EAAE,EAAEX,QAAQ,CAAC,CAAA;;AAErD;AACA,MAAA,IAAIe,kBAAa,CAACf,QAAQ,GAAGD,UAAU,EAAEzrB,IAAI,CAACiC,EAAE,GAAG,CAAC,CAAC,EAAE;AACrD;AACA,QAAA,IAAMyqB,WAAW,GAAGzD,gBAAgB,CAACljB,CAAC,EAAE8W,CAAC,EAAEpP,CAAC,EAAEge,UAAU,GAAGzrB,IAAI,CAACiC,EAAE,CAAC,CAAA;AACnE,QAAA,IAAM0qB,gBAAgB,GAAG1D,gBAAgB,CAACljB,CAAC,EAAE8W,CAAC,EAAEwP,EAAE,EAAEZ,UAAU,GAAGzrB,IAAI,CAACiC,EAAE,CAAC,CAAA;AACzE,QAAA,IAAM2qB,kBAAkB,GAAG,CACzB,CAAC,GAAG,EAAEtlB,KAAK,CAACvB,CAAC,EAAEuB,KAAK,CAACuV,CAAC,CAAC,EACvB,CAAC,GAAG,EAAEpP,CAAC,EAAEA,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAEif,WAAW,CAAC3mB,CAAC,EAAE2mB,WAAW,CAAC7P,CAAC,CAAC,EAClD,CAAC,GAAG,EAAEpP,CAAC,EAAEA,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAEjG,GAAG,CAACzB,CAAC,EAAEyB,GAAG,CAACqV,CAAC,CAAC,EAClC,CAAC,GAAG,EAAE0P,UAAU,CAACxmB,CAAC,EAAEwmB,UAAU,CAAC1P,CAAC,CAAC,CAClC,CAAA;AACD,QAAA,IAAIwP,EAAE,EAAE;UACNO,kBAAkB,CAACvyB,IAAI,CAAC,CACtB,GAAG,EACHgyB,EAAE,EACFA,EAAE,EACF,CAAC,EACD,CAAC,EACD,CAAC,EACDM,gBAAgB,CAAC5mB,CAAC,EAClB4mB,gBAAgB,CAAC9P,CAAC,CACnB,CAAC,CAAA;UACF+P,kBAAkB,CAACvyB,IAAI,CAAC,CAAC,GAAG,EAAEgyB,EAAE,EAAEA,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAEG,QAAQ,CAACzmB,CAAC,EAAEymB,QAAQ,CAAC3P,CAAC,CAAC,CAAC,CAAA;AACzE,SAAA;AAEA+P,QAAAA,kBAAkB,CAACvyB,IAAI,CAAC,CAAC,GAAG,EAAEiN,KAAK,CAACvB,CAAC,EAAEuB,KAAK,CAACuV,CAAC,CAAC,CAAC,CAAA;AAChD+P,QAAAA,kBAAkB,CAACvyB,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;AAE9B,QAAA,OAAOuyB,kBAAkB,CAAA;AAC3B,OAAA;AAEA,MAAA,IAAMC,KAAK,GAAGnB,QAAQ,GAAGD,UAAU,CAAA;AACnC,MAAA,IAAMqB,GAAG,GAAGrf,CAAC,GAAGya,OAAO,CAACuD,UAAU,CAAC,CAAA;AACnC,MAAA,IAAMsB,GAAG,GAAGtf,CAAC,GAAGwa,OAAO,CAACwD,UAAU,CAAC,CAAA;AACnC,MAAA,IAAMuB,IAAI,GAAGX,EAAE,GAAGnE,OAAO,CAACwD,QAAQ,CAAC,CAAA;AACnC,MAAA,IAAMuB,IAAI,GAAGZ,EAAE,GAAGpE,OAAO,CAACyD,QAAQ,CAAC,CAAA;AAEnC,MAAA,IAAMwB,GAAG,GAAGzf,CAAC,GAAGya,OAAO,CAACwD,QAAQ,CAAC,CAAA;AACjC,MAAA,IAAMyB,GAAG,GAAG1f,CAAC,GAAGwa,OAAO,CAACyD,QAAQ,CAAC,CAAA;AACjC,MAAA,IAAM0B,IAAI,GAAGf,EAAE,GAAGnE,OAAO,CAACuD,UAAU,CAAC,CAAA;AACrC,MAAA,IAAM4B,IAAI,GAAGhB,EAAE,GAAGpE,OAAO,CAACwD,UAAU,CAAC,CAAA;;AAErC;AACA,MAAA,IAAA6B,aAAA,GAAAzqB,cAAA,CACEypB,YAAY,EAAA,CAAA,CAAA;AADPiB,QAAAA,cAAc,GAAAD,aAAA,CAAA,CAAA,CAAA;AAAEE,QAAAA,YAAY,GAAAF,aAAA,CAAA,CAAA,CAAA;AAAEG,QAAAA,cAAc,GAAAH,aAAA,CAAA,CAAA,CAAA;AAAEI,QAAAA,gBAAgB,GAAAJ,aAAA,CAAA,CAAA,CAAA,CAAA;AAGrE,MAAA,IAAMK,UAAU,GAAG,CAAClgB,CAAC,GAAG4e,EAAE,IAAI,CAAC,CAAA;AAC/B,MAAA,IAAMuB,oBAAoB,GAAGpF,OAAO,CAACmF,UAAU,EAAEJ,cAAc,CAAC,CAAA;AAChE,MAAA,IAAMM,kBAAkB,GAAGrF,OAAO,CAACmF,UAAU,EAAEH,YAAY,CAAC,CAAA;AAC5D,MAAA,IAAMM,oBAAoB,GAAGtF,OAAO,CAACmF,UAAU,EAAEF,cAAc,CAAC,CAAA;AAChE,MAAA,IAAMM,sBAAsB,GAAGvF,OAAO,CAACmF,UAAU,EAAED,gBAAgB,CAAC,CAAA;AAEpE,MAAA,IAAMM,kBAAkB,GAAGzF,OAAO,CAChCqF,oBAAoB,EACpBC,kBACF,CAAC,CAAA;AACD,MAAA,IAAMI,oBAAoB,GAAG1F,OAAO,CAClCuF,oBAAoB,EACpBC,sBACF,CAAC,CAAA;MAED,IAAIG,yBAAyB,GAAGF,kBAAkB,CAAA;MAClD,IAAIG,2BAA2B,GAAGF,oBAAoB,CAAA;;AAEtD;AACA,MAAA,IAAID,kBAAkB,GAAGjO,CAAC,IAAIkO,oBAAoB,GAAGlO,CAAC,EAAE;AACtD;QACA,IAAI8M,KAAK,GAAG5qB,EAAE,EAAE;AACd,UAAA,IAAMmsB,EAAE,GAAG9E,SAAS,CAACwD,GAAG,EAAEC,GAAG,EAAEK,IAAI,EAAEC,IAAI,EAAEH,GAAG,EAAEC,GAAG,EAAEH,IAAI,EAAEC,IAAI,CAAC,CAAA;AAChE,UAAA,IAAImB,EAAE,EAAE;AACN,YAAA,IAAM7E,EAAE,GAAGuD,GAAG,GAAGsB,EAAE,CAAC,CAAC,CAAC,CAAA;AACtB,YAAA,IAAM5E,EAAE,GAAGuD,GAAG,GAAGqB,EAAE,CAAC,CAAC,CAAC,CAAA;AACtB,YAAA,IAAM7I,EAAE,GAAG2H,GAAG,GAAGkB,EAAE,CAAC,CAAC,CAAC,CAAA;AACtB,YAAA,IAAM3I,EAAE,GAAG0H,GAAG,GAAGiB,EAAE,CAAC,CAAC,CAAC,CAAA;AACtB,YAAA,IAAMlrB,CAAC,GACL,CAAC,GACD+kB,OAAO,CACLE,QAAQ,CACN,CAACoB,EAAE,GAAGhE,EAAE,GAAGiE,EAAE,GAAG/D,EAAE,KACf6C,QAAQ,CAACiB,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE,CAAC,GAAGlB,QAAQ,CAAC/C,EAAE,GAAGA,EAAE,GAAGE,EAAE,GAAGA,EAAE,CAAC,CAC9D,CAAC,GAAG,CACN,CAAC,CAAA;YACH,IAAMljB,CAAC,GAAG+lB,QAAQ,CAAC8F,EAAE,CAAC,CAAC,CAAC,GAAGA,EAAE,CAAC,CAAC,CAAC,GAAGA,EAAE,CAAC,CAAC,CAAC,GAAGA,EAAE,CAAC,CAAC,CAAC,CAAC,CAAA;AACjDF,YAAAA,yBAAyB,GAAG1F,OAAO,CACjCwF,kBAAkB,EAClB,CAACvgB,CAAC,GAAGlL,CAAC,KAAKW,CAAC,GAAG,CAAC,CAClB,CAAC,CAAA;AACDirB,YAAAA,2BAA2B,GAAG3F,OAAO,CACnCyF,oBAAoB,EACpB,CAAC5B,EAAE,GAAG9pB,CAAC,KAAKW,CAAC,GAAG,CAAC,CACnB,CAAC,CAAA;AACH,WAAA;AACF,SAAA;AACF,OAAA;AACA,MAAA,IAAMmrB,QAAQ,GAAG7C,eAAe,CAACC,UAAU,EAAEC,QAAQ,CAAC,CAAA;MACtD,IAAMzB,SAAS,GAAG,IAAI,CAAA;MACtB,IAAMqE,kBAA6B,GAAG,EAA0B,CAAA;MAEhE,IAAIJ,yBAAyB,GAAGnO,CAAC,EAAE;AACjC,QAAA,IAAMwO,OAAO,GAAG/F,OAAO,CAAC+E,cAAc,EAAEW,yBAAyB,CAAC,CAAA;AAClE,QAAA,IAAMM,KAAK,GAAGhG,OAAO,CAACgF,YAAY,EAAEU,yBAAyB,CAAC,CAAA;AAC9D,QAAA,IAAMO,GAAG,GAAG1E,qBAAqB,CAC/BqD,IAAI,EACJC,IAAI,EACJP,GAAG,EACHC,GAAG,EACHtf,CAAC,EACD8gB,OAAO,EACPtE,SACF,CAAC,CAAA;AACD,QAAA,IAAMyE,GAAG,GAAG3E,qBAAqB,CAC/BmD,GAAG,EACHC,GAAG,EACHH,IAAI,EACJC,IAAI,EACJxf,CAAC,EACD+gB,KAAK,EACLvE,SACF,CAAC,CAAA;QAEDqE,kBAAkB,CAACj0B,IAAI,CAAC,CAAC,GAAG,EAAE0L,CAAC,GAAG0oB,GAAG,CAACtM,EAAE,GAAGsM,GAAG,CAAClF,EAAE,EAAE1M,CAAC,GAAG4R,GAAG,CAACrM,EAAE,GAAGqM,GAAG,CAACjF,EAAE,CAAC,CAAC,CAAA;;AAExE;AACA,QAAA,IAAI0E,yBAAyB,GAAGF,kBAAkB,IAAIO,OAAO,KAAKC,KAAK,EAAE;UACvE,IAAMG,8BAA8B,GAAGtG,SAAS,CAACoG,GAAG,CAACjF,EAAE,EAAEiF,GAAG,CAAClF,EAAE,CAAC,CAAA;UAChE,IAAMqF,4BAA4B,GAAGvG,SAAS,CAACqG,GAAG,CAAClF,EAAE,EAAEkF,GAAG,CAACnF,EAAE,CAAC,CAAA;AAC9D+E,UAAAA,kBAAkB,CAACj0B,IAAI,CAAC,CACtB,GAAG,EACH6zB,yBAAyB,EACzBA,yBAAyB,EACzB,CAAC,EACD1C,eAAe,CACbmD,8BAA8B,EAC9BC,4BACF,CAAC,EACD,CAAC,EACD7oB,CAAC,GAAG2oB,GAAG,CAACvM,EAAE,GAAGuM,GAAG,CAACnF,EAAE,EACnB1M,CAAC,GAAG6R,GAAG,CAACtM,EAAE,GAAGsM,GAAG,CAAClF,EAAE,CACpB,CAAC,CAAA;AACJ,SAAC,MAAM;AACL;UACA,IAAI+E,OAAO,GAAG,CAAC,EAAE;YACf,IAAMI,+BAA8B,GAAGtG,SAAS,CAACoG,GAAG,CAACjF,EAAE,EAAEiF,GAAG,CAAClF,EAAE,CAAC,CAAA;YAChE,IAAMqF,6BAA4B,GAAGvG,SAAS,CAACoG,GAAG,CAAChJ,EAAE,EAAEgJ,GAAG,CAAClJ,EAAE,CAAC,CAAA;YAC9D,IAAMsJ,4BAA4B,GAAG5F,gBAAgB,CACnDljB,CAAC,EACD8W,CAAC,EACDpP,CAAC,EACDmhB,6BACF,CAAC,CAAA;AACDN,YAAAA,kBAAkB,CAACj0B,IAAI,CAAC,CACtB,GAAG,EACHk0B,OAAO,EACPA,OAAO,EACP,CAAC,EACD/C,eAAe,CACbmD,+BAA8B,EAC9BC,6BACF,CAAC,EACD,CAAC,EACDC,4BAA4B,CAAC9oB,CAAC,EAC9B8oB,4BAA4B,CAAChS,CAAC,CAC/B,CAAC,CAAA;AACJ,WAAA;AAEA,UAAA,IAAMiS,mBAAmB,GAAGzG,SAAS,CAACoG,GAAG,CAACrM,EAAE,GAAGqM,GAAG,CAAChJ,EAAE,EAAEgJ,GAAG,CAACtM,EAAE,GAAGsM,GAAG,CAAClJ,EAAE,CAAC,CAAA;AACvE,UAAA,IAAMwJ,iBAAiB,GAAG1G,SAAS,CAACqG,GAAG,CAACtM,EAAE,GAAGsM,GAAG,CAACjJ,EAAE,EAAEiJ,GAAG,CAACvM,EAAE,GAAGuM,GAAG,CAACnJ,EAAE,CAAC,CAAA;UACrE,IAAMyJ,iBAAiB,GAAG/F,gBAAgB,CAACljB,CAAC,EAAE8W,CAAC,EAAEpP,CAAC,EAAEshB,iBAAiB,CAAC,CAAA;AACtET,UAAAA,kBAAkB,CAACj0B,IAAI,CAAC,CACtB,GAAG,EACHoT,CAAC,EACDA,CAAC,EACD,CAAC,EACD+d,eAAe,CAACsD,mBAAmB,EAAEC,iBAAiB,CAAC,EACvD,CAAC,EACDC,iBAAiB,CAACjpB,CAAC,EACnBipB,iBAAiB,CAACnS,CAAC,CACpB,CAAC,CAAA;UACF,IAAI2R,KAAK,GAAG,CAAC,EAAE;YACb,IAAMS,4BAA4B,GAAG5G,SAAS,CAACqG,GAAG,CAACjJ,EAAE,EAAEiJ,GAAG,CAACnJ,EAAE,CAAC,CAAA;YAC9D,IAAM2J,0BAA0B,GAAG7G,SAAS,CAACqG,GAAG,CAAClF,EAAE,EAAEkF,GAAG,CAACnF,EAAE,CAAC,CAAA;AAC5D+E,YAAAA,kBAAkB,CAACj0B,IAAI,CAAC,CACtB,GAAG,EACHm0B,KAAK,EACLA,KAAK,EACL,CAAC,EACDhD,eAAe,CACbyD,4BAA4B,EAC5BC,0BACF,CAAC,EACD,CAAC,EACDnpB,CAAC,GAAG2oB,GAAG,CAACvM,EAAE,GAAGuM,GAAG,CAACnF,EAAE,EACnB1M,CAAC,GAAG6R,GAAG,CAACtM,EAAE,GAAGsM,GAAG,CAAClF,EAAE,CACpB,CAAC,CAAA;AACJ,WAAA;AACF,SAAA;AACF,OAAC,MAAM;AACL8E,QAAAA,kBAAkB,CAACj0B,IAAI,CAAC,CAAC,GAAG,EAAEiN,KAAK,CAACvB,CAAC,EAAEuB,KAAK,CAACuV,CAAC,CAAC,CAAC,CAAA;QAChDyR,kBAAkB,CAACj0B,IAAI,CAAC,CAAC,GAAG,EAAEoT,CAAC,EAAEA,CAAC,EAAE,CAAC,EAAE4gB,QAAQ,EAAE,CAAC,EAAE7mB,GAAG,CAACzB,CAAC,EAAEyB,GAAG,CAACqV,CAAC,CAAC,CAAC,CAAA;AACpE,OAAA;;AAEA;MACA,IAAIwP,EAAE,GAAGtM,CAAC,EAAE;AACVuO,QAAAA,kBAAkB,CAACj0B,IAAI,CAAC,CAAC,GAAG,EAAEmyB,QAAQ,CAACzmB,CAAC,EAAEymB,QAAQ,CAAC3P,CAAC,CAAC,CAAC,CAAA;AACxD,OAAA;AACA;AAAA,WACK,IAAIsR,2BAA2B,GAAGpO,CAAC,EAAE;AACxC,QAAA,IAAMwO,QAAO,GAAG/F,OAAO,CAACkF,gBAAgB,EAAES,2BAA2B,CAAC,CAAA;AACtE,QAAA,IAAMK,MAAK,GAAGhG,OAAO,CAACiF,cAAc,EAAEU,2BAA2B,CAAC,CAAA;AAClE,QAAA,IAAMM,GAAG,GAAG1E,qBAAqB,CAC/BiD,IAAI,EACJC,IAAI,EACJ,CAAC,EACD,CAAC,EACDZ,EAAE,GAAG5e,CAAC,EACN+gB,MAAK,EACLvE,SACF,CAAC,CAAA;AACD,QAAA,IAAMyE,IAAG,GAAG3E,qBAAqB,CAC/B,CAAC,EACD,CAAC,EACDqD,IAAI,EACJC,IAAI,EACJhB,EAAE,GAAG5e,CAAC,EACN8gB,QAAO,EACPtE,SACF,CAAC,CAAA;QAEDqE,kBAAkB,CAACj0B,IAAI,CAAC,CAAC,GAAG,EAAE0L,CAAC,GAAG0oB,GAAG,CAACtM,EAAE,GAAGsM,GAAG,CAAClF,EAAE,EAAE1M,CAAC,GAAG4R,GAAG,CAACrM,EAAE,GAAGqM,GAAG,CAACjF,EAAE,CAAC,CAAC,CAAA;;AAExE;AACA,QAAA,IACE2E,2BAA2B,GAAGF,oBAAoB,IAClDM,QAAO,KAAKC,MAAK,EACjB;UACA,IAAMW,gCAAgC,GAAG9G,SAAS,CAACoG,GAAG,CAACjF,EAAE,EAAEiF,GAAG,CAAClF,EAAE,CAAC,CAAA;UAClE,IAAM6F,8BAA8B,GAAG/G,SAAS,CAACqG,IAAG,CAAClF,EAAE,EAAEkF,IAAG,CAACnF,EAAE,CAAC,CAAA;UAChE,IAAM8F,8BAA8B,GAAGpG,gBAAgB,CACrDljB,CAAC,EACD8W,CAAC,EACDwP,EAAE,EACF+C,8BACF,CAAC,CAAA;AACDd,UAAAA,kBAAkB,CAACj0B,IAAI,CAAC,CACtB,GAAG,EACH6zB,yBAAyB,EACzBA,yBAAyB,EACzB,CAAC,EACD1C,eAAe,CACb2D,gCAAgC,EAChCC,8BACF,CAAC,EACD,CAAC,EACDC,8BAA8B,CAACtpB,CAAC,EAChCspB,8BAA8B,CAACxS,CAAC,CACjC,CAAC,CAAA;AACJ,SAAA;AACA;aACK;UACH,IAAI2R,MAAK,GAAG,CAAC,EAAE;YACb,IAAMW,iCAAgC,GAAG9G,SAAS,CAACoG,GAAG,CAACjF,EAAE,EAAEiF,GAAG,CAAClF,EAAE,CAAC,CAAA;YAClE,IAAM6F,+BAA8B,GAAG/G,SAAS,CAACoG,GAAG,CAAChJ,EAAE,EAAEgJ,GAAG,CAAClJ,EAAE,CAAC,CAAA;AAChE,YAAA,IAAM8J,+BAA8B,GAAGpG,gBAAgB,CACrDljB,CAAC,EACD8W,CAAC,EACDwP,EAAE,GAAG5e,CAAC,EACN2hB,+BACF,CAAC,CAAA;AACDd,YAAAA,kBAAkB,CAACj0B,IAAI,CAAC,CACtB,GAAG,EACHm0B,MAAK,EACLA,MAAK,EACL,CAAC,EACDhD,eAAe,CACb2D,iCAAgC,EAChCC,+BACF,CAAC,EACD,CAAC,EACDC,+BAA8B,CAACtpB,CAAC,EAChCspB,+BAA8B,CAACxS,CAAC,CACjC,CAAC,CAAA;AACJ,WAAA;AACA,UAAA,IAAMyS,qBAAqB,GAAGjH,SAAS,CACrCoG,GAAG,CAACrM,EAAE,GAAGqM,GAAG,CAAChJ,EAAE,EACfgJ,GAAG,CAACtM,EAAE,GAAGsM,GAAG,CAAClJ,EACf,CAAC,CAAA;AACD,UAAA,IAAMgK,mBAAmB,GAAGlH,SAAS,CAACqG,IAAG,CAACtM,EAAE,GAAGsM,IAAG,CAACjJ,EAAE,EAAEiJ,IAAG,CAACvM,EAAE,GAAGuM,IAAG,CAACnJ,EAAE,CAAC,CAAA;UACvE,IAAMiK,mBAAmB,GAAGvG,gBAAgB,CAC1CljB,CAAC,EACD8W,CAAC,EACDwP,EAAE,EACFkD,mBACF,CAAC,CAAA;AACDjB,UAAAA,kBAAkB,CAACj0B,IAAI,CAAC,CACtB,GAAG,EACHgyB,EAAE,EACFA,EAAE,EACF,CAAC,EACDb,eAAe,CAAC+D,mBAAmB,EAAED,qBAAqB,CAAC,EAC3D,CAAC,EACDE,mBAAmB,CAACzpB,CAAC,EACrBypB,mBAAmB,CAAC3S,CAAC,CACtB,CAAC,CAAA;AACFyR,UAAAA,kBAAkB,CAACj0B,IAAI,CAAC,CACtB,GAAG,EACHm1B,mBAAmB,CAACzpB,CAAC,EACrBypB,mBAAmB,CAAC3S,CAAC,CACtB,CAAC,CAAA;UACF,IAAI0R,QAAO,GAAG,CAAC,EAAE;YACf,IAAMkB,8BAA8B,GAAGpH,SAAS,CAACqG,IAAG,CAACjJ,EAAE,EAAEiJ,IAAG,CAACnJ,EAAE,CAAC,CAAA;YAChE,IAAMmK,4BAA4B,GAAGrH,SAAS,CAACqG,IAAG,CAAClF,EAAE,EAAEkF,IAAG,CAACnF,EAAE,CAAC,CAAA;AAC9D+E,YAAAA,kBAAkB,CAACj0B,IAAI,CAAC,CACtB,GAAG,EACHk0B,QAAO,EACPA,QAAO,EACP,CAAC,EACD/C,eAAe,CACbiE,8BAA8B,EAC9BC,4BACF,CAAC,EACD,CAAC,EACD3pB,CAAC,GAAG2oB,IAAG,CAACvM,EAAE,GAAGuM,IAAG,CAACnF,EAAE,EACnB1M,CAAC,GAAG6R,IAAG,CAACtM,EAAE,GAAGsM,IAAG,CAAClF,EAAE,CACpB,CAAC,CAAA;AACJ,WAAA;AACF,SAAA;AACF,OAAA;AACA;WACK;AACH8E,QAAAA,kBAAkB,CAACj0B,IAAI,CAAC,CAAC,GAAG,EAAEmyB,QAAQ,CAACzmB,CAAC,EAAEymB,QAAQ,CAAC3P,CAAC,CAAC,CAAC,CAAA;QACtDyR,kBAAkB,CAACj0B,IAAI,CAAC,CACtB,GAAG,EACHgyB,EAAE,EACFA,EAAE,EACF,CAAC,EACDgC,QAAQ,EACR,CAAC,EACD9B,UAAU,CAACxmB,CAAC,EACZwmB,UAAU,CAAC1P,CAAC,CACb,CAAC,CAAA;AACJ,OAAA;AACAyR,MAAAA,kBAAkB,CAACj0B,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;AAE9B,MAAA,OAAOi0B,kBAAkB,CAAA;AAC3B,KAAA;AAAC,GAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CAlZyBxL,UAAI,EAAA;AAAnB6I,MAAM,CACV7D,iBAAiB,GAAG,IAAIC,GAAG,CAAA,EAAA,CAAA5uB,MAAA,CAAA8N,kBAAA,CAC7B6b,UAAI,CAACgF,iBAAiB,CAAA,EAAA,CACzB,GAAG,EACH,GAAG,EACH,IAAI,EACJ,KAAK,EACL,QAAQ,EACR,YAAY,EACZ,UAAU,CAAA,CACX,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}