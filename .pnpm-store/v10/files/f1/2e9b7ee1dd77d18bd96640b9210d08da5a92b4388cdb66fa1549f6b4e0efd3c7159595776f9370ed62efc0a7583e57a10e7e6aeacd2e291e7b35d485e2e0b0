{"version":3,"file":"index.umd.min.js","sources":["../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/typeof.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/createClass.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../src/dom/AnimationEvent.ts","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/callSuper.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/inherits.js","../src/dom/Animation.ts","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../src/utils/bezier-easing.ts","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../../../node_modules/.pnpm/@antv+util@3.3.11/node_modules/@antv/util/esm/lodash/is-nil.js","../../../node_modules/.pnpm/@antv+util@3.3.11/node_modules/@antv/util/esm/lodash/clamp.js","../src/utils/custom-easing.ts","../src/utils/animation.ts","../src/utils/interpolation.ts","../../../node_modules/.pnpm/@antv+util@3.3.11/node_modules/@antv/util/esm/lodash/is-number.js","../src/dom/AnimationEffectTiming.ts","../src/dom/KeyframeList.ts","../src/dom/KeyframeEffect.ts","../src/dom/AnimationTimeline.ts","../src/index.ts"],"sourcesContent":["function _classCallCheck(a, n) {\n  if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n}\nexport { _classCallCheck as default };","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nexport { _createClass as default };","function _getPrototypeOf(t) {\n  return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {\n    return t.__proto__ || Object.getPrototypeOf(t);\n  }, _getPrototypeOf(t);\n}\nexport { _getPrototypeOf as default };","function _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {\n    return !!t;\n  })();\n}\nexport { _isNativeReflectConstruct as default };","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nfunction _possibleConstructorReturn(t, e) {\n  if (e && (\"object\" == _typeof(e) || \"function\" == typeof e)) return e;\n  if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\");\n  return assertThisInitialized(t);\n}\nexport { _possibleConstructorReturn as default };","function _assertThisInitialized(e) {\n  if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  return e;\n}\nexport { _assertThisInitialized as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import type { EventService } from '@antv/g-lite';\nimport { FederatedEvent } from '@antv/g-lite';\nimport type { Animation } from './Animation';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationPlaybackEvent\n */\n// @ts-ignore\nexport class AnimationEvent\n  extends FederatedEvent\n  implements AnimationPlaybackEvent\n{\n  constructor(\n    manager: EventService | null,\n    target: Animation,\n    public currentTime: number | null,\n    public timelineTime: number,\n  ) {\n    super(manager);\n\n    // @ts-ignore\n    this.target = target;\n    this.type = 'finish';\n    this.bubbles = false;\n    // @ts-ignore\n    this.currentTarget = target;\n    this.defaultPrevented = false;\n    this.eventPhase = this.AT_TARGET;\n    this.timeStamp = Date.now();\n    this.currentTime = currentTime;\n    this.timelineTime = timelineTime;\n  }\n}\n","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nfunction _callSuper(t, o, e) {\n  return o = getPrototypeOf(o), possibleConstructorReturn(t, isNativeReflectConstruct() ? Reflect.construct(o, e || [], getPrototypeOf(t).constructor) : o.apply(t, e));\n}\nexport { _callSuper as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inherits(t, e) {\n  if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\");\n  t.prototype = Object.create(e && e.prototype, {\n    constructor: {\n      value: t,\n      writable: !0,\n      configurable: !0\n    }\n  }), Object.defineProperty(t, \"prototype\", {\n    writable: !1\n  }), e && setPrototypeOf(t, e);\n}\nexport { _inherits as default };","import type { DisplayObject, IAnimation } from '@antv/g-lite';\nimport { ERROR_MSG_METHOD_NOT_IMPLEMENTED } from '@antv/g-lite';\nimport { AnimationEvent } from './AnimationEvent';\nimport type { AnimationTimeline } from './AnimationTimeline';\nimport type { KeyframeEffect } from './KeyframeEffect';\n\nlet sequenceNumber = 0;\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/Animation\n */\nexport class Animation implements IAnimation {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/effect\n   */\n  effect: KeyframeEffect;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/timeline\n   */\n  timeline: AnimationTimeline;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/id\n   */\n  id: string;\n\n  // animation: InternalAnimation | null;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/pending\n   */\n  get pending() {\n    return (\n      (this._startTime === null && !this._paused && this.playbackRate !== 0) ||\n      this.currentTimePending\n    );\n  }\n  private currentTimePending = false;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/playState\n   */\n  // playState: AnimationPlayState;\n  private _idle = true;\n  private _paused = false;\n  private _finishedFlag = true;\n  get playState(): AnimationPlayState {\n    if (this._idle) return 'idle';\n    if (this._isFinished) return 'finished';\n    if (this._paused) return 'paused';\n    return 'running';\n  }\n\n  /**\n   * record previos state\n   */\n  private oldPlayState: AnimationPlayState | 'pending';\n\n  private _holdTime: number;\n\n  private readyPromise: Promise<any> | undefined;\n  private finishedPromise: Promise<any> | undefined;\n  private resolveReadyPromise: Function;\n  private rejectReadyPromise: Function;\n  private resolveFinishedPromise: Function;\n  private rejectFinishedPromise: Function;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/ready\n   * @example\n    animation.pause();\n    animation.ready.then(function() {\n      // Displays 'running'\n      alert(animation.playState);\n    });\n    animation.play();\n   */\n  get ready() {\n    if (!this.readyPromise) {\n      if (this.timeline.animationsWithPromises.indexOf(this) === -1) {\n        this.timeline.animationsWithPromises.push(this);\n      }\n      this.readyPromise = new Promise((resolve, reject) => {\n        this.resolveReadyPromise = () => {\n          resolve(this);\n        };\n        this.rejectReadyPromise = () => {\n          reject(new Error());\n        };\n      });\n      if (!this.pending) {\n        this.resolveReadyPromise();\n      }\n    }\n    return this.readyPromise;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/finished\n   * @example\n    Promise.all(\n      elem.getAnimations().map(\n        function(animation) {\n          return animation.finished\n        }\n      )\n    ).then(\n      function() {\n        return elem.remove();\n      }\n    );\n   */\n  get finished() {\n    if (!this.finishedPromise) {\n      if (this.timeline.animationsWithPromises.indexOf(this) === -1) {\n        this.timeline.animationsWithPromises.push(this);\n      }\n      this.finishedPromise = new Promise((resolve, reject) => {\n        this.resolveFinishedPromise = () => {\n          resolve(this);\n        };\n        this.rejectFinishedPromise = () => {\n          reject(new Error());\n        };\n      });\n      if (this.playState === 'finished') {\n        this.resolveFinishedPromise();\n      }\n    }\n    return this.finishedPromise;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/onfinish\n   */\n  onfinish: ((this: Animation, ev: AnimationPlaybackEvent) => any) | null;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/oncancel\n   */\n  oncancel: ((this: Animation, ev: AnimationPlaybackEvent) => any) | null;\n\n  /**\n   * get called after each frame when running\n   */\n  onframe: ((this: Animation, ev: AnimationPlaybackEvent) => any) | null;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/currentTime\n   */\n  private _currentTime = 0;\n  get currentTime(): number | null {\n    this.updatePromises();\n    return this._idle || this.currentTimePending ? null : this._currentTime;\n  }\n  set currentTime(newTime: number | null) {\n    newTime = Number(newTime);\n    if (isNaN(newTime)) return;\n    this.timeline.restart();\n    if (!this._paused && this._startTime !== null) {\n      this._startTime =\n        Number(this.timeline?.currentTime) - newTime / this.playbackRate;\n    }\n    this.currentTimePending = false;\n    if (this._currentTime === newTime) {\n      return;\n    }\n    if (this._idle) {\n      this._idle = false;\n      this._paused = true;\n    }\n    this.tickCurrentTime(newTime, true);\n    this.timeline.applyDirtiedAnimation(this);\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/startTime\n   */\n  private _startTime: number | null;\n  get startTime() {\n    return this._startTime;\n  }\n  set startTime(newTime: number | null) {\n    if (newTime !== null) {\n      this.updatePromises();\n      newTime = Number(newTime);\n      if (isNaN(newTime)) return;\n      if (this._paused || this._idle) return;\n      this._startTime = newTime;\n      this.tickCurrentTime(\n        (Number(this.timeline.currentTime) - this._startTime) *\n          this.playbackRate,\n      );\n      this.timeline.applyDirtiedAnimation(this);\n      this.updatePromises();\n    }\n  }\n\n  private _playbackRate = 1;\n  get playbackRate() {\n    return this._playbackRate;\n  }\n  set playbackRate(value: number) {\n    if (value === this._playbackRate) {\n      return;\n    }\n\n    this.updatePromises();\n    const oldCurrentTime = this.currentTime;\n    this._playbackRate = value;\n    this.startTime = null;\n    if (this.playState !== 'paused' && this.playState !== 'idle') {\n      this._finishedFlag = false;\n      this._idle = false;\n      this.ensureAlive();\n      this.timeline.applyDirtiedAnimation(this);\n    }\n    if (oldCurrentTime !== null) {\n      this.currentTime = oldCurrentTime;\n    }\n    this.updatePromises();\n  }\n\n  get _isFinished() {\n    return (\n      !this._idle &&\n      ((this._playbackRate > 0 &&\n        Number(this._currentTime) >= this._totalDuration) ||\n        (this._playbackRate < 0 && Number(this._currentTime) <= 0))\n    );\n  }\n\n  _totalDuration: number;\n  get totalDuration() {\n    return this._totalDuration;\n  }\n\n  _inEffect: boolean;\n  _inTimeline = true;\n  get _needsTick() {\n    return this.pending || this.playState === 'running' || !this._finishedFlag;\n  }\n\n  constructor(effect: KeyframeEffect, timeline: AnimationTimeline) {\n    this.effect = effect;\n    effect.animation = this;\n    this.timeline = timeline;\n    this.id = `${sequenceNumber++}`;\n\n    this._inEffect = !!this.effect.update(0);\n    this._totalDuration = Number(this.effect?.getComputedTiming().endTime);\n    this._holdTime = 0;\n    this._paused = false;\n    this.oldPlayState = 'idle';\n    this.updatePromises();\n  }\n\n  /**\n   * state machine,\n   * resolve/reject ready/finished Promise according to current state\n   */\n  updatePromises() {\n    if (this.effect.target?.destroyed) {\n      this.readyPromise = undefined;\n      this.finishedPromise = undefined;\n      return false;\n    }\n    const { oldPlayState } = this;\n    const newPlayState = this.pending ? 'pending' : this.playState;\n    if (this.readyPromise && newPlayState !== oldPlayState) {\n      if (newPlayState === 'idle') {\n        this.rejectReadyPromise();\n        this.readyPromise = undefined;\n      } else if (oldPlayState === 'pending') {\n        this.resolveReadyPromise();\n      } else if (newPlayState === 'pending') {\n        this.readyPromise = undefined;\n      }\n    }\n    if (this.finishedPromise && newPlayState !== oldPlayState) {\n      if (newPlayState === 'idle') {\n        this.rejectFinishedPromise();\n        this.finishedPromise = undefined;\n      } else if (newPlayState === 'finished') {\n        this.resolveFinishedPromise();\n      } else if (oldPlayState === 'finished') {\n        this.finishedPromise = undefined;\n      }\n    }\n    this.oldPlayState = newPlayState;\n    return this.readyPromise || this.finishedPromise;\n  }\n\n  play() {\n    this.updatePromises();\n    this._paused = false;\n    if (this._isFinished || this._idle) {\n      this.rewind();\n      this._startTime = null;\n    }\n    this._finishedFlag = false;\n    this._idle = false;\n    this.ensureAlive();\n    this.timeline.applyDirtiedAnimation(this);\n\n    if (this.timeline.animations.indexOf(this) === -1) {\n      this.timeline.animations.push(this);\n    }\n\n    this.updatePromises();\n  }\n\n  pause() {\n    this.updatePromises();\n    if (this.currentTime) {\n      this._holdTime = this.currentTime;\n    }\n\n    if (!this._isFinished && !this._paused && !this._idle) {\n      this.currentTimePending = true;\n    } else if (this._idle) {\n      this.rewind();\n      this._idle = false;\n    }\n    this._startTime = null;\n    this._paused = true;\n\n    this.updatePromises();\n  }\n\n  finish() {\n    this.updatePromises();\n    if (this._idle) return;\n    this.currentTime = this._playbackRate > 0 ? this._totalDuration : 0;\n    this._startTime = this._totalDuration - this.currentTime;\n    this.currentTimePending = false;\n    this.timeline.applyDirtiedAnimation(this);\n\n    this.updatePromises();\n  }\n\n  cancel() {\n    this.updatePromises();\n    if (!this._inEffect) return;\n    this._inEffect = false;\n    this._idle = true;\n    this._paused = false;\n    this._finishedFlag = true;\n    this._currentTime = 0;\n    this._startTime = null;\n    this.effect.update(null);\n    // effects are invalid after cancellation as the animation state\n    // needs to un-apply.\n    this.timeline.applyDirtiedAnimation(this);\n\n    this.updatePromises();\n\n    /**\n     * 1. Reject the current finished promise with a DOMException named \"AbortError\".\n     * 2. Let current finished promise be a new promise\n     * @see https://w3c.github.io/csswg-drafts/web-animations-1/#canceling-an-animation-section\n     */\n    // if (this.finishedPromise) {\n    //   this.rejectFinishedPromise();\n    //   this.finishedPromise = undefined;\n    // }\n\n    if (this.oncancel) {\n      const event = new AnimationEvent(\n        null,\n        this,\n        this.currentTime,\n        null,\n      ) as AnimationPlaybackEvent;\n      setTimeout(() => {\n        this.oncancel(event);\n      });\n    }\n  }\n\n  reverse() {\n    this.updatePromises();\n    const oldCurrentTime = this.currentTime;\n\n    this.playbackRate *= -1;\n    this.play();\n\n    if (oldCurrentTime !== null) {\n      this.currentTime = oldCurrentTime;\n    }\n    this.updatePromises();\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/updatePlaybackRate\n   */\n  updatePlaybackRate(playbackRate: number): void {\n    this.playbackRate = playbackRate;\n  }\n\n  targetAnimations() {\n    const target = this.effect?.target as unknown as DisplayObject;\n    return target.getAnimations();\n  }\n  markTarget() {\n    const animations = this.targetAnimations();\n    if (animations.indexOf(this) === -1) {\n      animations.push(this);\n    }\n  }\n  unmarkTarget() {\n    const animations = this.targetAnimations();\n    const index = animations.indexOf(this);\n    if (index !== -1) {\n      animations.splice(index, 1);\n    }\n  }\n\n  tick(timelineTime: number, isAnimationFrame: boolean) {\n    if (!this._idle && !this._paused) {\n      if (this._startTime === null) {\n        if (isAnimationFrame) {\n          this.startTime = timelineTime - this._currentTime / this.playbackRate;\n        }\n      } else if (!this._isFinished) {\n        this.tickCurrentTime(\n          (timelineTime - this._startTime) * this.playbackRate,\n        );\n      }\n    }\n\n    if (isAnimationFrame) {\n      this.currentTimePending = false;\n      this.fireEvents(timelineTime);\n    }\n  }\n\n  private rewind() {\n    if (this.playbackRate >= 0) {\n      this.currentTime = 0;\n    } else if (this._totalDuration < Infinity) {\n      this.currentTime = this._totalDuration;\n    } else {\n      throw new Error(\n        'Unable to rewind negative playback rate animation with infinite duration',\n      );\n    }\n  }\n\n  persist(): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  addEventListener<K extends keyof AnimationEventMap>(\n    type: K,\n    listener: (this: Animation, ev: AnimationEventMap[K]) => any,\n    options?: boolean | AddEventListenerOptions,\n  ): void;\n  addEventListener(\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions,\n  ): void;\n\n  addEventListener(type: any, listener: any, options?: any): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  removeEventListener<K extends keyof AnimationEventMap>(\n    type: K,\n    listener: (this: Animation, ev: AnimationEventMap[K]) => any,\n    options?: boolean | EventListenerOptions,\n  ): void;\n  removeEventListener(\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | EventListenerOptions,\n  ): void;\n\n  removeEventListener(type: any, listener: any, options?: any): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  dispatchEvent(event: Event): boolean {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  onremove: ((this: Animation, ev: Event) => any) | null;\n  // replaceState: AnimationReplaceState;\n  commitStyles(): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  private ensureAlive() {\n    // If an animation is playing backwards and is not fill backwards/both\n    // then it should go out of effect when it reaches the start of its\n    // active interval (currentTime === 0).\n    if (this.playbackRate < 0 && this.currentTime === 0) {\n      this._inEffect = !!this.effect?.update(-1);\n    } else {\n      this._inEffect = !!this.effect?.update(this.currentTime);\n    }\n    if (!this._inTimeline && (this._inEffect || !this._finishedFlag)) {\n      this._inTimeline = true;\n      this.timeline.animations.push(this);\n    }\n  }\n\n  private tickCurrentTime(newTime: number, ignoreLimit?: boolean) {\n    if (newTime !== this._currentTime) {\n      this._currentTime = newTime;\n      if (this._isFinished && !ignoreLimit) {\n        this._currentTime = this._playbackRate > 0 ? this._totalDuration : 0;\n      }\n      this.ensureAlive();\n    }\n  }\n\n  private fireEvents(baseTime: number) {\n    if (this._isFinished) {\n      if (!this._finishedFlag) {\n        if (this.onfinish) {\n          const event = new AnimationEvent(\n            null,\n            this,\n            this.currentTime,\n            baseTime,\n          ) as AnimationPlaybackEvent;\n          setTimeout(() => {\n            if (this.onfinish) {\n              this.onfinish(event);\n            }\n          });\n        }\n        this._finishedFlag = true;\n      }\n    } else {\n      if (this.onframe && this.playState === 'running') {\n        const event = new AnimationEvent(\n          null,\n          this,\n          this.currentTime,\n          baseTime,\n        ) as AnimationPlaybackEvent;\n        this.onframe(event);\n      }\n      this._finishedFlag = false;\n    }\n  }\n}\n","function _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nexport { _arrayLikeToArray as default };","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? arrayLikeToArray(r, a) : void 0;\n  }\n}\nexport { _unsupportedIterableToArray as default };","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nfunction _toConsumableArray(r) {\n  return arrayWithoutHoles(r) || iterableToArray(r) || unsupportedIterableToArray(r) || nonIterableSpread();\n}\nexport { _toConsumableArray as default };","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nfunction _arrayWithoutHoles(r) {\n  if (Array.isArray(r)) return arrayLikeToArray(r);\n}\nexport { _arrayWithoutHoles as default };","function _iterableToArray(r) {\n  if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r);\n}\nexport { _iterableToArray as default };","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nexport { _nonIterableSpread as default };","/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nexport const NEWTON_ITERATIONS = 4;\nexport const NEWTON_MIN_SLOPE = 0.001;\nexport const SUBDIVISION_PRECISION = 0.0000001;\nexport const SUBDIVISION_MAX_ITERATIONS = 10;\n\nexport const kSplineTableSize = 11;\nexport const kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nexport const float32ArraySupported = typeof Float32Array === 'function';\n\nexport const A = (aA1: number, aA2: number) => 1.0 - 3.0 * aA2 + 3.0 * aA1;\nexport const B = (aA1: number, aA2: number) => 3.0 * aA2 - 6.0 * aA1;\nexport const C = (aA1: number) => 3.0 * aA1;\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nexport const calcBezier = (aT: number, aA1: number, aA2: number) =>\n  ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nexport const getSlope = (aT: number, aA1: number, aA2: number) =>\n  3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\nexport const binarySubdivide = (\n  aX: number,\n  aA: number,\n  aB: number,\n  mX1: number,\n  mX2: number,\n) => {\n  let currentX: number;\n  let currentT: number;\n  let i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) aB = currentT;\n    else aA = currentT;\n  } while (\n    Math.abs(currentX) > SUBDIVISION_PRECISION &&\n    ++i < SUBDIVISION_MAX_ITERATIONS\n  );\n  return currentT;\n};\n\nexport const newtonRaphsonIterate = (\n  aX: number,\n  aGuessT: number,\n  mX1: number,\n  mX2: number,\n) => {\n  for (let i = 0; i < NEWTON_ITERATIONS; ++i) {\n    const currentSlope = getSlope(aGuessT, mX1, mX2);\n    if (currentSlope === 0.0) return aGuessT;\n\n    const currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n    aGuessT -= currentX / currentSlope;\n  }\n\n  return aGuessT;\n};\n\nexport const bezier = (mX1: number, mY1: number, mX2: number, mY2: number) => {\n  if (!(mX1 >= 0 && mX1 <= 1 && mX2 >= 0 && mX2 <= 1))\n    throw new Error('bezier x values must be in [0, 1] range');\n\n  if (mX1 === mY1 && mX2 === mY2) return (t: number) => t;\n\n  // Precompute samples table\n  const sampleValues = float32ArraySupported\n    ? new Float32Array(kSplineTableSize)\n    : new Array(kSplineTableSize);\n  for (let i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  const getTForX = (aX: number) => {\n    let intervalStart = 0.0;\n    let currentSample = 1;\n    const lastSample = kSplineTableSize - 1;\n\n    for (\n      ;\n      currentSample !== lastSample && sampleValues[currentSample] <= aX;\n      ++currentSample\n    )\n      intervalStart += kSampleStepSize;\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    const dist =\n      (aX - sampleValues[currentSample]) /\n      (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    const guessForT = intervalStart + dist * kSampleStepSize;\n\n    const initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE)\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    if (initialSlope === 0.0) return guessForT;\n\n    return binarySubdivide(\n      aX,\n      intervalStart,\n      intervalStart + kSampleStepSize,\n      mX1,\n      mX2,\n    );\n  };\n\n  return (t: number) => {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (t === 0 || t === 1) return t;\n    return calcBezier(getTForX(t), mY1, mY2);\n  };\n};\n","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nfunction _slicedToArray(r, e) {\n  return arrayWithHoles(r) || iterableToArrayLimit(r, e) || unsupportedIterableToArray(r, e) || nonIterableRest();\n}\nexport { _slicedToArray as default };","function _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\nexport { _arrayWithHoles as default };","function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nexport { _iterableToArrayLimit as default };","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nexport { _nonIterableRest as default };","/**\n * 判断值是否为 null 或 undefined\n * @return 是否为 null 或 undefined\n */\nexport default function isNil(value) {\n    return value === null || value === undefined;\n}\n//# sourceMappingURL=is-nil.js.map","var clamp = function (a, min, max) {\n    if (a < min) {\n        return min;\n    }\n    else if (a > max) {\n        return max;\n    }\n    return a;\n};\nexport default clamp;\n//# sourceMappingURL=clamp.js.map","/**\n * ported from https://github.com/okikio/native/blob/master/packages/animate/src/custom-easing.ts\n */\nimport type { TypeEasingFunction } from '@antv/g-lite';\nimport { clamp } from '@antv/util';\nimport { bezier } from './bezier-easing';\n\nexport const convertToDash = (str: string) => {\n  str = str.replace(/([A-Z])/g, (letter) => `-${letter.toLowerCase()}`);\n\n  // Remove first dash\n  return str.charAt(0) === '-' ? str.substring(1) : str;\n};\n\nexport type TypeColor = string | number | (string | number)[];\nexport type TypeRGBAFunction = (color: TypeColor) => number[];\n\n/**\n  Easing Functions from anime.js, they are tried and true, so, its better to use them instead of other alternatives\n*/\nconst Quad: TypeEasingFunction = (t) => t ** 2;\nconst Cubic: TypeEasingFunction = (t) => t ** 3;\nconst Quart: TypeEasingFunction = (t) => t ** 4;\nconst Quint: TypeEasingFunction = (t) => t ** 5;\nconst Expo: TypeEasingFunction = (t) => t ** 6;\nconst Sine: TypeEasingFunction = (t) => 1 - Math.cos((t * Math.PI) / 2);\nconst Circ: TypeEasingFunction = (t) => 1 - Math.sqrt(1 - t * t);\nconst Back: TypeEasingFunction = (t) => t * t * (3 * t - 2);\n\nconst Bounce: TypeEasingFunction = (t) => {\n  let pow2: number;\n  let b = 4;\n  while (t < ((pow2 = 2 ** --b) - 1) / 11) {}\n  return 1 / 4 ** (3 - b) - 7.5625 * ((pow2 * 3 - 2) / 22 - t) ** 2;\n};\n\nconst Elastic: TypeEasingFunction = (t, params: (string | number)[] = []) => {\n  const [amplitude = 1, period = 0.5] = params;\n  const a = clamp(Number(amplitude), 1, 10);\n  const p = clamp(Number(period), 0.1, 2);\n  if (t === 0 || t === 1) return t;\n  return (\n    -a *\n    2 ** (10 * (t - 1)) *\n    Math.sin(\n      ((t - 1 - (p / (Math.PI * 2)) * Math.asin(1 / a)) * (Math.PI * 2)) / p,\n    )\n  );\n};\n\nconst Spring: TypeEasingFunction = (\n  t: number,\n  params: (string | number)[] = [],\n  duration?: number,\n) => {\n  let [mass = 1, stiffness = 100, damping = 10, velocity = 0] = params;\n\n  mass = clamp(mass as number, 0.1, 1000);\n  stiffness = clamp(stiffness as number, 0.1, 1000);\n  damping = clamp(damping as number, 0.1, 1000);\n  velocity = clamp(velocity as number, 0.1, 1000);\n\n  const w0 = Math.sqrt(stiffness / mass);\n  const zeta = damping / (2 * Math.sqrt(stiffness * mass));\n  const wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;\n  const a = 1;\n  const b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;\n\n  let progress = duration ? (duration * t) / 1000 : t;\n  if (zeta < 1) {\n    progress =\n      Math.exp(-progress * zeta * w0) *\n      (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));\n  } else {\n    progress = (a + b * progress) * Math.exp(-progress * w0);\n  }\n\n  if (t === 0 || t === 1) return t;\n  return 1 - progress;\n};\n\n/**\n * Cache the durations at set easing parameters\n */\n// export const EasingDurationCache: Map<string | TypeEasingFunction, number> = new Map();\n\n/**\n * The threshold for an infinite loop\n */\n// const INTINITE_LOOP_LIMIT = 10000;\n\n/** Convert easing parameters to Array of numbers, e.g. \"spring(2, 500)\" to [2, 500] */\n// export const parseEasingParameters = (str: string) => {\n//   const match = /(\\(|\\s)([^)]+)\\)?/.exec(str);\n//   return match\n//     ? match[2].split(',').map((value) => {\n//         const num = parseFloat(value);\n//         return !Number.isNaN(num) ? num : value.trim();\n//       })\n//     : [];\n// };\n\n/**\n * The spring easing function will only look smooth at certain durations, with certain parameters.\n * This functions returns the optimal duration to create a smooth springy animation based on physics\n *\n * Note: it can also be used to determine the optimal duration of other types of easing function, but be careful of 'in-'\n * easing functions, because of the nature of the function it can sometimes create an infinite loop, I suggest only using\n * `getEasingDuration` for `spring`, specifically 'out-spring' and 'spring'\n */\n// export const getEasingDuration = (easing: string | TypeEasingFunction = 'spring') => {\n//   if (EasingDurationCache.has(easing)) return EasingDurationCache.get(easing);\n\n//   // eslint-disable-next-line @typescript-eslint/no-use-before-define\n//   const easingFunction = typeof easing == 'function' ? easing : getEasingFunction(easing as string);\n//   const params = typeof easing == 'function' ? [] : parseEasingParameters(easing);\n//   const frame = 1 / 6;\n\n//   let elapsed = 0;\n//   let rest = 0;\n//   let count = 0;\n\n//   while (++count < INTINITE_LOOP_LIMIT) {\n//     elapsed += frame;\n//     if (easingFunction(elapsed, params, undefined) === 1) {\n//       rest++;\n//       if (rest >= 16) break;\n//     } else {\n//       rest = 0;\n//     }\n//   }\n\n//   const duration = elapsed * frame * 1000;\n//   EasingDurationCache.set(easing, duration);\n//   return duration;\n// };\n\n/**\n  These Easing Functions are based off of the Sozi Project's easing functions\n  https://github.com/sozi-projects/Sozi/blob/d72e44ebd580dc7579d1e177406ad41e632f961d/src/js/player/Timing.js\n*/\nconst Steps: TypeEasingFunction = (t: number, params = []) => {\n  const [steps = 10, type] = params as [number, string];\n  const trunc = type === 'start' ? Math.ceil : Math.floor;\n  return trunc(clamp(t, 0, 1) * steps) / steps;\n};\n\n// @ts-ignore\nconst Bezier: TypeEasingFunction = (t: number, params: number[] = []) => {\n  const [mX1, mY1, mX2, mY2] = params;\n  return bezier(mX1, mY1, mX2, mY2)(t);\n};\n\n/** The default `ease-in` easing function */\nconst easein: TypeEasingFunction = bezier(0.42, 0.0, 1.0, 1.0);\n\n/** Converts easing functions to their `out`counter parts */\nconst EaseOut = (ease: TypeEasingFunction): TypeEasingFunction => {\n  return (t, params = [], duration?: number) =>\n    1 - ease(1 - t, params, duration);\n};\n\n/** Converts easing functions to their `in-out` counter parts */\nconst EaseInOut = (ease: TypeEasingFunction): TypeEasingFunction => {\n  return (t, params = [], duration?: number) =>\n    t < 0.5\n      ? ease(t * 2, params, duration) / 2\n      : 1 - ease(t * -2 + 2, params, duration) / 2;\n};\n\n/** Converts easing functions to their `out-in` counter parts */\nconst EaseOutIn = (ease: TypeEasingFunction): TypeEasingFunction => {\n  return (t, params = [], duration?: number) => {\n    return t < 0.5\n      ? (1 - ease(1 - t * 2, params, duration)) / 2\n      : (ease(t * 2 - 1, params, duration) + 1) / 2;\n  };\n};\n\n/**\n * The default list of easing functions, do note this is different from {@link EASING}\n */\ntype EasingFunctionType =\n  | 'steps'\n  | 'step-start'\n  | 'step-end'\n  | 'linear'\n  | 'cubic-bezier'\n  | 'ease'\n  | 'in'\n  | 'out'\n  | 'in-out'\n  | 'out-in'\n  | 'in-quad'\n  | 'out-quad'\n  | 'in-out-quad'\n  | 'out-in-quad'\n  | 'in-cubic'\n  | 'out-cubic'\n  | 'in-out-cubic'\n  | 'out-in-cubic'\n  | 'in-quart'\n  | 'out-quart'\n  | 'in-out-quart'\n  | 'out-in-quart'\n  | 'in-quint'\n  | 'out-quint'\n  | 'in-out-quint'\n  | 'out-in-quint'\n  | 'in-expo'\n  | 'out-expo'\n  | 'in-out-expo'\n  | 'out-in-expo'\n  | 'in-sine'\n  | 'out-sine'\n  | 'in-out-sine'\n  | 'out-in-sine'\n  | 'in-circ'\n  | 'out-circ'\n  | 'in-out-circ'\n  | 'out-in-circ'\n  | 'in-back'\n  | 'out-back'\n  | 'in-out-back'\n  | 'out-in-back'\n  | 'in-bounce'\n  | 'out-bounce'\n  | 'in-out-bounce'\n  | 'out-in-bounce'\n  | 'in-elastic'\n  | 'out-elastic'\n  | 'in-out-elastic'\n  | 'out-in-elastic'\n  | 'spring'\n  | 'spring-in'\n  | 'spring-out'\n  | 'spring-in-out'\n  | 'spring-out-in';\nexport const EasingFunctions: Record<EasingFunctionType, TypeEasingFunction> = {\n  steps: Steps,\n  'step-start': (t) => Steps(t, [1, 'start']),\n  'step-end': (t) => Steps(t, [1, 'end']),\n\n  linear: (t) => t,\n  'cubic-bezier': Bezier,\n  ease: (t) => Bezier(t, [0.25, 0.1, 0.25, 1.0]),\n\n  in: easein,\n  out: EaseOut(easein),\n  'in-out': EaseInOut(easein),\n  'out-in': EaseOutIn(easein),\n\n  'in-quad': Quad,\n  'out-quad': EaseOut(Quad),\n  'in-out-quad': EaseInOut(Quad),\n  'out-in-quad': EaseOutIn(Quad),\n\n  'in-cubic': Cubic,\n  'out-cubic': EaseOut(Cubic),\n  'in-out-cubic': EaseInOut(Cubic),\n  'out-in-cubic': EaseOutIn(Cubic),\n\n  'in-quart': Quart,\n  'out-quart': EaseOut(Quart),\n  'in-out-quart': EaseInOut(Quart),\n  'out-in-quart': EaseOutIn(Quart),\n\n  'in-quint': Quint,\n  'out-quint': EaseOut(Quint),\n  'in-out-quint': EaseInOut(Quint),\n  'out-in-quint': EaseOutIn(Quint),\n\n  'in-expo': Expo,\n  'out-expo': EaseOut(Expo),\n  'in-out-expo': EaseInOut(Expo),\n  'out-in-expo': EaseOutIn(Expo),\n\n  'in-sine': Sine,\n  'out-sine': EaseOut(Sine),\n  'in-out-sine': EaseInOut(Sine),\n  'out-in-sine': EaseOutIn(Sine),\n\n  'in-circ': Circ,\n  'out-circ': EaseOut(Circ),\n  'in-out-circ': EaseInOut(Circ),\n  'out-in-circ': EaseOutIn(Circ),\n\n  'in-back': Back,\n  'out-back': EaseOut(Back),\n  'in-out-back': EaseInOut(Back),\n  'out-in-back': EaseOutIn(Back),\n\n  'in-bounce': Bounce,\n  'out-bounce': EaseOut(Bounce),\n  'in-out-bounce': EaseInOut(Bounce),\n  'out-in-bounce': EaseOutIn(Bounce),\n\n  'in-elastic': Elastic,\n  'out-elastic': EaseOut(Elastic),\n  'in-out-elastic': EaseInOut(Elastic),\n  'out-in-elastic': EaseOutIn(Elastic),\n\n  spring: Spring,\n  'spring-in': Spring,\n  'spring-out': EaseOut(Spring),\n  'spring-in-out': EaseInOut(Spring),\n  'spring-out-in': EaseOutIn(Spring),\n};\n\n/**\n * Convert string easing to their proper form\n */\nconst complexEasingSyntax = (ease: string) =>\n  convertToDash(ease)\n    .replace(/^ease-/, '') // Remove the \"ease-\" keyword\n    .replace(/(\\(|\\s).+/, '') // Remove the function brackets and parameters\n    .toLowerCase()\n    .trim();\n\n/** Re-maps a number from one range to another. Numbers outside the range are not clamped to 0 and 1, because out-of-range values are often intentional and useful. */\nexport const getEasingFunction = (ease: string) => {\n  return EasingFunctions[complexEasingSyntax(ease)] || EasingFunctions.linear;\n};\n\n// /**\n//  * Allows you to register new easing functions\n//  */\n// export const registerEasingFunction = (key: string, fn: TypeEasingFunction) => {\n//   Object.assign(EasingFunctions, {\n//     [key]: fn,\n//   });\n// };\n\n// /**\n//  * Allows you to register multiple new easing functions\n//  */\n// export const registerEasingFunctions = (...obj: typeof EasingFunctions[]) => {\n//   Object.assign(EasingFunctions, ...obj);\n// };\n","import type { AnimationEffectTiming } from '../dom/AnimationEffectTiming';\nimport { bezier } from './bezier-easing';\nimport { convertToDash, getEasingFunction } from './custom-easing';\n\nexport const linear = (x: number) => {\n  return x;\n};\n\nconst Start = 1;\nconst Middle = 0.5;\nconst End = 0;\n\nfunction step(count: number, pos: number) {\n  return function (x: number) {\n    if (x >= 1) {\n      return 1;\n    }\n    const stepSize = 1 / count;\n    x += pos * stepSize;\n    return x - (x % stepSize);\n  };\n}\n\nconst numberString = '\\\\s*(-?\\\\d+\\\\.?\\\\d*|-?\\\\.\\\\d+)\\\\s*';\nconst cubicBezierRe = new RegExp(\n  `cubic-bezier\\\\(${numberString},${numberString},${numberString},${numberString}\\\\)`,\n);\nconst step1Re = /steps\\(\\s*(\\d+)\\s*\\)/;\nconst step2Re = /steps\\(\\s*(\\d+)\\s*,\\s*(start|middle|end)\\s*\\)/;\n\nexport function parseEasingFunction(\n  normalizedEasing: string,\n): (t: number) => number {\n  const cubicData = cubicBezierRe.exec(normalizedEasing);\n  if (cubicData) {\n    // @ts-ignore\n    return bezier(...cubicData.slice(1).map(Number));\n  }\n  const step1Data = step1Re.exec(normalizedEasing);\n  if (step1Data) {\n    return step(Number(step1Data[1]), End);\n  }\n  const step2Data = step2Re.exec(normalizedEasing);\n  if (step2Data) {\n    // @ts-ignore\n    return step(\n      Number(step2Data[1]),\n      { start: Start, middle: Middle, end: End }[step2Data[2]],\n    );\n  }\n  return getEasingFunction(normalizedEasing);\n}\n\nexport function calculateActiveDuration(timing: EffectTiming) {\n  // @ts-ignore\n  return Math.abs(repeatedDuration(timing) / (timing.playbackRate || 1));\n}\n\nfunction repeatedDuration(timing: EffectTiming): number {\n  // https://drafts.csswg.org/web-animations/#calculating-the-active-duration\n  if (timing.duration === 0 || timing.iterations === 0) {\n    return 0;\n  }\n\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/duration#value\n  // if (timing.duration === 'auto') {\n  //   timing.duration = 0;\n  // }\n\n  return (\n    (timing.duration === 'auto' ? 0 : Number(timing.duration)) *\n    (timing.iterations ?? 1)\n  );\n}\n\nconst PhaseNone = 0;\nconst PhaseBefore = 1;\nconst PhaseAfter = 2;\nconst PhaseActive = 3;\n\nfunction calculatePhase(\n  activeDuration: number,\n  localTime: number | null,\n  timing: AnimationEffectTiming,\n) {\n  // https://drafts.csswg.org/web-animations/#animation-effect-phases-and-states\n  if (localTime === null) {\n    return PhaseNone;\n  }\n\n  const { endTime } = timing;\n  if (localTime < Math.min(timing.delay, endTime)) {\n    return PhaseBefore;\n  }\n  if (\n    localTime >=\n    Math.min(timing.delay + activeDuration + timing.endDelay, endTime)\n  ) {\n    return PhaseAfter;\n  }\n\n  return PhaseActive;\n}\n\nfunction calculateActiveTime(\n  activeDuration: any,\n  fillMode: string,\n  localTime: number,\n  phase: number,\n  delay: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-active-time\n  switch (phase) {\n    case PhaseBefore:\n      if (fillMode === 'backwards' || fillMode === 'both') return 0;\n      return null;\n    case PhaseActive:\n      return localTime - delay;\n    case PhaseAfter:\n      if (fillMode === 'forwards' || fillMode === 'both') return activeDuration;\n      return null;\n    case PhaseNone:\n      return null;\n  }\n}\n\nfunction calculateOverallProgress(\n  iterationDuration: number,\n  phase: number,\n  iterations: number,\n  activeTime: number,\n  iterationStart: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-overall-progress\n  let overallProgress = iterationStart;\n  if (iterationDuration === 0) {\n    if (phase !== PhaseBefore) {\n      overallProgress += iterations;\n    }\n  } else {\n    overallProgress += activeTime / iterationDuration;\n  }\n  return overallProgress;\n}\n\nfunction calculateSimpleIterationProgress(\n  overallProgress: number,\n  iterationStart: number,\n  phase: number,\n  iterations: number,\n  activeTime: number,\n  iterationDuration: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-simple-iteration-progress\n\n  let simpleIterationProgress =\n    overallProgress === Infinity ? iterationStart % 1 : overallProgress % 1;\n  if (\n    simpleIterationProgress === 0 &&\n    phase === PhaseAfter &&\n    iterations !== 0 &&\n    (activeTime !== 0 || iterationDuration === 0)\n  ) {\n    simpleIterationProgress = 1;\n  }\n  return simpleIterationProgress;\n}\n\nfunction calculateCurrentIteration(\n  phase: number,\n  iterations: number,\n  simpleIterationProgress: number,\n  overallProgress: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-current-iteration\n  if (phase === PhaseAfter && iterations === Infinity) {\n    return Infinity;\n  }\n  if (simpleIterationProgress === 1) {\n    return Math.floor(overallProgress) - 1;\n  }\n  return Math.floor(overallProgress);\n}\n\nfunction calculateDirectedProgress(\n  playbackDirection: string,\n  currentIteration: number,\n  simpleIterationProgress: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-directed-progress\n  let currentDirection = playbackDirection;\n  if (playbackDirection !== 'normal' && playbackDirection !== 'reverse') {\n    let d = currentIteration;\n    if (playbackDirection === 'alternate-reverse') {\n      d += 1;\n    }\n    currentDirection = 'normal';\n    if (d !== Infinity && d % 2 !== 0) {\n      currentDirection = 'reverse';\n    }\n  }\n  if (currentDirection === 'normal') {\n    return simpleIterationProgress;\n  }\n  return 1 - simpleIterationProgress;\n}\n\nexport function calculateIterationProgress(\n  activeDuration: number,\n  localTime: number,\n  timing: AnimationEffectTiming,\n) {\n  const phase = calculatePhase(activeDuration, localTime, timing);\n  const activeTime = calculateActiveTime(\n    activeDuration,\n    timing.fill,\n    localTime,\n    phase,\n    timing.delay,\n  );\n  if (activeTime === null) return null;\n\n  const duration = timing.duration === 'auto' ? 0 : timing.duration;\n  const overallProgress = calculateOverallProgress(\n    duration,\n    phase,\n    timing.iterations,\n    activeTime,\n    timing.iterationStart,\n  );\n  const simpleIterationProgress = calculateSimpleIterationProgress(\n    overallProgress,\n    timing.iterationStart,\n    phase,\n    timing.iterations,\n    activeTime,\n    duration,\n  );\n  const currentIteration = calculateCurrentIteration(\n    phase,\n    timing.iterations,\n    simpleIterationProgress,\n    overallProgress,\n  );\n\n  const directedProgress = calculateDirectedProgress(\n    timing.direction,\n    currentIteration,\n    simpleIterationProgress,\n  );\n\n  timing.currentIteration = currentIteration;\n  timing.progress = directedProgress;\n\n  // https://drafts.csswg.org/web-animations/#calculating-the-transformed-progress\n  // https://drafts.csswg.org/web-animations/#calculating-the-iteration-progress\n  return timing.easingFunction(directedProgress);\n}\n\n/**\n * From: [https://easings.net]\n * Read More about easings on [MDN](https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/easing)\n */\nexport const EASINGS: Record<string, string> = {\n  in: 'ease-in',\n  out: 'ease-out',\n  'in-out': 'ease-in-out',\n\n  // Sine\n  'in-sine': 'cubic-bezier(0.47, 0, 0.745, 0.715)',\n  'out-sine': 'cubic-bezier(0.39, 0.575, 0.565, 1)',\n  'in-out-sine': 'cubic-bezier(0.445, 0.05, 0.55, 0.95)',\n\n  // Quad\n  'in-quad': 'cubic-bezier(0.55, 0.085, 0.68, 0.53)',\n  'out-quad': 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n  'in-out-quad': 'cubic-bezier(0.455, 0.03, 0.515, 0.955)',\n\n  // Cubic\n  'in-cubic': 'cubic-bezier(0.55, 0.055, 0.675, 0.19)',\n  'out-cubic': 'cubic-bezier(0.215, 0.61, 0.355, 1)',\n  'in-out-cubic': 'cubic-bezier(0.645, 0.045, 0.355, 1)',\n\n  // Quart\n  'in-quart': 'cubic-bezier(0.895, 0.03, 0.685, 0.22)',\n  'out-quart': 'cubic-bezier(0.165, 0.84, 0.44, 1)',\n  'in-out-quart': 'cubic-bezier(0.77, 0, 0.175, 1)',\n\n  // Quint\n  'in-quint': 'cubic-bezier(0.755, 0.05, 0.855, 0.06)',\n  'out-quint': 'cubic-bezier(0.23, 1, 0.32, 1)',\n  'in-out-quint': 'cubic-bezier(0.86, 0, 0.07, 1)',\n\n  // Expo\n  'in-expo': 'cubic-bezier(0.95, 0.05, 0.795, 0.035)',\n  'out-expo': 'cubic-bezier(0.19, 1, 0.22, 1)',\n  'in-out-expo': 'cubic-bezier(1, 0, 0, 1)',\n\n  // Circ\n  'in-circ': 'cubic-bezier(0.6, 0.04, 0.98, 0.335)',\n  'out-circ': 'cubic-bezier(0.075, 0.82, 0.165, 1)',\n  'in-out-circ': 'cubic-bezier(0.785, 0.135, 0.15, 0.86)',\n\n  // Back\n  'in-back': 'cubic-bezier(0.6, -0.28, 0.735, 0.045)',\n  'out-back': 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',\n  'in-out-back': 'cubic-bezier(0.68, -0.55, 0.265, 1.55)',\n};\nexport const EasingKeys = Object.keys(EASINGS);\n\n/**\n * Converts users input into a usable easing function string\n */\nexport const getEase = (ease: keyof typeof EASINGS = 'ease'): string => {\n  // Convert camelCase strings into dashed strings, then Remove the \"ease-\" keyword\n  const search = convertToDash(ease).replace(/^ease-/, '');\n  return EASINGS[search] || ease;\n};\n","import type {\n  IAnimationEffectTiming,\n  IElement,\n  Interpolatable,\n  TypeEasingFunction,\n} from '@antv/g-lite';\nimport { propertyMetadataCache, runtime } from '@antv/g-lite';\nimport { isNumber } from '@antv/util';\nimport { parseEasingFunction } from './animation';\n\nexport function convertEffectInput(\n  keyframes: ComputedKeyframe[],\n  timing: IAnimationEffectTiming,\n  target: IElement | null,\n) {\n  const propertySpecificKeyframeGroups = makePropertySpecificKeyframeGroups(\n    keyframes,\n    timing,\n  );\n  const interpolations = makeInterpolations(\n    propertySpecificKeyframeGroups,\n    target,\n  );\n\n  return function (target: IElement, fraction: number) {\n    if (fraction !== null) {\n      interpolations\n        .filter((interpolation) => {\n          return (\n            fraction >= interpolation.applyFrom &&\n            fraction < interpolation.applyTo\n          );\n        })\n        .forEach((interpolation) => {\n          const offsetFraction = fraction - interpolation.startOffset;\n          const localDuration =\n            interpolation.endOffset - interpolation.startOffset;\n          const scaledLocalTime =\n            localDuration === 0 ? 0 : offsetFraction / localDuration;\n          // apply updated attribute\n          target.setAttribute(\n            interpolation.property,\n            interpolation.interpolation(scaledLocalTime),\n            false,\n            false, // disable memoize\n          );\n\n          // if (interpolation.property === 'visibility') {\n          //   console.log(\n          //     scaledLocalTime,\n          //     interpolation.interpolation(scaledLocalTime),\n          //   );\n          // }\n        });\n    } else {\n      for (const property in propertySpecificKeyframeGroups)\n        if (isNotReservedWord(property)) {\n          // clear attribute\n          target.setAttribute(property, null);\n        }\n    }\n  };\n}\n\ninterface PropertySpecificKeyframe {\n  offset: number | null;\n  computedOffset: number;\n  easing: string;\n  easingFunction: TypeEasingFunction;\n  value: any;\n}\n\nfunction isNotReservedWord(member: string) {\n  return (\n    member !== 'offset' &&\n    member !== 'easing' &&\n    member !== 'composite' &&\n    member !== 'computedOffset'\n  );\n}\n\nfunction makePropertySpecificKeyframeGroups(\n  keyframes: ComputedKeyframe[],\n  timing: IAnimationEffectTiming,\n) {\n  const propertySpecificKeyframeGroups: Record<\n    string,\n    PropertySpecificKeyframe[]\n  > = {};\n\n  for (let i = 0; i < keyframes.length; i++) {\n    for (const member in keyframes[i]) {\n      if (isNotReservedWord(member)) {\n        const propertySpecificKeyframe = {\n          offset: keyframes[i].offset,\n          computedOffset: keyframes[i].computedOffset,\n          easing: keyframes[i].easing,\n          easingFunction:\n            parseEasingFunction(keyframes[i].easing) || timing.easingFunction,\n          value: keyframes[i][member],\n        };\n        propertySpecificKeyframeGroups[member] =\n          propertySpecificKeyframeGroups[member] || [];\n        propertySpecificKeyframeGroups[member].push(propertySpecificKeyframe);\n      }\n    }\n  }\n  return propertySpecificKeyframeGroups;\n}\n\nfunction makeInterpolations(\n  propertySpecificKeyframeGroups: Record<string, PropertySpecificKeyframe[]>,\n  target: IElement | null,\n) {\n  const interpolations = [];\n  for (const groupName in propertySpecificKeyframeGroups) {\n    const keyframes = propertySpecificKeyframeGroups[groupName];\n    for (let i = 0; i < keyframes.length - 1; i++) {\n      let startIndex = i;\n      let endIndex = i + 1;\n      const startOffset = keyframes[startIndex].computedOffset;\n      const endOffset = keyframes[endIndex].computedOffset;\n      let applyFrom = startOffset;\n      let applyTo = endOffset;\n\n      if (i === 0) {\n        applyFrom = -Infinity;\n        if (endOffset === 0) {\n          endIndex = startIndex;\n        }\n      }\n      if (i === keyframes.length - 2) {\n        applyTo = Infinity;\n        if (startOffset === 1) {\n          startIndex = endIndex;\n        }\n      }\n\n      interpolations.push({\n        applyFrom,\n        applyTo,\n        startOffset: keyframes[startIndex].computedOffset,\n        endOffset: keyframes[endIndex].computedOffset,\n        easingFunction: keyframes[startIndex].easingFunction,\n        property: groupName,\n        interpolation: propertyInterpolation(\n          groupName,\n          keyframes[startIndex].value,\n          keyframes[endIndex].value,\n          target,\n        ),\n      });\n    }\n  }\n  interpolations.sort((leftInterpolation, rightInterpolation) => {\n    return leftInterpolation.startOffset - rightInterpolation.startOffset;\n  });\n  return interpolations;\n}\n\nconst InterpolationFactory = (\n  from: Interpolatable,\n  to: Interpolatable,\n  convertToString: Function,\n) => {\n  return (f: number) => {\n    const interpolated = interpolate(from, to, f);\n    return isNumber(interpolated)\n      ? interpolated\n      : convertToString(interpolated);\n  };\n};\n\nfunction propertyInterpolation(\n  property: string,\n  left: string | number,\n  right: string | number,\n  target: IElement | null,\n) {\n  const metadata = propertyMetadataCache[property];\n\n  if (metadata && metadata.syntax && metadata.int) {\n    const propertyHandler = runtime.styleValueRegistry.getPropertySyntax(\n      metadata.syntax,\n    );\n\n    if (propertyHandler) {\n      const parser = propertyHandler.parser;\n      const usedLeft = parser ? parser(left, target) : left;\n      const usedRight = parser ? parser(right, target) : right;\n\n      // merger [left, right, n2string()]\n      const interpolationArgs = propertyHandler.mixer(\n        usedLeft,\n        usedRight,\n        target,\n      );\n      if (interpolationArgs) {\n        const interp = InterpolationFactory(\n          // @ts-ignore\n          ...interpolationArgs,\n        );\n        return function (t: number) {\n          if (t === 0) return left;\n          if (t === 1) return right;\n          return interp(t);\n        };\n      }\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  return InterpolationFactory(false, true, function (bool: boolean) {\n    return bool ? right : left;\n  });\n}\n\n/**\n * interpolate with number, boolean, number[], boolean[]\n */\nfunction interpolate(\n  from: Interpolatable,\n  to: Interpolatable,\n  f: number,\n): Interpolatable {\n  if (typeof from === 'number' && typeof to === 'number') {\n    return from * (1 - f) + to * f;\n  }\n  if (\n    (typeof from === 'boolean' && typeof to === 'boolean') ||\n    (typeof from === 'string' && typeof to === 'string') // skip string, eg. path ['M', 10, 10]\n  ) {\n    return f < 0.5 ? from : to;\n  }\n\n  if (Array.isArray(from) && Array.isArray(to)) {\n    // interpolate arrays/matrix\n    const fromLength = from.length;\n    const toLength = to.length;\n    const length = Math.max(fromLength, toLength);\n\n    const r: number[] = [];\n    for (let i = 0; i < length; i++) {\n      r.push(\n        interpolate(\n          from[i < fromLength ? i : fromLength - 1],\n          to[i < toLength ? i : toLength - 1],\n          f,\n        ) as number,\n      );\n    }\n    return r;\n  }\n  throw new Error(`Mismatched interpolation arguments ${from}:${to}`);\n}\n","/**\n * 判断值是否为数字\n * @return 是否为数字\n */\nexport default function isNumber(value) {\n    return typeof value === 'number';\n}\n//# sourceMappingURL=is-number.js.map","import { linear, parseEasingFunction } from '../utils/animation';\nimport type { KeyframeEffect } from './KeyframeEffect';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming\n */\nexport class AnimationEffectTiming implements EffectTiming {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/delay\n   */\n  delay = 0;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/direction\n   */\n  direction: PlaybackDirection = 'normal';\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/duration\n   */\n  duration: number | 'auto' = 'auto';\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/easing\n   */\n  private _easing = 'linear';\n  easingFunction = linear;\n  get easing() {\n    return this._easing;\n  }\n  set easing(value: string) {\n    this.easingFunction = parseEasingFunction(value);\n    this._easing = value;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/endDelay\n   */\n  endDelay = 0;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/fill\n   */\n  fill: FillMode = 'auto';\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/iterationStart\n   */\n  iterationStart = 0;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/iterations\n   */\n  iterations = 1;\n\n  /**\n   * @deprecated\n   */\n  playbackRate: number;\n\n  /**\n   * ref to effect\n   */\n  effect: KeyframeEffect;\n\n  composite: string;\n\n  /**\n   * ComputedEffectTiming\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getComputedTiming\n   */\n  activeDuration: number;\n\n  endTime: number;\n\n  currentIteration: number | null = null;\n\n  progress: number | null = null;\n}\n","import { isNil } from '@antv/util';\nimport type { AnimationEffectTiming } from './AnimationEffectTiming';\n\n/**\n * @example\n  {\n    translateY: [200, 300],\n    scale: [1, 10],\n  }\n\n * groups' length can be different, the following config should generate 3 frames:\n  @example\n  {\n    translateY: [200, 300, 400],\n    scale: [1, 10],\n  }\n */\nfunction convertToArrayForm(effectInput: PropertyIndexedKeyframes) {\n  const normalizedEffectInput: Keyframe[] = [];\n\n  for (const property in effectInput) {\n    // skip reserved props\n    if (property in ['easing', 'offset', 'composite']) {\n      continue;\n    }\n\n    // @ts-ignore\n    let values: string[] | (number | null)[] = effectInput[property];\n    if (!Array.isArray(values)) {\n      values = [values];\n    }\n\n    const numKeyframes = values.length;\n    for (let i = 0; i < numKeyframes; i++) {\n      if (!normalizedEffectInput[i]) {\n        const keyframe: Keyframe = {};\n        if ('offset' in effectInput) {\n          keyframe.offset = Number(effectInput.offset);\n        }\n\n        if ('easing' in effectInput) {\n          // @ts-ignore\n          keyframe.easing = effectInput.easing;\n        }\n\n        if ('composite' in effectInput) {\n          // @ts-ignore\n          keyframe.composite = effectInput.composite;\n        }\n        normalizedEffectInput[i] = keyframe;\n      }\n\n      if (values[i] !== undefined && values[i] !== null) {\n        normalizedEffectInput[i][property] = values[i];\n      }\n    }\n  }\n\n  normalizedEffectInput.sort(function (a, b) {\n    return (\n      ((a.computedOffset as number) || 0) - ((b.computedOffset as number) || 0)\n    );\n  });\n  return normalizedEffectInput;\n}\n\nexport function normalizeKeyframes(\n  effectInput: Keyframe[] | PropertyIndexedKeyframes | null,\n  timing?: AnimationEffectTiming,\n): ComputedKeyframe[] {\n  if (effectInput === null) {\n    return [];\n  }\n\n  if (!Array.isArray(effectInput)) {\n    effectInput = convertToArrayForm(effectInput);\n  }\n\n  let keyframes = effectInput.map((originalKeyframe) => {\n    const keyframe: Keyframe = {};\n\n    if (timing?.composite) {\n      // This will be auto if the composite operation specified on the effect is being used.\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API/Keyframe_Formats\n      keyframe.composite = 'auto';\n    }\n\n    for (const member in originalKeyframe) {\n      let memberValue = originalKeyframe[member];\n      if (member === 'offset') {\n        if (memberValue !== null) {\n          memberValue = Number(memberValue);\n          if (!isFinite(memberValue))\n            throw new Error('Keyframe offsets must be numbers.');\n          if (memberValue < 0 || memberValue > 1)\n            throw new Error('Keyframe offsets must be between 0 and 1.');\n          keyframe.computedOffset = memberValue;\n        }\n      } else if (member === 'composite') {\n        // TODO: Support add & accumulate in KeyframeEffect.composite\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect/composite\n        if (\n          ['replace', 'add', 'accumulate', 'auto'].indexOf(\n            memberValue as string,\n          ) === -1\n        ) {\n          throw new Error(`${memberValue} compositing is not supported`);\n        }\n      } else if (member === 'easing') {\n        // TODO: Validate animation-timing-function\n        // @see https://developer.mozilla.org/en-US/docs/Web/CSS/animation-timing-function\n        // memberValue = memberValue;\n        // } else {\n        //   memberValue = '' + memberValue;\n      }\n\n      // assign to keyframe, no need to parse shorthand value\n      keyframe[member] = memberValue;\n    }\n    if (keyframe.offset === undefined) {\n      keyframe.offset = null;\n    }\n    if (keyframe.easing === undefined) {\n      // override with timing.easing\n      keyframe.easing = timing?.easing || 'linear';\n    }\n    if (keyframe.composite === undefined) {\n      keyframe.composite = 'auto';\n    }\n    return keyframe;\n  });\n\n  let everyFrameHasOffset = true;\n  let previousOffset = -Infinity;\n  for (let i = 0; i < keyframes.length; i++) {\n    const { offset } = keyframes[i];\n    if (!isNil(offset)) {\n      if (offset < previousOffset) {\n        throw new TypeError(\n          'Keyframes are not loosely sorted by offset. Sort or specify offsets.',\n        );\n      }\n      previousOffset = offset;\n    } else {\n      everyFrameHasOffset = false;\n    }\n  }\n\n  keyframes = keyframes.filter((keyframe) => {\n    return Number(keyframe.offset) >= 0 && Number(keyframe.offset) <= 1;\n  });\n\n  function spaceKeyframes() {\n    const { length } = keyframes;\n    keyframes[length - 1].computedOffset = Number(\n      keyframes[length - 1].offset ?? 1,\n    );\n    if (length > 1) {\n      keyframes[0].computedOffset = Number(keyframes[0].offset ?? 0);\n    }\n\n    let previousIndex = 0;\n    let previousOffset = Number(keyframes[0].computedOffset);\n    for (let i = 1; i < length; i++) {\n      const offset = keyframes[i].computedOffset;\n      if (!isNil(offset) && !isNil(previousOffset)) {\n        for (let j = 1; j < i - previousIndex; j++)\n          keyframes[previousIndex + j].computedOffset =\n            previousOffset +\n            ((Number(offset) - previousOffset) * j) / (i - previousIndex);\n        previousIndex = i;\n        previousOffset = Number(offset);\n      }\n    }\n  }\n  if (!everyFrameHasOffset) spaceKeyframes();\n\n  return keyframes as ComputedKeyframe[];\n}\n","import { IElement, IKeyframeEffect, runtime } from '@antv/g-lite';\nimport {\n  calculateActiveDuration,\n  calculateIterationProgress,\n  convertEffectInput,\n} from '../utils';\nimport type { Animation } from './Animation';\nimport { AnimationEffectTiming } from './AnimationEffectTiming';\nimport { normalizeKeyframes } from './KeyframeList';\n\nconst fills = 'backwards|forwards|both|none'.split('|');\nconst directions = 'reverse|alternate|alternate-reverse'.split('|');\nexport function makeTiming(\n  timingInput: KeyframeEffectOptions,\n  forGroup: boolean,\n) {\n  const timing = new AnimationEffectTiming();\n  if (forGroup) {\n    timing.fill = 'both';\n    timing.duration = 'auto';\n  }\n  if (typeof timingInput === 'number' && !isNaN(timingInput)) {\n    timing.duration = timingInput;\n  } else if (timingInput !== undefined) {\n    (Object.keys(timingInput) as (keyof EffectTiming)[]).forEach((property) => {\n      if (\n        timingInput[property] !== undefined &&\n        timingInput[property] !== null &&\n        timingInput[property] !== 'auto'\n      ) {\n        if (typeof timing[property] === 'number' || property === 'duration') {\n          if (\n            typeof timingInput[property] !== 'number' ||\n            isNaN(timingInput[property])\n          ) {\n            return;\n          }\n        }\n        if (\n          property === 'fill' &&\n          fills.indexOf(timingInput[property]) === -1\n        ) {\n          return;\n        }\n        if (\n          property === 'direction' &&\n          directions.indexOf(timingInput[property]) === -1\n        ) {\n          return;\n        }\n        // @ts-ignore\n        timing[property] = timingInput[property];\n      }\n    });\n  }\n  return timing;\n}\n\nexport function normalizeTimingInput(\n  timingInput: KeyframeEffectOptions | number | undefined,\n  forGroup: boolean,\n) {\n  timingInput = numericTimingToObject(timingInput ?? { duration: 'auto' });\n  return makeTiming(timingInput, forGroup);\n}\n\nexport function numericTimingToObject(\n  timingInput: KeyframeEffectOptions | number,\n) {\n  if (typeof timingInput === 'number') {\n    if (isNaN(timingInput)) {\n      timingInput = { duration: 'auto' };\n    } else {\n      timingInput = { duration: timingInput };\n    }\n  }\n  return timingInput;\n}\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect\n * @example\n  const circleDownKeyframes = new KeyframeEffect(\n    circle, // element to animate\n    [\n      { transform: 'translateY(0)' }, // keyframe\n      { transform: 'translateY(100)' } // keyframe\n    ],\n    { duration: 3000, fill: 'forwards' } // keyframe options\n  );\n *\n */\nexport class KeyframeEffect implements IKeyframeEffect {\n  composite: CompositeOperation = 'replace';\n  iterationComposite: IterationCompositeOperation = 'replace';\n  // pseudoElement: string | null;\n  target: IElement | null;\n\n  animation: Animation | null;\n\n  timing: AnimationEffectTiming;\n  private computedTiming: ComputedEffectTiming;\n\n  normalizedKeyframes: ComputedKeyframe[];\n\n  private timeFraction: number | null;\n\n  private interpolations: (target: IElement, f: number) => void;\n\n  constructor(\n    target: IElement | null,\n    effectInput: Keyframe[] | PropertyIndexedKeyframes | null,\n    timingInput?: KeyframeEffectOptions | number,\n  ) {\n    this.target = target;\n    this.timing = normalizeTimingInput(timingInput, false);\n    this.timing.effect = this;\n    this.timing.activeDuration = calculateActiveDuration(this.timing);\n    this.timing.endTime = Math.max(\n      0,\n      this.timing.delay + this.timing.activeDuration + this.timing.endDelay,\n    );\n\n    this.normalizedKeyframes = normalizeKeyframes(effectInput, this.timing);\n    this.interpolations = convertEffectInput(\n      this.normalizedKeyframes,\n      this.timing,\n      this.target,\n    );\n\n    // 不支持 proxy 时降级成 this.timing\n    const { Proxy } = runtime.globalThis;\n    this.computedTiming = Proxy\n      ? new Proxy<AnimationEffectTiming>(this.timing, {\n          get: (target, prop) => {\n            if (prop === 'duration') {\n              return target.duration === 'auto' ? 0 : target.duration;\n            }\n            if (prop === 'fill') {\n              return target.fill === 'auto' ? 'none' : target.fill;\n            }\n            if (prop === 'localTime') {\n              return (this.animation && this.animation.currentTime) || null;\n            }\n            if (prop === 'currentIteration') {\n              if (!this.animation || this.animation.playState !== 'running') {\n                return null;\n              }\n              return target.currentIteration || 0;\n            }\n            if (prop === 'progress') {\n              if (!this.animation || this.animation.playState !== 'running') {\n                return null;\n              }\n              return target.progress || 0;\n            }\n            return target[prop];\n          },\n          set: () => {\n            return true;\n          },\n        })\n      : this.timing;\n  }\n\n  applyInterpolations() {\n    this.interpolations(\n      this.target as unknown as IElement,\n      Number(this.timeFraction),\n    );\n  }\n\n  update(localTime: number | null): boolean {\n    if (localTime === null) {\n      return false;\n    }\n    this.timeFraction = calculateIterationProgress(\n      this.timing.activeDuration,\n      localTime,\n      this.timing,\n    );\n    return this.timeFraction !== null;\n  }\n\n  getKeyframes(): ComputedKeyframe[] {\n    return this.normalizedKeyframes;\n  }\n  setKeyframes(keyframes: Keyframe[] | PropertyIndexedKeyframes | null): void {\n    this.normalizedKeyframes = normalizeKeyframes(keyframes);\n  }\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getComputedTiming\n   */\n  getComputedTiming(): ComputedEffectTiming {\n    return this.computedTiming;\n  }\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getTiming\n   */\n  getTiming(): EffectTiming {\n    return this.timing;\n  }\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/updateTiming\n   */\n  updateTiming(timing?: OptionalEffectTiming): void {\n    Object.keys(timing || {}).forEach((name) => {\n      this.timing[name] = timing[name];\n    });\n  }\n}\n","import type {\n  IDocument,\n  IAnimationTimeline,\n  IElement,\n  IAnimation,\n} from '@antv/g-lite';\nimport { Animation } from './Animation';\nimport { KeyframeEffect } from './KeyframeEffect';\n\nexport function compareAnimations(\n  leftAnimation: IAnimation,\n  rightAnimation: IAnimation,\n) {\n  return Number(leftAnimation.id) - Number(rightAnimation.id);\n}\n\n/**\n * @see https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/web-animations-js/index.d.ts\n */\nexport class AnimationTimeline implements IAnimationTimeline {\n  /**\n   * all active animations\n   */\n  animations: Animation[] = [];\n\n  private ticking = false;\n\n  private timelineTicking = false;\n\n  private hasRestartedThisFrame = false;\n\n  animationsWithPromises: Animation[] = [];\n\n  private inTick = false;\n\n  private pendingEffects: (KeyframeEffect | null)[] = [];\n\n  currentTime: number | null = null;\n\n  private rafId = 0;\n  private rafCallbacks: [number, (x: number) => void][] = [];\n\n  private frameId: number;\n\n  constructor(private document: IDocument) {}\n\n  getAnimations() {\n    this.discardAnimations();\n    return this.animations.slice();\n  }\n\n  isTicking() {\n    return this.inTick;\n  }\n\n  play(\n    target: IElement,\n    keyframes: Keyframe[] | PropertyIndexedKeyframes | null,\n    options?: number | KeyframeAnimationOptions,\n  ): Animation {\n    const effect = new KeyframeEffect(target, keyframes, options);\n    const animation = new Animation(effect, this);\n    this.animations.push(animation);\n    this.restartWebAnimationsNextTick();\n    animation.updatePromises();\n    animation.play();\n    animation.updatePromises();\n    return animation;\n  }\n\n  // RAF is supposed to be the last script to occur before frame rendering but not\n  // all browsers behave like this. This function is for synchonously updating an\n  // animation's effects whenever its state is mutated by script to work around\n  // incorrect script execution ordering by the browser.\n  applyDirtiedAnimation(animation: Animation) {\n    if (this.inTick) {\n      return;\n    }\n    // update active animations in displayobject\n    animation.markTarget();\n    const animations = animation.targetAnimations();\n    animations.sort(compareAnimations);\n\n    // clear inactive animations\n    const inactiveAnimations = this.tick(\n      Number(this.currentTime),\n      false,\n      animations.slice(),\n    )[1];\n    inactiveAnimations.forEach((animation) => {\n      const index = this.animations.indexOf(animation);\n      if (index !== -1) {\n        this.animations.splice(index, 1);\n      }\n    });\n    this.applyPendingEffects();\n  }\n\n  restart() {\n    if (!this.ticking) {\n      this.ticking = true;\n      this.requestAnimationFrame(() => {});\n      this.hasRestartedThisFrame = true;\n    }\n    return this.hasRestartedThisFrame;\n  }\n\n  destroy() {\n    this.document.defaultView.cancelAnimationFrame(this.frameId);\n  }\n\n  applyPendingEffects() {\n    this.pendingEffects.forEach((effect) => {\n      effect?.applyInterpolations();\n    });\n    this.pendingEffects = [];\n  }\n\n  private updateAnimationsPromises() {\n    this.animationsWithPromises = this.animationsWithPromises.filter(\n      (animation) => {\n        return animation.updatePromises();\n      },\n    );\n  }\n\n  private discardAnimations() {\n    this.updateAnimationsPromises();\n    this.animations = this.animations.filter((animation) => {\n      return (\n        animation.playState !== 'finished' && animation.playState !== 'idle'\n      );\n    });\n  }\n\n  private restartWebAnimationsNextTick() {\n    if (!this.timelineTicking) {\n      this.timelineTicking = true;\n      this.requestAnimationFrame(this.webAnimationsNextTick);\n    }\n  }\n\n  private webAnimationsNextTick = (t: number) => {\n    this.currentTime = t;\n    this.discardAnimations();\n    if (this.animations.length === 0) {\n      this.timelineTicking = false;\n    } else {\n      this.requestAnimationFrame(this.webAnimationsNextTick);\n    }\n  };\n\n  private processRafCallbacks = (t: number) => {\n    const processing = this.rafCallbacks;\n    this.rafCallbacks = [];\n    if (t < Number(this.currentTime)) t = Number(this.currentTime);\n    this.animations.sort(compareAnimations);\n    this.animations = this.tick(t, true, this.animations)[0];\n    processing.forEach((entry) => {\n      entry[1](t);\n    });\n    this.applyPendingEffects();\n  };\n\n  private rAF(f: (x: number) => void) {\n    const id = this.rafId++;\n    if (this.rafCallbacks.length === 0) {\n      this.frameId = this.document.defaultView.requestAnimationFrame(\n        this.processRafCallbacks,\n      );\n    }\n    this.rafCallbacks.push([id, f]);\n    return id;\n  }\n\n  private requestAnimationFrame(f: (ts: number) => void) {\n    return this.rAF((x: number) => {\n      this.updateAnimationsPromises();\n      f(x);\n      this.updateAnimationsPromises();\n    });\n  }\n\n  tick(t: number, isAnimationFrame: boolean, updatingAnimations: IAnimation[]) {\n    this.inTick = true;\n    this.hasRestartedThisFrame = false;\n\n    this.currentTime = t;\n    this.ticking = false;\n\n    const newPendingClears: (KeyframeEffect | null)[] = [];\n    const newPendingEffects: (KeyframeEffect | null)[] = [];\n    const activeAnimations: Animation[] = [];\n    const inactiveAnimations: Animation[] = [];\n\n    (updatingAnimations as unknown as Animation[]).forEach((animation) => {\n      animation.tick(t, isAnimationFrame);\n\n      if (!animation._inEffect) {\n        newPendingClears.push(animation.effect);\n        animation.unmarkTarget();\n      } else {\n        newPendingEffects.push(animation.effect);\n        animation.markTarget();\n      }\n\n      if (animation._needsTick) this.ticking = true;\n\n      const alive = animation._inEffect || animation._needsTick;\n      animation._inTimeline = alive;\n      if (alive) {\n        activeAnimations.push(animation);\n      } else {\n        inactiveAnimations.push(animation);\n      }\n    });\n\n    this.pendingEffects.push(...newPendingClears);\n    this.pendingEffects.push(...newPendingEffects);\n\n    if (this.ticking) this.requestAnimationFrame(() => {});\n\n    this.inTick = false;\n    return [activeAnimations, inactiveAnimations];\n  }\n}\n","import { runtime } from '@antv/g-lite';\nimport { AnimationTimeline } from './dom/AnimationTimeline';\nimport { parseEasingFunction } from './utils';\n\nexport * from './dom';\nexport { EasingFunctions } from './utils';\n\nruntime.EasingFunction = parseEasingFunction;\nruntime.AnimationTimeline = AnimationTimeline;\n"],"names":["_classCallCheck","a","n","TypeError","_typeof","o","Symbol","iterator","constructor","prototype","toPropertyKey","t","i","r","e","toPrimitive","call","String","Number","_defineProperties","length","enumerable","configurable","writable","Object","defineProperty","key","_createClass","_getPrototypeOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_isNativeReflectConstruct","Boolean","valueOf","Reflect","construct","_possibleConstructorReturn","ReferenceError","assertThisInitialized","_setPrototypeOf","AnimationEvent","_FederatedEvent","manager","target","currentTime","timelineTime","_this","possibleConstructorReturn","isNativeReflectConstruct","apply","type","bubbles","currentTarget","defaultPrevented","eventPhase","AT_TARGET","timeStamp","Date","now","create","value","_inherits","FederatedEvent","sequenceNumber","Animation","effect","timeline","_this$effect","this","currentTimePending","_idle","_paused","_finishedFlag","_currentTime","_playbackRate","_inTimeline","animation","id","concat","_inEffect","update","_totalDuration","getComputedTiming","endTime","_holdTime","oldPlayState","updatePromises","get","_startTime","playbackRate","_isFinished","readyPromise","animationsWithPromises","indexOf","push","Promise","resolve","reject","resolveReadyPromise","rejectReadyPromise","Error","pending","_this2","finishedPromise","resolveFinishedPromise","rejectFinishedPromise","playState","set","newTime","isNaN","_this$timeline","restart","tickCurrentTime","applyDirtiedAnimation","oldCurrentTime","startTime","ensureAlive","_this$effect$target","destroyed","undefined","newPlayState","rewind","animations","_this3","oncancel","event","setTimeout","play","_this$effect2","getAnimations","targetAnimations","index","splice","isAnimationFrame","fireEvents","Infinity","ERROR_MSG_METHOD_NOT_IMPLEMENTED","listener","options","_this$effect3","_this$effect4","ignoreLimit","baseTime","_this4","onfinish","onframe","_arrayLikeToArray","Array","_unsupportedIterableToArray","arrayLikeToArray","toString","slice","name","from","test","_toConsumableArray","isArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","kSampleStepSize","float32ArraySupported","Float32Array","A","aA1","aA2","B","C","calcBezier","aT","getSlope","bezier","mX1","mY1","mX2","mY2","sampleValues","getTForX","aX","intervalStart","currentSample","kSplineTableSize","guessForT","initialSlope","aA","aB","currentX","currentT","Math","abs","binarySubdivide","aGuessT","currentSlope","newtonRaphsonIterate","_slicedToArray","arrayWithHoles","l","u","f","next","done","iterableToArrayLimit","nonIterableRest","isNil","clamp$1","min","max","Quad","pow","Cubic","Quart","Quint","Expo","Sine","cos","PI","Circ","sqrt","Back","Bounce","pow2","b","Elastic","_params","arguments","_params$","_params$2","period","clamp","p","sin","asin","Spring","duration","_params2","_params2$","mass","_params2$2","stiffness","_params2$3","damping","_params2$4","velocity","w0","zeta","wd","progress","exp","Steps","_ref2","_ref2$","steps","ceil","floor","Bezier","_params3","easein","EaseOut","ease","EaseInOut","params","EaseOutIn","EasingFunctions","linear","in","out","spring","x","step","count","pos","stepSize","numberString","cubicBezierRe","RegExp","step1Re","step2Re","parseEasingFunction","normalizedEasing","cubicData","exec","map","step1Data","step2Data","start","middle","end","str","replace","letter","toLowerCase","charAt","substring","trim","complexEasingSyntax","calculateActiveDuration","timing","_timing$iterations","iterations","repeatedDuration","calculateIterationProgress","activeDuration","localTime","phase","delay","endDelay","calculatePhase","activeTime","fillMode","calculateActiveTime","fill","overallProgress","iterationDuration","iterationStart","calculateOverallProgress","simpleIterationProgress","calculateSimpleIterationProgress","currentIteration","calculateCurrentIteration","directedProgress","playbackDirection","currentDirection","d","calculateDirectedProgress","direction","easingFunction","convertEffectInput","keyframes","propertySpecificKeyframeGroups","member","isNotReservedWord","propertySpecificKeyframe","offset","computedOffset","easing","makePropertySpecificKeyframeGroups","interpolations","groupName","startIndex","endIndex","startOffset","endOffset","applyFrom","applyTo","property","interpolation","propertyInterpolation","sort","leftInterpolation","rightInterpolation","makeInterpolations","fraction","filter","forEach","localDuration","setAttribute","InterpolationFactory","to","convertToString","interpolated","interpolate","left","right","metadata","propertyMetadataCache","syntax","propertyHandler","runtime","styleValueRegistry","getPropertySyntax","parser","usedLeft","usedRight","interpolationArgs","mixer","interp","bool","fromLength","toLength","AnimationEffectTiming","_easing","normalizeKeyframes","effectInput","normalizedEffectInput","values","numKeyframes","keyframe","composite","convertToArrayForm","originalKeyframe","memberValue","isFinite","everyFrameHasOffset","previousOffset","_keyframes$offset","_keyframes$0$offset","previousIndex","j","spaceKeyframes","fills","split","directions","makeTiming","timingInput","forGroup","keys","normalizeTimingInput","numericTimingToObject","KeyframeEffect","iterationComposite","normalizedKeyframes","Proxy","globalThis","computedTiming","prop","timeFraction","compareAnimations","leftAnimation","rightAnimation","AnimationTimeline","document","ticking","timelineTicking","hasRestartedThisFrame","inTick","pendingEffects","rafId","rafCallbacks","webAnimationsNextTick","discardAnimations","requestAnimationFrame","processRafCallbacks","processing","tick","entry","applyPendingEffects","restartWebAnimationsNextTick","markTarget","defaultView","cancelAnimationFrame","frameId","applyInterpolations","updateAnimationsPromises","rAF","updatingAnimations","_this$pendingEffects","_this$pendingEffects2","newPendingClears","newPendingEffects","activeAnimations","inactiveAnimations","unmarkTarget","_needsTick","alive","EasingFunction","gLite"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,11,12,14,15,16,17,18,19,21,22,23,24,25,26,30]}