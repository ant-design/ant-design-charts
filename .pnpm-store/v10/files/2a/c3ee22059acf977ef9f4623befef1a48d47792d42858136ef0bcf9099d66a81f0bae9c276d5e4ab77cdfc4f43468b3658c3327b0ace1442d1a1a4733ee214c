{"version":3,"file":"index.umd.min.js","sources":["../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/typeof.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/createClass.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../../../node_modules/.pnpm/@antv+util@3.3.11/node_modules/@antv/util/esm/lodash/is-nil.js","../../../node_modules/.pnpm/@antv+util@3.3.11/node_modules/@antv/util/esm/lodash/is-string.js","../../../node_modules/.pnpm/@antv+util@3.3.11/node_modules/@antv/util/esm/lodash/clamp.js","../../../node_modules/.pnpm/gl-matrix@3.4.3/node_modules/gl-matrix/esm/common.js","../../../node_modules/.pnpm/gl-matrix@3.4.3/node_modules/gl-matrix/esm/mat4.js","../src/components/ElementSVG.ts","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../src/shapes/paths/Image.ts","../src/shapes/paths/Line.ts","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../src/shapes/paths/Path.ts","../src/shapes/paths/Polyline.ts","../src/shapes/paths/Rect.ts","../src/utils/dom.ts","../src/shapes/defs/Filter.ts","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../src/shapes/defs/Pattern.ts","../src/shapes/defs/DefElementManager.ts","../src/shapes/defs/Shadow.ts","../src/utils/format.ts","../src/SVGRendererPlugin.ts","../src/shapes/paths/Text.ts","../src/DefaultElementLifeCycleContribution.ts","../src/index.ts","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/callSuper.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/inherits.js"],"sourcesContent":["function _classCallCheck(a, n) {\n  if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n}\nexport { _classCallCheck as default };","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nexport { _createClass as default };","function _getPrototypeOf(t) {\n  return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {\n    return t.__proto__ || Object.getPrototypeOf(t);\n  }, _getPrototypeOf(t);\n}\nexport { _getPrototypeOf as default };","function _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {\n    return !!t;\n  })();\n}\nexport { _isNativeReflectConstruct as default };","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nfunction _possibleConstructorReturn(t, e) {\n  if (e && (\"object\" == _typeof(e) || \"function\" == typeof e)) return e;\n  if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\");\n  return assertThisInitialized(t);\n}\nexport { _possibleConstructorReturn as default };","function _assertThisInitialized(e) {\n  if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  return e;\n}\nexport { _assertThisInitialized as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","/**\n * 判断值是否为 null 或 undefined\n * @return 是否为 null 或 undefined\n */\nexport default function isNil(value) {\n    return value === null || value === undefined;\n}\n//# sourceMappingURL=is-nil.js.map","/**\n * 判断值是否为字符串\n * @return 是否为字符串\n */\nexport default function isString(value) {\n    return typeof value === 'string';\n}\n//# sourceMappingURL=is-string.js.map","var clamp = function (a, min, max) {\n    if (a < min) {\n        return min;\n    }\n    else if (a > max) {\n        return max;\n    }\n    return a;\n};\nexport default clamp;\n//# sourceMappingURL=clamp.js.map","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;","export class ElementSVG {\n  static tag = 'c-svg-element';\n\n  /**\n   * basic element, eg. <circle>|<ellipse>\n   */\n  $el: SVGElement | null;\n\n  /**\n   * group wrapper for basic element, eg. <g><circle /></g>.\n   * if current element is <g>, same as `$el`\n   */\n  $groupEl: SVGElement | null;\n\n  /**\n   * hitArea:\n   * $groupEl -> $el\n   *          -> $hitTestingEl\n   */\n  $hitTestingEl: SVGElement | null;\n}\n","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import type { ParsedImageStyleProps } from '@antv/g-lite';\nimport { isString } from '@antv/util';\n\nexport function updateImageElementAttribute(\n  $el: SVGElement,\n  parsedStyle: ParsedImageStyleProps,\n) {\n  const { src = '', x = 0, y = 0, width, height } = parsedStyle;\n\n  $el.setAttribute('x', `${x}`);\n  $el.setAttribute('y', `${y}`);\n\n  if (isString(src)) {\n    $el.setAttribute('href', src);\n  } else if (src instanceof Image) {\n    if (!width) {\n      $el.setAttribute('width', `${src.width}`);\n    }\n    if (!height) {\n      $el.setAttribute('height', `${src.height}`);\n    }\n    $el.setAttribute('href', src.src);\n  } else if (\n    // @ts-ignore\n    src instanceof HTMLElement &&\n    isString((src as HTMLElement).nodeName) &&\n    (src as HTMLElement).nodeName.toUpperCase() === 'CANVAS'\n  ) {\n    $el.setAttribute('href', (src as HTMLCanvasElement).toDataURL());\n    // @ts-ignore\n  } else if (src instanceof ImageData) {\n    const canvas = document.createElement('canvas');\n    // @ts-ignore\n    canvas.setAttribute('width', `${src.width}`);\n    // @ts-ignore\n    canvas.setAttribute('height', `${src.height}`);\n    const context = canvas.getContext('2d');\n    if (context) {\n      context.putImageData(src, 0, 0);\n      if (!width) {\n        // @ts-ignore\n        $el.setAttribute('width', `${src.width}`);\n      }\n      if (!height) {\n        // @ts-ignore\n        $el.setAttribute('height', `${src.height}`);\n      }\n      $el.setAttribute('href', canvas.toDataURL());\n    }\n  }\n}\n","import type { ParsedLineStyleProps } from '@antv/g-lite';\nimport { isDisplayObject } from '@antv/g-lite';\n\nexport function updateLineElementAttribute(\n  $el: SVGElement,\n  parsedStyle: ParsedLineStyleProps,\n) {\n  const {\n    x1,\n    y1,\n    x2,\n    y2,\n    markerStart,\n    markerEnd,\n    markerStartOffset,\n    markerEndOffset,\n  } = parsedStyle;\n\n  let startOffsetX = 0;\n  let startOffsetY = 0;\n  let endOffsetX = 0;\n  let endOffsetY = 0;\n\n  let rad = 0;\n  let x: number;\n  let y: number;\n\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    x = x2 - x1;\n    y = y2 - y1;\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    x = x1 - x2;\n    y = y1 - y2;\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n\n  // @see https://github.com/antvis/g/issues/1038\n  $el.setAttribute('x1', `${x1 + startOffsetX}`);\n  $el.setAttribute('y1', `${y1 + startOffsetY}`);\n  $el.setAttribute('x2', `${x2 + endOffsetX}`);\n  $el.setAttribute('y2', `${y2 + endOffsetY}`);\n}\n","function _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nexport { _arrayLikeToArray as default };","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nfunction _slicedToArray(r, e) {\n  return arrayWithHoles(r) || iterableToArrayLimit(r, e) || unsupportedIterableToArray(r, e) || nonIterableRest();\n}\nexport { _slicedToArray as default };","function _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\nexport { _arrayWithHoles as default };","function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nexport { _iterableToArrayLimit as default };","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? arrayLikeToArray(r, a) : void 0;\n  }\n}\nexport { _unsupportedIterableToArray as default };","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nexport { _nonIterableRest as default };","import type { ParsedPathStyleProps, Path } from '@antv/g-lite';\nimport { isDisplayObject, translatePathToString } from '@antv/g-lite';\n\nexport function updatePathElementAttribute(\n  $el: SVGElement,\n  parsedStyle: ParsedPathStyleProps,\n) {\n  const { d, markerStart, markerEnd, markerStartOffset, markerEndOffset } =\n    parsedStyle;\n\n  let startOffsetX = 0;\n  let startOffsetY = 0;\n  let endOffsetX = 0;\n  let endOffsetY = 0;\n\n  let rad = 0;\n  let x: number;\n  let y: number;\n\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    const [p1, p2] = (markerStart.parentNode as Path).getStartTangent();\n    x = p1[0] - p2[0];\n    y = p1[1] - p2[1];\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    const [p1, p2] = (markerEnd.parentNode as Path).getEndTangent();\n    x = p1[0] - p2[0];\n    y = p1[1] - p2[1];\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n\n  $el.setAttribute(\n    'd',\n    translatePathToString(\n      d.absolutePath,\n      startOffsetX,\n      startOffsetY,\n      endOffsetX,\n      endOffsetY,\n    ),\n  );\n}\n","import type { ParsedPolylineStyleProps } from '@antv/g-lite';\nimport { isDisplayObject } from '@antv/g-lite';\n\nexport function updatePolylineElementAttribute(\n  $el: SVGElement,\n  parsedStyle: ParsedPolylineStyleProps,\n) {\n  const {\n    points: { points },\n    markerStart,\n    markerStartOffset,\n    markerEnd,\n    markerEndOffset,\n  } = parsedStyle;\n  const { length } = points;\n\n  if (points && length >= 2) {\n    let startOffsetX = 0;\n    let startOffsetY = 0;\n    let endOffsetX = 0;\n    let endOffsetY = 0;\n\n    let rad = 0;\n    let x: number;\n    let y: number;\n\n    if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n      x = points[1][0] - points[0][0];\n      y = points[1][1] - points[0][1];\n      rad = Math.atan2(y, x);\n      startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n      startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n    }\n\n    if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n      x = points[length - 2][0] - points[length - 1][0];\n      y = points[length - 2][1] - points[length - 1][1];\n      rad = Math.atan2(y, x);\n      endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n      endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n    }\n\n    $el.setAttribute(\n      'points',\n      points\n        .map((point: [number, number], i) => {\n          let offsetX = 0;\n          let offsetY = 0;\n          if (i === 0) {\n            offsetX = startOffsetX;\n            offsetY = startOffsetY;\n          } else if (i === length - 1) {\n            offsetX = endOffsetX;\n            offsetY = endOffsetY;\n          }\n          return `${point[0] + offsetX},${point[1] + offsetY}`;\n        })\n        .join(' '),\n    );\n  }\n}\n","import type { ParsedRectStyleProps } from '@antv/g-lite';\nimport { clamp } from '@antv/util';\n\nexport function updateRectElementAttribute(\n  $el: SVGElement,\n  parsedStyle: ParsedRectStyleProps,\n) {\n  const { radius, x = 0, y = 0, width, height } = parsedStyle;\n\n  // CSSKeyword: auto\n  if (!isFinite(width) || !isFinite(height)) {\n    return;\n  }\n\n  const hasRadius = radius && radius.some((r) => r !== 0);\n\n  let d = '';\n  if (!hasRadius) {\n    d = `M ${x},${y} l ${width},0 l 0,${height} l${-width} 0 z`;\n  } else {\n    const [tlr, trr, brr, blr] = radius.map((r) =>\n      clamp(r, 0, Math.min(Math.abs(width) / 2, Math.abs(height) / 2)),\n    );\n\n    const signX = width > 0 ? 1 : -1;\n    const signY = height > 0 ? 1 : -1;\n    // sweep-flag @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Tutorial/Paths#arcs\n    const sweepFlag = signX + signY !== 0 ? 1 : 0;\n    d = [\n      [`M ${signX * tlr + x},${y}`],\n      [`l ${width - signX * (tlr + trr)},0`],\n      [`a ${trr},${trr},0,0,${sweepFlag},${signX * trr},${signY * trr}`],\n      [`l 0,${height - signY * (trr + brr)}`],\n      [`a ${brr},${brr},0,0,${sweepFlag},${-signX * brr},${signY * brr}`],\n      [`l ${signX * (brr + blr) - width},0`],\n      [`a ${blr},${blr},0,0,${sweepFlag},${-signX * blr},${-signY * blr}`],\n      [`l 0,${signY * (blr + tlr) - height}`],\n      [`a ${tlr},${tlr},0,0,${sweepFlag},${signX * tlr},${-signY * tlr}`],\n      ['z'],\n    ].join(' ');\n  }\n  $el.setAttribute('d', d);\n}\n","export function createSVGElement(type: string, doc?: Document): SVGElement {\n  return (doc || document).createElementNS('http://www.w3.org/2000/svg', type);\n}\n","import type {\n  CSSUnitValue,\n  DisplayObject,\n  ParsedBaseStyleProps,\n} from '@antv/g-lite';\nimport { UnitType } from '@antv/g-lite';\nimport { createSVGElement } from '../../utils/dom';\n\nexport const FILTER_PREFIX = 'g-filter-';\n\n/**\n * use SVG filters, eg. blur, brightness, contrast...\n * @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Element/filter\n */\nexport function createOrUpdateFilter(\n  document: Document,\n  $def: SVGDefsElement,\n  object: DisplayObject,\n  $el: SVGElement,\n  filters: ParsedBaseStyleProps['filter'],\n) {\n  // eg. filter=\"url(#f1) url(#f2)\"\n  const filterName = FILTER_PREFIX + object.entity;\n\n  const $existedFilters = $def.querySelectorAll(`[name=${filterName}]`);\n  if ($existedFilters.length) {\n    $existedFilters.forEach(($filter) => {\n      $def.removeChild($filter);\n    });\n  }\n\n  if (filters.length === 0) {\n    // 'none'\n    $el?.removeAttribute('filter');\n  } else {\n    const filterIds = filters.map(({ name, params }, i) => {\n      const $filter = createSVGElement('filter', document) as SVGFilterElement;\n      // @see https://github.com/antvis/g/issues/1025\n      $filter.setAttribute('filterUnits', 'userSpaceOnUse');\n      if (name === 'blur') {\n        createBlur(document, $filter, params);\n      } else if (name === 'brightness') {\n        createBrightness(document, $filter, params);\n      } else if (name === 'drop-shadow') {\n        createDropShadow(document, $filter, params);\n      } else if (name === 'contrast') {\n        createContrast(document, $filter, params);\n      } else if (name === 'grayscale') {\n        createGrayscale(document, $filter, params);\n      } else if (name === 'sepia') {\n        createSepia(document, $filter, params);\n      } else if (name === 'saturate') {\n        createSaturate(document, $filter, params);\n      } else if (name === 'hue-rotate') {\n        createHueRotate(document, $filter, params);\n      } else if (name === 'invert') {\n        createInvert(document, $filter, params);\n      }\n\n      $filter.id = `${filterName}-${i}`;\n      $filter.setAttribute('name', filterName);\n      $def.appendChild($filter);\n\n      return $filter.id;\n    });\n\n    // @see https://github.com/antvis/G/issues/1114\n    setTimeout(() => {\n      $el?.setAttribute(\n        'filter',\n        filterIds.map((filterId) => `url(#${filterId})`).join(' '),\n      );\n    });\n  }\n}\n\nfunction convertToAbsoluteValue(param: CSSUnitValue) {\n  return param.unit === UnitType.kPercentage ? param.value / 100 : param.value;\n}\n\n/**\n * @see https://drafts.fxtf.org/filter-effects/#blurEquivalent\n */\nfunction createBlur(\n  document: Document,\n  $filter: SVGElement,\n  params: CSSUnitValue[],\n) {\n  const $feGaussianBlur = createSVGElement('feGaussianBlur', document);\n  $feGaussianBlur.setAttribute('in', 'SourceGraphic');\n  $feGaussianBlur.setAttribute('stdDeviation', `${params[0].value}`);\n  $filter.appendChild($feGaussianBlur);\n}\n\nfunction createFeComponentTransfer(\n  document: Document,\n  $filter: SVGElement,\n  {\n    type,\n    slope,\n    intercept,\n    tableValues,\n  }: {\n    type: string;\n    slope?: number;\n    intercept?: number;\n    tableValues?: string;\n  },\n) {\n  const $feComponentTransfer = createSVGElement(\n    'feComponentTransfer',\n    document,\n  );\n  [\n    createSVGElement('feFuncR', document),\n    createSVGElement('feFuncG', document),\n    createSVGElement('feFuncB', document),\n  ].forEach(($feFunc) => {\n    $feFunc.setAttribute('type', type);\n\n    if (type === 'table') {\n      $feFunc.setAttribute('tableValues', `${tableValues}`);\n    } else {\n      $feFunc.setAttribute('slope', `${slope}`);\n      $feFunc.setAttribute('intercept', `${intercept}`);\n    }\n\n    $feComponentTransfer.appendChild($feFunc);\n  });\n\n  $filter.appendChild($feComponentTransfer);\n}\n\nfunction createContrast(\n  document: Document,\n  $filter: SVGElement,\n  params: CSSUnitValue[],\n) {\n  const slope = convertToAbsoluteValue(params[0]);\n  createFeComponentTransfer(document, $filter, {\n    type: 'linear',\n    slope,\n    intercept: -(0.5 * slope) + 0.5,\n  });\n}\n\nfunction createInvert(\n  document: Document,\n  $filter: SVGElement,\n  params: CSSUnitValue[],\n) {\n  const amount = convertToAbsoluteValue(params[0]);\n  createFeComponentTransfer(document, $filter, {\n    type: 'table',\n    tableValues: `${amount} ${1 - amount}`,\n  });\n}\n\nfunction createBrightness(\n  document: Document,\n  $filter: SVGElement,\n  params: CSSUnitValue[],\n) {\n  const slope = convertToAbsoluteValue(params[0]);\n  createFeComponentTransfer(document, $filter, {\n    type: 'linear',\n    slope,\n    intercept: 0,\n  });\n}\n\nfunction createSaturate(\n  document: Document,\n  $filter: SVGElement,\n  params: CSSUnitValue[],\n) {\n  const amount = convertToAbsoluteValue(params[0]);\n  const $feColorMatrix = createSVGElement('feColorMatrix', document);\n  $feColorMatrix.setAttribute('type', 'saturate');\n  $feColorMatrix.setAttribute('values', `${amount}`);\n  $filter.appendChild($feColorMatrix);\n}\n\nfunction createHueRotate(\n  document: Document,\n  $filter: SVGElement,\n  params: CSSUnitValue[],\n) {\n  const $feColorMatrix = createSVGElement('feColorMatrix', document);\n  $feColorMatrix.setAttribute('type', 'hueRotate');\n  // $feColorMatrix.setAttribute('values', `${params[0].to(UnitType.kDegrees).value}`);\n  // FIXME: convert to degrees\n  $feColorMatrix.setAttribute('values', `${params[0].value}`);\n  $filter.appendChild($feColorMatrix);\n}\n\nfunction createDropShadow(\n  document: Document,\n  $filter: SVGElement,\n  params: CSSUnitValue[],\n) {\n  const shadowOffsetX = params[0].value;\n  const shadowOffsetY = params[1].value;\n  const shadowBlur = params[2].value;\n  // @ts-ignore\n  const shadowColor = params[3].formatted as string;\n  const $feGaussianBlur = createSVGElement('feGaussianBlur', document);\n  $feGaussianBlur.setAttribute('in', 'SourceAlpha');\n  $feGaussianBlur.setAttribute('stdDeviation', `${shadowBlur}`);\n  $filter.appendChild($feGaussianBlur);\n\n  const $feOffset = createSVGElement('feOffset', document);\n  $feOffset.setAttribute('dx', `${shadowOffsetX}`);\n  $feOffset.setAttribute('dy', `${shadowOffsetY}`);\n  $feOffset.setAttribute('result', 'offsetblur');\n  $filter.appendChild($feOffset);\n\n  const $feFlood = createSVGElement('feFlood', document);\n  $feFlood.setAttribute('flood-color', shadowColor);\n  $filter.appendChild($feFlood);\n\n  const $feComposite = createSVGElement('feComposite', document);\n  $feComposite.setAttribute('in2', 'offsetblur');\n  $feComposite.setAttribute('operator', 'in');\n  $filter.appendChild($feComposite);\n\n  const $feMerge = createSVGElement('feMerge', document);\n  $filter.appendChild($feMerge);\n\n  const $feMergeNode1 = createSVGElement('feMergeNode', document);\n  const $feMergeNode2 = createSVGElement('feMergeNode', document);\n  $feMergeNode2.setAttribute('in', 'SourceGraphic');\n  $feMerge.appendChild($feMergeNode1);\n  $feMerge.appendChild($feMergeNode2);\n}\n\nfunction createFeColorMatrix(\n  document: Document,\n  $filter: SVGElement,\n  matrix: number[],\n) {\n  const $feColorMatrix = createSVGElement('feColorMatrix', document);\n  $feColorMatrix.setAttribute('type', 'matrix');\n  $feColorMatrix.setAttribute('values', matrix.join(' '));\n  $filter.appendChild($feColorMatrix);\n}\n\n/**\n * @see https://drafts.fxtf.org/filter-effects/#grayscaleEquivalent\n */\nfunction createGrayscale(\n  document: Document,\n  $filter: SVGElement,\n  params: CSSUnitValue[],\n) {\n  const amount = convertToAbsoluteValue(params[0]);\n  createFeColorMatrix(document, $filter, [\n    0.2126 + 0.7874 * (1 - amount),\n    0.7152 - 0.7152 * (1 - amount),\n    0.0722 - 0.0722 * (1 - amount),\n    0,\n    0,\n    0.2126 - 0.2126 * (1 - amount),\n    0.7152 + 0.2848 * (1 - amount),\n    0.0722 - 0.0722 * (1 - amount),\n    0,\n    0,\n    0.2126 - 0.2126 * (1 - amount),\n    0.7152 - 0.7152 * (1 - amount),\n    0.0722 + 0.9278 * (1 - amount),\n    0,\n    0,\n    0,\n    0,\n    0,\n    1,\n    0,\n  ]);\n}\n\n/**\n * @see https://drafts.fxtf.org/filter-effects/#sepiaEquivalent\n */\nfunction createSepia(\n  document: Document,\n  $filter: SVGElement,\n  params: CSSUnitValue[],\n) {\n  const amount = convertToAbsoluteValue(params[0]);\n  createFeColorMatrix(document, $filter, [\n    0.393 + 0.607 * (1 - amount),\n    0.769 - 0.769 * (1 - amount),\n    0.189 - 0.189 * (1 - amount),\n    0,\n    0,\n    0.349 - 0.349 * (1 - amount),\n    0.686 + 0.314 * (1 - amount),\n    0.168 - 0.168 * (1 - amount),\n    0,\n    0,\n    0.272 - 0.272 * (1 - amount),\n    0.534 - 0.534 * (1 - amount),\n    0.131 + 0.869 * (1 - amount),\n    0,\n    0,\n    0,\n    0,\n    0,\n    1,\n    0,\n  ]);\n}\n","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nexport { _objectSpread2 as default };","import type { CSSRGB, Pattern, RadialGradient } from '@antv/g-lite';\nimport {\n  DisplayObject,\n  LinearGradient,\n  parseTransform,\n  computeLinearGradient,\n  computeRadialGradient,\n  CSSGradientValue,\n  GradientType,\n  Rect,\n  isBrowser,\n  isPattern,\n  isCSSRGB,\n  isCSSGradientValue,\n} from '@antv/g-lite';\nimport { isString } from '@antv/util';\nimport { SVGRendererPlugin } from '../../SVGRendererPlugin';\nimport { createSVGElement } from '../../utils/dom';\nimport { FILTER_PREFIX } from './Filter';\n\nexport const PATTERN_PREFIX = 'g-pattern-';\nlet cacheKey2IDMap: Record<string, string> = {};\nlet counter = 0;\n\nexport function resetPatternCounter() {\n  counter = 0;\n  cacheKey2IDMap = {};\n}\n\nexport function createOrUpdateGradientAndPattern(\n  document: Document,\n  $def: SVGDefsElement,\n  object: DisplayObject,\n  $el: SVGElement,\n  parsedColor: CSSGradientValue[] | CSSRGB | Pattern,\n  name: string,\n  createImage: () => HTMLImageElement,\n  plugin: SVGRendererPlugin,\n) {\n  // eg. clipPath don't have fill/stroke\n  if (!parsedColor) {\n    return '';\n  }\n\n  if (isCSSRGB(parsedColor)) {\n    // keep using currentColor @see https://github.com/d3/d3-axis/issues/49\n    if (object.style[name] === 'currentColor') {\n      $el?.setAttribute(name, 'currentColor');\n    } else {\n      // constant value, eg. '#fff'\n      $el?.setAttribute(\n        name,\n        parsedColor.isNone ? 'none' : parsedColor.toString(),\n      );\n    }\n  } else if (isPattern(parsedColor)) {\n    const patternId = createOrUpdatePattern(\n      document,\n      $def,\n      object,\n      parsedColor,\n      createImage,\n      plugin,\n    );\n    // use style instead of attribute when applying <pattern>\n    // @see https://stackoverflow.com/a/7723115\n    $el.style[name] = `url(#${patternId})`;\n    return patternId;\n  } else {\n    if (parsedColor.length === 1) {\n      const gradientId = createOrUpdateGradient(\n        document,\n        object,\n        $def,\n        $el,\n        parsedColor[0],\n      );\n      $el?.setAttribute(name, `url(#${gradientId})`);\n      return gradientId;\n    }\n    // @see https://stackoverflow.com/questions/20671502/can-i-blend-gradients-in-svg\n    const filterId = createOrUpdateMultiGradient(\n      document,\n      object,\n      $def,\n      $el,\n      parsedColor,\n    );\n    $el?.setAttribute('filter', `url(#${filterId})`);\n    $el?.setAttribute('fill', 'black');\n    return filterId;\n  }\n\n  return '';\n}\n\nfunction generateCacheKey(\n  src: CSSGradientValue | CSSRGB | Pattern,\n  options: any = {},\n): string {\n  let cacheKey = '';\n  if (isCSSGradientValue(src)) {\n    const { type, value } = src;\n    if (\n      type === GradientType.LinearGradient ||\n      type === GradientType.RadialGradient\n    ) {\n      // @ts-ignore\n      const { type, x, y, width, height, steps, angle, cx, cy, size } = {\n        ...value,\n        ...options,\n      };\n      cacheKey = `gradient-${type}-${x?.toString() || 0}-${\n        y?.toString() || 0\n      }-${angle?.toString() || 0}-${cx?.toString() || 0}-${\n        cy?.toString() || 0\n      }-${size?.toString() || 0}-${width}-${height}-${steps\n        .map(({ offset, color }) => `${offset}${color}`)\n        .join('-')}`;\n    }\n  } else if (isPattern(src)) {\n    if (isString(src.image)) {\n      cacheKey = `pattern-${src.image}-${src.repetition}`;\n    } else if ((src.image as Rect).nodeName === 'rect') {\n      // use rect's entity as key\n      cacheKey = `pattern-rect-${(src.image as Rect).entity}`;\n    } else {\n      cacheKey = `pattern-${counter}`;\n    }\n  }\n\n  if (cacheKey) {\n    if (!cacheKey2IDMap[cacheKey]) {\n      cacheKey2IDMap[cacheKey] = `${PATTERN_PREFIX}${counter++}`;\n    }\n  }\n\n  return cacheKey2IDMap[cacheKey];\n}\n\nfunction formatTransform(transform: string) {\n  // @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/patternTransform\n  // should remove unit: rotate(20deg) -> rotate(20)\n  return parseTransform(transform)\n    .map((parsed) => {\n      const { t, d } = parsed;\n      if (t === 'translate') {\n        return `translate(${d[0].value} ${d[1].value})`;\n      }\n      if (t === 'translateX') {\n        return `translate(${d[0].value} 0)`;\n      }\n      if (t === 'translateY') {\n        return `translate(0 ${d[0].value})`;\n      }\n      if (t === 'rotate') {\n        return `rotate(${d[0].value})`;\n      }\n      if (t === 'scale') {\n        // scale(1) scale(1, 1)\n        const newScale = d?.map((s) => s.value) || [1, 1];\n        return `scale(${newScale[0]}, ${newScale[1]})`;\n      }\n      if (t === 'scaleX') {\n        const newScale = d?.map((s) => s.value) || [1];\n        return `scale(${newScale[0]}, 1)`;\n      }\n      if (t === 'scaleY') {\n        const newScale = d?.map((s) => s.value) || [1];\n        return `scale(1, ${newScale[0]})`;\n      }\n      if (t === 'skew') {\n        const newSkew = d?.map((s) => s.value) || [0, 0];\n        return `skewX(${newSkew[0]}) skewY(${newSkew[1]})`;\n      }\n      if (t === 'skewZ') {\n        const newSkew = d?.map((s) => s.value) || [0];\n        return `skewX(${newSkew[0]})`;\n      }\n      if (t === 'skewY') {\n        const newSkew = d?.map((s) => s.value) || [0];\n        return `skewY(${newSkew[0]})`;\n      }\n      if (t === 'matrix') {\n        const [a, b, c, dd, tx, ty] = d.map((s) => s.value);\n        return `matrix(${a} ${b} ${c} ${dd} ${tx} ${ty})`;\n      }\n\n      return null;\n    })\n    .filter((item) => item !== null)\n    .join(' ');\n}\n\nfunction create$Pattern(\n  document: Document,\n  $def: SVGDefsElement,\n  object: DisplayObject,\n  pattern: Pattern,\n  patternId: string,\n  width: number,\n  height: number,\n) {\n  const { repetition, transform } = pattern;\n\n  // @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Element/pattern\n  const $pattern = createSVGElement('pattern', document) as SVGPatternElement;\n  if (transform) {\n    $pattern.setAttribute('patternTransform', formatTransform(transform));\n  }\n  $pattern.setAttribute('patternUnits', 'userSpaceOnUse');\n\n  $pattern.id = patternId;\n  $def.appendChild($pattern);\n\n  const { halfExtents, min } = object.getGeometryBounds();\n  $pattern.setAttribute('x', `${min[0]}`);\n  $pattern.setAttribute('y', `${min[1]}`);\n\n  // There is no equivalent to CSS no-repeat for SVG patterns\n  // @see https://stackoverflow.com/a/33481956\n  let patternWidth = width;\n  let patternHeight = height;\n  if (repetition === 'repeat-x') {\n    patternHeight = halfExtents[1] * 2;\n  } else if (repetition === 'repeat-y') {\n    patternWidth = halfExtents[0] * 2;\n  } else if (repetition === 'no-repeat') {\n    patternWidth = halfExtents[0] * 2;\n    patternHeight = halfExtents[1] * 2;\n  }\n  $pattern.setAttribute('width', `${patternWidth}`);\n  $pattern.setAttribute('height', `${patternHeight}`);\n\n  return $pattern;\n}\n\nfunction createOrUpdatePattern(\n  document: Document,\n  $def: SVGDefsElement,\n  object: DisplayObject,\n  pattern: Pattern,\n  createImage: () => HTMLImageElement,\n  plugin: SVGRendererPlugin,\n) {\n  const patternId = generateCacheKey(pattern);\n  const $existed = $def.querySelector(`#${patternId}`);\n  if (!$existed) {\n    const { image } = pattern;\n\n    let imageURL = '';\n    if (isString(image)) {\n      imageURL = image;\n    } else if (isBrowser) {\n      if (image instanceof HTMLImageElement) {\n        imageURL = image.src;\n      } else if (image instanceof HTMLCanvasElement) {\n        imageURL = image.toDataURL();\n      } else if (image instanceof HTMLVideoElement) {\n        // won't support\n      }\n    }\n\n    if (imageURL) {\n      const $image = createSVGElement('image', document);\n      // use href instead of xlink:href\n      // @see https://stackoverflow.com/a/13379007\n      $image.setAttribute('href', imageURL);\n\n      const img = createImage();\n\n      if (!imageURL.match(/^data:/i)) {\n        img.crossOrigin = 'Anonymous';\n        $image.setAttribute('crossorigin', 'anonymous');\n      }\n      img.src = imageURL;\n      const onload = function () {\n        const $pattern = create$Pattern(\n          document,\n          $def,\n          object,\n          pattern,\n          patternId,\n          img.width,\n          img.height,\n        );\n\n        $def.appendChild($pattern);\n        $pattern.appendChild($image);\n\n        $image.setAttribute('x', '0');\n        $image.setAttribute('y', '0');\n        $image.setAttribute('width', `${img.width}`);\n        $image.setAttribute('height', `${img.height}`);\n      };\n      if (img.complete) {\n        onload();\n      } else {\n        img.onload = onload;\n        // Fix onload() bug in IE9\n        // img.src = img.src;\n      }\n    }\n\n    if ((image as Rect).nodeName === 'rect') {\n      const { width, height } = (image as Rect).parsedStyle;\n\n      const $pattern = create$Pattern(\n        document,\n        $def,\n        image as Rect,\n        pattern,\n        patternId,\n        width,\n        height,\n      );\n\n      // traverse subtree of pattern\n      (image as Rect).forEach((object: DisplayObject) => {\n        plugin.createSVGDom(document, object, null);\n\n        // @ts-ignore\n        const svgElement = object.elementSVG;\n\n        // apply local RTS transformation to <group> wrapper\n        const localTransform = object.getLocalTransform();\n        plugin.applyTransform(svgElement.$groupEl, localTransform);\n      });\n\n      // @ts-ignore\n      const svgElement = image.elementSVG;\n      $pattern.appendChild(svgElement.$groupEl);\n    }\n  }\n  return patternId;\n}\n\nfunction createOrUpdateGradient(\n  document: Document,\n  object: DisplayObject,\n  $def: SVGDefsElement,\n  $el: SVGElement,\n  parsedColor: CSSGradientValue,\n) {\n  const bounds = object.getGeometryBounds();\n  const width = (bounds && bounds.halfExtents[0] * 2) || 0;\n  const height = (bounds && bounds.halfExtents[1] * 2) || 0;\n  const min = (bounds && bounds.min) || [0, 0];\n\n  const gradientId = generateCacheKey(parsedColor, {\n    x: min[0],\n    y: min[1],\n    width,\n    height,\n  });\n  let $existed = $def.querySelector(`#${gradientId}`);\n\n  if (!$existed) {\n    // <linearGradient> <radialGradient>\n    // @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Element/linearGradient\n    // @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Element/radialGradient\n    $existed = createSVGElement(\n      parsedColor.type === GradientType.LinearGradient\n        ? 'linearGradient'\n        : 'radialGradient',\n      document,\n    );\n    // @see https://github.com/antvis/g/issues/1025\n    $existed.setAttribute('gradientUnits', 'userSpaceOnUse');\n    // add stops\n    let innerHTML = '';\n    (parsedColor.value as LinearGradient).steps\n      // sort by offset @see https://github.com/antvis/G/issues/1171\n      .sort((a, b) => a.offset.value - b.offset.value)\n      .forEach(({ offset, color }) => {\n        // TODO: support absolute unit like `px`\n        innerHTML += `<stop offset=\"${\n          offset.value / 100\n        }\" stop-color=\"${color}\"></stop>`;\n      });\n    $existed.innerHTML = innerHTML;\n    $existed.id = gradientId;\n    $def.appendChild($existed);\n  }\n\n  if (parsedColor.type === GradientType.LinearGradient) {\n    const { angle } = parsedColor.value as LinearGradient;\n    const { x1, y1, x2, y2 } = computeLinearGradient(\n      [min[0], min[1]],\n      width,\n      height,\n      angle,\n    );\n\n    $existed.setAttribute('x1', `${x1}`);\n    $existed.setAttribute('y1', `${y1}`);\n    $existed.setAttribute('x2', `${x2}`);\n    $existed.setAttribute('y2', `${y2}`);\n\n    // $existed.setAttribute('gradientTransform', `rotate(${angle})`);\n  } else {\n    const { cx, cy, size } = parsedColor.value as RadialGradient;\n    const { x, y, r } = computeRadialGradient(\n      [min[0], min[1]],\n      width,\n      height,\n      cx,\n      cy,\n      size,\n    );\n\n    $existed.setAttribute('cx', `${x}`);\n    $existed.setAttribute('cy', `${y}`);\n    $existed.setAttribute('r', `${r}`);\n  }\n\n  return gradientId;\n}\n\nfunction createOrUpdateMultiGradient(\n  document: Document,\n  object: DisplayObject,\n  $def: SVGDefsElement,\n  $el: SVGElement,\n  gradients: CSSGradientValue[],\n) {\n  const filterId = `${FILTER_PREFIX + object.entity}-gradient`;\n  let $existed = $def.querySelector(`#${filterId}`);\n  if (!$existed) {\n    $existed = createSVGElement('filter', document) as SVGFilterElement;\n    $existed.setAttribute('filterUnits', 'userSpaceOnUse');\n    // @see https://github.com/antvis/g/issues/1025\n    $existed.setAttribute('x', '0%');\n    $existed.setAttribute('y', '0%');\n    $existed.setAttribute('width', '100%');\n    $existed.setAttribute('height', '100%');\n\n    $existed.id = filterId;\n\n    $def.appendChild($existed);\n  }\n\n  /**\n   * <rect id=\"wave-rect\" x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"url(#wave)\"></rect>\n   * <filter id=\"blend-it\" x=\"0%\" y=\"0%\" width=\"100%\" height=\"100%\">\n        <feImage xlink:href=\"#wave-rect\" result=\"myWave\" x=\"100\" y=\"100\"/>\n        <feImage xlink:href=\"#ry-rect\" result=\"myRY\"  x=\"100\" y=\"100\"/>\n        <feBlend in=\"myWave\" in2=\"myRY\" mode=\"multiply\" result=\"blendedGrad\"/>\n        <feComposite in=\"blendedGrad\" in2=\"SourceGraphic\" operator=\"in\"/>\n    </filter>\n   */\n\n  let blended = 0;\n  gradients.forEach((gradient, i) => {\n    const gradientId = createOrUpdateGradient(\n      document,\n      object,\n      $def,\n      $el,\n      gradient,\n    );\n\n    const rectId = `${gradientId}_rect`;\n    const $rect = createSVGElement('rect', document) as SVGRectElement;\n    $rect.setAttribute('x', '0');\n    $rect.setAttribute('y', '0');\n    $rect.setAttribute('width', '100%');\n    $rect.setAttribute('height', '100%');\n    $rect.setAttribute('fill', `url(#${gradientId})`);\n    $rect.id = rectId;\n    $def.appendChild($rect);\n\n    const $feImage = createSVGElement('feImage', document) as SVGFEImageElement;\n    $feImage.setAttribute('href', `#${rectId}`);\n    $feImage.setAttribute('result', `${filterId}-${i}`);\n    $existed.appendChild($feImage);\n\n    if (i > 0) {\n      const $feBlend = createSVGElement(\n        'feBlend',\n        document,\n      ) as SVGFEBlendElement;\n      $feBlend.setAttribute(\n        'in',\n        i === 1 ? `${filterId}-${i - 1}` : `${filterId}-blended-${blended - 1}`,\n      );\n      $feBlend.setAttribute('in2', `${filterId}-${i}`);\n      $feBlend.setAttribute('result', `${filterId}-blended-${blended++}`);\n      // @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/blend-mode\n      $feBlend.setAttribute('mode', 'multiply');\n      $existed.appendChild($feBlend);\n    }\n  });\n\n  const $feComposite = createSVGElement(\n    'feComposite',\n    document,\n  ) as SVGFECompositeElement;\n  $feComposite.setAttribute('in', `${filterId}-blended-${blended}`);\n  $feComposite.setAttribute('in2', 'SourceGraphic');\n  $feComposite.setAttribute('operator', 'in');\n  $existed.appendChild($feComposite);\n\n  return filterId;\n}\n","import {\n  CanvasContext,\n  CSSGradientValue,\n  CSSRGB,\n  DisplayObject,\n  ParsedBaseStyleProps,\n  Pattern,\n  ContextService,\n  isPattern,\n} from '@antv/g-lite';\nimport { SVGRendererPlugin } from '../../SVGRendererPlugin';\nimport { createSVGElement } from '../../utils/dom';\nimport { createOrUpdateFilter } from './Filter';\nimport { createOrUpdateGradientAndPattern } from './Pattern';\nimport { createOrUpdateShadow } from './Shadow';\n\nconst urlRegexp = /url\\(\"?#(.*)\\)/;\n\nexport class DefElementManager {\n  constructor(private context: CanvasContext) {}\n\n  /**\n   * container for <gradient> <clipPath>...\n   */\n  private $def: SVGDefsElement;\n\n  private gradientCache: Record<string, Set<number>> = {};\n\n  getDefElement() {\n    return this.$def;\n  }\n\n  init() {\n    const { document } = this.context.config;\n    const $svg = (\n      this.context.contextService as ContextService<SVGElement>\n    ).getContext();\n    this.$def = createSVGElement('defs', document) as SVGDefsElement;\n    $svg.appendChild(this.$def);\n  }\n\n  clear(entity: number) {\n    Object.keys(this.gradientCache).forEach((id) => {\n      this.clearUnusedDefElement(this.gradientCache, id, entity);\n    });\n  }\n\n  private clearUnusedDefElement(\n    cache: Record<string, Set<number>>,\n    id: string,\n    entity: number,\n  ) {\n    if (cache[id] && cache[id].size === 1 && cache[id].has(entity)) {\n      const targetElement = this.$def.querySelector(`#${id}`);\n      if (targetElement) {\n        this.$def.removeChild(targetElement);\n      }\n    }\n  }\n\n  createOrUpdateGradientAndPattern(\n    object: DisplayObject,\n    $el: SVGElement,\n    parsedColor: CSSGradientValue[] | CSSRGB | Pattern,\n    name: string,\n    plugin: SVGRendererPlugin,\n  ) {\n    const { document: doc, createImage } = this.context.config;\n\n    if ($el) {\n      let attributeValue = '';\n      if (isPattern(parsedColor)) {\n        // `fill: url(#${patternId})`\n        attributeValue = $el.style[name];\n      } else {\n        // `url(#${gradientId})`\n        attributeValue = $el.getAttribute(name) || '';\n      }\n\n      const matches = attributeValue.match(urlRegexp);\n      if (matches && matches.length > 1) {\n        this.clearUnusedDefElement(\n          this.gradientCache,\n          matches[1].replace('\"', ''),\n          object.entity,\n        );\n      }\n\n      const newDefElementId = createOrUpdateGradientAndPattern(\n        doc || document,\n        this.$def,\n        object,\n        $el,\n        parsedColor,\n        name,\n        createImage,\n        plugin,\n      );\n      if (newDefElementId) {\n        if (!this.gradientCache[newDefElementId]) {\n          this.gradientCache[newDefElementId] = new Set();\n        }\n        this.gradientCache[newDefElementId].add(object.entity);\n      }\n    }\n  }\n\n  createOrUpdateShadow(object: DisplayObject, $el: SVGElement, name: string) {\n    const { document: doc } = this.context.config;\n    createOrUpdateShadow(doc || document, this.$def, object, $el, name);\n  }\n\n  createOrUpdateFilter(\n    object: DisplayObject,\n    $el: SVGElement,\n    filters: ParsedBaseStyleProps['filter'],\n  ) {\n    const { document: doc } = this.context.config;\n    createOrUpdateFilter(doc || document, this.$def, object, $el, filters);\n  }\n}\n","import type { DisplayObject } from '@antv/g-lite';\nimport { isNil } from '@antv/util';\nimport { createSVGElement } from '../../utils/dom';\n\nconst FILTER_DROPSHADOW_PREFIX = 'g-filter-dropshadow-';\n\n/**\n * use SVG filters\n * @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Element/filter\n */\nexport function createOrUpdateShadow(\n  document: Document,\n  $def: SVGDefsElement,\n  object: DisplayObject,\n  $el: SVGElement,\n  name: string,\n) {\n  const {\n    shadowType = 'outer',\n    shadowBlur,\n    shadowColor,\n    shadowOffsetX,\n    shadowOffsetY,\n  } = object.parsedStyle;\n\n  const hasShadow = !isNil(shadowColor) && shadowBlur > 0;\n  const shadowId = FILTER_DROPSHADOW_PREFIX + object.entity;\n  let $existedFilter = $def.querySelector(`#${shadowId}`);\n  if ($existedFilter) {\n    const existedShadowType = $existedFilter.getAttribute('data-type');\n    if (existedShadowType !== shadowType || !hasShadow) {\n      // remove existed shadow\n      $existedFilter.remove();\n      $existedFilter = null;\n    }\n  }\n\n  // <Group> also has shadowType as its default value\n  // only apply shadow when blur > 0\n  if (hasShadow) {\n    // use filter <feDropShadow>\n    // @see https://developer.mozilla.org/en-US/docs/Web/SVG/Element/feDropShadow\n    $el?.setAttribute('filter', `url(#${shadowId})`);\n  } else {\n    $el?.removeAttribute('filter');\n    return;\n  }\n\n  if (!$existedFilter) {\n    $existedFilter = createSVGElement('filter', document) as SVGFilterElement;\n    $existedFilter.setAttribute('data-type', shadowType);\n\n    if (shadowType === 'outer') {\n      const $feDropShadow = createSVGElement('feDropShadow', document);\n      $feDropShadow.setAttribute('dx', `${(shadowOffsetX || 0) / 2}`);\n      $feDropShadow.setAttribute('dy', `${(shadowOffsetY || 0) / 2}`);\n      $feDropShadow.setAttribute('stdDeviation', `${(shadowBlur || 0) / 4}`);\n      $feDropShadow.setAttribute('flood-color', shadowColor.toString());\n      $existedFilter.appendChild($feDropShadow);\n    } else if (shadowType === 'inner') {\n      const $feComponentTransfer = createSVGElement(\n        'feComponentTransfer',\n        document,\n      );\n      $feComponentTransfer.setAttribute('in', 'SourceAlpha');\n      const $feFuncA = createSVGElement('feFuncA', document);\n      $feFuncA.setAttribute('type', 'table');\n      $feFuncA.setAttribute('tableValues', '1 0');\n      $feComponentTransfer.appendChild($feFuncA);\n      $existedFilter.appendChild($feComponentTransfer);\n\n      const $feGaussianBlur = createSVGElement('feGaussianBlur', document);\n      $feGaussianBlur.setAttribute('stdDeviation', `${(shadowBlur || 0) / 4}`);\n      $existedFilter.appendChild($feGaussianBlur);\n\n      const $feOffset = createSVGElement('feOffset', document);\n      $feOffset.setAttribute('dx', `${(shadowOffsetX || 0) / 2}`);\n      $feOffset.setAttribute('dy', `${(shadowOffsetY || 0) / 2}`);\n      $feOffset.setAttribute('result', 'offsetblur');\n      $existedFilter.appendChild($feOffset);\n\n      const $feFlood = createSVGElement('feFlood', document);\n      $feFlood.setAttribute('flood-color', shadowColor.toString());\n      $feFlood.setAttribute('result', 'color');\n      $existedFilter.appendChild($feFlood);\n\n      const $feComposite = createSVGElement('feComposite', document);\n      $feComposite.setAttribute('in2', 'offsetblur');\n      $feComposite.setAttribute('operator', 'in');\n      $existedFilter.appendChild($feComposite);\n\n      const $feComposite2 = createSVGElement('feComposite', document);\n      $feComposite2.setAttribute('in2', 'SourceAlpha');\n      $feComposite2.setAttribute('operator', 'in');\n      $existedFilter.appendChild($feComposite2);\n\n      const $feMerge = createSVGElement('feMerge', document);\n      $existedFilter.appendChild($feMerge);\n      const $feMergeNode = createSVGElement('feMergeNode', document);\n      $feMergeNode.setAttribute('in', 'SourceGraphic');\n      const $feMergeNode2 = createSVGElement('feMergeNode', document);\n      $feMerge.appendChild($feMergeNode);\n      $feMerge.appendChild($feMergeNode2);\n    }\n\n    $existedFilter.id = shadowId;\n    // @see https://github.com/antvis/g/issues/1025\n    $existedFilter.setAttribute('filterUnits', 'userSpaceOnUse');\n    $def.appendChild($existedFilter);\n    return;\n  }\n\n  if (shadowType === 'inner') {\n    const $feGaussianBlur = $existedFilter\n      .children[1] as SVGFEGaussianBlurElement;\n    const $feOffset = $existedFilter.children[2] as SVGFEOffsetElement;\n    const $feFlood = $existedFilter.children[3] as SVGFEFloodElement;\n    if (name === 'shadowColor') {\n      $feFlood.setAttribute('flood-color', shadowColor.toString());\n    } else if (name === 'shadowBlur') {\n      // half the blur radius\n      // @see https://drafts.csswg.org/css-backgrounds/#shadow-blur\n      // @see https://css-tricks.com/breaking-css-box-shadow-vs-drop-shadow/\n      $feGaussianBlur.setAttribute('stdDeviation', `${(shadowBlur || 0) / 4}`);\n    } else if (name === 'shadowOffsetX') {\n      $feOffset.setAttribute('dx', `${(shadowOffsetX || 0) / 2}`);\n    } else if (name === 'shadowOffsetY') {\n      $feOffset.setAttribute('dy', `${(shadowOffsetY || 0) / 2}`);\n    }\n  } else if (shadowType === 'outer') {\n    const $feDropShadow = $existedFilter.children[0] as SVGPatternElement;\n    if (name === 'shadowColor') {\n      $feDropShadow.setAttribute('flood-color', shadowColor.toString());\n    } else if (name === 'shadowBlur') {\n      // half the blur radius\n      // @see https://drafts.csswg.org/css-backgrounds/#shadow-blur\n      // @see https://css-tricks.com/breaking-css-box-shadow-vs-drop-shadow/\n      $feDropShadow.setAttribute('stdDeviation', `${(shadowBlur || 0) / 4}`);\n    } else if (name === 'shadowOffsetX') {\n      $feDropShadow.setAttribute('dx', `${(shadowOffsetX || 0) / 2}`);\n    } else if (name === 'shadowOffsetY') {\n      $feDropShadow.setAttribute('dy', `${(shadowOffsetY || 0) / 2}`);\n    }\n  }\n}\n","export function numberToLongString(x: number) {\n  return x.toFixed(6).replace('.000000', '');\n}\n\nexport function convertHTML(str: string) {\n  const regex = /[&|<|>|\"|']/g;\n  return str.replace(regex, function (match) {\n    if (match === '&') {\n      return '&amp;';\n    }\n    if (match === '<') {\n      return '&lt;';\n    }\n    if (match === '>') {\n      return '&gt;';\n    }\n    if (match === '\"') {\n      return '&quot;';\n    }\n    return '&apos;';\n  });\n}\n","import {\n  DisplayObject,\n  FederatedEvent,\n  LinearGradient,\n  MutationEvent,\n  RadialGradient,\n  RenderingPlugin,\n  RenderingPluginContext,\n  ContextService,\n  ElementEvent,\n  propertyMetadataCache,\n  RenderReason,\n  Shape,\n  isCSSRGB,\n} from '@antv/g-lite';\nimport { isNil } from '@antv/util';\nimport { mat4 } from 'gl-matrix';\nimport { ElementSVG } from './components/ElementSVG';\nimport { resetPatternCounter, type DefElementManager } from './shapes/defs';\nimport type { SVGRendererPluginOptions } from './interfaces';\nimport { createSVGElement } from './utils/dom';\nimport { numberToLongString } from './utils/format';\n\nexport const SVG_ATTR_MAP: Record<string, string> = {\n  opacity: 'opacity',\n  fillStyle: 'fill',\n  fill: 'fill',\n  fillRule: 'fill-rule',\n  fillOpacity: 'fill-opacity',\n  strokeStyle: 'stroke',\n  strokeOpacity: 'stroke-opacity',\n  stroke: 'stroke',\n  clipPath: 'clip-path',\n  textPath: 'text-path',\n  r: 'r',\n  cx: 'cx',\n  cy: 'cy',\n  rx: 'rx',\n  ry: 'ry',\n  x: 'x',\n  y: 'y',\n  width: 'width',\n  height: 'height',\n  lineCap: 'stroke-linecap',\n  lineJoin: 'stroke-linejoin',\n  lineWidth: 'stroke-width',\n  lineDash: 'stroke-dasharray',\n  lineDashOffset: 'stroke-dashoffset',\n  miterLimit: 'stroke-miterlimit',\n  font: 'font',\n  fontSize: 'font-size',\n  fontStyle: 'font-style',\n  fontVariant: 'font-variant',\n  fontWeight: 'font-weight',\n  fontFamily: 'font-family',\n  letterSpacing: 'letter-spacing',\n  startArrow: 'marker-start',\n  endArrow: 'marker-end',\n  class: 'class',\n  id: 'id',\n  // style: 'style',\n  preserveAspectRatio: 'preserveAspectRatio',\n  visibility: 'visibility',\n  shadowColor: 'flood-color',\n  shadowBlur: 'stdDeviation',\n  shadowOffsetX: 'dx',\n  shadowOffsetY: 'dy',\n  filter: 'filter',\n  innerHTML: 'innerHTML',\n  textAlign: 'text-anchor',\n  pointerEvents: 'pointer-events',\n};\n\nconst FORMAT_VALUE_MAP = {\n  textAlign: {\n    inherit: 'inherit',\n    left: 'left',\n    start: 'left',\n    center: 'middle',\n    right: 'end',\n    end: 'end',\n  },\n};\n\nexport const DEFAULT_VALUE_MAP: Record<string, string> = {\n  textAlign: 'inherit',\n  // textBaseline: 'alphabetic',\n  // @see https://www.w3.org/TR/SVG/painting.html#LineCaps\n  lineCap: 'butt',\n  // @see https://www.w3.org/TR/SVG/painting.html#LineJoin\n  lineJoin: 'miter',\n  // @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Attribute/stroke-width\n  lineWidth: '1px',\n  opacity: '1',\n  fillOpacity: '1',\n  fillRule: 'nonzero',\n  strokeOpacity: '1',\n  strokeWidth: '0',\n  strokeMiterLimit: '4',\n  letterSpacing: '0',\n  fontSize: 'inherit',\n  fontFamily: 'inherit',\n  pointerEvents: 'auto',\n  transform: 'matrix(1,0,0,1,0,0)',\n};\n\nexport type GradientParams = LinearGradient | RadialGradient;\n\n/**\n * G_SVG_PREFIX + nodeName + entity\n *\n * eg. g_svg_circle_345\n */\nexport const G_SVG_PREFIX = 'g-svg';\nexport const CLIP_PATH_PREFIX = 'clip-path-';\nexport const TEXT_PATH_PREFIX = 'text-path-';\n\nexport class SVGRendererPlugin implements RenderingPlugin {\n  static tag = 'SVGRenderer';\n\n  constructor(\n    private pluginOptions: SVGRendererPluginOptions,\n    private defElementManager: DefElementManager,\n    private context: RenderingPluginContext,\n  ) {}\n\n  /**\n   * Will be used in g-plugin-svg-picker for finding relative SVG element of current DisplayObject.\n   */\n  private svgElementMap: WeakMap<SVGElement, DisplayObject> = new WeakMap();\n\n  /**\n   * <camera>\n   */\n  private $camera: SVGElement;\n\n  /**\n   * render at the end of frame\n   */\n  private renderQueue: DisplayObject[] = [];\n\n  /**\n   * dirty attributes at the end of frame\n   */\n  private dirtyAttributes: WeakMap<DisplayObject, string[]> = new WeakMap();\n\n  /**\n   * reorder after mounted\n   */\n  private pendingReorderQueue: Set<DisplayObject> = new Set();\n\n  /**\n   * <use> elements in <clipPath>, which should be sync with clipPath\n   *\n   * @example\n   * <clipPath transform=\"matrix(1,0,0,1,-100,-155)\" id=\"clip-path-0-2\">\n   *  <use href=\"#g_svg_circle_0\" transform=\"matrix(1.477115,0,0,1.477115,150,150)\">\n   *  </use>\n   * </clipPath>\n   */\n  private clipPathUseMap: WeakMap<DisplayObject, SVGUseElement[]> =\n    new WeakMap();\n\n  apply(context: RenderingPluginContext) {\n    const { renderingService, renderingContext } = context;\n    this.context = context;\n    // @ts-ignore\n    this.context.svgElementMap = this.svgElementMap;\n    const canvas = renderingContext.root.ownerDocument.defaultView;\n\n    const { document } = this.context.config;\n\n    const handleMounted = (e: FederatedEvent) => {\n      const object = e.target as DisplayObject;\n\n      // should remove clipPath already existed in <defs>\n      const $useRefs = this.clipPathUseMap.get(object);\n      if ($useRefs) {\n        const $def = this.defElementManager.getDefElement();\n        const existed = $def.querySelector(`#${this.getId(object)}`);\n        if (existed) {\n          existed.remove();\n        }\n      }\n\n      // create SVG DOM Node\n      this.createSVGDom(document, object, this.$camera);\n    };\n\n    const handleUnmounted = (e: FederatedEvent) => {\n      const object = e.target as DisplayObject;\n      this.defElementManager.clear(object.entity);\n      this.clipPathUseMap.delete(object);\n      this.removeSVGDom(object);\n    };\n\n    const reorderChildren = (object: DisplayObject) => {\n      const parent = object.parentNode;\n      // @ts-ignore\n      const $groupEl = object.parentNode?.elementSVG?.$groupEl;\n      const children = (parent?.children || []).slice();\n\n      if ($groupEl) {\n        this.reorderChildren(document, $groupEl, children as DisplayObject[]);\n      }\n    };\n\n    const handleReparent = (e: FederatedEvent) => {\n      const object = e.target as DisplayObject;\n      reorderChildren(object);\n    };\n\n    const handleAttributeChanged = (e: MutationEvent) => {\n      const object = e.target as DisplayObject;\n\n      // @see https://github.com/antvis/g/issues/994\n      // @ts-ignore\n      if (!object.elementSVG) {\n        return;\n      }\n\n      const { attrName } = e;\n\n      let attribtues = this.dirtyAttributes.get(object);\n      if (!attribtues) {\n        this.dirtyAttributes.set(object, []);\n        attribtues = this.dirtyAttributes.get(object);\n      }\n\n      attribtues.push(attrName);\n    };\n\n    const handleGeometryBoundsChanged = (e: MutationEvent) => {\n      const target = e.target as DisplayObject;\n\n      const nodes =\n        target.nodeName === Shape.FRAGMENT ? target.childNodes : [target];\n      nodes.forEach((object: DisplayObject) => {\n        // @ts-ignore\n        const $el = object.elementSVG?.$el;\n\n        const { fill, stroke, clipPath } = object.parsedStyle;\n\n        if (fill && !isCSSRGB(fill)) {\n          this.defElementManager.createOrUpdateGradientAndPattern(\n            object,\n            $el,\n            fill,\n            'fill',\n            this,\n          );\n        }\n        if (stroke && !isCSSRGB(stroke)) {\n          this.defElementManager.createOrUpdateGradientAndPattern(\n            object,\n            $el,\n            stroke,\n            'stroke',\n            this,\n          );\n        }\n        if (clipPath) {\n          const parentInvert = mat4.invert(\n            mat4.create(),\n            object.getWorldTransform(),\n          );\n\n          const clipPathId = `${CLIP_PATH_PREFIX + clipPath.entity}-${object.entity}`;\n          const $def = this.defElementManager.getDefElement();\n          const $existed = $def.querySelector<SVGElement>(`#${clipPathId}`);\n          if ($existed) {\n            this.applyTransform($existed, parentInvert);\n          }\n        }\n      });\n    };\n\n    renderingService.hooks.init.tap(SVGRendererPlugin.tag, () => {\n      const { background, document } = this.context.config;\n\n      // <defs>\n      this.defElementManager.init();\n\n      const $svg = (\n        this.context.contextService as ContextService<SVGElement>\n      ).getContext();\n      if (background) {\n        $svg.style.background = background;\n      }\n\n      // @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/color-interpolation-filters\n      $svg.setAttribute('color-interpolation-filters', 'sRGB');\n\n      this.$camera = createSVGElement('g', document);\n      this.$camera.id = `${G_SVG_PREFIX}-camera`;\n      this.applyTransform(this.$camera, this.context.camera.getOrthoMatrix());\n      $svg.appendChild(this.$camera);\n\n      canvas.addEventListener(ElementEvent.MOUNTED, handleMounted);\n      canvas.addEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n      canvas.addEventListener(ElementEvent.REPARENT, handleReparent);\n      canvas.addEventListener(\n        ElementEvent.ATTR_MODIFIED,\n        handleAttributeChanged,\n      );\n      canvas.addEventListener(\n        ElementEvent.BOUNDS_CHANGED,\n        handleGeometryBoundsChanged,\n      );\n    });\n\n    renderingService.hooks.destroy.tap(SVGRendererPlugin.tag, () => {\n      canvas.removeEventListener(ElementEvent.MOUNTED, handleMounted);\n      canvas.removeEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n      canvas.removeEventListener(ElementEvent.REPARENT, handleReparent);\n      canvas.removeEventListener(\n        ElementEvent.ATTR_MODIFIED,\n        handleAttributeChanged,\n      );\n      canvas.removeEventListener(\n        ElementEvent.BOUNDS_CHANGED,\n        handleGeometryBoundsChanged,\n      );\n      resetPatternCounter();\n    });\n\n    renderingService.hooks.render.tap(\n      SVGRendererPlugin.tag,\n      (object: DisplayObject) => {\n        this.renderQueue.push(object);\n      },\n    );\n\n    renderingService.hooks.beginFrame.tap(SVGRendererPlugin.tag, () => {\n      const { document: doc } = this.context.config;\n\n      if (this.pendingReorderQueue.size) {\n        this.pendingReorderQueue.forEach((object) => {\n          const children = (object?.children || []).slice() as DisplayObject[];\n          const $parentGroupEl =\n            // @ts-ignore\n            object?.elementSVG?.$groupEl;\n\n          if ($parentGroupEl) {\n            this.reorderChildren(\n              doc || document,\n              $parentGroupEl,\n              children || [],\n            );\n          }\n        });\n        this.pendingReorderQueue.clear();\n      }\n    });\n\n    renderingService.hooks.endFrame.tap(SVGRendererPlugin.tag, () => {\n      if (renderingContext.renderReasons.has(RenderReason.CAMERA_CHANGED)) {\n        this.applyTransform(this.$camera, this.context.camera.getOrthoMatrix());\n      }\n\n      this.renderQueue.forEach((object) => {\n        const $el = ((object as any).elementSVG as ElementSVG)?.$el;\n        const $groupEl = ((object as any).elementSVG as ElementSVG)?.$groupEl;\n\n        if ($el && $groupEl) {\n          // apply local RTS transformation to <group> wrapper\n          // account for anchor\n          const localTransform = object.getLocalTransform();\n          this.applyTransform($groupEl, localTransform);\n\n          // clipped shapes should also be informed\n\n          const $useRefs = this.clipPathUseMap.get(object);\n          if ($useRefs && $useRefs.length) {\n            $useRefs.forEach(($use) => {\n              // <clipPath transform=\"matrix()\"><circle /></clipPath>\n              this.applyTransform($use, object.getWorldTransform());\n              // const parentInvert = mat4.invert(\n              //   mat4.create(),\n              //   (object as DisplayObject).getWorldTransform(),\n              // );\n              // this.applyTransform($clipPath, parentInvert);\n            });\n          }\n\n          // finish rendering, clear dirty flag\n          object.renderable.dirty = false;\n        }\n\n        // update dirty attributes\n        const attributes = this.dirtyAttributes.get(object);\n        if (attributes) {\n          attributes.forEach((attrName) => {\n            if (attrName === 'zIndex') {\n              reorderChildren(object);\n            } else if (attrName === 'increasedLineWidthForHitTesting') {\n              this.createOrUpdateHitArea(object, $el, $groupEl);\n            }\n\n            this.updateAttribute(object, [attrName]);\n          });\n\n          this.dirtyAttributes.delete(object);\n        }\n      });\n      this.renderQueue = [];\n    });\n  }\n\n  private getId(object: DisplayObject) {\n    return object.id || `${G_SVG_PREFIX}-${object.entity}`;\n  }\n\n  private reorderChildren(\n    doc: Document,\n    $groupEl: SVGElement,\n    children: DisplayObject[],\n  ) {\n    // need to reorder parent's children\n    children.sort((a, b) => a.sortable.renderOrder - b.sortable.renderOrder);\n\n    if (children.length) {\n      // create empty fragment\n      const fragment = (doc || document).createDocumentFragment();\n      children.forEach((child: DisplayObject) => {\n        if (child.isConnected) {\n          const $el = ((child as any).elementSVG as ElementSVG).$groupEl;\n          if ($el) {\n            fragment.appendChild($el);\n          }\n        }\n      });\n\n      $groupEl.appendChild(fragment);\n    }\n  }\n\n  applyTransform($el: SVGElement, rts: mat4) {\n    const matrix = `matrix(${numberToLongString(rts[0])},${numberToLongString(\n      rts[1],\n    )},${numberToLongString(rts[4])},${numberToLongString(\n      rts[5],\n    )},${numberToLongString(rts[12])},${numberToLongString(rts[13])})`;\n\n    if (matrix !== $el.getAttribute('transform')) {\n      // use proper precision avoiding too long string in `transform`\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Transformations\n      $el.setAttribute('transform', matrix);\n    }\n    if (matrix === DEFAULT_VALUE_MAP.transform) {\n      $el.removeAttribute('transform');\n    }\n  }\n\n  private applyAttributes(object: DisplayObject) {\n    const elementSVG = (object as any).elementSVG as ElementSVG;\n    const $el = elementSVG?.$el;\n    const $groupEl = elementSVG?.$groupEl;\n    if ($el && $groupEl) {\n      const { nodeName, attributes } = object;\n\n      if (nodeName !== Shape.HTML) {\n        $el.setAttribute('fill', 'none');\n      }\n      if (nodeName === Shape.IMAGE) {\n        $el.setAttribute('preserveAspectRatio', 'none');\n      }\n\n      // apply attributes\n      this.updateAttribute(object, Object.keys(attributes));\n    }\n  }\n\n  private updateAttribute(object: DisplayObject, attributes: string[]) {\n    const { document } = this.context.config;\n\n    const { $el, $hitTestingEl } = (object as any).elementSVG as ElementSVG;\n    const { parsedStyle, nodeName } = object;\n    const shouldUpdateElementAttribute = attributes.some((name) =>\n      // @ts-ignore\n      this.context.SVGElementLifeCycleContribution.shouldUpdateElementAttribute(\n        object,\n        name,\n      ),\n    );\n\n    // need re-generate path\n    if (shouldUpdateElementAttribute && $el) {\n      [$el, $hitTestingEl].forEach(($el) => {\n        if ($el) {\n          // @ts-ignore\n          this.context.SVGElementLifeCycleContribution.updateElementAttribute(\n            object,\n            $el,\n            this.svgElementMap,\n          );\n        }\n      });\n    }\n\n    // update common attributes\n    attributes.forEach((name) => {\n      const usedName = SVG_ATTR_MAP[name];\n      const computedValue = parsedStyle[name];\n      const computedValueStr =\n        !isNil(computedValue) && computedValue.toString();\n      const formattedValueStr =\n        FORMAT_VALUE_MAP[name]?.[computedValueStr] || computedValueStr;\n      const usedValue = parsedStyle[name];\n      const inherited = usedName && !!propertyMetadataCache[name]?.inh;\n\n      // <foreignObject>\n      if (nodeName === Shape.HTML) {\n        if (name === 'fill') {\n          $el.style.background = usedValue.toString();\n        } else if (name === 'stroke') {\n          $el.style['border-color'] = usedValue.toString();\n          $el.style['border-style'] = 'solid';\n        } else if (name === 'lineWidth') {\n          $el.style['border-width'] = `${usedValue || 0}px`;\n        } else if (name === 'lineDash') {\n          $el.style['border-style'] = 'dashed';\n        } else if (name === 'innerHTML') {\n          this.createOrUpdateInnerHTML(document, $el, usedValue);\n        } else if (\n          name === 'width' ||\n          name === 'height' ||\n          name === 'class' ||\n          name === 'x' ||\n          name === 'y'\n        ) {\n          // width & height are both required for <foreignObject> and cannot be used as style.\n          $el.setAttribute(name, usedValue.toString());\n        } else if (!isNil(object.style[name]) && object.style[name] !== '') {\n          $el.style[name] = object.style[name];\n        }\n      } else {\n        if (\n          !usedName ||\n          ((nodeName === Shape.GROUP || object.isCustomElement) &&\n            (inherited || usedName === 'fill' || usedName === 'stroke'))\n        ) {\n          return;\n        }\n\n        if (name === 'fill') {\n          this.defElementManager.createOrUpdateGradientAndPattern(\n            object,\n            $el,\n            usedValue,\n            usedName,\n            this,\n          );\n        } else if (name === 'stroke') {\n          this.defElementManager.createOrUpdateGradientAndPattern(\n            object,\n            $el,\n            usedValue,\n            usedName,\n            this,\n          );\n        } else if (name === 'clipPath') {\n          this.createOrUpdateClipOrTextPath(document, usedValue, object);\n        } else if (name === 'textPath') {\n          this.createOrUpdateClipOrTextPath(document, usedValue, object, true);\n        } else if (\n          name === 'shadowType' ||\n          name === 'shadowColor' ||\n          name === 'shadowBlur' ||\n          name === 'shadowOffsetX' ||\n          name === 'shadowOffsetY'\n        ) {\n          this.defElementManager.createOrUpdateShadow(object, $el, name);\n        } else if (name === 'filter') {\n          this.defElementManager.createOrUpdateFilter(object, $el, usedValue);\n        } else if (!isNil(computedValue)) {\n          // use computed value so that we can use cascaded effect in SVG\n          // ignore 'unset' and default value\n          [$el, $hitTestingEl].forEach(($el: SVGElement) => {\n            if ($el && usedName) {\n              if (\n                computedValueStr !== 'unset' &&\n                computedValueStr !== DEFAULT_VALUE_MAP[name]\n              ) {\n                $el.setAttribute(usedName, formattedValueStr);\n              } else {\n                $el.removeAttribute(usedName);\n              }\n            }\n          });\n        }\n      }\n    });\n  }\n\n  createSVGDom(\n    document: Document,\n    object: DisplayObject,\n    root: SVGElement,\n    noWrapWithGroup = false,\n  ) {\n    // create svg element\n    // @ts-ignore\n    object.elementSVG = new ElementSVG();\n    // @ts-ignore\n    const svgElement = object.elementSVG;\n\n    // use <group> as default, eg. CustomElement\n    const $el =\n      // @ts-ignore\n      this.context.SVGElementLifeCycleContribution.createElement(\n        object,\n        this.svgElementMap,\n      );\n    if ($el) {\n      let $groupEl: SVGElement;\n\n      // save $el on parsedStyle, which will be returned in getDomElement()\n      if (object.nodeName === Shape.HTML) {\n        object.parsedStyle.$el = $el;\n      }\n\n      if (this.pluginOptions.outputSVGElementId) {\n        // use user-defined id first.\n        $el.id = this.getId(object);\n      }\n      if (this.pluginOptions.outputSVGElementName && object.name) {\n        $el.setAttribute('name', object.name);\n      }\n\n      if (\n        ($el.hasAttribute('data-wrapgroup') || $el.nodeName !== 'g') &&\n        !noWrapWithGroup\n      ) {\n        $groupEl = createSVGElement('g', document);\n        // if (this.pluginOptions.outputSVGElementId) {\n        //   $groupEl.id = $el.id + '-g';\n        // }\n        $groupEl.appendChild($el);\n      } else {\n        $groupEl = $el;\n      }\n\n      svgElement.$el = $el;\n      svgElement.$groupEl = $groupEl;\n\n      // apply attributes at first time\n      this.applyAttributes(object);\n\n      // create hitArea if necessary\n      this.createOrUpdateHitArea(object, $el, $groupEl);\n\n      const $parentGroupEl =\n        root ||\n        // @ts-ignore\n        (object.parentNode && object.parentNode.elementSVG?.$groupEl);\n\n      if ($parentGroupEl) {\n        $parentGroupEl.appendChild($groupEl);\n\n        // need reorder children later\n        this.pendingReorderQueue.add(object.parentNode as DisplayObject);\n      }\n    }\n  }\n\n  private removeSVGDom(object: DisplayObject) {\n    // @ts-ignore\n    const $groupEl = object.elementSVG?.$groupEl;\n    if ($groupEl && $groupEl.parentNode) {\n      $groupEl.parentNode.removeChild($groupEl);\n\n      // @ts-ignore\n      this.context.SVGElementLifeCycleContribution.destroyElement(\n        object,\n        $groupEl,\n      );\n      // object.entity.removeComponent(ElementSVG, true);\n    }\n  }\n\n  private createOrUpdateHitArea(\n    object: DisplayObject,\n    $el: SVGElement,\n    $groupEl: SVGElement,\n  ) {\n    const svgElement = (object as any).elementSVG as ElementSVG;\n    let { $hitTestingEl } = svgElement;\n    const increasedLineWidthForHitTesting = Number(\n      object.parsedStyle.increasedLineWidthForHitTesting,\n    );\n\n    // account for hitArea\n    if (increasedLineWidthForHitTesting) {\n      if (!$hitTestingEl) {\n        $hitTestingEl = $el.cloneNode() as SVGElement;\n        // clear attributes like `filter` `font-size`\n        ['filter'].forEach((attribute) => {\n          $hitTestingEl.removeAttribute(attribute);\n        });\n        // hitArea should be 'transparent' but not 'none'\n        const hasFill = $el.getAttribute('fill') !== 'none';\n        $hitTestingEl.setAttribute('fill', hasFill ? 'transparent' : 'none');\n        $hitTestingEl.setAttribute('stroke', 'transparent');\n        $groupEl.appendChild($hitTestingEl);\n        svgElement.$hitTestingEl = $hitTestingEl;\n\n        // g-plugin-svg-picker will use this map to find target object\n        this.svgElementMap.set($hitTestingEl, object);\n      }\n\n      // increase interactive line width\n      $hitTestingEl.setAttribute(\n        'stroke-width',\n        `${increasedLineWidthForHitTesting + object.parsedStyle.lineWidth}`,\n      );\n    } else if ($hitTestingEl) {\n      $groupEl.removeChild($hitTestingEl);\n      svgElement.$hitTestingEl = null;\n    }\n  }\n\n  private createOrUpdateInnerHTML(\n    doc: Document,\n    $el: SVGElement,\n    usedValue: any,\n  ) {\n    const $div = (doc || document).createElement('div');\n    if (typeof usedValue === 'string') {\n      $div.innerHTML = usedValue;\n    } else {\n      $div.appendChild(usedValue);\n    }\n    $el.innerHTML = '';\n    $el.appendChild($div);\n  }\n\n  private createOrUpdateClipOrTextPath(\n    document: Document,\n    clipPath: DisplayObject,\n    object: DisplayObject,\n    isTextPath = false,\n  ) {\n    const { $groupEl } = (object as any).elementSVG as ElementSVG;\n    const PREFIX = isTextPath ? TEXT_PATH_PREFIX : CLIP_PATH_PREFIX;\n    const attributeNameCamel = isTextPath ? 'g' : 'clipPath';\n    const attributeNameHyphen = isTextPath ? 'text-path' : 'clip-path';\n\n    if (clipPath) {\n      const clipPathId = `${PREFIX + clipPath.entity}-${object.entity}`;\n      const $def = this.defElementManager.getDefElement();\n\n      const existed = $def.querySelector(`#${clipPathId}`);\n      if (!existed) {\n        let $clipPath: SVGElement;\n        if (isTextPath) {\n          // use <path> directly instead of wrapping with <g>\n          this.createSVGDom(document, clipPath, null, true);\n          // @ts-ignore\n          $clipPath = clipPath.elementSVG.$el;\n        } else {\n          // the clipPath is allowed to be detached from canvas\n          if (!clipPath.isConnected) {\n            const $existedClipPath = $def.querySelector(\n              `#${this.getId(clipPath)}`,\n            );\n            if (!$existedClipPath) {\n              this.createSVGDom(document, clipPath, $def, true);\n            }\n          }\n\n          // create <clipPath> dom node\n          $clipPath = createSVGElement(attributeNameCamel, document);\n          const $use = createSVGElement('use', document) as SVGUseElement;\n          // @ts-ignore\n          $use.setAttribute('href', `#${clipPath.elementSVG.$el.id}`);\n          $clipPath.appendChild($use);\n\n          let $useRefs = this.clipPathUseMap.get(clipPath);\n          if (!$useRefs) {\n            this.clipPathUseMap.set(clipPath, []);\n            $useRefs = this.clipPathUseMap.get(clipPath);\n          }\n          $useRefs.push($use);\n\n          // <clipPath transform=\"matrix()\"><circle /></clipPath>\n          this.applyTransform($use, clipPath.getWorldTransform());\n          const parentInvert = mat4.invert(\n            mat4.create(),\n            object.getWorldTransform(),\n          );\n          this.applyTransform($clipPath, parentInvert);\n        }\n\n        if (this.pluginOptions.outputSVGElementId) {\n          $clipPath.id = clipPathId;\n        }\n        // append it to <defs>\n        $def.appendChild($clipPath);\n      }\n\n      // apply attributes\n      this.applyAttributes(clipPath);\n\n      if (!isTextPath) {\n        // apply clipPath to $group\n        // @see https://github.com/antvis/g/issues/961\n        $groupEl.setAttribute(attributeNameHyphen, `url(#${clipPathId})`);\n      }\n    } else if (!isTextPath) {\n      // remove clip path\n      $groupEl.removeAttribute(attributeNameHyphen);\n    }\n  }\n}\n","import type { GlobalRuntime, ParsedTextStyleProps, Text } from '@antv/g-lite';\nimport { TEXT_PATH_PREFIX } from '../../SVGRendererPlugin';\nimport { createSVGElement } from '../../utils/dom';\nimport { convertHTML } from '../../utils/format';\n\n// @see https://github.com/plouc/nivo/issues/164\nconst BASELINE_MAP: Record<string, string> = {\n  top: 'hanging', // Use hanging here.\n  middle: 'central',\n  bottom: 'text-after-edge', // FIXME: It is not a standard property.\n  alphabetic: 'alphabetic',\n  ideographic: 'ideographic',\n  hanging: 'hanging',\n};\n\nexport function updateTextElementAttribute(\n  $el: SVGElement,\n  parsedStyle: ParsedTextStyleProps,\n  text: Text,\n  runtime: GlobalRuntime,\n) {\n  // Trigger text geometry calculation.\n  text.getBounds();\n  const {\n    lineWidth = 1,\n    x = 0,\n    y = 0,\n    dx = 0,\n    dy = 0,\n    textPath,\n    textPathSide = 'left',\n    textPathStartOffset = 0,\n    textDecorationLine = '',\n    textDecorationColor = '',\n    textDecorationStyle = '',\n    metrics,\n  } = parsedStyle;\n  let { textBaseline = 'alphabetic' } = parsedStyle;\n\n  if (textBaseline === 'alphabetic') {\n    textBaseline = 'bottom';\n  }\n\n  $el.setAttribute('dominant-baseline', BASELINE_MAP[textBaseline]);\n\n  $el.setAttribute('paint-order', 'stroke');\n\n  const { lines, lineHeight, height } = metrics;\n\n  const lineNum = lines.length;\n\n  let styleCSSText = `transform:translate(${dx}px, ${dy}px);`;\n  if (textDecorationLine && textDecorationLine !== 'none') {\n    // use CSS text-decoration since the implementation in SVG is not good enough\n    styleCSSText += `text-decoration:${textDecorationLine} ${textDecorationStyle} ${textDecorationColor};`;\n  }\n  if (styleCSSText) {\n    $el.setAttribute('style', styleCSSText);\n  }\n  if (x !== 0) {\n    $el.setAttribute('x', `${x}`);\n  }\n  if (y !== 0) {\n    $el.setAttribute('y', `${y}`);\n  }\n\n  if (lineNum === 1) {\n    const textContent = convertHTML(lines[0]);\n    $el.setAttribute('dx', `${lineWidth / 2}`);\n\n    // Since `text-after-edge` is not a standard property value, we use `dy` instead.\n    if (textBaseline === 'bottom' || textBaseline === 'top') {\n      $el.setAttribute('dominant-baseline', BASELINE_MAP.middle);\n      $el.setAttribute(\n        'dy',\n        textBaseline === 'bottom' ? `-${height / 2}px` : `${height / 2}px`,\n      );\n    } else {\n      $el.setAttribute('dy', '0px');\n    }\n\n    // <textPath> only support one line\n    // @see https://developer.mozilla.org/en-US/docs/Web/SVG/Element/textPath\n    if (textPath) {\n      // clear existed text content first\n      $el.innerHTML = '';\n\n      // append <textPath href=\"#MyPath\">text</textPath>\n      const $textPath = createSVGElement('textPath', $el.ownerDocument);\n      $textPath.setAttribute('href', `#${TEXT_PATH_PREFIX + textPath.entity}`);\n      if (textPathSide !== 'left') {\n        $textPath.setAttribute('side', textPathSide);\n      }\n      if (textPathStartOffset !== 0) {\n        $textPath.setAttribute('startOffset', `${textPathStartOffset}`);\n      }\n      $textPath.innerHTML = textContent;\n      $el.appendChild($textPath);\n    } else {\n      $el.innerHTML = textContent;\n    }\n  } else {\n    $el.innerHTML = lines\n      .map((line: string, i: number) => {\n        const dx = lineWidth / 2;\n        let dy = 0;\n        if (i === 0) {\n          // TODO: handle other textBaseline values\n          if (textBaseline === 'middle') {\n            dy = lineHeight / 2 - height / 2;\n          } else if (textBaseline === 'top' || textBaseline === 'hanging') {\n            dy = 0;\n          } else if (\n            textBaseline === 'bottom' ||\n            textBaseline === 'ideographic'\n          ) {\n            dy = -lineHeight * (lineNum - 1);\n          }\n        } else {\n          dy = lineHeight;\n        }\n        return `<tspan x=${x} dx=\"${dx}\" dy=\"${dy}\">${convertHTML(\n          line,\n        )}</tspan>`;\n      })\n      .join('');\n  }\n}\n","import type {\n  CanvasContext,\n  DisplayObject,\n  GlobalRuntime,\n  Text,\n} from '@antv/g-lite';\nimport { Shape } from '@antv/g-lite';\nimport {\n  updateImageElementAttribute,\n  updateLineElementAttribute,\n  updatePathElementAttribute,\n  updatePolylineElementAttribute,\n  updateRectElementAttribute,\n  updateTextElementAttribute,\n} from './shapes/paths';\nimport type { ElementLifeCycleContribution } from './interfaces';\nimport { createSVGElement } from './utils/dom';\n\nexport const SHAPE2TAGS: Record<Shape | string, string> = {\n  [Shape.RECT]: 'path',\n  [Shape.CIRCLE]: 'circle',\n  [Shape.ELLIPSE]: 'ellipse',\n  [Shape.IMAGE]: 'image',\n  [Shape.GROUP]: 'g',\n  [Shape.LINE]: 'line',\n  [Shape.POLYLINE]: 'polyline',\n  [Shape.POLYGON]: 'polygon',\n  [Shape.TEXT]: 'text',\n  [Shape.PATH]: 'path',\n  [Shape.HTML]: 'foreignObject',\n};\n\nexport const SHAPE_UPDATE_DEPS: Record<Shape | string, string[]> = {\n  [Shape.CIRCLE]: ['cx', 'cy', 'r'],\n  [Shape.ELLIPSE]: ['cx', 'cy', 'rx', 'ry'],\n  [Shape.RECT]: ['x', 'y', 'width', 'height', 'radius'],\n  [Shape.IMAGE]: ['x', 'y', 'src', 'width', 'height'],\n  [Shape.LINE]: [\n    'x1',\n    'y1',\n    'x2',\n    'y2',\n    'markerStart',\n    'markerEnd',\n    'markerStartOffset',\n    'markerEndOffset',\n  ],\n  [Shape.POLYLINE]: [\n    'points',\n    'markerStart',\n    'markerEnd',\n    'markerMid',\n    'markerStartOffset',\n    'markerEndOffset',\n  ],\n  [Shape.POLYGON]: [\n    'points',\n    'markerStart',\n    'markerEnd',\n    'markerMid',\n    'markerStartOffset',\n    'markerEndOffset',\n  ],\n  [Shape.PATH]: [\n    'd',\n    'markerStart',\n    'markerEnd',\n    'markerMid',\n    'markerStartOffset',\n    'markerEndOffset',\n  ],\n  [Shape.TEXT]: [\n    'text',\n    'font',\n    'fontSize',\n    'fontFamily',\n    'fontStyle',\n    'fontWeight',\n    'fontVariant',\n    'lineHeight',\n    'letterSpacing',\n    'wordWrap',\n    'wordWrapWidth',\n    'maxLines',\n    'leading',\n    'textBaseline',\n    'textAlign',\n    'textTransform',\n    'textOverflow',\n    'textPath',\n    'textPathSide',\n    'textPathStartOffset',\n    'textDecorationLine',\n    'textDecorationColor',\n    'textDecorationStyle',\n    // 'whiteSpace',\n    'dx',\n    'dy',\n  ],\n};\n\nexport class DefaultElementLifeCycleContribution\n  implements ElementLifeCycleContribution\n{\n  constructor(\n    private context: CanvasContext,\n    private runtime: GlobalRuntime,\n  ) {}\n\n  createElement(\n    object: DisplayObject,\n    svgElementMap: WeakMap<SVGElement, DisplayObject>,\n  ): SVGElement {\n    const { document: doc } = this.context.config;\n\n    const type = SHAPE2TAGS[object.nodeName] || 'g';\n    const $el = createSVGElement(type, doc || document);\n\n    svgElementMap.set($el, object);\n    return $el;\n  }\n\n  destroyElement(object: DisplayObject, $el: SVGElement) {}\n\n  shouldUpdateElementAttribute(object: DisplayObject, attributeName: string) {\n    const { nodeName } = object;\n    return (SHAPE_UPDATE_DEPS[nodeName] || []).indexOf(attributeName) > -1;\n  }\n\n  updateElementAttribute(object: DisplayObject) {\n    // @ts-ignore\n    const { $el } = object.elementSVG as ElementSVG;\n    const { nodeName, parsedStyle } = object;\n\n    switch (nodeName) {\n      case Shape.IMAGE: {\n        updateImageElementAttribute($el, parsedStyle);\n        break;\n      }\n      case Shape.RECT: {\n        updateRectElementAttribute($el, parsedStyle);\n        break;\n      }\n      case Shape.LINE: {\n        updateLineElementAttribute($el, parsedStyle);\n        break;\n      }\n      case Shape.POLYGON:\n      case Shape.POLYLINE: {\n        updatePolylineElementAttribute($el, parsedStyle);\n        break;\n      }\n      case Shape.PATH: {\n        updatePathElementAttribute($el, parsedStyle);\n        break;\n      }\n      case Shape.TEXT: {\n        updateTextElementAttribute(\n          $el,\n          parsedStyle,\n          object as Text,\n          this.runtime,\n        );\n        break;\n      }\n    }\n  }\n}\n","import { AbstractRendererPlugin, GlobalRuntime } from '@antv/g-lite';\nimport { isNil } from '@antv/util';\nimport { ElementSVG } from './components/ElementSVG';\nimport { DefaultElementLifeCycleContribution } from './DefaultElementLifeCycleContribution';\nimport { DefElementManager } from './shapes/defs';\nimport { SVGRendererPlugin } from './SVGRendererPlugin';\nimport type { SVGRendererPluginOptions } from './interfaces';\n\nexport * from './DefaultElementLifeCycleContribution';\nexport * from './shapes/paths';\nexport * from './SVGRendererPlugin';\nexport * from './interfaces';\nexport * from './utils/dom';\nexport { ElementSVG };\n\nexport class Plugin extends AbstractRendererPlugin {\n  name = 'svg-renderer';\n\n  constructor(private options: Partial<SVGRendererPluginOptions> = {}) {\n    super();\n  }\n\n  init(runtime: GlobalRuntime): void {\n    const { outputSVGElementId, outputSVGElementName } = this.options;\n    const defElementManager = new DefElementManager(this.context);\n\n    // default implementation\n    const defaultElementLifeCycleContribution =\n      new DefaultElementLifeCycleContribution(this.context, runtime);\n    // @ts-ignore\n    this.context.defaultElementLifeCycleContribution =\n      defaultElementLifeCycleContribution;\n\n    // @ts-ignore\n    this.context.SVGElementLifeCycleContribution =\n      defaultElementLifeCycleContribution;\n\n    const SVGRendererPluginOptions: SVGRendererPluginOptions = {\n      outputSVGElementId: !isNil(outputSVGElementId)\n        ? !!outputSVGElementId\n        : true,\n      outputSVGElementName: !isNil(outputSVGElementName)\n        ? !!outputSVGElementName\n        : true,\n    };\n\n    this.addRenderingPlugin(\n      // @ts-ignore\n      new SVGRendererPlugin(\n        SVGRendererPluginOptions,\n        defElementManager,\n        this.context,\n      ),\n    );\n  }\n  destroy(): void {\n    this.removeAllRenderingPlugins();\n\n    // @ts-ignore\n    delete this.context.defaultElementLifeCycleContribution;\n    // @ts-ignore\n    delete this.context.SVGElementLifeCycleContribution;\n  }\n}\n","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nfunction _callSuper(t, o, e) {\n  return o = getPrototypeOf(o), possibleConstructorReturn(t, isNativeReflectConstruct() ? Reflect.construct(o, e || [], getPrototypeOf(t).constructor) : o.apply(t, e));\n}\nexport { _callSuper as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inherits(t, e) {\n  if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\");\n  t.prototype = Object.create(e && e.prototype, {\n    constructor: {\n      value: t,\n      writable: !0,\n      configurable: !0\n    }\n  }), Object.defineProperty(t, \"prototype\", {\n    writable: !1\n  }), e && setPrototypeOf(t, e);\n}\nexport { _inherits as default };"],"names":["_classCallCheck","a","n","TypeError","_typeof","o","Symbol","iterator","constructor","prototype","toPropertyKey","t","i","r","e","toPrimitive","call","String","Number","_defineProperties","length","enumerable","configurable","writable","Object","defineProperty","key","_createClass","_getPrototypeOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_isNativeReflectConstruct","Boolean","valueOf","Reflect","construct","_possibleConstructorReturn","ReferenceError","assertThisInitialized","_setPrototypeOf","isNil","value","isString","clamp$1","min","max","ARRAY_TYPE","Float32Array","Array","create","out","glMatrix.ARRAY_TYPE","invert","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","Math","hypot","y","arguments","sqrt","ElementSVG","_defineProperty","updateImageElementAttribute","$el","parsedStyle","_parsedStyle$src","src","_parsedStyle$x","x","_parsedStyle$y","width","height","setAttribute","concat","Image","HTMLElement","nodeName","toUpperCase","toDataURL","ImageData","canvas","document","createElement","context","getContext","putImageData","updateLineElementAttribute","x1","y1","x2","y2","markerStart","markerEnd","markerStartOffset","markerEndOffset","startOffsetX","startOffsetY","endOffsetX","endOffsetY","rad","isDisplayObject","cos","atan2","sin","_arrayLikeToArray","_slicedToArray","isArray","arrayWithHoles","l","u","f","next","done","push","iterableToArrayLimit","arrayLikeToArray","toString","slice","name","from","test","unsupportedIterableToArray","nonIterableRest","updatePathElementAttribute","d","_getStartTangent2","parentNode","getStartTangent","p1","p2","_getEndTangent2","getEndTangent","translatePathToString","absolutePath","updatePolylineElementAttribute","points","map","point","offsetX","offsetY","join","updateRectElementAttribute","radius","isFinite","some","_radius$map2","clamp","abs","tlr","trr","brr","blr","signX","signY","sweepFlag","createSVGElement","type","doc","createElementNS","tag","FILTER_PREFIX","createOrUpdateFilter","$def","object","filters","filterName","entity","$existedFilters","querySelectorAll","forEach","$filter","removeChild","removeAttribute","filterIds","_ref","params","$feGaussianBlur","appendChild","createBlur","slope","convertToAbsoluteValue","createFeComponentTransfer","intercept","createBrightness","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","formatted","$feOffset","$feFlood","$feComposite","$feMerge","$feMergeNode1","$feMergeNode2","createDropShadow","createContrast","amount","createFeColorMatrix","createGrayscale","createSepia","$feColorMatrix","createSaturate","createHueRotate","tableValues","createInvert","id","setTimeout","filterId","param","unit","UnitType","kPercentage","_ref2","$feComponentTransfer","$feFunc","matrix","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","apply","_objectSpread2","getOwnPropertyDescriptors","defineProperties","cacheKey2IDMap","counter","createOrUpdateGradientAndPattern","parsedColor","createImage","plugin","isCSSRGB","isPattern","patternId","pattern","generateCacheKey","$existed","querySelector","image","imageURL","isBrowser","HTMLImageElement","HTMLCanvasElement","$image","img","match","crossOrigin","onload","$pattern","create$Pattern","complete","_parsedStyle","createSVGDom","svgElement","elementSVG","localTransform","getLocalTransform","applyTransform","$groupEl","createOrUpdatePattern","style","gradientId","createOrUpdateGradient","gradients","blended","gradient","rectId","$rect","$feImage","$feBlend","createOrUpdateMultiGradient","isNone","options","undefined","cacheKey","isCSSGradientValue","GradientType","LinearGradient","RadialGradient","_value$options","_objectSpread","steps","angle","cx","cy","size","color","offset","repetition","transform","parseTransform","parsed","newScale","s","newSkew","_d$map2","b","c","dd","tx","ty","item","formatTransform","_object$getGeometryBo","getGeometryBounds","halfExtents","patternWidth","patternHeight","bounds","innerHTML","sort","_computeLinearGradien","computeLinearGradient","_ref4","_computeRadialGradien","computeRadialGradient","urlRegexp","DefElementManager","this","gradientCache","config","$svg","contextService","_this","clearUnusedDefElement","cache","has","targetElement","_this$context$config","matches","getAttribute","replace","newDefElementId","Set","add","_object$parsedStyle","_object$parsedStyle$s","shadowType","hasShadow","shadowId","$existedFilter","remove","$feDropShadow","$feFuncA","$feComposite2","$feMergeNode","children","createOrUpdateShadow","numberToLongString","toFixed","convertHTML","str","SVG_ATTR_MAP","opacity","fillStyle","fill","fillRule","fillOpacity","strokeStyle","strokeOpacity","stroke","clipPath","textPath","rx","ry","lineCap","lineJoin","lineWidth","lineDash","lineDashOffset","miterLimit","font","fontSize","fontStyle","fontVariant","fontWeight","fontFamily","letterSpacing","startArrow","endArrow","class","preserveAspectRatio","visibility","textAlign","pointerEvents","FORMAT_VALUE_MAP","inherit","left","start","center","right","end","DEFAULT_VALUE_MAP","strokeWidth","strokeMiterLimit","G_SVG_PREFIX","CLIP_PATH_PREFIX","TEXT_PATH_PREFIX","SVGRendererPlugin","pluginOptions","defElementManager","svgElementMap","WeakMap","renderQueue","dirtyAttributes","pendingReorderQueue","clipPathUseMap","renderingService","renderingContext","root","ownerDocument","defaultView","handleMounted","target","get","existed","getDefElement","getId","$camera","handleUnmounted","clear","removeSVGDom","reorderChildren","_object$parentNode","parent","handleReparent","handleAttributeChanged","attrName","attribtues","set","handleGeometryBoundsChanged","Shape","FRAGMENT","childNodes","_object$elementSVG","parentInvert","mat4","getWorldTransform","clipPathId","hooks","init","tap","background","camera","getOrthoMatrix","addEventListener","ElementEvent","MOUNTED","UNMOUNTED","REPARENT","ATTR_MODIFIED","BOUNDS_CHANGED","destroy","removeEventListener","render","beginFrame","_object$elementSVG2","$parentGroupEl","endFrame","renderReasons","RenderReason","CAMERA_CHANGED","_elementSVG","_elementSVG2","$useRefs","$use","renderable","dirty","attributes","createOrUpdateHitArea","updateAttribute","sortable","renderOrder","fragment","createDocumentFragment","child","isConnected","rts","HTML","IMAGE","_this2","$hitTestingEl","SVGElementLifeCycleContribution","shouldUpdateElementAttribute","updateElementAttribute","_FORMAT_VALUE_MAP$nam","_propertyMetadataCach","usedName","computedValue","computedValueStr","formattedValueStr","usedValue","inherited","propertyMetadataCache","inh","createOrUpdateInnerHTML","GROUP","isCustomElement","createOrUpdateClipOrTextPath","noWrapWithGroup","_object$parentNode$el","outputSVGElementId","outputSVGElementName","hasAttribute","applyAttributes","_object$elementSVG3","destroyElement","increasedLineWidthForHitTesting","cloneNode","attribute","hasFill","$div","isTextPath","attributeNameCamel","attributeNameHyphen","$clipPath","BASELINE_MAP","top","middle","bottom","alphabetic","ideographic","hanging","updateTextElementAttribute","text","runtime","getBounds","_parsedStyle$lineWidt","_parsedStyle$dx","dx","_parsedStyle$dy","dy","_parsedStyle$textPath","textPathSide","_parsedStyle$textPath2","textPathStartOffset","_parsedStyle$textDeco","textDecorationLine","_parsedStyle$textDeco2","textDecorationColor","_parsedStyle$textDeco3","textDecorationStyle","metrics","_parsedStyle$textBase","textBaseline","lines","lineHeight","lineNum","styleCSSText","textContent","$textPath","line","SHAPE2TAGS","_SHAPE2TAGS","RECT","CIRCLE","ELLIPSE","LINE","POLYLINE","POLYGON","TEXT","PATH","SHAPE_UPDATE_DEPS","DefaultElementLifeCycleContribution","attributeName","indexOf","Plugin","_AbstractRendererPlug","possibleConstructorReturn","isNativeReflectConstruct","_inherits","_this$options","defaultElementLifeCycleContribution","SVGRendererPluginOptions","addRenderingPlugin","removeAllRenderingPlugins","AbstractRendererPlugin"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,16,19,20,21,22,23,24,30,39,40]}