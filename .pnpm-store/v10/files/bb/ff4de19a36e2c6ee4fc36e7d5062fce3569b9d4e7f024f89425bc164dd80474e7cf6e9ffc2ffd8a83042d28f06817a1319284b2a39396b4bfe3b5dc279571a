{"version":3,"file":"index.umd.min.js","sources":["../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/typeof.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/createClass.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../src/util.ts","../src/renderers/Circle.ts","../src/renderers/Ellipse.ts","../src/renderers/Line.ts","../src/renderers/Path.ts","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../src/renderers/Polygon.ts","../src/renderers/Polyline.ts","../src/renderers/Rect.ts","../../../node_modules/.pnpm/hachure-fill@0.5.2/node_modules/hachure-fill/bin/hachure.js","../../../node_modules/.pnpm/roughjs@4.6.6/node_modules/roughjs/bin/fillers/scan-line-hachure.js","../../../node_modules/.pnpm/roughjs@4.6.6/node_modules/roughjs/bin/fillers/hachure-filler.js","../../../node_modules/.pnpm/roughjs@4.6.6/node_modules/roughjs/bin/geometry.js","../../../node_modules/.pnpm/roughjs@4.6.6/node_modules/roughjs/bin/fillers/zigzag-filler.js","../../../node_modules/.pnpm/roughjs@4.6.6/node_modules/roughjs/bin/fillers/hatch-filler.js","../../../node_modules/.pnpm/roughjs@4.6.6/node_modules/roughjs/bin/fillers/dot-filler.js","../../../node_modules/.pnpm/roughjs@4.6.6/node_modules/roughjs/bin/fillers/dashed-filler.js","../../../node_modules/.pnpm/roughjs@4.6.6/node_modules/roughjs/bin/fillers/zigzag-line-filler.js","../../../node_modules/.pnpm/roughjs@4.6.6/node_modules/roughjs/bin/fillers/filler.js","../../../node_modules/.pnpm/roughjs@4.6.6/node_modules/roughjs/bin/math.js","../../../node_modules/.pnpm/path-data-parser@0.1.0/node_modules/path-data-parser/lib/parser.js","../../../node_modules/.pnpm/path-data-parser@0.1.0/node_modules/path-data-parser/lib/absolutize.js","../../../node_modules/.pnpm/path-data-parser@0.1.0/node_modules/path-data-parser/lib/normalize.js","../../../node_modules/.pnpm/roughjs@4.6.6/node_modules/roughjs/bin/renderer.js","../../../node_modules/.pnpm/points-on-curve@0.2.0/node_modules/points-on-curve/lib/curve-to-bezier.js","../../../node_modules/.pnpm/points-on-curve@0.2.0/node_modules/points-on-curve/lib/index.js","../../../node_modules/.pnpm/roughjs@4.6.6/node_modules/roughjs/bin/generator.js","../../../node_modules/.pnpm/points-on-path@0.2.1/node_modules/points-on-path/lib/index.js","../../../node_modules/.pnpm/roughjs@4.6.6/node_modules/roughjs/bin/canvas.js","../../../node_modules/.pnpm/roughjs@4.6.6/node_modules/roughjs/bin/core.js","../../../node_modules/.pnpm/roughjs@4.6.6/node_modules/roughjs/bin/svg.js","../../../node_modules/.pnpm/roughjs@4.6.6/node_modules/roughjs/bin/rough.js","../src/RoughRendererPlugin.ts","../src/index.ts","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/callSuper.js","../../../node_modules/.pnpm/@babel+runtime@7.28.2/node_modules/@babel/runtime/helpers/esm/inherits.js"],"sourcesContent":["function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nexport { _objectSpread2 as default };","function _classCallCheck(a, n) {\n  if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n}\nexport { _classCallCheck as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nexport { _createClass as default };","function _getPrototypeOf(t) {\n  return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {\n    return t.__proto__ || Object.getPrototypeOf(t);\n  }, _getPrototypeOf(t);\n}\nexport { _getPrototypeOf as default };","function _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {\n    return !!t;\n  })();\n}\nexport { _isNativeReflectConstruct as default };","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nfunction _possibleConstructorReturn(t, e) {\n  if (e && (\"object\" == _typeof(e) || \"function\" == typeof e)) return e;\n  if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\");\n  return assertThisInitialized(t);\n}\nexport { _possibleConstructorReturn as default };","function _assertThisInitialized(e) {\n  if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  return e;\n}\nexport { _assertThisInitialized as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import { isCSSRGB } from '@antv/g-lite';\nimport type {\n  CSSRGB,\n  CSSGradientValue,\n  DisplayObject,\n  ParsedBaseStyleProps,\n  Pattern,\n} from '@antv/g-lite';\nimport type { Options } from 'roughjs/bin/core';\nimport type { CanvasRenderer } from '@antv/g-canvas';\n\nfunction mergeOpacity(\n  color: CSSRGB | CSSGradientValue[] | Pattern,\n  opacity: number,\n) {\n  // since rough.js doesn't support fill/strokeOpacity\n  let colorString = color.toString();\n\n  if (isCSSRGB(color)) {\n    if (opacity !== 1) {\n      const { r, g, b, alpha } = color;\n      colorString = `rgba(${r},${g},${b},${Number(alpha) * opacity})`;\n    }\n  }\n\n  return colorString;\n}\n\n/**\n * When the lineWidth is 0, the rough.js will render too many strokes which has a bad perf.\n */\nconst MIN_STROKE_WIDTH = 0.1;\n\nexport function generateRoughOptions(object: DisplayObject) {\n  const {\n    fill,\n    stroke,\n    fillOpacity = 1,\n    strokeOpacity = 1,\n    lineWidth = 1,\n    bowing,\n    roughness,\n    seed,\n    fillStyle,\n    fillWeight,\n    hachureAngle,\n    hachureGap,\n    curveStepCount,\n    curveFitting,\n    lineDash,\n    lineDashOffset,\n    fillLineDash,\n    fillLineDashOffset,\n    disableMultiStroke,\n    disableMultiStrokeFill,\n    simplification,\n    dashOffset,\n    dashGap,\n    zigzagOffset,\n    preserveVertices,\n  } = object.parsedStyle as ParsedBaseStyleProps & Options;\n\n  // @see https://github.com/rough-stuff/rough/wiki#options\n  const options: Options = {\n    bowing,\n    roughness,\n    seed: seed || object.entity,\n    fill: fill ? mergeOpacity(fill, fillOpacity) : undefined,\n    stroke: stroke ? mergeOpacity(stroke, strokeOpacity) : 'none',\n    strokeWidth: lineWidth === 0 ? MIN_STROKE_WIDTH : lineWidth,\n    fillStyle,\n    fillWeight,\n    hachureAngle,\n    hachureGap,\n    curveStepCount,\n    curveFitting,\n    strokeLineDash: lineDash,\n    strokeLineDashOffset: lineDashOffset,\n    fillLineDash,\n    fillLineDashOffset,\n    disableMultiStroke,\n    disableMultiStrokeFill,\n    simplification,\n    dashOffset,\n    dashGap,\n    zigzagOffset,\n    preserveVertices,\n  };\n\n  // remove all undefined values\n  Object.keys(options).forEach((key) => {\n    if (options[key] === undefined) {\n      delete options[key];\n    }\n  });\n\n  return options;\n}\n\nexport interface RoughCanvasRendererPluginOptions {\n  roughRendering?: boolean | ((value: DisplayObject) => boolean);\n}\n\nexport type RoughCanvasRendererOptions =\n  Partial<RoughCanvasRendererPluginOptions> & {\n    defaultStyleRendererFactory: CanvasRenderer.DefaultRenderer;\n  };\n\nexport function isRoughRendering(\n  roughRendering: boolean | ((value: DisplayObject) => boolean) | undefined,\n  element: DisplayObject,\n) {\n  // default to true to avoid breaking change\n  if (roughRendering === undefined) {\n    return true;\n  }\n\n  if (typeof roughRendering === 'function') {\n    return roughRendering(element);\n  }\n  return roughRendering;\n}\n","import type { CanvasRenderer } from '@antv/g-canvas';\nimport type { DisplayObject, ParsedCircleStyleProps } from '@antv/g-lite';\nimport {\n  generateRoughOptions,\n  isRoughRendering,\n  RoughCanvasRendererOptions,\n} from '../util';\n\nexport class CircleRenderer implements CanvasRenderer.StyleRenderer {\n  constructor(private options: RoughCanvasRendererOptions) {}\n\n  render(\n    context: CanvasRenderingContext2D,\n    parsedStyle: ParsedCircleStyleProps,\n    object: DisplayObject<any, any>,\n  ) {\n    if (isRoughRendering(this.options.roughRendering, object)) {\n      const { cx = 0, cy = 0, r } = parsedStyle;\n      // rough.js use diameter instead of radius\n      // @see https://github.com/rough-stuff/rough/wiki#circle-x-y-diameter--options\n      // @ts-ignore\n      context.roughCanvas.circle(cx, cy, r * 2, generateRoughOptions(object));\n    } else {\n      this.options.defaultStyleRendererFactory.render(\n        context,\n        parsedStyle,\n        object,\n      );\n    }\n  }\n}\n","import type { CanvasRenderer } from '@antv/g-canvas';\nimport type { DisplayObject, ParsedEllipseStyleProps } from '@antv/g-lite';\nimport {\n  generateRoughOptions,\n  isRoughRendering,\n  RoughCanvasRendererOptions,\n} from '../util';\n\nexport class EllipseRenderer implements CanvasRenderer.StyleRenderer {\n  constructor(private options: RoughCanvasRendererOptions) {}\n\n  render(\n    context: CanvasRenderingContext2D,\n    parsedStyle: ParsedEllipseStyleProps,\n    object: DisplayObject<any, any>,\n  ) {\n    if (isRoughRendering(this.options.roughRendering, object)) {\n      const { cx = 0, cy = 0, rx, ry } = parsedStyle;\n      // @ts-ignore\n      context.roughCanvas.ellipse(\n        cx,\n        cy,\n        rx * 2,\n        ry * 2,\n        generateRoughOptions(object),\n      );\n    } else {\n      this.options.defaultStyleRendererFactory.render(\n        context,\n        parsedStyle,\n        object,\n      );\n    }\n  }\n}\n","import type { CanvasRenderer } from '@antv/g-canvas';\nimport type { DisplayObject, ParsedLineStyleProps } from '@antv/g-lite';\nimport {\n  generateRoughOptions,\n  isRoughRendering,\n  RoughCanvasRendererOptions,\n} from '../util';\n\nexport class LineRenderer implements CanvasRenderer.StyleRenderer {\n  constructor(private options: RoughCanvasRendererOptions) {}\n\n  render(\n    context: CanvasRenderingContext2D,\n    parsedStyle: ParsedLineStyleProps,\n    object: DisplayObject<any, any>,\n  ) {\n    if (isRoughRendering(this.options.roughRendering, object)) {\n      const { x1 = 0, y1 = 0, x2 = 0, y2 = 0 } = parsedStyle;\n      // @see https://github.com/rough-stuff/rough/wiki#line-x1-y1-x2-y2--options\n      // @ts-ignore\n      context.roughCanvas.line(x1, y1, x2, y2, generateRoughOptions(object));\n    } else {\n      this.options.defaultStyleRendererFactory.render(\n        context,\n        parsedStyle,\n        object,\n      );\n    }\n  }\n}\n","import type { CanvasRenderer } from '@antv/g-canvas';\nimport type { DisplayObject, ParsedPathStyleProps } from '@antv/g-lite';\nimport { translatePathToString } from '@antv/g-lite';\nimport {\n  generateRoughOptions,\n  isRoughRendering,\n  RoughCanvasRendererOptions,\n} from '../util';\n\nexport class PathRenderer implements CanvasRenderer.StyleRenderer {\n  constructor(private options: RoughCanvasRendererOptions) {}\n\n  render(\n    context: CanvasRenderingContext2D,\n    parsedStyle: ParsedPathStyleProps,\n    object: DisplayObject<any, any>,\n  ) {\n    if (isRoughRendering(this.options.roughRendering, object)) {\n      const { d } = parsedStyle;\n      // @ts-ignore\n      context.roughCanvas.path(\n        translatePathToString(d.absolutePath),\n        generateRoughOptions(object),\n      );\n    } else {\n      this.options.defaultStyleRendererFactory.render(\n        context,\n        parsedStyle,\n        object,\n      );\n    }\n  }\n}\n","function _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nexport { _arrayLikeToArray as default };","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nfunction _slicedToArray(r, e) {\n  return arrayWithHoles(r) || iterableToArrayLimit(r, e) || unsupportedIterableToArray(r, e) || nonIterableRest();\n}\nexport { _slicedToArray as default };","function _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\nexport { _arrayWithHoles as default };","function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nexport { _iterableToArrayLimit as default };","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? arrayLikeToArray(r, a) : void 0;\n  }\n}\nexport { _unsupportedIterableToArray as default };","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nexport { _nonIterableRest as default };","import type { CanvasRenderer } from '@antv/g-canvas';\nimport type { DisplayObject, ParsedPolygonStyleProps } from '@antv/g-lite';\nimport {\n  generateRoughOptions,\n  isRoughRendering,\n  RoughCanvasRendererOptions,\n} from '../util';\n\nexport class PolygonRenderer implements CanvasRenderer.StyleRenderer {\n  constructor(private options: RoughCanvasRendererOptions) {}\n\n  render(\n    context: CanvasRenderingContext2D,\n    parsedStyle: ParsedPolygonStyleProps,\n    object: DisplayObject<any, any>,\n  ) {\n    if (isRoughRendering(this.options.roughRendering, object)) {\n      const { points } = parsedStyle;\n      // @see https://github.com/rough-stuff/rough/wiki#polygon-vertices--options\n      // @ts-ignore\n      context.roughCanvas.polygon(\n        points.points.map(([x, y]) => [x, y]),\n        generateRoughOptions(object),\n      );\n    } else {\n      this.options.defaultStyleRendererFactory.render(\n        context,\n        parsedStyle,\n        object,\n      );\n    }\n  }\n}\n","import type { CanvasRenderer } from '@antv/g-canvas';\nimport type { DisplayObject, ParsedPolylineStyleProps } from '@antv/g-lite';\nimport {\n  generateRoughOptions,\n  isRoughRendering,\n  RoughCanvasRendererOptions,\n} from '../util';\n\nexport class PolylineRenderer implements CanvasRenderer.StyleRenderer {\n  constructor(private options: RoughCanvasRendererOptions) {}\n\n  render(\n    context: CanvasRenderingContext2D,\n    parsedStyle: ParsedPolylineStyleProps,\n    object: DisplayObject<any, any>,\n  ) {\n    if (isRoughRendering(this.options.roughRendering, object)) {\n      const { points } = parsedStyle;\n      // @see https://github.com/rough-stuff/rough/wiki#linearpath-points--options\n      // @ts-ignore\n      context.roughCanvas.linearPath(\n        points.points.map(([x, y]) => [x, y]),\n        generateRoughOptions(object),\n      );\n    } else {\n      this.options.defaultStyleRendererFactory.render(\n        context,\n        parsedStyle,\n        object,\n      );\n    }\n  }\n}\n","import type { CanvasRenderer } from '@antv/g-canvas';\nimport type { DisplayObject, ParsedRectStyleProps } from '@antv/g-lite';\nimport {\n  generateRoughOptions,\n  isRoughRendering,\n  RoughCanvasRendererOptions,\n} from '../util';\n\nexport class RectRenderer implements CanvasRenderer.StyleRenderer {\n  constructor(private options: RoughCanvasRendererOptions) {}\n\n  render(\n    context: CanvasRenderingContext2D,\n    parsedStyle: ParsedRectStyleProps,\n    object: DisplayObject<any, any>,\n  ) {\n    if (isRoughRendering(this.options.roughRendering, object)) {\n      const { x = 0, y = 0, width, height } = parsedStyle;\n      // @see https://github.com/rough-stuff/rough/wiki#rectangle-x-y-width-height--options\n      // @ts-ignore\n      context.roughCanvas.rectangle(\n        x,\n        y,\n        width,\n        height,\n        generateRoughOptions(object),\n      );\n    } else {\n      this.options.defaultStyleRendererFactory.render(\n        context,\n        parsedStyle,\n        object,\n      );\n    }\n  }\n}\n","function rotatePoints(points, center, degrees) {\n    if (points && points.length) {\n        const [cx, cy] = center;\n        const angle = (Math.PI / 180) * degrees;\n        const cos = Math.cos(angle);\n        const sin = Math.sin(angle);\n        for (const p of points) {\n            const [x, y] = p;\n            p[0] = ((x - cx) * cos) - ((y - cy) * sin) + cx;\n            p[1] = ((x - cx) * sin) + ((y - cy) * cos) + cy;\n        }\n    }\n}\nfunction rotateLines(lines, center, degrees) {\n    const points = [];\n    lines.forEach((line) => points.push(...line));\n    rotatePoints(points, center, degrees);\n}\nfunction areSamePoints(p1, p2) {\n    return p1[0] === p2[0] && p1[1] === p2[1];\n}\nexport function hachureLines(polygons, hachureGap, hachureAngle, hachureStepOffset = 1) {\n    const angle = hachureAngle;\n    const gap = Math.max(hachureGap, 0.1);\n    const polygonList = (polygons[0] && polygons[0][0] && (typeof polygons[0][0] === 'number')) ? [polygons] : polygons;\n    const rotationCenter = [0, 0];\n    if (angle) {\n        for (const polygon of polygonList) {\n            rotatePoints(polygon, rotationCenter, angle);\n        }\n    }\n    const lines = straightHachureLines(polygonList, gap, hachureStepOffset);\n    if (angle) {\n        for (const polygon of polygonList) {\n            rotatePoints(polygon, rotationCenter, -angle);\n        }\n        rotateLines(lines, rotationCenter, -angle);\n    }\n    return lines;\n}\nfunction straightHachureLines(polygons, gap, hachureStepOffset) {\n    const vertexArray = [];\n    for (const polygon of polygons) {\n        const vertices = [...polygon];\n        if (!areSamePoints(vertices[0], vertices[vertices.length - 1])) {\n            vertices.push([vertices[0][0], vertices[0][1]]);\n        }\n        if (vertices.length > 2) {\n            vertexArray.push(vertices);\n        }\n    }\n    const lines = [];\n    gap = Math.max(gap, 0.1);\n    // Create sorted edges table\n    const edges = [];\n    for (const vertices of vertexArray) {\n        for (let i = 0; i < vertices.length - 1; i++) {\n            const p1 = vertices[i];\n            const p2 = vertices[i + 1];\n            if (p1[1] !== p2[1]) {\n                const ymin = Math.min(p1[1], p2[1]);\n                edges.push({\n                    ymin,\n                    ymax: Math.max(p1[1], p2[1]),\n                    x: ymin === p1[1] ? p1[0] : p2[0],\n                    islope: (p2[0] - p1[0]) / (p2[1] - p1[1]),\n                });\n            }\n        }\n    }\n    edges.sort((e1, e2) => {\n        if (e1.ymin < e2.ymin) {\n            return -1;\n        }\n        if (e1.ymin > e2.ymin) {\n            return 1;\n        }\n        if (e1.x < e2.x) {\n            return -1;\n        }\n        if (e1.x > e2.x) {\n            return 1;\n        }\n        if (e1.ymax === e2.ymax) {\n            return 0;\n        }\n        return (e1.ymax - e2.ymax) / Math.abs((e1.ymax - e2.ymax));\n    });\n    if (!edges.length) {\n        return lines;\n    }\n    // Start scanning\n    let activeEdges = [];\n    let y = edges[0].ymin;\n    let iteration = 0;\n    while (activeEdges.length || edges.length) {\n        if (edges.length) {\n            let ix = -1;\n            for (let i = 0; i < edges.length; i++) {\n                if (edges[i].ymin > y) {\n                    break;\n                }\n                ix = i;\n            }\n            const removed = edges.splice(0, ix + 1);\n            removed.forEach((edge) => {\n                activeEdges.push({ s: y, edge });\n            });\n        }\n        activeEdges = activeEdges.filter((ae) => {\n            if (ae.edge.ymax <= y) {\n                return false;\n            }\n            return true;\n        });\n        activeEdges.sort((ae1, ae2) => {\n            if (ae1.edge.x === ae2.edge.x) {\n                return 0;\n            }\n            return (ae1.edge.x - ae2.edge.x) / Math.abs((ae1.edge.x - ae2.edge.x));\n        });\n        // fill between the edges\n        if ((hachureStepOffset !== 1) || (iteration % gap === 0)) {\n            if (activeEdges.length > 1) {\n                for (let i = 0; i < activeEdges.length; i = i + 2) {\n                    const nexti = i + 1;\n                    if (nexti >= activeEdges.length) {\n                        break;\n                    }\n                    const ce = activeEdges[i].edge;\n                    const ne = activeEdges[nexti].edge;\n                    lines.push([\n                        [Math.round(ce.x), y],\n                        [Math.round(ne.x), y],\n                    ]);\n                }\n            }\n        }\n        y += hachureStepOffset;\n        activeEdges.forEach((ae) => {\n            ae.edge.x = ae.edge.x + (hachureStepOffset * ae.edge.islope);\n        });\n        iteration++;\n    }\n    return lines;\n}\n","import { hachureLines } from 'hachure-fill';\nexport function polygonHachureLines(polygonList, o) {\n    var _a;\n    const angle = o.hachureAngle + 90;\n    let gap = o.hachureGap;\n    if (gap < 0) {\n        gap = o.strokeWidth * 4;\n    }\n    gap = Math.round(Math.max(gap, 0.1));\n    let skipOffset = 1;\n    if (o.roughness >= 1) {\n        if ((((_a = o.randomizer) === null || _a === void 0 ? void 0 : _a.next()) || Math.random()) > 0.7) {\n            skipOffset = gap;\n        }\n    }\n    return hachureLines(polygonList, gap, angle, skipOffset || 1);\n}\n","import { polygonHachureLines } from './scan-line-hachure';\nexport class HachureFiller {\n    constructor(helper) {\n        this.helper = helper;\n    }\n    fillPolygons(polygonList, o) {\n        return this._fillPolygons(polygonList, o);\n    }\n    _fillPolygons(polygonList, o) {\n        const lines = polygonHachureLines(polygonList, o);\n        const ops = this.renderLines(lines, o);\n        return { type: 'fillSketch', ops };\n    }\n    renderLines(lines, o) {\n        const ops = [];\n        for (const line of lines) {\n            ops.push(...this.helper.doubleLineOps(line[0][0], line[0][1], line[1][0], line[1][1], o));\n        }\n        return ops;\n    }\n}\n","export function lineLength(line) {\n    const p1 = line[0];\n    const p2 = line[1];\n    return Math.sqrt(Math.pow(p1[0] - p2[0], 2) + Math.pow(p1[1] - p2[1], 2));\n}\n","import { HachureFiller } from './hachure-filler';\nimport { polygonHachureLines } from './scan-line-hachure';\nimport { lineLength } from '../geometry';\nexport class ZigZagFiller extends HachureFiller {\n    fillPolygons(polygonList, o) {\n        let gap = o.hachureGap;\n        if (gap < 0) {\n            gap = o.strokeWidth * 4;\n        }\n        gap = Math.max(gap, 0.1);\n        const o2 = Object.assign({}, o, { hachureGap: gap });\n        const lines = polygonHachureLines(polygonList, o2);\n        const zigZagAngle = (Math.PI / 180) * o.hachureAngle;\n        const zigzagLines = [];\n        const dgx = gap * 0.5 * Math.cos(zigZagAngle);\n        const dgy = gap * 0.5 * Math.sin(zigZagAngle);\n        for (const [p1, p2] of lines) {\n            if (lineLength([p1, p2])) {\n                zigzagLines.push([\n                    [p1[0] - dgx, p1[1] + dgy],\n                    [...p2],\n                ], [\n                    [p1[0] + dgx, p1[1] - dgy],\n                    [...p2],\n                ]);\n            }\n        }\n        const ops = this.renderLines(zigzagLines, o);\n        return { type: 'fillSketch', ops };\n    }\n}\n","import { HachureFiller } from './hachure-filler';\nexport class HatchFiller extends HachureFiller {\n    fillPolygons(polygonList, o) {\n        const set = this._fillPolygons(polygonList, o);\n        const o2 = Object.assign({}, o, { hachureAngle: o.hachureAngle + 90 });\n        const set2 = this._fillPolygons(polygonList, o2);\n        set.ops = set.ops.concat(set2.ops);\n        return set;\n    }\n}\n","import { lineLength } from '../geometry';\nimport { polygonHachureLines } from './scan-line-hachure';\nexport class DotFiller {\n    constructor(helper) {\n        this.helper = helper;\n    }\n    fillPolygons(polygonList, o) {\n        o = Object.assign({}, o, { hachureAngle: 0 });\n        const lines = polygonHachureLines(polygonList, o);\n        return this.dotsOnLines(lines, o);\n    }\n    dotsOnLines(lines, o) {\n        const ops = [];\n        let gap = o.hachureGap;\n        if (gap < 0) {\n            gap = o.strokeWidth * 4;\n        }\n        gap = Math.max(gap, 0.1);\n        let fweight = o.fillWeight;\n        if (fweight < 0) {\n            fweight = o.strokeWidth / 2;\n        }\n        const ro = gap / 4;\n        for (const line of lines) {\n            const length = lineLength(line);\n            const dl = length / gap;\n            const count = Math.ceil(dl) - 1;\n            const offset = length - (count * gap);\n            const x = ((line[0][0] + line[1][0]) / 2) - (gap / 4);\n            const minY = Math.min(line[0][1], line[1][1]);\n            for (let i = 0; i < count; i++) {\n                const y = minY + offset + (i * gap);\n                const cx = (x - ro) + Math.random() * 2 * ro;\n                const cy = (y - ro) + Math.random() * 2 * ro;\n                const el = this.helper.ellipse(cx, cy, fweight, fweight, o);\n                ops.push(...el.ops);\n            }\n        }\n        return { type: 'fillSketch', ops };\n    }\n}\n","import { lineLength } from '../geometry';\nimport { polygonHachureLines } from './scan-line-hachure';\nexport class DashedFiller {\n    constructor(helper) {\n        this.helper = helper;\n    }\n    fillPolygons(polygonList, o) {\n        const lines = polygonHachureLines(polygonList, o);\n        return { type: 'fillSketch', ops: this.dashedLine(lines, o) };\n    }\n    dashedLine(lines, o) {\n        const offset = o.dashOffset < 0 ? (o.hachureGap < 0 ? (o.strokeWidth * 4) : o.hachureGap) : o.dashOffset;\n        const gap = o.dashGap < 0 ? (o.hachureGap < 0 ? (o.strokeWidth * 4) : o.hachureGap) : o.dashGap;\n        const ops = [];\n        lines.forEach((line) => {\n            const length = lineLength(line);\n            const count = Math.floor(length / (offset + gap));\n            const startOffset = (length + gap - (count * (offset + gap))) / 2;\n            let p1 = line[0];\n            let p2 = line[1];\n            if (p1[0] > p2[0]) {\n                p1 = line[1];\n                p2 = line[0];\n            }\n            const alpha = Math.atan((p2[1] - p1[1]) / (p2[0] - p1[0]));\n            for (let i = 0; i < count; i++) {\n                const lstart = i * (offset + gap);\n                const lend = lstart + offset;\n                const start = [p1[0] + (lstart * Math.cos(alpha)) + (startOffset * Math.cos(alpha)), p1[1] + lstart * Math.sin(alpha) + (startOffset * Math.sin(alpha))];\n                const end = [p1[0] + (lend * Math.cos(alpha)) + (startOffset * Math.cos(alpha)), p1[1] + (lend * Math.sin(alpha)) + (startOffset * Math.sin(alpha))];\n                ops.push(...this.helper.doubleLineOps(start[0], start[1], end[0], end[1], o));\n            }\n        });\n        return ops;\n    }\n}\n","import { lineLength } from '../geometry';\nimport { polygonHachureLines } from './scan-line-hachure';\nexport class ZigZagLineFiller {\n    constructor(helper) {\n        this.helper = helper;\n    }\n    fillPolygons(polygonList, o) {\n        const gap = o.hachureGap < 0 ? (o.strokeWidth * 4) : o.hachureGap;\n        const zo = o.zigzagOffset < 0 ? gap : o.zigzagOffset;\n        o = Object.assign({}, o, { hachureGap: gap + zo });\n        const lines = polygonHachureLines(polygonList, o);\n        return { type: 'fillSketch', ops: this.zigzagLines(lines, zo, o) };\n    }\n    zigzagLines(lines, zo, o) {\n        const ops = [];\n        lines.forEach((line) => {\n            const length = lineLength(line);\n            const count = Math.round(length / (2 * zo));\n            let p1 = line[0];\n            let p2 = line[1];\n            if (p1[0] > p2[0]) {\n                p1 = line[1];\n                p2 = line[0];\n            }\n            const alpha = Math.atan((p2[1] - p1[1]) / (p2[0] - p1[0]));\n            for (let i = 0; i < count; i++) {\n                const lstart = i * 2 * zo;\n                const lend = (i + 1) * 2 * zo;\n                const dz = Math.sqrt(2 * Math.pow(zo, 2));\n                const start = [p1[0] + (lstart * Math.cos(alpha)), p1[1] + lstart * Math.sin(alpha)];\n                const end = [p1[0] + (lend * Math.cos(alpha)), p1[1] + (lend * Math.sin(alpha))];\n                const middle = [start[0] + dz * Math.cos(alpha + Math.PI / 4), start[1] + dz * Math.sin(alpha + Math.PI / 4)];\n                ops.push(...this.helper.doubleLineOps(start[0], start[1], middle[0], middle[1], o), ...this.helper.doubleLineOps(middle[0], middle[1], end[0], end[1], o));\n            }\n        });\n        return ops;\n    }\n}\n","import { HachureFiller } from './hachure-filler';\nimport { ZigZagFiller } from './zigzag-filler';\nimport { HatchFiller } from './hatch-filler';\nimport { DotFiller } from './dot-filler';\nimport { DashedFiller } from './dashed-filler';\nimport { ZigZagLineFiller } from './zigzag-line-filler';\nconst fillers = {};\nexport function getFiller(o, helper) {\n    let fillerName = o.fillStyle || 'hachure';\n    if (!fillers[fillerName]) {\n        switch (fillerName) {\n            case 'zigzag':\n                if (!fillers[fillerName]) {\n                    fillers[fillerName] = new ZigZagFiller(helper);\n                }\n                break;\n            case 'cross-hatch':\n                if (!fillers[fillerName]) {\n                    fillers[fillerName] = new HatchFiller(helper);\n                }\n                break;\n            case 'dots':\n                if (!fillers[fillerName]) {\n                    fillers[fillerName] = new DotFiller(helper);\n                }\n                break;\n            case 'dashed':\n                if (!fillers[fillerName]) {\n                    fillers[fillerName] = new DashedFiller(helper);\n                }\n                break;\n            case 'zigzag-line':\n                if (!fillers[fillerName]) {\n                    fillers[fillerName] = new ZigZagLineFiller(helper);\n                }\n                break;\n            case 'hachure':\n            default:\n                fillerName = 'hachure';\n                if (!fillers[fillerName]) {\n                    fillers[fillerName] = new HachureFiller(helper);\n                }\n                break;\n        }\n    }\n    return fillers[fillerName];\n}\n","export function randomSeed() {\n    return Math.floor(Math.random() * 2 ** 31);\n}\nexport class Random {\n    constructor(seed) {\n        this.seed = seed;\n    }\n    next() {\n        if (this.seed) {\n            return ((2 ** 31 - 1) & (this.seed = Math.imul(48271, this.seed))) / 2 ** 31;\n        }\n        else {\n            return Math.random();\n        }\n    }\n}\n","const COMMAND = 0;\nconst NUMBER = 1;\nconst EOD = 2;\nconst PARAMS = { A: 7, a: 7, C: 6, c: 6, H: 1, h: 1, L: 2, l: 2, M: 2, m: 2, Q: 4, q: 4, S: 4, s: 4, T: 2, t: 2, V: 1, v: 1, Z: 0, z: 0 };\nfunction tokenize(d) {\n    const tokens = new Array();\n    while (d !== '') {\n        if (d.match(/^([ \\t\\r\\n,]+)/)) {\n            d = d.substr(RegExp.$1.length);\n        }\n        else if (d.match(/^([aAcChHlLmMqQsStTvVzZ])/)) {\n            tokens[tokens.length] = { type: COMMAND, text: RegExp.$1 };\n            d = d.substr(RegExp.$1.length);\n        }\n        else if (d.match(/^(([-+]?[0-9]+(\\.[0-9]*)?|[-+]?\\.[0-9]+)([eE][-+]?[0-9]+)?)/)) {\n            tokens[tokens.length] = { type: NUMBER, text: `${parseFloat(RegExp.$1)}` };\n            d = d.substr(RegExp.$1.length);\n        }\n        else {\n            return [];\n        }\n    }\n    tokens[tokens.length] = { type: EOD, text: '' };\n    return tokens;\n}\nfunction isType(token, type) {\n    return token.type === type;\n}\nexport function parsePath(d) {\n    const segments = [];\n    const tokens = tokenize(d);\n    let mode = 'BOD';\n    let index = 0;\n    let token = tokens[index];\n    while (!isType(token, EOD)) {\n        let paramsCount = 0;\n        const params = [];\n        if (mode === 'BOD') {\n            if (token.text === 'M' || token.text === 'm') {\n                index++;\n                paramsCount = PARAMS[token.text];\n                mode = token.text;\n            }\n            else {\n                return parsePath('M0,0' + d);\n            }\n        }\n        else if (isType(token, NUMBER)) {\n            paramsCount = PARAMS[mode];\n        }\n        else {\n            index++;\n            paramsCount = PARAMS[token.text];\n            mode = token.text;\n        }\n        if ((index + paramsCount) < tokens.length) {\n            for (let i = index; i < index + paramsCount; i++) {\n                const numbeToken = tokens[i];\n                if (isType(numbeToken, NUMBER)) {\n                    params[params.length] = +numbeToken.text;\n                }\n                else {\n                    throw new Error('Param not a number: ' + mode + ',' + numbeToken.text);\n                }\n            }\n            if (typeof PARAMS[mode] === 'number') {\n                const segment = { key: mode, data: params };\n                segments.push(segment);\n                index += paramsCount;\n                token = tokens[index];\n                if (mode === 'M')\n                    mode = 'L';\n                if (mode === 'm')\n                    mode = 'l';\n            }\n            else {\n                throw new Error('Bad segment: ' + mode);\n            }\n        }\n        else {\n            throw new Error('Path data ended short');\n        }\n    }\n    return segments;\n}\nexport function serialize(segments) {\n    const tokens = [];\n    for (const { key, data } of segments) {\n        tokens.push(key);\n        switch (key) {\n            case 'C':\n            case 'c':\n                tokens.push(data[0], `${data[1]},`, data[2], `${data[3]},`, data[4], data[5]);\n                break;\n            case 'S':\n            case 's':\n            case 'Q':\n            case 'q':\n                tokens.push(data[0], `${data[1]},`, data[2], data[3]);\n                break;\n            default:\n                tokens.push(...data);\n                break;\n        }\n    }\n    return tokens.join(' ');\n}\n","// Translate relative commands to absolute commands\nexport function absolutize(segments) {\n    let cx = 0, cy = 0;\n    let subx = 0, suby = 0;\n    const out = [];\n    for (const { key, data } of segments) {\n        switch (key) {\n            case 'M':\n                out.push({ key: 'M', data: [...data] });\n                [cx, cy] = data;\n                [subx, suby] = data;\n                break;\n            case 'm':\n                cx += data[0];\n                cy += data[1];\n                out.push({ key: 'M', data: [cx, cy] });\n                subx = cx;\n                suby = cy;\n                break;\n            case 'L':\n                out.push({ key: 'L', data: [...data] });\n                [cx, cy] = data;\n                break;\n            case 'l':\n                cx += data[0];\n                cy += data[1];\n                out.push({ key: 'L', data: [cx, cy] });\n                break;\n            case 'C':\n                out.push({ key: 'C', data: [...data] });\n                cx = data[4];\n                cy = data[5];\n                break;\n            case 'c': {\n                const newdata = data.map((d, i) => (i % 2) ? (d + cy) : (d + cx));\n                out.push({ key: 'C', data: newdata });\n                cx = newdata[4];\n                cy = newdata[5];\n                break;\n            }\n            case 'Q':\n                out.push({ key: 'Q', data: [...data] });\n                cx = data[2];\n                cy = data[3];\n                break;\n            case 'q': {\n                const newdata = data.map((d, i) => (i % 2) ? (d + cy) : (d + cx));\n                out.push({ key: 'Q', data: newdata });\n                cx = newdata[2];\n                cy = newdata[3];\n                break;\n            }\n            case 'A':\n                out.push({ key: 'A', data: [...data] });\n                cx = data[5];\n                cy = data[6];\n                break;\n            case 'a':\n                cx += data[5];\n                cy += data[6];\n                out.push({ key: 'A', data: [data[0], data[1], data[2], data[3], data[4], cx, cy] });\n                break;\n            case 'H':\n                out.push({ key: 'H', data: [...data] });\n                cx = data[0];\n                break;\n            case 'h':\n                cx += data[0];\n                out.push({ key: 'H', data: [cx] });\n                break;\n            case 'V':\n                out.push({ key: 'V', data: [...data] });\n                cy = data[0];\n                break;\n            case 'v':\n                cy += data[0];\n                out.push({ key: 'V', data: [cy] });\n                break;\n            case 'S':\n                out.push({ key: 'S', data: [...data] });\n                cx = data[2];\n                cy = data[3];\n                break;\n            case 's': {\n                const newdata = data.map((d, i) => (i % 2) ? (d + cy) : (d + cx));\n                out.push({ key: 'S', data: newdata });\n                cx = newdata[2];\n                cy = newdata[3];\n                break;\n            }\n            case 'T':\n                out.push({ key: 'T', data: [...data] });\n                cx = data[0];\n                cy = data[1];\n                break;\n            case 't':\n                cx += data[0];\n                cy += data[1];\n                out.push({ key: 'T', data: [cx, cy] });\n                break;\n            case 'Z':\n            case 'z':\n                out.push({ key: 'Z', data: [] });\n                cx = subx;\n                cy = suby;\n                break;\n        }\n    }\n    return out;\n}\n","// Normalize path to include only M, L, C, and Z commands\nexport function normalize(segments) {\n    const out = [];\n    let lastType = '';\n    let cx = 0, cy = 0;\n    let subx = 0, suby = 0;\n    let lcx = 0, lcy = 0;\n    for (const { key, data } of segments) {\n        switch (key) {\n            case 'M':\n                out.push({ key: 'M', data: [...data] });\n                [cx, cy] = data;\n                [subx, suby] = data;\n                break;\n            case 'C':\n                out.push({ key: 'C', data: [...data] });\n                cx = data[4];\n                cy = data[5];\n                lcx = data[2];\n                lcy = data[3];\n                break;\n            case 'L':\n                out.push({ key: 'L', data: [...data] });\n                [cx, cy] = data;\n                break;\n            case 'H':\n                cx = data[0];\n                out.push({ key: 'L', data: [cx, cy] });\n                break;\n            case 'V':\n                cy = data[0];\n                out.push({ key: 'L', data: [cx, cy] });\n                break;\n            case 'S': {\n                let cx1 = 0, cy1 = 0;\n                if (lastType === 'C' || lastType === 'S') {\n                    cx1 = cx + (cx - lcx);\n                    cy1 = cy + (cy - lcy);\n                }\n                else {\n                    cx1 = cx;\n                    cy1 = cy;\n                }\n                out.push({ key: 'C', data: [cx1, cy1, ...data] });\n                lcx = data[0];\n                lcy = data[1];\n                cx = data[2];\n                cy = data[3];\n                break;\n            }\n            case 'T': {\n                const [x, y] = data;\n                let x1 = 0, y1 = 0;\n                if (lastType === 'Q' || lastType === 'T') {\n                    x1 = cx + (cx - lcx);\n                    y1 = cy + (cy - lcy);\n                }\n                else {\n                    x1 = cx;\n                    y1 = cy;\n                }\n                const cx1 = cx + 2 * (x1 - cx) / 3;\n                const cy1 = cy + 2 * (y1 - cy) / 3;\n                const cx2 = x + 2 * (x1 - x) / 3;\n                const cy2 = y + 2 * (y1 - y) / 3;\n                out.push({ key: 'C', data: [cx1, cy1, cx2, cy2, x, y] });\n                lcx = x1;\n                lcy = y1;\n                cx = x;\n                cy = y;\n                break;\n            }\n            case 'Q': {\n                const [x1, y1, x, y] = data;\n                const cx1 = cx + 2 * (x1 - cx) / 3;\n                const cy1 = cy + 2 * (y1 - cy) / 3;\n                const cx2 = x + 2 * (x1 - x) / 3;\n                const cy2 = y + 2 * (y1 - y) / 3;\n                out.push({ key: 'C', data: [cx1, cy1, cx2, cy2, x, y] });\n                lcx = x1;\n                lcy = y1;\n                cx = x;\n                cy = y;\n                break;\n            }\n            case 'A': {\n                const r1 = Math.abs(data[0]);\n                const r2 = Math.abs(data[1]);\n                const angle = data[2];\n                const largeArcFlag = data[3];\n                const sweepFlag = data[4];\n                const x = data[5];\n                const y = data[6];\n                if (r1 === 0 || r2 === 0) {\n                    out.push({ key: 'C', data: [cx, cy, x, y, x, y] });\n                    cx = x;\n                    cy = y;\n                }\n                else {\n                    if (cx !== x || cy !== y) {\n                        const curves = arcToCubicCurves(cx, cy, x, y, r1, r2, angle, largeArcFlag, sweepFlag);\n                        curves.forEach(function (curve) {\n                            out.push({ key: 'C', data: curve });\n                        });\n                        cx = x;\n                        cy = y;\n                    }\n                }\n                break;\n            }\n            case 'Z':\n                out.push({ key: 'Z', data: [] });\n                cx = subx;\n                cy = suby;\n                break;\n        }\n        lastType = key;\n    }\n    return out;\n}\nfunction degToRad(degrees) {\n    return (Math.PI * degrees) / 180;\n}\nfunction rotate(x, y, angleRad) {\n    const X = x * Math.cos(angleRad) - y * Math.sin(angleRad);\n    const Y = x * Math.sin(angleRad) + y * Math.cos(angleRad);\n    return [X, Y];\n}\nfunction arcToCubicCurves(x1, y1, x2, y2, r1, r2, angle, largeArcFlag, sweepFlag, recursive) {\n    const angleRad = degToRad(angle);\n    let params = [];\n    let f1 = 0, f2 = 0, cx = 0, cy = 0;\n    if (recursive) {\n        [f1, f2, cx, cy] = recursive;\n    }\n    else {\n        [x1, y1] = rotate(x1, y1, -angleRad);\n        [x2, y2] = rotate(x2, y2, -angleRad);\n        const x = (x1 - x2) / 2;\n        const y = (y1 - y2) / 2;\n        let h = (x * x) / (r1 * r1) + (y * y) / (r2 * r2);\n        if (h > 1) {\n            h = Math.sqrt(h);\n            r1 = h * r1;\n            r2 = h * r2;\n        }\n        const sign = (largeArcFlag === sweepFlag) ? -1 : 1;\n        const r1Pow = r1 * r1;\n        const r2Pow = r2 * r2;\n        const left = r1Pow * r2Pow - r1Pow * y * y - r2Pow * x * x;\n        const right = r1Pow * y * y + r2Pow * x * x;\n        const k = sign * Math.sqrt(Math.abs(left / right));\n        cx = k * r1 * y / r2 + (x1 + x2) / 2;\n        cy = k * -r2 * x / r1 + (y1 + y2) / 2;\n        f1 = Math.asin(parseFloat(((y1 - cy) / r2).toFixed(9)));\n        f2 = Math.asin(parseFloat(((y2 - cy) / r2).toFixed(9)));\n        if (x1 < cx) {\n            f1 = Math.PI - f1;\n        }\n        if (x2 < cx) {\n            f2 = Math.PI - f2;\n        }\n        if (f1 < 0) {\n            f1 = Math.PI * 2 + f1;\n        }\n        if (f2 < 0) {\n            f2 = Math.PI * 2 + f2;\n        }\n        if (sweepFlag && f1 > f2) {\n            f1 = f1 - Math.PI * 2;\n        }\n        if (!sweepFlag && f2 > f1) {\n            f2 = f2 - Math.PI * 2;\n        }\n    }\n    let df = f2 - f1;\n    if (Math.abs(df) > (Math.PI * 120 / 180)) {\n        const f2old = f2;\n        const x2old = x2;\n        const y2old = y2;\n        if (sweepFlag && f2 > f1) {\n            f2 = f1 + (Math.PI * 120 / 180) * (1);\n        }\n        else {\n            f2 = f1 + (Math.PI * 120 / 180) * (-1);\n        }\n        x2 = cx + r1 * Math.cos(f2);\n        y2 = cy + r2 * Math.sin(f2);\n        params = arcToCubicCurves(x2, y2, x2old, y2old, r1, r2, angle, 0, sweepFlag, [f2, f2old, cx, cy]);\n    }\n    df = f2 - f1;\n    const c1 = Math.cos(f1);\n    const s1 = Math.sin(f1);\n    const c2 = Math.cos(f2);\n    const s2 = Math.sin(f2);\n    const t = Math.tan(df / 4);\n    const hx = 4 / 3 * r1 * t;\n    const hy = 4 / 3 * r2 * t;\n    const m1 = [x1, y1];\n    const m2 = [x1 + hx * s1, y1 - hy * c1];\n    const m3 = [x2 + hx * s2, y2 - hy * c2];\n    const m4 = [x2, y2];\n    m2[0] = 2 * m1[0] - m2[0];\n    m2[1] = 2 * m1[1] - m2[1];\n    if (recursive) {\n        return [m2, m3, m4].concat(params);\n    }\n    else {\n        params = [m2, m3, m4].concat(params);\n        const curves = [];\n        for (let i = 0; i < params.length; i += 3) {\n            const r1 = rotate(params[i][0], params[i][1], angleRad);\n            const r2 = rotate(params[i + 1][0], params[i + 1][1], angleRad);\n            const r3 = rotate(params[i + 2][0], params[i + 2][1], angleRad);\n            curves.push([r1[0], r1[1], r2[0], r2[1], r3[0], r3[1]]);\n        }\n        return curves;\n    }\n}\n","import { getFiller } from './fillers/filler.js';\nimport { Random } from './math.js';\nimport { parsePath, normalize, absolutize } from 'path-data-parser';\nconst helper = {\n    randOffset,\n    randOffsetWithRange,\n    ellipse,\n    doubleLineOps: doubleLineFillOps,\n};\nexport function line(x1, y1, x2, y2, o) {\n    return { type: 'path', ops: _doubleLine(x1, y1, x2, y2, o) };\n}\nexport function linearPath(points, close, o) {\n    const len = (points || []).length;\n    if (len > 2) {\n        const ops = [];\n        for (let i = 0; i < (len - 1); i++) {\n            ops.push(..._doubleLine(points[i][0], points[i][1], points[i + 1][0], points[i + 1][1], o));\n        }\n        if (close) {\n            ops.push(..._doubleLine(points[len - 1][0], points[len - 1][1], points[0][0], points[0][1], o));\n        }\n        return { type: 'path', ops };\n    }\n    else if (len === 2) {\n        return line(points[0][0], points[0][1], points[1][0], points[1][1], o);\n    }\n    return { type: 'path', ops: [] };\n}\nexport function polygon(points, o) {\n    return linearPath(points, true, o);\n}\nexport function rectangle(x, y, width, height, o) {\n    const points = [\n        [x, y],\n        [x + width, y],\n        [x + width, y + height],\n        [x, y + height],\n    ];\n    return polygon(points, o);\n}\nexport function curve(inputPoints, o) {\n    if (inputPoints.length) {\n        const p1 = inputPoints[0];\n        const pointsList = (typeof p1[0] === 'number') ? [inputPoints] : inputPoints;\n        const o1 = _curveWithOffset(pointsList[0], 1 * (1 + o.roughness * 0.2), o);\n        const o2 = o.disableMultiStroke ? [] : _curveWithOffset(pointsList[0], 1.5 * (1 + o.roughness * 0.22), cloneOptionsAlterSeed(o));\n        for (let i = 1; i < pointsList.length; i++) {\n            const points = pointsList[i];\n            if (points.length) {\n                const underlay = _curveWithOffset(points, 1 * (1 + o.roughness * 0.2), o);\n                const overlay = o.disableMultiStroke ? [] : _curveWithOffset(points, 1.5 * (1 + o.roughness * 0.22), cloneOptionsAlterSeed(o));\n                for (const item of underlay) {\n                    if (item.op !== 'move') {\n                        o1.push(item);\n                    }\n                }\n                for (const item of overlay) {\n                    if (item.op !== 'move') {\n                        o2.push(item);\n                    }\n                }\n            }\n        }\n        return { type: 'path', ops: o1.concat(o2) };\n    }\n    return { type: 'path', ops: [] };\n}\nexport function ellipse(x, y, width, height, o) {\n    const params = generateEllipseParams(width, height, o);\n    return ellipseWithParams(x, y, o, params).opset;\n}\nexport function generateEllipseParams(width, height, o) {\n    const psq = Math.sqrt(Math.PI * 2 * Math.sqrt((Math.pow(width / 2, 2) + Math.pow(height / 2, 2)) / 2));\n    const stepCount = Math.ceil(Math.max(o.curveStepCount, (o.curveStepCount / Math.sqrt(200)) * psq));\n    const increment = (Math.PI * 2) / stepCount;\n    let rx = Math.abs(width / 2);\n    let ry = Math.abs(height / 2);\n    const curveFitRandomness = 1 - o.curveFitting;\n    rx += _offsetOpt(rx * curveFitRandomness, o);\n    ry += _offsetOpt(ry * curveFitRandomness, o);\n    return { increment, rx, ry };\n}\nexport function ellipseWithParams(x, y, o, ellipseParams) {\n    const [ap1, cp1] = _computeEllipsePoints(ellipseParams.increment, x, y, ellipseParams.rx, ellipseParams.ry, 1, ellipseParams.increment * _offset(0.1, _offset(0.4, 1, o), o), o);\n    let o1 = _curve(ap1, null, o);\n    if ((!o.disableMultiStroke) && (o.roughness !== 0)) {\n        const [ap2] = _computeEllipsePoints(ellipseParams.increment, x, y, ellipseParams.rx, ellipseParams.ry, 1.5, 0, o);\n        const o2 = _curve(ap2, null, o);\n        o1 = o1.concat(o2);\n    }\n    return {\n        estimatedPoints: cp1,\n        opset: { type: 'path', ops: o1 },\n    };\n}\nexport function arc(x, y, width, height, start, stop, closed, roughClosure, o) {\n    const cx = x;\n    const cy = y;\n    let rx = Math.abs(width / 2);\n    let ry = Math.abs(height / 2);\n    rx += _offsetOpt(rx * 0.01, o);\n    ry += _offsetOpt(ry * 0.01, o);\n    let strt = start;\n    let stp = stop;\n    while (strt < 0) {\n        strt += Math.PI * 2;\n        stp += Math.PI * 2;\n    }\n    if ((stp - strt) > (Math.PI * 2)) {\n        strt = 0;\n        stp = Math.PI * 2;\n    }\n    const ellipseInc = (Math.PI * 2) / o.curveStepCount;\n    const arcInc = Math.min(ellipseInc / 2, (stp - strt) / 2);\n    const ops = _arc(arcInc, cx, cy, rx, ry, strt, stp, 1, o);\n    if (!o.disableMultiStroke) {\n        const o2 = _arc(arcInc, cx, cy, rx, ry, strt, stp, 1.5, o);\n        ops.push(...o2);\n    }\n    if (closed) {\n        if (roughClosure) {\n            ops.push(..._doubleLine(cx, cy, cx + rx * Math.cos(strt), cy + ry * Math.sin(strt), o), ..._doubleLine(cx, cy, cx + rx * Math.cos(stp), cy + ry * Math.sin(stp), o));\n        }\n        else {\n            ops.push({ op: 'lineTo', data: [cx, cy] }, { op: 'lineTo', data: [cx + rx * Math.cos(strt), cy + ry * Math.sin(strt)] });\n        }\n    }\n    return { type: 'path', ops };\n}\nexport function svgPath(path, o) {\n    const segments = normalize(absolutize(parsePath(path)));\n    const ops = [];\n    let first = [0, 0];\n    let current = [0, 0];\n    for (const { key, data } of segments) {\n        switch (key) {\n            case 'M': {\n                current = [data[0], data[1]];\n                first = [data[0], data[1]];\n                break;\n            }\n            case 'L':\n                ops.push(..._doubleLine(current[0], current[1], data[0], data[1], o));\n                current = [data[0], data[1]];\n                break;\n            case 'C': {\n                const [x1, y1, x2, y2, x, y] = data;\n                ops.push(..._bezierTo(x1, y1, x2, y2, x, y, current, o));\n                current = [x, y];\n                break;\n            }\n            case 'Z':\n                ops.push(..._doubleLine(current[0], current[1], first[0], first[1], o));\n                current = [first[0], first[1]];\n                break;\n        }\n    }\n    return { type: 'path', ops };\n}\n// Fills\nexport function solidFillPolygon(polygonList, o) {\n    const ops = [];\n    for (const points of polygonList) {\n        if (points.length) {\n            const offset = o.maxRandomnessOffset || 0;\n            const len = points.length;\n            if (len > 2) {\n                ops.push({ op: 'move', data: [points[0][0] + _offsetOpt(offset, o), points[0][1] + _offsetOpt(offset, o)] });\n                for (let i = 1; i < len; i++) {\n                    ops.push({ op: 'lineTo', data: [points[i][0] + _offsetOpt(offset, o), points[i][1] + _offsetOpt(offset, o)] });\n                }\n            }\n        }\n    }\n    return { type: 'fillPath', ops };\n}\nexport function patternFillPolygons(polygonList, o) {\n    return getFiller(o, helper).fillPolygons(polygonList, o);\n}\nexport function patternFillArc(x, y, width, height, start, stop, o) {\n    const cx = x;\n    const cy = y;\n    let rx = Math.abs(width / 2);\n    let ry = Math.abs(height / 2);\n    rx += _offsetOpt(rx * 0.01, o);\n    ry += _offsetOpt(ry * 0.01, o);\n    let strt = start;\n    let stp = stop;\n    while (strt < 0) {\n        strt += Math.PI * 2;\n        stp += Math.PI * 2;\n    }\n    if ((stp - strt) > (Math.PI * 2)) {\n        strt = 0;\n        stp = Math.PI * 2;\n    }\n    const increment = (stp - strt) / o.curveStepCount;\n    const points = [];\n    for (let angle = strt; angle <= stp; angle = angle + increment) {\n        points.push([cx + rx * Math.cos(angle), cy + ry * Math.sin(angle)]);\n    }\n    points.push([cx + rx * Math.cos(stp), cy + ry * Math.sin(stp)]);\n    points.push([cx, cy]);\n    return patternFillPolygons([points], o);\n}\nexport function randOffset(x, o) {\n    return _offsetOpt(x, o);\n}\nexport function randOffsetWithRange(min, max, o) {\n    return _offset(min, max, o);\n}\nexport function doubleLineFillOps(x1, y1, x2, y2, o) {\n    return _doubleLine(x1, y1, x2, y2, o, true);\n}\n// Private helpers\nfunction cloneOptionsAlterSeed(ops) {\n    const result = Object.assign({}, ops);\n    result.randomizer = undefined;\n    if (ops.seed) {\n        result.seed = ops.seed + 1;\n    }\n    return result;\n}\nfunction random(ops) {\n    if (!ops.randomizer) {\n        ops.randomizer = new Random(ops.seed || 0);\n    }\n    return ops.randomizer.next();\n}\nfunction _offset(min, max, ops, roughnessGain = 1) {\n    return ops.roughness * roughnessGain * ((random(ops) * (max - min)) + min);\n}\nfunction _offsetOpt(x, ops, roughnessGain = 1) {\n    return _offset(-x, x, ops, roughnessGain);\n}\nfunction _doubleLine(x1, y1, x2, y2, o, filling = false) {\n    const singleStroke = filling ? o.disableMultiStrokeFill : o.disableMultiStroke;\n    const o1 = _line(x1, y1, x2, y2, o, true, false);\n    if (singleStroke) {\n        return o1;\n    }\n    const o2 = _line(x1, y1, x2, y2, o, true, true);\n    return o1.concat(o2);\n}\nfunction _line(x1, y1, x2, y2, o, move, overlay) {\n    const lengthSq = Math.pow((x1 - x2), 2) + Math.pow((y1 - y2), 2);\n    const length = Math.sqrt(lengthSq);\n    let roughnessGain = 1;\n    if (length < 200) {\n        roughnessGain = 1;\n    }\n    else if (length > 500) {\n        roughnessGain = 0.4;\n    }\n    else {\n        roughnessGain = (-0.0016668) * length + 1.233334;\n    }\n    let offset = o.maxRandomnessOffset || 0;\n    if ((offset * offset * 100) > lengthSq) {\n        offset = length / 10;\n    }\n    const halfOffset = offset / 2;\n    const divergePoint = 0.2 + random(o) * 0.2;\n    let midDispX = o.bowing * o.maxRandomnessOffset * (y2 - y1) / 200;\n    let midDispY = o.bowing * o.maxRandomnessOffset * (x1 - x2) / 200;\n    midDispX = _offsetOpt(midDispX, o, roughnessGain);\n    midDispY = _offsetOpt(midDispY, o, roughnessGain);\n    const ops = [];\n    const randomHalf = () => _offsetOpt(halfOffset, o, roughnessGain);\n    const randomFull = () => _offsetOpt(offset, o, roughnessGain);\n    const preserveVertices = o.preserveVertices;\n    if (move) {\n        if (overlay) {\n            ops.push({\n                op: 'move', data: [\n                    x1 + (preserveVertices ? 0 : randomHalf()),\n                    y1 + (preserveVertices ? 0 : randomHalf()),\n                ],\n            });\n        }\n        else {\n            ops.push({\n                op: 'move', data: [\n                    x1 + (preserveVertices ? 0 : _offsetOpt(offset, o, roughnessGain)),\n                    y1 + (preserveVertices ? 0 : _offsetOpt(offset, o, roughnessGain)),\n                ],\n            });\n        }\n    }\n    if (overlay) {\n        ops.push({\n            op: 'bcurveTo',\n            data: [\n                midDispX + x1 + (x2 - x1) * divergePoint + randomHalf(),\n                midDispY + y1 + (y2 - y1) * divergePoint + randomHalf(),\n                midDispX + x1 + 2 * (x2 - x1) * divergePoint + randomHalf(),\n                midDispY + y1 + 2 * (y2 - y1) * divergePoint + randomHalf(),\n                x2 + (preserveVertices ? 0 : randomHalf()),\n                y2 + (preserveVertices ? 0 : randomHalf()),\n            ],\n        });\n    }\n    else {\n        ops.push({\n            op: 'bcurveTo',\n            data: [\n                midDispX + x1 + (x2 - x1) * divergePoint + randomFull(),\n                midDispY + y1 + (y2 - y1) * divergePoint + randomFull(),\n                midDispX + x1 + 2 * (x2 - x1) * divergePoint + randomFull(),\n                midDispY + y1 + 2 * (y2 - y1) * divergePoint + randomFull(),\n                x2 + (preserveVertices ? 0 : randomFull()),\n                y2 + (preserveVertices ? 0 : randomFull()),\n            ],\n        });\n    }\n    return ops;\n}\nfunction _curveWithOffset(points, offset, o) {\n    if (!points.length) {\n        return [];\n    }\n    const ps = [];\n    ps.push([\n        points[0][0] + _offsetOpt(offset, o),\n        points[0][1] + _offsetOpt(offset, o),\n    ]);\n    ps.push([\n        points[0][0] + _offsetOpt(offset, o),\n        points[0][1] + _offsetOpt(offset, o),\n    ]);\n    for (let i = 1; i < points.length; i++) {\n        ps.push([\n            points[i][0] + _offsetOpt(offset, o),\n            points[i][1] + _offsetOpt(offset, o),\n        ]);\n        if (i === (points.length - 1)) {\n            ps.push([\n                points[i][0] + _offsetOpt(offset, o),\n                points[i][1] + _offsetOpt(offset, o),\n            ]);\n        }\n    }\n    return _curve(ps, null, o);\n}\nfunction _curve(points, closePoint, o) {\n    const len = points.length;\n    const ops = [];\n    if (len > 3) {\n        const b = [];\n        const s = 1 - o.curveTightness;\n        ops.push({ op: 'move', data: [points[1][0], points[1][1]] });\n        for (let i = 1; (i + 2) < len; i++) {\n            const cachedVertArray = points[i];\n            b[0] = [cachedVertArray[0], cachedVertArray[1]];\n            b[1] = [cachedVertArray[0] + (s * points[i + 1][0] - s * points[i - 1][0]) / 6, cachedVertArray[1] + (s * points[i + 1][1] - s * points[i - 1][1]) / 6];\n            b[2] = [points[i + 1][0] + (s * points[i][0] - s * points[i + 2][0]) / 6, points[i + 1][1] + (s * points[i][1] - s * points[i + 2][1]) / 6];\n            b[3] = [points[i + 1][0], points[i + 1][1]];\n            ops.push({ op: 'bcurveTo', data: [b[1][0], b[1][1], b[2][0], b[2][1], b[3][0], b[3][1]] });\n        }\n        if (closePoint && closePoint.length === 2) {\n            const ro = o.maxRandomnessOffset;\n            ops.push({ op: 'lineTo', data: [closePoint[0] + _offsetOpt(ro, o), closePoint[1] + _offsetOpt(ro, o)] });\n        }\n    }\n    else if (len === 3) {\n        ops.push({ op: 'move', data: [points[1][0], points[1][1]] });\n        ops.push({\n            op: 'bcurveTo',\n            data: [\n                points[1][0], points[1][1],\n                points[2][0], points[2][1],\n                points[2][0], points[2][1],\n            ],\n        });\n    }\n    else if (len === 2) {\n        ops.push(..._line(points[0][0], points[0][1], points[1][0], points[1][1], o, true, true));\n    }\n    return ops;\n}\nfunction _computeEllipsePoints(increment, cx, cy, rx, ry, offset, overlap, o) {\n    const coreOnly = o.roughness === 0;\n    const corePoints = [];\n    const allPoints = [];\n    if (coreOnly) {\n        increment = increment / 4;\n        allPoints.push([\n            cx + rx * Math.cos(-increment),\n            cy + ry * Math.sin(-increment),\n        ]);\n        for (let angle = 0; angle <= Math.PI * 2; angle = angle + increment) {\n            const p = [\n                cx + rx * Math.cos(angle),\n                cy + ry * Math.sin(angle),\n            ];\n            corePoints.push(p);\n            allPoints.push(p);\n        }\n        allPoints.push([\n            cx + rx * Math.cos(0),\n            cy + ry * Math.sin(0),\n        ]);\n        allPoints.push([\n            cx + rx * Math.cos(increment),\n            cy + ry * Math.sin(increment),\n        ]);\n    }\n    else {\n        const radOffset = _offsetOpt(0.5, o) - (Math.PI / 2);\n        allPoints.push([\n            _offsetOpt(offset, o) + cx + 0.9 * rx * Math.cos(radOffset - increment),\n            _offsetOpt(offset, o) + cy + 0.9 * ry * Math.sin(radOffset - increment),\n        ]);\n        const endAngle = Math.PI * 2 + radOffset - 0.01;\n        for (let angle = radOffset; angle < endAngle; angle = angle + increment) {\n            const p = [\n                _offsetOpt(offset, o) + cx + rx * Math.cos(angle),\n                _offsetOpt(offset, o) + cy + ry * Math.sin(angle),\n            ];\n            corePoints.push(p);\n            allPoints.push(p);\n        }\n        allPoints.push([\n            _offsetOpt(offset, o) + cx + rx * Math.cos(radOffset + Math.PI * 2 + overlap * 0.5),\n            _offsetOpt(offset, o) + cy + ry * Math.sin(radOffset + Math.PI * 2 + overlap * 0.5),\n        ]);\n        allPoints.push([\n            _offsetOpt(offset, o) + cx + 0.98 * rx * Math.cos(radOffset + overlap),\n            _offsetOpt(offset, o) + cy + 0.98 * ry * Math.sin(radOffset + overlap),\n        ]);\n        allPoints.push([\n            _offsetOpt(offset, o) + cx + 0.9 * rx * Math.cos(radOffset + overlap * 0.5),\n            _offsetOpt(offset, o) + cy + 0.9 * ry * Math.sin(radOffset + overlap * 0.5),\n        ]);\n    }\n    return [allPoints, corePoints];\n}\nfunction _arc(increment, cx, cy, rx, ry, strt, stp, offset, o) {\n    const radOffset = strt + _offsetOpt(0.1, o);\n    const points = [];\n    points.push([\n        _offsetOpt(offset, o) + cx + 0.9 * rx * Math.cos(radOffset - increment),\n        _offsetOpt(offset, o) + cy + 0.9 * ry * Math.sin(radOffset - increment),\n    ]);\n    for (let angle = radOffset; angle <= stp; angle = angle + increment) {\n        points.push([\n            _offsetOpt(offset, o) + cx + rx * Math.cos(angle),\n            _offsetOpt(offset, o) + cy + ry * Math.sin(angle),\n        ]);\n    }\n    points.push([\n        cx + rx * Math.cos(stp),\n        cy + ry * Math.sin(stp),\n    ]);\n    points.push([\n        cx + rx * Math.cos(stp),\n        cy + ry * Math.sin(stp),\n    ]);\n    return _curve(points, null, o);\n}\nfunction _bezierTo(x1, y1, x2, y2, x, y, current, o) {\n    const ops = [];\n    const ros = [o.maxRandomnessOffset || 1, (o.maxRandomnessOffset || 1) + 0.3];\n    let f = [0, 0];\n    const iterations = o.disableMultiStroke ? 1 : 2;\n    const preserveVertices = o.preserveVertices;\n    for (let i = 0; i < iterations; i++) {\n        if (i === 0) {\n            ops.push({ op: 'move', data: [current[0], current[1]] });\n        }\n        else {\n            ops.push({ op: 'move', data: [current[0] + (preserveVertices ? 0 : _offsetOpt(ros[0], o)), current[1] + (preserveVertices ? 0 : _offsetOpt(ros[0], o))] });\n        }\n        f = preserveVertices ? [x, y] : [x + _offsetOpt(ros[i], o), y + _offsetOpt(ros[i], o)];\n        ops.push({\n            op: 'bcurveTo',\n            data: [\n                x1 + _offsetOpt(ros[i], o), y1 + _offsetOpt(ros[i], o),\n                x2 + _offsetOpt(ros[i], o), y2 + _offsetOpt(ros[i], o),\n                f[0], f[1],\n            ],\n        });\n    }\n    return ops;\n}\n","function clone(p) {\n    return [...p];\n}\nexport function curveToBezier(pointsIn, curveTightness = 0) {\n    const len = pointsIn.length;\n    if (len < 3) {\n        throw new Error('A curve must have at least three points.');\n    }\n    const out = [];\n    if (len === 3) {\n        out.push(clone(pointsIn[0]), clone(pointsIn[1]), clone(pointsIn[2]), clone(pointsIn[2]));\n    }\n    else {\n        const points = [];\n        points.push(pointsIn[0], pointsIn[0]);\n        for (let i = 1; i < pointsIn.length; i++) {\n            points.push(pointsIn[i]);\n            if (i === (pointsIn.length - 1)) {\n                points.push(pointsIn[i]);\n            }\n        }\n        const b = [];\n        const s = 1 - curveTightness;\n        out.push(clone(points[0]));\n        for (let i = 1; (i + 2) < points.length; i++) {\n            const cachedVertArray = points[i];\n            b[0] = [cachedVertArray[0], cachedVertArray[1]];\n            b[1] = [cachedVertArray[0] + (s * points[i + 1][0] - s * points[i - 1][0]) / 6, cachedVertArray[1] + (s * points[i + 1][1] - s * points[i - 1][1]) / 6];\n            b[2] = [points[i + 1][0] + (s * points[i][0] - s * points[i + 2][0]) / 6, points[i + 1][1] + (s * points[i][1] - s * points[i + 2][1]) / 6];\n            b[3] = [points[i + 1][0], points[i + 1][1]];\n            out.push(b[1], b[2], b[3]);\n        }\n    }\n    return out;\n}\n","// distance between 2 points\nfunction distance(p1, p2) {\n    return Math.sqrt(distanceSq(p1, p2));\n}\n// distance between 2 points squared\nfunction distanceSq(p1, p2) {\n    return Math.pow(p1[0] - p2[0], 2) + Math.pow(p1[1] - p2[1], 2);\n}\n// Sistance squared from a point p to the line segment vw\nfunction distanceToSegmentSq(p, v, w) {\n    const l2 = distanceSq(v, w);\n    if (l2 === 0) {\n        return distanceSq(p, v);\n    }\n    let t = ((p[0] - v[0]) * (w[0] - v[0]) + (p[1] - v[1]) * (w[1] - v[1])) / l2;\n    t = Math.max(0, Math.min(1, t));\n    return distanceSq(p, lerp(v, w, t));\n}\nfunction lerp(a, b, t) {\n    return [\n        a[0] + (b[0] - a[0]) * t,\n        a[1] + (b[1] - a[1]) * t,\n    ];\n}\n// Adapted from https://seant23.wordpress.com/2010/11/12/offset-bezier-curves/\nfunction flatness(points, offset) {\n    const p1 = points[offset + 0];\n    const p2 = points[offset + 1];\n    const p3 = points[offset + 2];\n    const p4 = points[offset + 3];\n    let ux = 3 * p2[0] - 2 * p1[0] - p4[0];\n    ux *= ux;\n    let uy = 3 * p2[1] - 2 * p1[1] - p4[1];\n    uy *= uy;\n    let vx = 3 * p3[0] - 2 * p4[0] - p1[0];\n    vx *= vx;\n    let vy = 3 * p3[1] - 2 * p4[1] - p1[1];\n    vy *= vy;\n    if (ux < vx) {\n        ux = vx;\n    }\n    if (uy < vy) {\n        uy = vy;\n    }\n    return ux + uy;\n}\nfunction getPointsOnBezierCurveWithSplitting(points, offset, tolerance, newPoints) {\n    const outPoints = newPoints || [];\n    if (flatness(points, offset) < tolerance) {\n        const p0 = points[offset + 0];\n        if (outPoints.length) {\n            const d = distance(outPoints[outPoints.length - 1], p0);\n            if (d > 1) {\n                outPoints.push(p0);\n            }\n        }\n        else {\n            outPoints.push(p0);\n        }\n        outPoints.push(points[offset + 3]);\n    }\n    else {\n        // subdivide\n        const t = .5;\n        const p1 = points[offset + 0];\n        const p2 = points[offset + 1];\n        const p3 = points[offset + 2];\n        const p4 = points[offset + 3];\n        const q1 = lerp(p1, p2, t);\n        const q2 = lerp(p2, p3, t);\n        const q3 = lerp(p3, p4, t);\n        const r1 = lerp(q1, q2, t);\n        const r2 = lerp(q2, q3, t);\n        const red = lerp(r1, r2, t);\n        getPointsOnBezierCurveWithSplitting([p1, q1, r1, red], 0, tolerance, outPoints);\n        getPointsOnBezierCurveWithSplitting([red, r2, q3, p4], 0, tolerance, outPoints);\n    }\n    return outPoints;\n}\nexport function simplify(points, distance) {\n    return simplifyPoints(points, 0, points.length, distance);\n}\n// RamerDouglasPeucker algorithm\n// https://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm\nfunction simplifyPoints(points, start, end, epsilon, newPoints) {\n    const outPoints = newPoints || [];\n    // find the most distance point from the endpoints\n    const s = points[start];\n    const e = points[end - 1];\n    let maxDistSq = 0;\n    let maxNdx = 1;\n    for (let i = start + 1; i < end - 1; ++i) {\n        const distSq = distanceToSegmentSq(points[i], s, e);\n        if (distSq > maxDistSq) {\n            maxDistSq = distSq;\n            maxNdx = i;\n        }\n    }\n    // if that point is too far, split\n    if (Math.sqrt(maxDistSq) > epsilon) {\n        simplifyPoints(points, start, maxNdx + 1, epsilon, outPoints);\n        simplifyPoints(points, maxNdx, end, epsilon, outPoints);\n    }\n    else {\n        if (!outPoints.length) {\n            outPoints.push(s);\n        }\n        outPoints.push(e);\n    }\n    return outPoints;\n}\nexport function pointsOnBezierCurves(points, tolerance = 0.15, distance) {\n    const newPoints = [];\n    const numSegments = (points.length - 1) / 3;\n    for (let i = 0; i < numSegments; i++) {\n        const offset = i * 3;\n        getPointsOnBezierCurveWithSplitting(points, offset, tolerance, newPoints);\n    }\n    if (distance && distance > 0) {\n        return simplifyPoints(newPoints, 0, newPoints.length, distance);\n    }\n    return newPoints;\n}\n","import { line, solidFillPolygon, patternFillPolygons, rectangle, ellipseWithParams, generateEllipseParams, linearPath, arc, patternFillArc, curve, svgPath } from './renderer.js';\nimport { randomSeed } from './math.js';\nimport { curveToBezier } from 'points-on-curve/lib/curve-to-bezier.js';\nimport { pointsOnBezierCurves } from 'points-on-curve';\nimport { pointsOnPath } from 'points-on-path';\nconst NOS = 'none';\nexport class RoughGenerator {\n    constructor(config) {\n        this.defaultOptions = {\n            maxRandomnessOffset: 2,\n            roughness: 1,\n            bowing: 1,\n            stroke: '#000',\n            strokeWidth: 1,\n            curveTightness: 0,\n            curveFitting: 0.95,\n            curveStepCount: 9,\n            fillStyle: 'hachure',\n            fillWeight: -1,\n            hachureAngle: -41,\n            hachureGap: -1,\n            dashOffset: -1,\n            dashGap: -1,\n            zigzagOffset: -1,\n            seed: 0,\n            disableMultiStroke: false,\n            disableMultiStrokeFill: false,\n            preserveVertices: false,\n            fillShapeRoughnessGain: 0.8,\n        };\n        this.config = config || {};\n        if (this.config.options) {\n            this.defaultOptions = this._o(this.config.options);\n        }\n    }\n    static newSeed() {\n        return randomSeed();\n    }\n    _o(options) {\n        return options ? Object.assign({}, this.defaultOptions, options) : this.defaultOptions;\n    }\n    _d(shape, sets, options) {\n        return { shape, sets: sets || [], options: options || this.defaultOptions };\n    }\n    line(x1, y1, x2, y2, options) {\n        const o = this._o(options);\n        return this._d('line', [line(x1, y1, x2, y2, o)], o);\n    }\n    rectangle(x, y, width, height, options) {\n        const o = this._o(options);\n        const paths = [];\n        const outline = rectangle(x, y, width, height, o);\n        if (o.fill) {\n            const points = [[x, y], [x + width, y], [x + width, y + height], [x, y + height]];\n            if (o.fillStyle === 'solid') {\n                paths.push(solidFillPolygon([points], o));\n            }\n            else {\n                paths.push(patternFillPolygons([points], o));\n            }\n        }\n        if (o.stroke !== NOS) {\n            paths.push(outline);\n        }\n        return this._d('rectangle', paths, o);\n    }\n    ellipse(x, y, width, height, options) {\n        const o = this._o(options);\n        const paths = [];\n        const ellipseParams = generateEllipseParams(width, height, o);\n        const ellipseResponse = ellipseWithParams(x, y, o, ellipseParams);\n        if (o.fill) {\n            if (o.fillStyle === 'solid') {\n                const shape = ellipseWithParams(x, y, o, ellipseParams).opset;\n                shape.type = 'fillPath';\n                paths.push(shape);\n            }\n            else {\n                paths.push(patternFillPolygons([ellipseResponse.estimatedPoints], o));\n            }\n        }\n        if (o.stroke !== NOS) {\n            paths.push(ellipseResponse.opset);\n        }\n        return this._d('ellipse', paths, o);\n    }\n    circle(x, y, diameter, options) {\n        const ret = this.ellipse(x, y, diameter, diameter, options);\n        ret.shape = 'circle';\n        return ret;\n    }\n    linearPath(points, options) {\n        const o = this._o(options);\n        return this._d('linearPath', [linearPath(points, false, o)], o);\n    }\n    arc(x, y, width, height, start, stop, closed = false, options) {\n        const o = this._o(options);\n        const paths = [];\n        const outline = arc(x, y, width, height, start, stop, closed, true, o);\n        if (closed && o.fill) {\n            if (o.fillStyle === 'solid') {\n                const fillOptions = Object.assign({}, o);\n                fillOptions.disableMultiStroke = true;\n                const shape = arc(x, y, width, height, start, stop, true, false, fillOptions);\n                shape.type = 'fillPath';\n                paths.push(shape);\n            }\n            else {\n                paths.push(patternFillArc(x, y, width, height, start, stop, o));\n            }\n        }\n        if (o.stroke !== NOS) {\n            paths.push(outline);\n        }\n        return this._d('arc', paths, o);\n    }\n    curve(points, options) {\n        const o = this._o(options);\n        const paths = [];\n        const outline = curve(points, o);\n        if (o.fill && o.fill !== NOS) {\n            if (o.fillStyle === 'solid') {\n                const fillShape = curve(points, Object.assign(Object.assign({}, o), { disableMultiStroke: true, roughness: o.roughness ? (o.roughness + o.fillShapeRoughnessGain) : 0 }));\n                paths.push({\n                    type: 'fillPath',\n                    ops: this._mergedShape(fillShape.ops),\n                });\n            }\n            else {\n                const polyPoints = [];\n                const inputPoints = points;\n                if (inputPoints.length) {\n                    const p1 = inputPoints[0];\n                    const pointsList = (typeof p1[0] === 'number') ? [inputPoints] : inputPoints;\n                    for (const points of pointsList) {\n                        if (points.length < 3) {\n                            polyPoints.push(...points);\n                        }\n                        else if (points.length === 3) {\n                            polyPoints.push(...pointsOnBezierCurves(curveToBezier([\n                                points[0],\n                                points[0],\n                                points[1],\n                                points[2],\n                            ]), 10, (1 + o.roughness) / 2));\n                        }\n                        else {\n                            polyPoints.push(...pointsOnBezierCurves(curveToBezier(points), 10, (1 + o.roughness) / 2));\n                        }\n                    }\n                }\n                if (polyPoints.length) {\n                    paths.push(patternFillPolygons([polyPoints], o));\n                }\n            }\n        }\n        if (o.stroke !== NOS) {\n            paths.push(outline);\n        }\n        return this._d('curve', paths, o);\n    }\n    polygon(points, options) {\n        const o = this._o(options);\n        const paths = [];\n        const outline = linearPath(points, true, o);\n        if (o.fill) {\n            if (o.fillStyle === 'solid') {\n                paths.push(solidFillPolygon([points], o));\n            }\n            else {\n                paths.push(patternFillPolygons([points], o));\n            }\n        }\n        if (o.stroke !== NOS) {\n            paths.push(outline);\n        }\n        return this._d('polygon', paths, o);\n    }\n    path(d, options) {\n        const o = this._o(options);\n        const paths = [];\n        if (!d) {\n            return this._d('path', paths, o);\n        }\n        d = (d || '').replace(/\\n/g, ' ').replace(/(-\\s)/g, '-').replace('/(\\s\\s)/g', ' ');\n        const hasFill = o.fill && o.fill !== 'transparent' && o.fill !== NOS;\n        const hasStroke = o.stroke !== NOS;\n        const simplified = !!(o.simplification && (o.simplification < 1));\n        const distance = simplified ? (4 - 4 * (o.simplification || 1)) : ((1 + o.roughness) / 2);\n        const sets = pointsOnPath(d, 1, distance);\n        const shape = svgPath(d, o);\n        if (hasFill) {\n            if (o.fillStyle === 'solid') {\n                if (sets.length === 1) {\n                    const fillShape = svgPath(d, Object.assign(Object.assign({}, o), { disableMultiStroke: true, roughness: o.roughness ? (o.roughness + o.fillShapeRoughnessGain) : 0 }));\n                    paths.push({\n                        type: 'fillPath',\n                        ops: this._mergedShape(fillShape.ops),\n                    });\n                }\n                else {\n                    paths.push(solidFillPolygon(sets, o));\n                }\n            }\n            else {\n                paths.push(patternFillPolygons(sets, o));\n            }\n        }\n        if (hasStroke) {\n            if (simplified) {\n                sets.forEach((set) => {\n                    paths.push(linearPath(set, false, o));\n                });\n            }\n            else {\n                paths.push(shape);\n            }\n        }\n        return this._d('path', paths, o);\n    }\n    opsToPath(drawing, fixedDecimals) {\n        let path = '';\n        for (const item of drawing.ops) {\n            const data = ((typeof fixedDecimals === 'number') && fixedDecimals >= 0) ? (item.data.map((d) => +d.toFixed(fixedDecimals))) : item.data;\n            switch (item.op) {\n                case 'move':\n                    path += `M${data[0]} ${data[1]} `;\n                    break;\n                case 'bcurveTo':\n                    path += `C${data[0]} ${data[1]}, ${data[2]} ${data[3]}, ${data[4]} ${data[5]} `;\n                    break;\n                case 'lineTo':\n                    path += `L${data[0]} ${data[1]} `;\n                    break;\n            }\n        }\n        return path.trim();\n    }\n    toPaths(drawable) {\n        const sets = drawable.sets || [];\n        const o = drawable.options || this.defaultOptions;\n        const paths = [];\n        for (const drawing of sets) {\n            let path = null;\n            switch (drawing.type) {\n                case 'path':\n                    path = {\n                        d: this.opsToPath(drawing),\n                        stroke: o.stroke,\n                        strokeWidth: o.strokeWidth,\n                        fill: NOS,\n                    };\n                    break;\n                case 'fillPath':\n                    path = {\n                        d: this.opsToPath(drawing),\n                        stroke: NOS,\n                        strokeWidth: 0,\n                        fill: o.fill || NOS,\n                    };\n                    break;\n                case 'fillSketch':\n                    path = this.fillSketch(drawing, o);\n                    break;\n            }\n            if (path) {\n                paths.push(path);\n            }\n        }\n        return paths;\n    }\n    fillSketch(drawing, o) {\n        let fweight = o.fillWeight;\n        if (fweight < 0) {\n            fweight = o.strokeWidth / 2;\n        }\n        return {\n            d: this.opsToPath(drawing),\n            stroke: o.fill || NOS,\n            strokeWidth: fweight,\n            fill: NOS,\n        };\n    }\n    _mergedShape(input) {\n        return input.filter((d, i) => {\n            if (i === 0) {\n                return true;\n            }\n            if (d.op === 'move') {\n                return false;\n            }\n            return true;\n        });\n    }\n}\n","import { pointsOnBezierCurves, simplify } from 'points-on-curve';\nimport { parsePath, absolutize, normalize } from 'path-data-parser';\nexport function pointsOnPath(path, tolerance, distance) {\n    const segments = parsePath(path);\n    const normalized = normalize(absolutize(segments));\n    const sets = [];\n    let currentPoints = [];\n    let start = [0, 0];\n    let pendingCurve = [];\n    const appendPendingCurve = () => {\n        if (pendingCurve.length >= 4) {\n            currentPoints.push(...pointsOnBezierCurves(pendingCurve, tolerance));\n        }\n        pendingCurve = [];\n    };\n    const appendPendingPoints = () => {\n        appendPendingCurve();\n        if (currentPoints.length) {\n            sets.push(currentPoints);\n            currentPoints = [];\n        }\n    };\n    for (const { key, data } of normalized) {\n        switch (key) {\n            case 'M':\n                appendPendingPoints();\n                start = [data[0], data[1]];\n                currentPoints.push(start);\n                break;\n            case 'L':\n                appendPendingCurve();\n                currentPoints.push([data[0], data[1]]);\n                break;\n            case 'C':\n                if (!pendingCurve.length) {\n                    const lastPoint = currentPoints.length ? currentPoints[currentPoints.length - 1] : start;\n                    pendingCurve.push([lastPoint[0], lastPoint[1]]);\n                }\n                pendingCurve.push([data[0], data[1]]);\n                pendingCurve.push([data[2], data[3]]);\n                pendingCurve.push([data[4], data[5]]);\n                break;\n            case 'Z':\n                appendPendingCurve();\n                currentPoints.push([start[0], start[1]]);\n                break;\n        }\n    }\n    appendPendingPoints();\n    if (!distance) {\n        return sets;\n    }\n    const out = [];\n    for (const set of sets) {\n        const simplifiedSet = simplify(set, distance);\n        if (simplifiedSet.length) {\n            out.push(simplifiedSet);\n        }\n    }\n    return out;\n}\n","import { RoughGenerator } from './generator';\nexport class RoughCanvas {\n    constructor(canvas, config) {\n        this.canvas = canvas;\n        this.ctx = this.canvas.getContext('2d');\n        this.gen = new RoughGenerator(config);\n    }\n    draw(drawable) {\n        const sets = drawable.sets || [];\n        const o = drawable.options || this.getDefaultOptions();\n        const ctx = this.ctx;\n        const precision = drawable.options.fixedDecimalPlaceDigits;\n        for (const drawing of sets) {\n            switch (drawing.type) {\n                case 'path':\n                    ctx.save();\n                    ctx.strokeStyle = o.stroke === 'none' ? 'transparent' : o.stroke;\n                    ctx.lineWidth = o.strokeWidth;\n                    if (o.strokeLineDash) {\n                        ctx.setLineDash(o.strokeLineDash);\n                    }\n                    if (o.strokeLineDashOffset) {\n                        ctx.lineDashOffset = o.strokeLineDashOffset;\n                    }\n                    this._drawToContext(ctx, drawing, precision);\n                    ctx.restore();\n                    break;\n                case 'fillPath': {\n                    ctx.save();\n                    ctx.fillStyle = o.fill || '';\n                    const fillRule = (drawable.shape === 'curve' || drawable.shape === 'polygon' || drawable.shape === 'path') ? 'evenodd' : 'nonzero';\n                    this._drawToContext(ctx, drawing, precision, fillRule);\n                    ctx.restore();\n                    break;\n                }\n                case 'fillSketch':\n                    this.fillSketch(ctx, drawing, o);\n                    break;\n            }\n        }\n    }\n    fillSketch(ctx, drawing, o) {\n        let fweight = o.fillWeight;\n        if (fweight < 0) {\n            fweight = o.strokeWidth / 2;\n        }\n        ctx.save();\n        if (o.fillLineDash) {\n            ctx.setLineDash(o.fillLineDash);\n        }\n        if (o.fillLineDashOffset) {\n            ctx.lineDashOffset = o.fillLineDashOffset;\n        }\n        ctx.strokeStyle = o.fill || '';\n        ctx.lineWidth = fweight;\n        this._drawToContext(ctx, drawing, o.fixedDecimalPlaceDigits);\n        ctx.restore();\n    }\n    _drawToContext(ctx, drawing, fixedDecimals, rule = 'nonzero') {\n        ctx.beginPath();\n        for (const item of drawing.ops) {\n            const data = ((typeof fixedDecimals === 'number') && fixedDecimals >= 0) ? (item.data.map((d) => +d.toFixed(fixedDecimals))) : item.data;\n            switch (item.op) {\n                case 'move':\n                    ctx.moveTo(data[0], data[1]);\n                    break;\n                case 'bcurveTo':\n                    ctx.bezierCurveTo(data[0], data[1], data[2], data[3], data[4], data[5]);\n                    break;\n                case 'lineTo':\n                    ctx.lineTo(data[0], data[1]);\n                    break;\n            }\n        }\n        if (drawing.type === 'fillPath') {\n            ctx.fill(rule);\n        }\n        else {\n            ctx.stroke();\n        }\n    }\n    get generator() {\n        return this.gen;\n    }\n    getDefaultOptions() {\n        return this.gen.defaultOptions;\n    }\n    line(x1, y1, x2, y2, options) {\n        const d = this.gen.line(x1, y1, x2, y2, options);\n        this.draw(d);\n        return d;\n    }\n    rectangle(x, y, width, height, options) {\n        const d = this.gen.rectangle(x, y, width, height, options);\n        this.draw(d);\n        return d;\n    }\n    ellipse(x, y, width, height, options) {\n        const d = this.gen.ellipse(x, y, width, height, options);\n        this.draw(d);\n        return d;\n    }\n    circle(x, y, diameter, options) {\n        const d = this.gen.circle(x, y, diameter, options);\n        this.draw(d);\n        return d;\n    }\n    linearPath(points, options) {\n        const d = this.gen.linearPath(points, options);\n        this.draw(d);\n        return d;\n    }\n    polygon(points, options) {\n        const d = this.gen.polygon(points, options);\n        this.draw(d);\n        return d;\n    }\n    arc(x, y, width, height, start, stop, closed = false, options) {\n        const d = this.gen.arc(x, y, width, height, start, stop, closed, options);\n        this.draw(d);\n        return d;\n    }\n    curve(points, options) {\n        const d = this.gen.curve(points, options);\n        this.draw(d);\n        return d;\n    }\n    path(d, options) {\n        const drawing = this.gen.path(d, options);\n        this.draw(drawing);\n        return drawing;\n    }\n}\n","export const SVGNS = 'http://www.w3.org/2000/svg';\n","import { SVGNS } from './core';\nimport { RoughGenerator } from './generator';\nexport class RoughSVG {\n    constructor(svg, config) {\n        this.svg = svg;\n        this.gen = new RoughGenerator(config);\n    }\n    draw(drawable) {\n        const sets = drawable.sets || [];\n        const o = drawable.options || this.getDefaultOptions();\n        const doc = this.svg.ownerDocument || window.document;\n        const g = doc.createElementNS(SVGNS, 'g');\n        const precision = drawable.options.fixedDecimalPlaceDigits;\n        for (const drawing of sets) {\n            let path = null;\n            switch (drawing.type) {\n                case 'path': {\n                    path = doc.createElementNS(SVGNS, 'path');\n                    path.setAttribute('d', this.opsToPath(drawing, precision));\n                    path.setAttribute('stroke', o.stroke);\n                    path.setAttribute('stroke-width', o.strokeWidth + '');\n                    path.setAttribute('fill', 'none');\n                    if (o.strokeLineDash) {\n                        path.setAttribute('stroke-dasharray', o.strokeLineDash.join(' ').trim());\n                    }\n                    if (o.strokeLineDashOffset) {\n                        path.setAttribute('stroke-dashoffset', `${o.strokeLineDashOffset}`);\n                    }\n                    break;\n                }\n                case 'fillPath': {\n                    path = doc.createElementNS(SVGNS, 'path');\n                    path.setAttribute('d', this.opsToPath(drawing, precision));\n                    path.setAttribute('stroke', 'none');\n                    path.setAttribute('stroke-width', '0');\n                    path.setAttribute('fill', o.fill || '');\n                    if (drawable.shape === 'curve' || drawable.shape === 'polygon') {\n                        path.setAttribute('fill-rule', 'evenodd');\n                    }\n                    break;\n                }\n                case 'fillSketch': {\n                    path = this.fillSketch(doc, drawing, o);\n                    break;\n                }\n            }\n            if (path) {\n                g.appendChild(path);\n            }\n        }\n        return g;\n    }\n    fillSketch(doc, drawing, o) {\n        let fweight = o.fillWeight;\n        if (fweight < 0) {\n            fweight = o.strokeWidth / 2;\n        }\n        const path = doc.createElementNS(SVGNS, 'path');\n        path.setAttribute('d', this.opsToPath(drawing, o.fixedDecimalPlaceDigits));\n        path.setAttribute('stroke', o.fill || '');\n        path.setAttribute('stroke-width', fweight + '');\n        path.setAttribute('fill', 'none');\n        if (o.fillLineDash) {\n            path.setAttribute('stroke-dasharray', o.fillLineDash.join(' ').trim());\n        }\n        if (o.fillLineDashOffset) {\n            path.setAttribute('stroke-dashoffset', `${o.fillLineDashOffset}`);\n        }\n        return path;\n    }\n    get generator() {\n        return this.gen;\n    }\n    getDefaultOptions() {\n        return this.gen.defaultOptions;\n    }\n    opsToPath(drawing, fixedDecimalPlaceDigits) {\n        return this.gen.opsToPath(drawing, fixedDecimalPlaceDigits);\n    }\n    line(x1, y1, x2, y2, options) {\n        const d = this.gen.line(x1, y1, x2, y2, options);\n        return this.draw(d);\n    }\n    rectangle(x, y, width, height, options) {\n        const d = this.gen.rectangle(x, y, width, height, options);\n        return this.draw(d);\n    }\n    ellipse(x, y, width, height, options) {\n        const d = this.gen.ellipse(x, y, width, height, options);\n        return this.draw(d);\n    }\n    circle(x, y, diameter, options) {\n        const d = this.gen.circle(x, y, diameter, options);\n        return this.draw(d);\n    }\n    linearPath(points, options) {\n        const d = this.gen.linearPath(points, options);\n        return this.draw(d);\n    }\n    polygon(points, options) {\n        const d = this.gen.polygon(points, options);\n        return this.draw(d);\n    }\n    arc(x, y, width, height, start, stop, closed = false, options) {\n        const d = this.gen.arc(x, y, width, height, start, stop, closed, options);\n        return this.draw(d);\n    }\n    curve(points, options) {\n        const d = this.gen.curve(points, options);\n        return this.draw(d);\n    }\n    path(d, options) {\n        const drawing = this.gen.path(d, options);\n        return this.draw(drawing);\n    }\n}\n","import { RoughCanvas } from './canvas';\nimport { RoughGenerator } from './generator';\nimport { RoughSVG } from './svg';\nexport default {\n    canvas(canvas, config) {\n        return new RoughCanvas(canvas, config);\n    },\n    svg(svg, config) {\n        return new RoughSVG(svg, config);\n    },\n    generator(config) {\n        return new RoughGenerator(config);\n    },\n    newSeed() {\n        return RoughGenerator.newSeed();\n    },\n};\n","import type { RenderingPlugin, RenderingPluginContext } from '@antv/g-lite';\n// @see https://github.com/rough-stuff/rough/issues/145\nimport type { RoughCanvas } from 'roughjs/bin/canvas';\nimport rough from 'roughjs/bin/rough';\n\nexport class RoughRendererPlugin implements RenderingPlugin {\n  static tag = 'RoughCanvasRenderer';\n\n  apply(context: RenderingPluginContext) {\n    const { config, contextService, renderingService } = context;\n    renderingService.hooks.init.tap(RoughRendererPlugin.tag, () => {\n      /**\n       * disable dirtycheck & dirty rectangle rendering\n       */\n      config.renderer.getConfig().enableDirtyCheck = false;\n      config.renderer.getConfig().enableDirtyRectangleRendering = false;\n\n      const context = contextService.getContext() as {\n        roughCanvas: RoughCanvas;\n      };\n      // @see https://github.com/rough-stuff/rough/wiki#roughcanvas-canvaselement--config\n      context.roughCanvas = rough.canvas(\n        contextService.getDomElement() as HTMLCanvasElement,\n      );\n    });\n\n    renderingService.hooks.destroy.tap(RoughRendererPlugin.tag, () => {});\n  }\n}\n","import { AbstractRendererPlugin, Shape } from '@antv/g-lite';\nimport {\n  CircleRenderer as CircleRoughRenderer,\n  EllipseRenderer as EllipseRoughRenderer,\n  LineRenderer as LineRoughRenderer,\n  PathRenderer as PathRoughRenderer,\n  PolygonRenderer as PolygonRoughRenderer,\n  PolylineRenderer as PolylineRoughRenderer,\n  RectRenderer as RectRoughRenderer,\n} from './renderers';\nimport { RoughRendererPlugin } from './RoughRendererPlugin';\nimport { type RoughCanvasRendererPluginOptions } from './util';\n\nexport class Plugin extends AbstractRendererPlugin {\n  name = 'rough-canvas-renderer';\n\n  constructor(private options?: Partial<RoughCanvasRendererPluginOptions>) {\n    super();\n  }\n\n  init(): void {\n    // @ts-ignore\n    const { defaultStyleRendererFactory } = this.context;\n    const options = this.options || {};\n\n    // @ts-ignore\n    this.context.styleRendererFactory = {\n      [Shape.CIRCLE]: new CircleRoughRenderer({\n        defaultStyleRendererFactory: defaultStyleRendererFactory[Shape.CIRCLE],\n        ...options,\n      }),\n      [Shape.ELLIPSE]: new EllipseRoughRenderer({\n        defaultStyleRendererFactory: defaultStyleRendererFactory[Shape.ELLIPSE],\n        ...options,\n      }),\n      [Shape.RECT]: new RectRoughRenderer({\n        defaultStyleRendererFactory: defaultStyleRendererFactory[Shape.RECT],\n        ...options,\n      }),\n      [Shape.IMAGE]: defaultStyleRendererFactory[Shape.IMAGE],\n      [Shape.TEXT]: defaultStyleRendererFactory[Shape.TEXT],\n      [Shape.LINE]: new LineRoughRenderer({\n        defaultStyleRendererFactory: defaultStyleRendererFactory[Shape.LINE],\n        ...options,\n      }),\n      [Shape.POLYLINE]: new PolylineRoughRenderer({\n        defaultStyleRendererFactory:\n          defaultStyleRendererFactory[Shape.POLYLINE],\n        ...options,\n      }),\n      [Shape.POLYGON]: new PolygonRoughRenderer({\n        defaultStyleRendererFactory: defaultStyleRendererFactory[Shape.POLYGON],\n        ...options,\n      }),\n      [Shape.PATH]: new PathRoughRenderer({\n        defaultStyleRendererFactory: defaultStyleRendererFactory[Shape.PATH],\n        ...options,\n      }),\n      [Shape.GROUP]: undefined,\n      [Shape.HTML]: undefined,\n      [Shape.MESH]: undefined,\n    };\n\n    this.addRenderingPlugin(new RoughRendererPlugin());\n  }\n  destroy(): void {\n    // @ts-ignore\n    this.context.styleRendererFactory =\n      this.context.defaultStyleRendererFactory;\n\n    this.removeAllRenderingPlugins();\n  }\n}\n","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nfunction _callSuper(t, o, e) {\n  return o = getPrototypeOf(o), possibleConstructorReturn(t, isNativeReflectConstruct() ? Reflect.construct(o, e || [], getPrototypeOf(t).constructor) : o.apply(t, e));\n}\nexport { _callSuper as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inherits(t, e) {\n  if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\");\n  t.prototype = Object.create(e && e.prototype, {\n    constructor: {\n      value: t,\n      writable: !0,\n      configurable: !0\n    }\n  }), Object.defineProperty(t, \"prototype\", {\n    writable: !1\n  }), e && setPrototypeOf(t, e);\n}\nexport { _inherits as default };"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","toPropertyKey","t","i","r","e","toPrimitive","call","TypeError","String","Number","_defineProperty","Object","defineProperty","value","enumerable","configurable","writable","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","push","apply","_objectSpread2","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","_classCallCheck","a","n","_defineProperties","key","_createClass","_getPrototypeOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_isNativeReflectConstruct","Boolean","valueOf","Reflect","construct","_possibleConstructorReturn","ReferenceError","assertThisInitialized","_setPrototypeOf","mergeOpacity","color","opacity","colorString","isCSSRGB","g","b","alpha","concat","generateRoughOptions","object","_ref","parsedStyle","fill","stroke","_ref$fillOpacity","fillOpacity","_ref$strokeOpacity","strokeOpacity","_ref$lineWidth","lineWidth","fillStyle","fillWeight","hachureAngle","hachureGap","curveStepCount","curveFitting","lineDash","lineDashOffset","fillLineDash","fillLineDashOffset","disableMultiStroke","disableMultiStrokeFill","simplification","dashOffset","dashGap","zigzagOffset","preserveVertices","options","bowing","roughness","seed","entity","undefined","strokeWidth","strokeLineDash","strokeLineDashOffset","isRoughRendering","roughRendering","element","CircleRenderer","this","context","_parsedStyle$cx","cx","_parsedStyle$cy","cy","roughCanvas","circle","defaultStyleRendererFactory","render","EllipseRenderer","ellipse","rx","ry","LineRenderer","_parsedStyle$x","x1","_parsedStyle$y","y1","_parsedStyle$x2","x2","_parsedStyle$y2","y2","line","PathRenderer","path","translatePathToString","d","absolutePath","_arrayLikeToArray","Array","_slicedToArray","isArray","arrayWithHoles","l","u","f","next","done","iterableToArrayLimit","arrayLikeToArray","toString","slice","name","from","test","unsupportedIterableToArray","nonIterableRest","PolygonRenderer","polygon","points","map","_ref2","PolylineRenderer","linearPath","RectRenderer","x","y","rectangle","width","height","rotatePoints","center","degrees","angle","Math","PI","cos","sin","p","areSamePoints","p1","p2","hachureLines","polygons","hachureStepOffset","gap","max","polygonList","rotationCenter","lines","vertexArray","vertices","edges","ymin","min","ymax","islope","sort","e1","e2","abs","activeEdges","iteration","ix","splice","edge","s","ae","ae1","ae2","nexti","ne","round","straightHachureLines","rotateLines","polygonHachureLines","_a","skipOffset","randomizer","random","HachureFiller","helper","fillPolygons","_fillPolygons","type","ops","renderLines","doubleLineOps","lineLength","sqrt","pow","ZigZagFiller","assign","zigZagAngle","zigzagLines","dgx","dgy","HatchFiller","set","o2","set2","DotFiller","dotsOnLines","fweight","ro","count","ceil","offset","minY","el","DashedFiller","dashedLine","floor","startOffset","atan","lstart","lend","start","end","ZigZagLineFiller","zo","dz","middle","fillers","Random","imul","PARAMS","A","C","c","H","h","L","M","m","Q","q","S","T","V","v","Z","z","isType","token","parsePath","segments","tokens","match","substr","RegExp","$1","text","parseFloat","tokenize","mode","index","paramsCount","params","Error","numbeToken","data","absolutize","subx","suby","out","newdata","normalize","lastType","lcx","lcy","cx1","cy1","r1","r2","largeArcFlag","sweepFlag","arcToCubicCurves","curve","rotate","angleRad","recursive","f1","f2","r1Pow","r2Pow","k","asin","toFixed","df","f2old","x2old","y2old","c1","s1","c2","s2","tan","hx","hy","m1","m2","m3","m4","curves","r3","randOffset","_offsetOpt","randOffsetWithRange","_offset","generateEllipseParams","ellipseWithParams","opset","_doubleLine","close","len","inputPoints","pointsList","o1","_curveWithOffset","cloneOptionsAlterSeed","underlay","overlay","item","op","psq","increment","curveFitRandomness","ellipseParams","ap1","cp1","_computeEllipsePoints","_curve","ap2","estimatedPoints","arc","stop","closed","roughClosure","strt","stp","arcInc","_arc","svgPath","first","current","_bezierTo","solidFillPolygon","maxRandomnessOffset","patternFillPolygons","fillerName","getFiller","result","roughnessGain","filling","singleStroke","_line","move","lengthSq","halfOffset","divergePoint","midDispX","midDispY","randomHalf","randomFull","ps","closePoint","curveTightness","cachedVertArray","overlap","corePoints","allPoints","radOffset","endAngle","ros","iterations","clone","curveToBezier","pointsIn","distanceSq","distanceToSegmentSq","w","l2","lerp","getPointsOnBezierCurveWithSplitting","tolerance","newPoints","outPoints","p3","p4","ux","uy","vx","vy","flatness","p0","q1","q2","q3","red","simplify","distance","simplifyPoints","epsilon","maxDistSq","maxNdx","distSq","pointsOnBezierCurves","numSegments","NOS","RoughGenerator","config","defaultOptions","fillShapeRoughnessGain","_o","newSeed","_d","shape","sets","paths","outline","ellipseResponse","diameter","ret","fillOptions","patternFillArc","fillShape","_mergedShape","polyPoints","replace","hasFill","hasStroke","simplified","normalized","currentPoints","pendingCurve","appendPendingCurve","appendPendingPoints","lastPoint","simplifiedSet","pointsOnPath","opsToPath","drawing","fixedDecimals","trim","toPaths","drawable","fillSketch","input","RoughCanvas","canvas","ctx","getContext","gen","draw","getDefaultOptions","precision","fixedDecimalPlaceDigits","save","strokeStyle","setLineDash","_drawToContext","restore","rule","beginPath","moveTo","bezierCurveTo","lineTo","generator","SVGNS","RoughSVG","svg","doc","ownerDocument","window","document","createElementNS","setAttribute","join","appendChild","rough","RoughRendererPlugin","contextService","renderingService","hooks","init","tap","tag","renderer","getConfig","enableDirtyCheck","enableDirtyRectangleRendering","getDomElement","destroy","_AbstractRendererPlug","Plugin","_this","possibleConstructorReturn","isNativeReflectConstruct","create","_inherits","_this$context$styleRe","styleRendererFactory","Shape","CIRCLE","CircleRoughRenderer","_objectSpread","ELLIPSE","EllipseRoughRenderer","RECT","RectRoughRenderer","IMAGE","TEXT","LINE","LineRoughRenderer","POLYLINE","PolylineRoughRenderer","POLYGON","PolygonRoughRenderer","PATH","PathRoughRenderer","GROUP","HTML","MESH","addRenderingPlugin","removeAllRenderingPlugins","AbstractRendererPlugin"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,17,18,19,20,21,22,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,51,52]}