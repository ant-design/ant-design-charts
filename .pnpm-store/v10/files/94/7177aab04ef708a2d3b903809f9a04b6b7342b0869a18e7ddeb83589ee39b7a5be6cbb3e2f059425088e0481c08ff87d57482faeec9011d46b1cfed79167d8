{"version":3,"file":"index.esm.js","sources":["../../../node_modules/.pnpm/rbush@3.0.1/node_modules/rbush/rbush.js","../src/types.ts","../src/AbstractRenderer.ts","../src/shapes/AABB.ts","../src/shapes/Plane.ts","../src/shapes/Frustum.ts","../src/shapes/Point.ts","../src/shapes/Rectangle.ts","../src/utils/error.ts","../src/utils/math.ts","../src/camera/interfaces.ts","../src/camera/Camera.ts","../src/components/Cullable.ts","../src/components/Sortable.ts","../src/components/Transform.ts","../src/display-objects/constants.ts","../src/css/interfaces.ts","../../../node_modules/.pnpm/d3-color@3.1.0/node_modules/d3-color/src/define.js","../../../node_modules/.pnpm/d3-color@3.1.0/node_modules/d3-color/src/color.js","../src/utils/memoize.ts","../src/css/cssom/types.ts","../src/css/cssom/CSSStyleValue.ts","../src/css/cssom/CSSColorValue.ts","../src/css/cssom/CSSGradientValue.ts","../src/css/cssom/CSSKeywordValue.ts","../src/css/cssom/CSSNumericValue.ts","../src/css/cssom/CSSRGB.ts","../src/css/CSSStyleValuePool.ts","../src/utils/gradient.ts","../src/css/parser/gradient.ts","../src/css/parser/color.ts","../src/css/parser/dimension.ts","../src/css/parser/filter.ts","../src/css/parser/numeric.ts","../src/utils/path.ts","../src/css/parser/path.ts","../src/css/parser/points.ts","../src/css/parser/transform.ts","../src/css/parser/transform-origin.ts","../src/css/StyleValueRegistry.ts","../src/css/properties/CSSPropertyAngle.ts","../src/css/properties/CSSPropertyClipPath.ts","../src/css/properties/CSSPropertyColor.ts","../src/css/properties/CSSPropertyFilter.ts","../src/css/properties/CSSPropertyLengthOrPercentage.ts","../src/css/properties/CSSPropertyLengthOrPercentage12.ts","../src/css/properties/CSSPropertyLengthOrPercentage14.ts","../src/css/properties/CSSPropertyMarker.ts","../src/css/properties/CSSPropertyNumber.ts","../src/css/properties/CSSPropertyOffsetDistance.ts","../src/css/properties/CSSPropertyOpacity.ts","../src/css/properties/CSSPropertyPath.ts","../src/css/properties/CSSPropertyPoints.ts","../src/css/properties/CSSPropertyShadowBlur.ts","../src/css/properties/CSSPropertyText.ts","../src/css/properties/CSSPropertyTextTransform.ts","../src/utils/assert.ts","../src/utils/canvas.ts","../src/utils/dom.ts","../src/utils/event.ts","../src/utils/fragment.ts","../src/utils/pointer-events.ts","../src/utils/raf.ts","../src/utils/tapable/AsyncParallelHook.ts","../src/utils/tapable/AsyncSeriesWaterfallHook.ts","../src/utils/tapable/SyncHook.ts","../src/utils/tapable/SyncWaterfallHook.ts","../src/utils/text.ts","../src/utils/transform-mat4.ts","../src/css/properties/CSSPropertyTransform.ts","../src/css/properties/CSSPropertyTransformOrigin.ts","../src/css/properties/CSSPropertyZIndex.ts","../src/services/aabb/CircleUpdater.ts","../src/services/aabb/EllipseUpdater.ts","../src/services/aabb/LineUpdater.ts","../src/services/aabb/PathUpdater.ts","../src/services/aabb/PolylineUpdater.ts","../src/services/aabb/RectUpdater.ts","../src/services/aabb/TextUpdater.ts","../src/services/aabb/GroupUpdater.ts","../src/services/aabb/HTMLUpdater.ts","../src/dom/FederatedEvent.ts","../src/dom/FederatedMouseEvent.ts","../src/dom/FederatedPointerEvent.ts","../src/dom/FederatedWheelEvent.ts","../src/dom/CustomEvent.ts","../src/dom/EventTarget.ts","../src/dom/Node.ts","../src/services/EventService.ts","../src/services/OffscreenCanvasCreator.ts","../src/services/RenderingContext.ts","../src/services/RenderingService.ts","../src/services/SceneGraphSelector.ts","../src/dom/interfaces.ts","../src/dom/MutationEvent.ts","../src/services/SceneGraphService.ts","../src/utils/LRU.ts","../src/services/TextService.ts","../src/global-runtime.ts","../src/dom/Element.ts","../src/display-objects/DisplayObject.ts","../src/display-objects/Circle.ts","../src/display-objects/CustomElement.ts","../src/display-objects/Ellipse.ts","../src/display-objects/Fragment.ts","../src/display-objects/Group.ts","../src/display-objects/HTML.ts","../src/display-objects/Image.ts","../src/display-objects/Line.ts","../src/display-objects/Path.ts","../src/display-objects/Polygon.ts","../src/display-objects/Polyline.ts","../src/display-objects/Rect.ts","../src/display-objects/Text.ts","../src/dom/CustomElementRegistry.ts","../src/css/CSS.ts","../src/dom/Document.ts","../src/plugins/CullingPlugin.ts","../src/plugins/EventPlugin.ts","../src/plugins/FrustumCullingStrategy.ts","../src/plugins/PrepareRendererPlugin.ts","../src/Canvas.ts"],"sourcesContent":["(function (global, factory) {\ntypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\ntypeof define === 'function' && define.amd ? define(factory) :\n(global = global || self, global.RBush = factory());\n}(this, function () { 'use strict';\n\nfunction quickselect(arr, k, left, right, compare) {\n    quickselectStep(arr, k, left || 0, right || (arr.length - 1), compare || defaultCompare);\n}\n\nfunction quickselectStep(arr, k, left, right, compare) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            var n = right - left + 1;\n            var m = k - left + 1;\n            var z = Math.log(n);\n            var s = 0.5 * Math.exp(2 * z / 3);\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            quickselectStep(arr, k, newLeft, newRight, compare);\n        }\n\n        var t = arr[k];\n        var i = left;\n        var j = right;\n\n        swap(arr, left, k);\n        if (compare(arr[right], t) > 0) { swap(arr, left, right); }\n\n        while (i < j) {\n            swap(arr, i, j);\n            i++;\n            j--;\n            while (compare(arr[i], t) < 0) { i++; }\n            while (compare(arr[j], t) > 0) { j--; }\n        }\n\n        if (compare(arr[left], t) === 0) { swap(arr, left, j); }\n        else {\n            j++;\n            swap(arr, j, right);\n        }\n\n        if (j <= k) { left = j + 1; }\n        if (k <= j) { right = j - 1; }\n    }\n}\n\nfunction swap(arr, i, j) {\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n\nvar RBush = function RBush(maxEntries) {\n    if ( maxEntries === void 0 ) maxEntries = 9;\n\n    // max entries in a node is 9 by default; min node fill is 40% for best performance\n    this._maxEntries = Math.max(4, maxEntries);\n    this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4));\n    this.clear();\n};\n\nRBush.prototype.all = function all () {\n    return this._all(this.data, []);\n};\n\nRBush.prototype.search = function search (bbox) {\n    var node = this.data;\n    var result = [];\n\n    if (!intersects(bbox, node)) { return result; }\n\n    var toBBox = this.toBBox;\n    var nodesToSearch = [];\n\n    while (node) {\n        for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n            var childBBox = node.leaf ? toBBox(child) : child;\n\n            if (intersects(bbox, childBBox)) {\n                if (node.leaf) { result.push(child); }\n                else if (contains(bbox, childBBox)) { this._all(child, result); }\n                else { nodesToSearch.push(child); }\n            }\n        }\n        node = nodesToSearch.pop();\n    }\n\n    return result;\n};\n\nRBush.prototype.collides = function collides (bbox) {\n    var node = this.data;\n\n    if (!intersects(bbox, node)) { return false; }\n\n    var nodesToSearch = [];\n    while (node) {\n        for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n            var childBBox = node.leaf ? this.toBBox(child) : child;\n\n            if (intersects(bbox, childBBox)) {\n                if (node.leaf || contains(bbox, childBBox)) { return true; }\n                nodesToSearch.push(child);\n            }\n        }\n        node = nodesToSearch.pop();\n    }\n\n    return false;\n};\n\nRBush.prototype.load = function load (data) {\n    if (!(data && data.length)) { return this; }\n\n    if (data.length < this._minEntries) {\n        for (var i = 0; i < data.length; i++) {\n            this.insert(data[i]);\n        }\n        return this;\n    }\n\n    // recursively build the tree with the given data from scratch using OMT algorithm\n    var node = this._build(data.slice(), 0, data.length - 1, 0);\n\n    if (!this.data.children.length) {\n        // save as is if tree is empty\n        this.data = node;\n\n    } else if (this.data.height === node.height) {\n        // split root if trees have the same height\n        this._splitRoot(this.data, node);\n\n    } else {\n        if (this.data.height < node.height) {\n            // swap trees if inserted one is bigger\n            var tmpNode = this.data;\n            this.data = node;\n            node = tmpNode;\n        }\n\n        // insert the small tree into the large tree at appropriate level\n        this._insert(node, this.data.height - node.height - 1, true);\n    }\n\n    return this;\n};\n\nRBush.prototype.insert = function insert (item) {\n    if (item) { this._insert(item, this.data.height - 1); }\n    return this;\n};\n\nRBush.prototype.clear = function clear () {\n    this.data = createNode([]);\n    return this;\n};\n\nRBush.prototype.remove = function remove (item, equalsFn) {\n    if (!item) { return this; }\n\n    var node = this.data;\n    var bbox = this.toBBox(item);\n    var path = [];\n    var indexes = [];\n    var i, parent, goingUp;\n\n    // depth-first iterative tree traversal\n    while (node || path.length) {\n\n        if (!node) { // go up\n            node = path.pop();\n            parent = path[path.length - 1];\n            i = indexes.pop();\n            goingUp = true;\n        }\n\n        if (node.leaf) { // check current node\n            var index = findItem(item, node.children, equalsFn);\n\n            if (index !== -1) {\n                // item found, remove the item and condense tree upwards\n                node.children.splice(index, 1);\n                path.push(node);\n                this._condense(path);\n                return this;\n            }\n        }\n\n        if (!goingUp && !node.leaf && contains(node, bbox)) { // go down\n            path.push(node);\n            indexes.push(i);\n            i = 0;\n            parent = node;\n            node = node.children[0];\n\n        } else if (parent) { // go right\n            i++;\n            node = parent.children[i];\n            goingUp = false;\n\n        } else { node = null; } // nothing found\n    }\n\n    return this;\n};\n\nRBush.prototype.toBBox = function toBBox (item) { return item; };\n\nRBush.prototype.compareMinX = function compareMinX (a, b) { return a.minX - b.minX; };\nRBush.prototype.compareMinY = function compareMinY (a, b) { return a.minY - b.minY; };\n\nRBush.prototype.toJSON = function toJSON () { return this.data; };\n\nRBush.prototype.fromJSON = function fromJSON (data) {\n    this.data = data;\n    return this;\n};\n\nRBush.prototype._all = function _all (node, result) {\n    var nodesToSearch = [];\n    while (node) {\n        if (node.leaf) { result.push.apply(result, node.children); }\n        else { nodesToSearch.push.apply(nodesToSearch, node.children); }\n\n        node = nodesToSearch.pop();\n    }\n    return result;\n};\n\nRBush.prototype._build = function _build (items, left, right, height) {\n\n    var N = right - left + 1;\n    var M = this._maxEntries;\n    var node;\n\n    if (N <= M) {\n        // reached leaf level; return leaf\n        node = createNode(items.slice(left, right + 1));\n        calcBBox(node, this.toBBox);\n        return node;\n    }\n\n    if (!height) {\n        // target height of the bulk-loaded tree\n        height = Math.ceil(Math.log(N) / Math.log(M));\n\n        // target number of root entries to maximize storage utilization\n        M = Math.ceil(N / Math.pow(M, height - 1));\n    }\n\n    node = createNode([]);\n    node.leaf = false;\n    node.height = height;\n\n    // split the items into M mostly square tiles\n\n    var N2 = Math.ceil(N / M);\n    var N1 = N2 * Math.ceil(Math.sqrt(M));\n\n    multiSelect(items, left, right, N1, this.compareMinX);\n\n    for (var i = left; i <= right; i += N1) {\n\n        var right2 = Math.min(i + N1 - 1, right);\n\n        multiSelect(items, i, right2, N2, this.compareMinY);\n\n        for (var j = i; j <= right2; j += N2) {\n\n            var right3 = Math.min(j + N2 - 1, right2);\n\n            // pack each entry recursively\n            node.children.push(this._build(items, j, right3, height - 1));\n        }\n    }\n\n    calcBBox(node, this.toBBox);\n\n    return node;\n};\n\nRBush.prototype._chooseSubtree = function _chooseSubtree (bbox, node, level, path) {\n    while (true) {\n        path.push(node);\n\n        if (node.leaf || path.length - 1 === level) { break; }\n\n        var minArea = Infinity;\n        var minEnlargement = Infinity;\n        var targetNode = (void 0);\n\n        for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n            var area = bboxArea(child);\n            var enlargement = enlargedArea(bbox, child) - area;\n\n            // choose entry with the least area enlargement\n            if (enlargement < minEnlargement) {\n                minEnlargement = enlargement;\n                minArea = area < minArea ? area : minArea;\n                targetNode = child;\n\n            } else if (enlargement === minEnlargement) {\n                // otherwise choose one with the smallest area\n                if (area < minArea) {\n                    minArea = area;\n                    targetNode = child;\n                }\n            }\n        }\n\n        node = targetNode || node.children[0];\n    }\n\n    return node;\n};\n\nRBush.prototype._insert = function _insert (item, level, isNode) {\n    var bbox = isNode ? item : this.toBBox(item);\n    var insertPath = [];\n\n    // find the best node for accommodating the item, saving all nodes along the path too\n    var node = this._chooseSubtree(bbox, this.data, level, insertPath);\n\n    // put the item into the node\n    node.children.push(item);\n    extend(node, bbox);\n\n    // split on node overflow; propagate upwards if necessary\n    while (level >= 0) {\n        if (insertPath[level].children.length > this._maxEntries) {\n            this._split(insertPath, level);\n            level--;\n        } else { break; }\n    }\n\n    // adjust bboxes along the insertion path\n    this._adjustParentBBoxes(bbox, insertPath, level);\n};\n\n// split overflowed node into two\nRBush.prototype._split = function _split (insertPath, level) {\n    var node = insertPath[level];\n    var M = node.children.length;\n    var m = this._minEntries;\n\n    this._chooseSplitAxis(node, m, M);\n\n    var splitIndex = this._chooseSplitIndex(node, m, M);\n\n    var newNode = createNode(node.children.splice(splitIndex, node.children.length - splitIndex));\n    newNode.height = node.height;\n    newNode.leaf = node.leaf;\n\n    calcBBox(node, this.toBBox);\n    calcBBox(newNode, this.toBBox);\n\n    if (level) { insertPath[level - 1].children.push(newNode); }\n    else { this._splitRoot(node, newNode); }\n};\n\nRBush.prototype._splitRoot = function _splitRoot (node, newNode) {\n    // split root node\n    this.data = createNode([node, newNode]);\n    this.data.height = node.height + 1;\n    this.data.leaf = false;\n    calcBBox(this.data, this.toBBox);\n};\n\nRBush.prototype._chooseSplitIndex = function _chooseSplitIndex (node, m, M) {\n    var index;\n    var minOverlap = Infinity;\n    var minArea = Infinity;\n\n    for (var i = m; i <= M - m; i++) {\n        var bbox1 = distBBox(node, 0, i, this.toBBox);\n        var bbox2 = distBBox(node, i, M, this.toBBox);\n\n        var overlap = intersectionArea(bbox1, bbox2);\n        var area = bboxArea(bbox1) + bboxArea(bbox2);\n\n        // choose distribution with minimum overlap\n        if (overlap < minOverlap) {\n            minOverlap = overlap;\n            index = i;\n\n            minArea = area < minArea ? area : minArea;\n\n        } else if (overlap === minOverlap) {\n            // otherwise choose distribution with minimum area\n            if (area < minArea) {\n                minArea = area;\n                index = i;\n            }\n        }\n    }\n\n    return index || M - m;\n};\n\n// sorts node children by the best axis for split\nRBush.prototype._chooseSplitAxis = function _chooseSplitAxis (node, m, M) {\n    var compareMinX = node.leaf ? this.compareMinX : compareNodeMinX;\n    var compareMinY = node.leaf ? this.compareMinY : compareNodeMinY;\n    var xMargin = this._allDistMargin(node, m, M, compareMinX);\n    var yMargin = this._allDistMargin(node, m, M, compareMinY);\n\n    // if total distributions margin value is minimal for x, sort by minX,\n    // otherwise it's already sorted by minY\n    if (xMargin < yMargin) { node.children.sort(compareMinX); }\n};\n\n// total margin of all possible split distributions where each node is at least m full\nRBush.prototype._allDistMargin = function _allDistMargin (node, m, M, compare) {\n    node.children.sort(compare);\n\n    var toBBox = this.toBBox;\n    var leftBBox = distBBox(node, 0, m, toBBox);\n    var rightBBox = distBBox(node, M - m, M, toBBox);\n    var margin = bboxMargin(leftBBox) + bboxMargin(rightBBox);\n\n    for (var i = m; i < M - m; i++) {\n        var child = node.children[i];\n        extend(leftBBox, node.leaf ? toBBox(child) : child);\n        margin += bboxMargin(leftBBox);\n    }\n\n    for (var i$1 = M - m - 1; i$1 >= m; i$1--) {\n        var child$1 = node.children[i$1];\n        extend(rightBBox, node.leaf ? toBBox(child$1) : child$1);\n        margin += bboxMargin(rightBBox);\n    }\n\n    return margin;\n};\n\nRBush.prototype._adjustParentBBoxes = function _adjustParentBBoxes (bbox, path, level) {\n    // adjust bboxes along the given tree path\n    for (var i = level; i >= 0; i--) {\n        extend(path[i], bbox);\n    }\n};\n\nRBush.prototype._condense = function _condense (path) {\n    // go through the path, removing empty nodes and updating bboxes\n    for (var i = path.length - 1, siblings = (void 0); i >= 0; i--) {\n        if (path[i].children.length === 0) {\n            if (i > 0) {\n                siblings = path[i - 1].children;\n                siblings.splice(siblings.indexOf(path[i]), 1);\n\n            } else { this.clear(); }\n\n        } else { calcBBox(path[i], this.toBBox); }\n    }\n};\n\nfunction findItem(item, items, equalsFn) {\n    if (!equalsFn) { return items.indexOf(item); }\n\n    for (var i = 0; i < items.length; i++) {\n        if (equalsFn(item, items[i])) { return i; }\n    }\n    return -1;\n}\n\n// calculate node's bbox from bboxes of its children\nfunction calcBBox(node, toBBox) {\n    distBBox(node, 0, node.children.length, toBBox, node);\n}\n\n// min bounding rectangle of node children from k to p-1\nfunction distBBox(node, k, p, toBBox, destNode) {\n    if (!destNode) { destNode = createNode(null); }\n    destNode.minX = Infinity;\n    destNode.minY = Infinity;\n    destNode.maxX = -Infinity;\n    destNode.maxY = -Infinity;\n\n    for (var i = k; i < p; i++) {\n        var child = node.children[i];\n        extend(destNode, node.leaf ? toBBox(child) : child);\n    }\n\n    return destNode;\n}\n\nfunction extend(a, b) {\n    a.minX = Math.min(a.minX, b.minX);\n    a.minY = Math.min(a.minY, b.minY);\n    a.maxX = Math.max(a.maxX, b.maxX);\n    a.maxY = Math.max(a.maxY, b.maxY);\n    return a;\n}\n\nfunction compareNodeMinX(a, b) { return a.minX - b.minX; }\nfunction compareNodeMinY(a, b) { return a.minY - b.minY; }\n\nfunction bboxArea(a)   { return (a.maxX - a.minX) * (a.maxY - a.minY); }\nfunction bboxMargin(a) { return (a.maxX - a.minX) + (a.maxY - a.minY); }\n\nfunction enlargedArea(a, b) {\n    return (Math.max(b.maxX, a.maxX) - Math.min(b.minX, a.minX)) *\n           (Math.max(b.maxY, a.maxY) - Math.min(b.minY, a.minY));\n}\n\nfunction intersectionArea(a, b) {\n    var minX = Math.max(a.minX, b.minX);\n    var minY = Math.max(a.minY, b.minY);\n    var maxX = Math.min(a.maxX, b.maxX);\n    var maxY = Math.min(a.maxY, b.maxY);\n\n    return Math.max(0, maxX - minX) *\n           Math.max(0, maxY - minY);\n}\n\nfunction contains(a, b) {\n    return a.minX <= b.minX &&\n           a.minY <= b.minY &&\n           b.maxX <= a.maxX &&\n           b.maxY <= a.maxY;\n}\n\nfunction intersects(a, b) {\n    return b.minX <= a.maxX &&\n           b.minY <= a.maxY &&\n           b.maxX >= a.minX &&\n           b.maxY >= a.minY;\n}\n\nfunction createNode(children) {\n    return {\n        children: children,\n        height: 1,\n        leaf: true,\n        minX: Infinity,\n        minY: Infinity,\n        maxX: -Infinity,\n        maxY: -Infinity\n    };\n}\n\n// sort an array so that items come in groups of n unsorted items, with groups sorted between each other;\n// combines selection algorithm with binary divide & conquer approach\n\nfunction multiSelect(arr, left, right, n, compare) {\n    var stack = [left, right];\n\n    while (stack.length) {\n        right = stack.pop();\n        left = stack.pop();\n\n        if (right - left <= n) { continue; }\n\n        var mid = left + Math.ceil((right - left) / n / 2) * n;\n        quickselect(arr, mid, left, right, compare);\n\n        stack.push(left, mid, mid, right);\n    }\n}\n\nreturn RBush;\n\n}));\n","import type { IRenderer } from './AbstractRenderer';\nimport type {\n  CSSGlobalKeywords,\n  CSSGradientValue,\n  CSSRGB,\n  CSSUnitValue,\n} from './css';\nimport type {\n  ParsedFilterStyleProperty,\n  ParsedTransform,\n  Pattern,\n} from './css/parser';\nimport type { DisplayObject } from './display-objects';\nimport type { IWindow } from './dom/interfaces';\n\nexport enum Shape {\n  GROUP = 'g',\n  FRAGMENT = 'fragment',\n  CIRCLE = 'circle',\n  ELLIPSE = 'ellipse',\n  IMAGE = 'image',\n  RECT = 'rect',\n  LINE = 'line',\n  POLYLINE = 'polyline',\n  POLYGON = 'polygon',\n  TEXT = 'text',\n  PATH = 'path',\n  HTML = 'html',\n  MESH = 'mesh',\n}\n\ntype ColorType = string | null;\n\nexport interface EventPosition {\n  clientX: number;\n  clientY: number;\n  viewportX: number;\n  viewportY: number;\n  x: number;\n  y: number;\n}\n\nexport type TransformType =\n  | 'matrix'\n  | 'matrix3d'\n  | 'rotate'\n  | 'rotateX'\n  | 'rotateY'\n  | 'rotateZ'\n  | 'rotate3d'\n  | 'scale'\n  | 'scaleX'\n  | 'scaleY'\n  | 'scaleZ'\n  | 'scale3d'\n  | 'skew'\n  | 'skewX'\n  | 'skewY'\n  | 'translate'\n  | 'translateX'\n  | 'translateY'\n  | 'translateZ'\n  | 'translate3d';\nexport type TransformScale = ['scale', number, number?];\nexport type TransformScaleX = ['scaleX', number];\nexport type TransformScaleY = ['scaleY', number];\nexport type TransformScaleZ = ['scaleZ', number];\nexport type TransformScale3d = ['scale3d', number, number, number];\nexport type TransformTranslate = ['translate', number, number?];\nexport type TransformTranslateX = ['translateX', number];\nexport type TransformTranslateY = ['translateY', number];\nexport type TransformTranslateZ = ['translateZ', number];\nexport type TransformTranslate3d = ['translate3d', number, number, number];\nexport type TransformRotate = ['rotate', number];\nexport type TransformRotateX = ['rotateX', number];\nexport type TransformRotateY = ['rotateY', number];\nexport type TransformRotateZ = ['rotateZ', number];\nexport type TransformRotate3d = ['rotate3d', number, number, number, number?];\nexport type TransformSkew = ['skew', number, number?];\nexport type TransformSkewX = ['skewX', number];\nexport type TransformSkewY = ['skewY', number];\n// prettier-ignore\nexport type TransformMatrix = [\n  'matrix',\n  number, number, // a, b\n  number, number, // c, d\n  number, number, // tx, ty\n];\n// prettier-ignore\nexport type TransformMatrix3d = [\n  'matrix3d',\n  number, number, number, number,\n  number, number, number, number,\n  number, number, number, number,\n  number, number, number, number,\n];\n\nexport type TransformArray = (\n  | TransformScale\n  | TransformScaleX\n  | TransformScaleY\n  | TransformScaleZ\n  | TransformScale3d\n  | TransformTranslate\n  | TransformTranslateX\n  | TransformTranslateY\n  | TransformTranslateZ\n  | TransformTranslate3d\n  | TransformRotate\n  | TransformRotateX\n  | TransformRotateY\n  | TransformRotateZ\n  | TransformRotate3d\n  | TransformSkew\n  | TransformSkewX\n  | TransformSkewY\n  | TransformMatrix\n  | TransformMatrix3d\n)[];\nexport type TextTransform = 'capitalize' | 'uppercase' | 'lowercase' | 'none';\nexport type TextOverflow = 'clip' | 'ellipsis' | string;\nexport type TextDecorationLine = string | 'none';\nexport type TextDecorationStyle =\n  | 'solid'\n  | 'double'\n  | 'dotted'\n  | 'dashed'\n  | 'wavy';\n\nexport interface BaseStyleProps {\n  class?: string;\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/transform\n   */\n  transform?: string | TransformArray;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin\n   */\n  transformOrigin?: string;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/visibility\n   */\n  visibility?: 'visible' | 'hidden' | CSSGlobalKeywords;\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/pointer-events\n   */\n  pointerEvents?:\n    | 'none'\n    | 'auto'\n    | 'stroke'\n    | 'fill'\n    | 'painted'\n    | 'visible'\n    | 'visiblestroke'\n    | 'visiblefill'\n    | 'visiblepainted'\n    // | 'bounding-box'\n    | 'all'\n    | 'non-transparent-pixel' // valid only for Image\n    | CSSGlobalKeywords;\n\n  /**\n   * z-index in CSS\n   */\n  zIndex?: number;\n\n  /**\n   * the cursor style when the target is active\n   */\n  cursor?: Cursor;\n\n  /**\n   * clip path\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/clip-path\n   */\n  clipPath?: DisplayObject | null;\n\n  /**\n   * offset path\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Motion_Path\n   */\n  offsetPath?: DisplayObject | null;\n  offsetDistance?: number;\n\n  stroke?: ColorType | Pattern;\n  /** 描边透明度 */\n  strokeOpacity?: number | string;\n  /** 填充颜色 */\n  fill?: ColorType | Pattern;\n  /** 填充透明度 */\n  fillOpacity?: number | string;\n\n  /**\n   * The fill-rule attribute is a presentation attribute defining the algorithm to use to determine the inside part of a shape.\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Attribute/fill-rule\n   */\n  fillRule?: 'nonzero' | 'evenodd';\n\n  /** 整体透明度 */\n  opacity?: number | string;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-width\n   */\n  strokeWidth?: string | number;\n\n  /**\n   * alias if strokeWidth\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/lineWidth\n   */\n  lineWidth?: string | number;\n\n  /**\n   * increased line width when hitting test\n   */\n  increasedLineWidthForHitTesting?: string | number;\n  /**\n   * 交互区域\n   */\n  hitArea?: DisplayObject | null;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-linecap\n   */\n  strokeLinecap?: CanvasLineCap;\n\n  /**\n   * alias of strokeLinecap\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/lineCap\n   */\n  lineCap?: CanvasLineCap;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-linejoin\n   */\n  strokeLinejoin?: CanvasLineJoin;\n\n  /**\n   * alias of strokeLinejoin\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/lineJoin\n   */\n  lineJoin?: CanvasLineJoin;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray\n   */\n  strokeDasharray?: string | (string | number)[];\n\n  /**\n   * alias of strokeDasharray\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/getLineDash\n   */\n  lineDash?: number | string | (string | number)[];\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dashoffset\n   */\n  strokeDashoffset?: number;\n\n  /**\n   * alias of strokeDashoffset\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/lineDashOffset\n   */\n  lineDashOffset?: number;\n\n  shadowType?: 'inner' | 'outer' | 'both';\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/shadowBlur\n   */\n  shadowBlur?: number;\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/shadowColor\n   */\n  shadowColor?: ColorType;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/shadowOffsetX\n   */\n  shadowOffsetX?: number;\n\n  /**\n   * https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/shadowOffsetY\n   */\n  shadowOffsetY?: number;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/filter\n   */\n  filter?: string;\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/text-transform\n   */\n  textTransform?: TextTransform | '';\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/miterLimit\n   */\n  miterLimit?: number | string;\n\n  display?: string;\n\n  /**\n   * @see https://g-next.antv.vision/zh/docs/plugins/dragndrop#drag\n   */\n  draggable?: boolean;\n\n  /**\n   * @see https://g-next.antv.vision/zh/docs/plugins/dragndrop#drop\n   */\n  droppable?: boolean;\n}\n\nexport interface ParsedBaseStyleProps\n  extends Omit<\n    BaseStyleProps,\n    | 'fill'\n    | 'stroke'\n    | 'lineWidth'\n    | 'increasedLineWidthForHitTesting'\n    | 'lineDash'\n    | 'points'\n    | 'shadowColor'\n    | 'transform'\n    | 'transformOrigin'\n    | 'miterLimit'\n    | 'filter'\n    | 'opacity'\n    | 'fillOpacity'\n    | 'strokeOpacity'\n  > {\n  opacity?: number;\n  fillOpacity?: number;\n  strokeOpacity?: number;\n\n  fill?: CSSRGB | CSSGradientValue[] | Pattern;\n  stroke?: CSSRGB | CSSGradientValue[] | Pattern;\n  lineDash?: [number, number];\n\n  transform: ParsedTransform[];\n  transformOrigin?: [CSSUnitValue, CSSUnitValue, CSSUnitValue];\n\n  lineWidth?: number;\n  increasedLineWidthForHitTesting?: number;\n  /**\n   * offset relative to initial definition\n   */\n  offsetX?: number;\n  offsetY?: number;\n  shadowColor?: CSSRGB;\n  miterLimit?: number;\n  filter?: ParsedFilterStyleProperty[];\n}\n\n// Cursor style\n// See: https://developer.mozilla.org/en-US/docs/Web/CSS/cursor\nexport type Cursor =\n  | 'auto'\n  | 'default'\n  | 'none'\n  | 'context-menu'\n  | 'help'\n  | 'pointer'\n  | 'progress'\n  | 'wait'\n  | 'cell'\n  | 'crosshair'\n  | 'text'\n  | 'vertical-text'\n  | 'alias'\n  | 'copy'\n  | 'move'\n  | 'no-drop'\n  | 'not-allowed'\n  | 'grab'\n  | 'grabbing'\n  | 'all-scroll'\n  | 'col-resize'\n  | 'row-resize'\n  | 'n-resize'\n  | 'e-resize'\n  | 's-resize'\n  | 'w-resize'\n  | 'ne-resize'\n  | 'nw-resize'\n  | 'se-resize'\n  | 'sw-resize'\n  | 'ew-resize'\n  | 'ns-resize'\n  | 'nesw-resize'\n  | 'nwse-resize'\n  | 'zoom-in'\n  | 'zoom-out';\n\nexport enum ClipSpaceNearZ {\n  ZERO,\n  NEGATIVE_ONE,\n}\n\nexport interface RendererConfig {\n  /**\n   * enable dirty check for displayobject\n   */\n  enableDirtyCheck: boolean;\n\n  /**\n   * enable culling\n   */\n  enableCulling: boolean;\n\n  /**\n   * enable dirty rectangle rendering\n   */\n  enableDirtyRectangleRendering: boolean;\n\n  /**\n   * enable debugging dirty rectangle, Canvas will trigger CanvasEvent.DIRTY_RECTANGLE\n   */\n  enableDirtyRectangleRenderingDebug: boolean;\n\n  /**\n   * enable auto rendering\n   */\n  enableAutoRendering: boolean;\n\n  /**\n   * Canvas / SVG / Canvaskit should listen to camera changed events, while WebGL / WebGPU will apply this effect in shader.\n   */\n  enableSizeAttenuation: boolean;\n\n  /**\n   * Enable rendering optimization\n   *\n   * After rendering optimization is enabled, the rendering of each element in each frame will not have\n   * an independent canvas context state, but the state consistency is maintained by caching,\n   * because the save() and restore() of the canvas context state are expensive.\n   *\n   * ! Errors may occur due to manual maintenance of the canvas context state consistency\n   *\n   * @default false\n   */\n  enableRenderingOptimization: boolean;\n\n  // plugins:\n}\n\n/**\n * eg. NodeCanvas, OffscreenCanvas, HTMLCanvasElement\n */\nexport interface CanvasLike extends EventTarget {\n  width: number;\n  height: number;\n\n  getContext: ((\n    contextId: '2d',\n    contextAttributes?: CanvasRenderingContext2DSettings,\n  ) => CanvasRenderingContext2D | null) &\n    ((\n      contextId: 'webgl',\n      contextAttributes?: WebGLContextAttributes,\n    ) => WebGLRenderingContext | null) &\n    ((\n      contextId: 'webgl2',\n      contextAttributes?: WebGLContextAttributes,\n    ) => WebGL2RenderingContext | null);\n\n  addEventListener: (<K extends keyof HTMLElementEventMap>(\n    type: K,\n    listener: (this: HTMLCanvasElement, ev: HTMLElementEventMap[K]) => any,\n    options?: boolean | AddEventListenerOptions,\n  ) => void) &\n    ((\n      type: string,\n      listener: EventListenerOrEventListenerObject,\n      options?: boolean | AddEventListenerOptions,\n    ) => void);\n  removeEventListener: (<K extends keyof HTMLElementEventMap>(\n    type: K,\n    listener: (this: HTMLCanvasElement, ev: HTMLElementEventMap[K]) => any,\n    options?: boolean | EventListenerOptions,\n  ) => void) &\n    ((\n      type: string,\n      listener: EventListenerOrEventListenerObject,\n      options?: boolean | EventListenerOptions,\n    ) => void);\n}\n\nexport interface CanvasConfig extends Partial<Omit<IWindow, 'customElements'>> {\n  /**\n   * When the renderer is initialized, a `<canvas>/<svg>` element is automatically\n   * created inside the container DOM element.\n   */\n  container?: string | HTMLElement;\n  /**\n   * When this parameter is passed, the `container` parameter will be ignored.\n   *\n   * - support OffscreenCanvas\n   */\n  canvas?: CanvasLike;\n  /**\n   * Renderer\n   *\n   * @see https://g.antv.antgroup.com/api/renderer/intro\n   */\n  renderer: IRenderer;\n\n  /**\n   * 画布宽度\n   */\n  width?: number;\n  /**\n   * 画布高度\n   */\n  height?: number;\n  /**\n   * 画布背景色\n   */\n  background?: ColorType;\n  /**\n   * cursor style\n   */\n  cursor?: Cursor;\n\n  /**\n   * One container can have multiple canvases inside.\n   */\n  supportsMutipleCanvasesInOneContainer?: boolean;\n\n  // #region performance\n  /**\n   * Optimize rendering performance for high-resolution large images\n   */\n  enableLargeImageOptimization?:\n    | boolean\n    | {\n        /**\n         * Downsampling rate threshold, [0.01, 0.5], represents the ratio of reducing the image.\n         * For example, 0.3 means reducing the original image to 0.3 times of the original.\n         *\n         * default 0.5\n         */\n        downSamplingRateThreshold?: number;\n        /**\n         * The maximum size of the downsampled image, with equal width and height.\n         *\n         * default 2048\n         */\n        maxDownSampledImageSize?: number;\n      };\n  /**\n   * Enabling some features for the future.\n   *\n   * ! These are some experimental functional features that are currently unstable.\n   *\n   * future flag, concept referenced from:\n   * - https://remix.run/docs/en/main/guides/api-development-strategy#unstable-apis-and-future-flags,\n   * - https://remix.run/blog/future-flags\n   */\n  future?: {\n    /**\n     * Only implement bubbling propagation for necessary events.\n     * At the same time, some events will skip the process of building event objects and\n     * directly trigger events themselves.\n     */\n    experimentalCancelEventPropagation?: boolean;\n    /**\n     * When enabled, elements are no longer updated in real time, but are updated uniformly before being submitted to the canvas. This is to improve performance and avoid redundant loop logic.\n     */\n    experimentalAttributeUpdateOptimization?: boolean;\n    /**\n     * use RIC to avoid frequent calls syncRTree\n     */\n    experimentalRICSyncRTree?: boolean;\n  };\n  // #endregion performance\n\n  /**\n   * Listen to native click event instead of mocking with pointerup & down events.\n   */\n  useNativeClickEvent?: boolean;\n\n  /**\n   * Pointermove / up / cancel event will get triggered even outside Canvas.\n   */\n  alwaysTriggerPointerEventOnCanvas?: boolean;\n\n  /**\n   * Enable event service\n   */\n  disableHitTesting?: boolean;\n\n  /**\n   * Skip triggering hooks.beforeRender/render/afterRender\n   */\n  disableRenderHooks?: boolean;\n\n  /**\n   * 销毁画布时是否执行清理操作\n   */\n  cleanUpOnDestroy?: boolean;\n\n  /**\n   * used in JSDOM\n   */\n  document?: Document;\n  /**\n   * used in text measurement & texture generation\n   */\n  offscreenCanvas?: CanvasLike;\n  /**\n   * replace `new window.Image()`\n   */\n  createImage?: () => HTMLImageElement;\n  /**\n   * double click speed (ms)\n   *\n   * - default is 200ms\n   */\n  dblClickSpeed?: number;\n}\n\n/**\n * The format to use when defining custom easing functions\n */\nexport type TypeEasingFunction = (\n  t: number,\n  params?: (string | number)[],\n  duration?: number,\n) => number;\n\nexport type InteractivePointerEvent =\n  | PointerEvent\n  | TouchEvent\n  | MouseEvent\n  | WheelEvent;\n\n// @see https://github.com/zhanba/pailye/blob/master/packages/flex/src/types.ts\nexport type Tuple4<T> = [T, T, T, T];\n\nexport type Tuple4Number = Tuple4<number>;\n\nexport type Tuple3<T> = [T, T, T];\n\nexport type Tuple3Number = Tuple3<number>;\n\nexport type ComninedValue<T> = T | [T] | [T, T] | [T, T, T] | Tuple4<T>;\n\nexport type CombinedNumber = ComninedValue<number>;\n\nexport type Length = number;\n\ntype Digit = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9;\n\nexport type Percentage = `${Digit}%` | `${Digit}${Digit}%`;\n\nexport type LengthOrPercentage = Length | Percentage;\nexport type LengthOrPercentageOrAuto = Length | Percentage | 'auto';\n","/* eslint-disable max-classes-per-file */\nimport type { CanvasContext } from './dom';\nimport { GlobalRuntime } from './global-runtime';\nimport type { RenderingPlugin } from './services';\nimport { ClipSpaceNearZ, RendererConfig } from './types';\n\nexport interface RendererPlugin {\n  name: string;\n  context: CanvasContext;\n  init: (runtime: GlobalRuntime) => void;\n  destroy: (runtime: GlobalRuntime) => void;\n}\n\nexport abstract class AbstractRendererPlugin<T = any>\n  implements RendererPlugin\n{\n  context: CanvasContext & T;\n  protected plugins = [];\n\n  protected addRenderingPlugin(plugin: RenderingPlugin) {\n    this.plugins.push(plugin);\n    this.context.renderingPlugins.push(plugin);\n  }\n\n  protected removeAllRenderingPlugins() {\n    this.plugins.forEach((plugin) => {\n      const index = this.context.renderingPlugins.indexOf(plugin);\n      if (index >= 0) {\n        this.context.renderingPlugins.splice(index, 1);\n      }\n    });\n  }\n\n  abstract name: string;\n  abstract init(runtime: GlobalRuntime): void;\n  abstract destroy(runtime: GlobalRuntime): void;\n}\n\nexport interface IRenderer {\n  /**\n   * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n   * which matches WebGPU/Vulkan/DirectX/Metal's clip volume, while [-1, 1] matches WebGL/OpenGL's clip volume.\n   */\n  clipSpaceNearZ: ClipSpaceNearZ;\n\n  getConfig: () => RendererConfig;\n\n  /**\n   * register plugin at runtime\n   */\n  registerPlugin: (plugin: RendererPlugin) => void;\n\n  /**\n   * unregister plugin at runtime\n   */\n  unregisterPlugin: (plugin: RendererPlugin) => void;\n\n  /**\n   * get plugin by name\n   */\n  getPlugin: (name: string) => RendererPlugin;\n\n  /**\n   * return all registered plugins\n   */\n  getPlugins: () => RendererPlugin[];\n}\n\nexport class AbstractRenderer implements IRenderer {\n  clipSpaceNearZ = ClipSpaceNearZ.NEGATIVE_ONE;\n  private plugins: RendererPlugin[] = [];\n  private config: RendererConfig;\n\n  constructor(config?: Partial<RendererConfig>) {\n    this.config = {\n      /**\n       * only dirty object will cause re-render\n       */\n      enableDirtyCheck: true,\n      enableCulling: false,\n      /**\n       * enable auto rendering by default\n       */\n      enableAutoRendering: true,\n      /**\n       * enable dirty rectangle rendering by default\n       */\n      enableDirtyRectangleRendering: true,\n      enableDirtyRectangleRenderingDebug: false,\n      enableSizeAttenuation: true,\n      enableRenderingOptimization: false,\n      ...config,\n    };\n  }\n\n  registerPlugin(plugin: RendererPlugin) {\n    const index = this.plugins.findIndex((p) => p === plugin);\n    if (index === -1) {\n      this.plugins.push(plugin);\n    }\n  }\n\n  unregisterPlugin(plugin: RendererPlugin) {\n    const index = this.plugins.findIndex((p) => p === plugin);\n    if (index > -1) {\n      this.plugins.splice(index, 1);\n    }\n  }\n\n  getPlugins() {\n    return this.plugins;\n  }\n\n  getPlugin(name: string) {\n    return this.plugins.find((plugin) => plugin.name === name);\n  }\n\n  getConfig() {\n    return this.config;\n  }\n\n  setConfig(config: Partial<RendererConfig>) {\n    Object.assign(this.config, config);\n  }\n}\n","import type { mat4 } from 'gl-matrix';\nimport { vec3 } from 'gl-matrix';\nimport { Tuple3Number } from '../types';\nimport type { Plane } from './Plane';\n\nconst {\n  add: addVec3,\n  copy: copyVec3,\n  max: maxVec3,\n  min: minVec3,\n  scale: scaleVec3,\n  sub: subVec3,\n} = vec3;\n\n/**\n * Axis-Aligned Bounding Box\n * 为了便于后续 Frustum Culling，通过查找表定义 p-vertex 和 n-vertex\n * @see https://github.com/antvis/GWebGPUEngine/issues/3\n */\nexport class AABB {\n  static isEmpty(aabb: AABB) {\n    return (\n      !aabb ||\n      (aabb.halfExtents[0] === 0 &&\n        aabb.halfExtents[1] === 0 &&\n        aabb.halfExtents[2] === 0)\n    );\n  }\n\n  center: Tuple3Number = [0, 0, 0];\n  halfExtents: Tuple3Number = [0, 0, 0];\n  min: Tuple3Number = [0, 0, 0];\n  max: Tuple3Number = [0, 0, 0];\n\n  update(center: Tuple3Number, halfExtents: Tuple3Number) {\n    copyVec3(this.center, center);\n    copyVec3(this.halfExtents, halfExtents);\n    subVec3(this.min, this.center, this.halfExtents);\n    addVec3(this.max, this.center, this.halfExtents);\n  }\n\n  setMinMax(min: Tuple3Number, max: Tuple3Number) {\n    addVec3(this.center, max, min);\n    scaleVec3(this.center, this.center, 0.5);\n    subVec3(this.halfExtents, max, min);\n    scaleVec3(this.halfExtents, this.halfExtents, 0.5);\n    copyVec3(this.min, min);\n    copyVec3(this.max, max);\n  }\n\n  getMin() {\n    return this.min;\n  }\n\n  getMax() {\n    return this.max;\n  }\n\n  add(aabb: AABB) {\n    if (AABB.isEmpty(aabb)) {\n      return;\n    }\n    if (AABB.isEmpty(this)) {\n      this.setMinMax(aabb.getMin(), aabb.getMax());\n      return;\n    }\n\n    const tc = this.center;\n    const tcx = tc[0];\n    const tcy = tc[1];\n    const tcz = tc[2];\n    const th = this.halfExtents;\n    const thx = th[0];\n    const thy = th[1];\n    const thz = th[2];\n    let tminx = tcx - thx;\n    let tmaxx = tcx + thx;\n    let tminy = tcy - thy;\n    let tmaxy = tcy + thy;\n    let tminz = tcz - thz;\n    let tmaxz = tcz + thz;\n\n    const oc = aabb.center;\n    const ocx = oc[0];\n    const ocy = oc[1];\n    const ocz = oc[2];\n    const oh = aabb.halfExtents;\n    const ohx = oh[0];\n    const ohy = oh[1];\n    const ohz = oh[2];\n    const ominx = ocx - ohx;\n    const omaxx = ocx + ohx;\n    const ominy = ocy - ohy;\n    const omaxy = ocy + ohy;\n    const ominz = ocz - ohz;\n    const omaxz = ocz + ohz;\n\n    if (ominx < tminx) {\n      tminx = ominx;\n    }\n    if (omaxx > tmaxx) {\n      tmaxx = omaxx;\n    }\n    if (ominy < tminy) {\n      tminy = ominy;\n    }\n    if (omaxy > tmaxy) {\n      tmaxy = omaxy;\n    }\n    if (ominz < tminz) {\n      tminz = ominz;\n    }\n    if (omaxz > tmaxz) {\n      tmaxz = omaxz;\n    }\n\n    tc[0] = (tminx + tmaxx) * 0.5;\n    tc[1] = (tminy + tmaxy) * 0.5;\n    tc[2] = (tminz + tmaxz) * 0.5;\n    th[0] = (tmaxx - tminx) * 0.5;\n    th[1] = (tmaxy - tminy) * 0.5;\n    th[2] = (tmaxz - tminz) * 0.5;\n\n    this.min[0] = tminx;\n    this.min[1] = tminy;\n    this.min[2] = tminz;\n    this.max[0] = tmaxx;\n    this.max[1] = tmaxy;\n    this.max[2] = tmaxz;\n  }\n\n  setFromTransformedAABB(aabb: AABB, m: mat4) {\n    const bc = this.center;\n    const br = this.halfExtents;\n    const ac = aabb.center;\n    const ar = aabb.halfExtents;\n\n    const mx0 = m[0];\n    const mx1 = m[4];\n    const mx2 = m[8];\n    const my0 = m[1];\n    const my1 = m[5];\n    const my2 = m[9];\n    const mz0 = m[2];\n    const mz1 = m[6];\n    const mz2 = m[10];\n\n    const mx0a = Math.abs(mx0);\n    const mx1a = Math.abs(mx1);\n    const mx2a = Math.abs(mx2);\n    const my0a = Math.abs(my0);\n    const my1a = Math.abs(my1);\n    const my2a = Math.abs(my2);\n    const mz0a = Math.abs(mz0);\n    const mz1a = Math.abs(mz1);\n    const mz2a = Math.abs(mz2);\n\n    bc[0] = m[12] + mx0 * ac[0] + mx1 * ac[1] + mx2 * ac[2];\n    bc[1] = m[13] + my0 * ac[0] + my1 * ac[1] + my2 * ac[2];\n    bc[2] = m[14] + mz0 * ac[0] + mz1 * ac[1] + mz2 * ac[2];\n\n    // vec3.set(\n    //   bc,\n    //   m[12] + mx0 * ac[0] + mx1 * ac[1] + mx2 * ac[2],\n    //   m[13] + my0 * ac[0] + my1 * ac[1] + my2 * ac[2],\n    //   m[14] + mz0 * ac[0] + mz1 * ac[1] + mz2 * ac[2],\n    // );\n\n    br[0] = mx0a * ar[0] + mx1a * ar[1] + mx2a * ar[2];\n    br[1] = my0a * ar[0] + my1a * ar[1] + my2a * ar[2];\n    br[2] = mz0a * ar[0] + mz1a * ar[1] + mz2a * ar[2];\n\n    // vec3.set(\n    //   br,\n    //   mx0a * ar[0] + mx1a * ar[1] + mx2a * ar[2],\n    //   my0a * ar[0] + my1a * ar[1] + my2a * ar[2],\n    //   mz0a * ar[0] + mz1a * ar[1] + mz2a * ar[2],\n    // );\n\n    // this.min = vec3.sub(this.min, bc, br);\n    // this.max = vec3.add(this.max, bc, br);\n\n    subVec3(this.min, bc, br);\n    addVec3(this.max, bc, br);\n  }\n\n  intersects(aabb: AABB) {\n    const aMax = this.getMax();\n    const aMin = this.getMin();\n    const bMax = aabb.getMax();\n    const bMin = aabb.getMin();\n\n    return (\n      aMin[0] <= bMax[0] &&\n      aMax[0] >= bMin[0] &&\n      aMin[1] <= bMax[1] &&\n      aMax[1] >= bMin[1] &&\n      aMin[2] <= bMax[2] &&\n      aMax[2] >= bMin[2]\n    );\n  }\n\n  intersection(aabb: AABB): AABB | null {\n    if (!this.intersects(aabb)) {\n      return null;\n    }\n\n    const intersection = new AABB();\n    const min = maxVec3(\n      [0, 0, 0],\n      this.getMin(),\n      aabb.getMin(),\n    ) as Tuple3Number;\n    const max = minVec3(\n      [0, 0, 0],\n      this.getMax(),\n      aabb.getMax(),\n    ) as Tuple3Number;\n    intersection.setMinMax(min, max);\n\n    return intersection;\n  }\n\n  /**\n   * get n-vertex\n   * @param plane plane of CullingVolume\n   */\n  getNegativeFarPoint(plane: Plane): Tuple3Number {\n    if (plane.pnVertexFlag === 0x111) {\n      return copyVec3([0, 0, 0], this.min) as Tuple3Number;\n      // return vec3.copy(vec3.create(), this.min);\n    }\n    if (plane.pnVertexFlag === 0x110) {\n      return [this.min[0], this.min[1], this.max[2]];\n      // return vec3.fromValues(this.min[0], this.min[1], this.max[2]);\n    }\n    if (plane.pnVertexFlag === 0x101) {\n      return [this.min[0], this.max[1], this.min[2]];\n      // return vec3.fromValues(this.min[0], this.max[1], this.min[2]);\n    }\n    if (plane.pnVertexFlag === 0x100) {\n      return [this.min[0], this.max[1], this.max[2]];\n      // return vec3.fromValues(this.min[0], this.max[1], this.max[2]);\n    }\n    if (plane.pnVertexFlag === 0x011) {\n      return [this.max[0], this.min[1], this.min[2]];\n      // return vec3.fromValues(this.max[0], this.min[1], this.min[2]);\n    }\n    if (plane.pnVertexFlag === 0x010) {\n      return [this.max[0], this.min[1], this.max[2]];\n      // return vec3.fromValues(this.max[0], this.min[1], this.max[2]);\n    }\n    if (plane.pnVertexFlag === 0x001) {\n      return [this.max[0], this.max[1], this.min[2]];\n      // return vec3.fromValues(this.max[0], this.max[1], this.min[2]);\n    }\n    return [this.max[0], this.max[1], this.max[2]];\n    // return vec3.fromValues(this.max[0], this.max[1], this.max[2]);\n  }\n\n  /**\n   * get p-vertex\n   * @param plane plane of CullingVolume\n   */\n  getPositiveFarPoint(plane: Plane): Tuple3Number {\n    if (plane.pnVertexFlag === 0x111) {\n      return copyVec3([0, 0, 0], this.max) as Tuple3Number;\n      // return vec3.copy(vec3.create(), this.max);\n    }\n    if (plane.pnVertexFlag === 0x110) {\n      return [this.max[0], this.max[1], this.min[2]];\n      // return vec3.fromValues(this.max[0], this.max[1], this.min[2]);\n    }\n    if (plane.pnVertexFlag === 0x101) {\n      return [this.max[0], this.min[1], this.max[2]];\n      // return vec3.fromValues(this.max[0], this.min[1], this.max[2]);\n    }\n    if (plane.pnVertexFlag === 0x100) {\n      return [this.max[0], this.min[1], this.min[2]];\n      // return vec3.fromValues(this.max[0], this.min[1], this.min[2]);\n    }\n    if (plane.pnVertexFlag === 0x011) {\n      return [this.min[0], this.max[1], this.max[2]];\n      // return vec3.fromValues(this.min[0], this.max[1], this.max[2]);\n    }\n    if (plane.pnVertexFlag === 0x010) {\n      return [this.min[0], this.max[1], this.min[2]];\n      // return vec3.fromValues(this.min[0], this.max[1], this.min[2]);\n    }\n    if (plane.pnVertexFlag === 0x001) {\n      return [this.min[0], this.min[1], this.max[2]];\n      // return vec3.fromValues(this.min[0], this.min[1], this.max[2]);\n    }\n    return [this.min[0], this.min[1], this.min[2]];\n    // return vec3.fromValues(this.min[0], this.min[1], this.min[2]);\n  }\n}\n","import { vec3 } from 'gl-matrix';\n\nexport class Plane {\n  public distance: number;\n  public normal: vec3;\n\n  /**\n   * lookup table for p-vertex & n-vertex when doing frustum culling\n   */\n  public pnVertexFlag: number;\n\n  constructor(distance?: number, normal?: vec3) {\n    this.distance = distance || 0;\n    this.normal = normal || vec3.fromValues(0, 1, 0);\n    this.updatePNVertexFlag();\n  }\n\n  public updatePNVertexFlag() {\n    this.pnVertexFlag =\n      (Number(this.normal[0] >= 0) << 8) +\n      (Number(this.normal[1] >= 0) << 4) +\n      Number(this.normal[2] >= 0);\n  }\n\n  public distanceToPoint(point: vec3) {\n    return vec3.dot(point, this.normal) - this.distance;\n  }\n\n  public normalize() {\n    const invLen = 1 / vec3.len(this.normal);\n    vec3.scale(this.normal, this.normal, invLen);\n    this.distance *= invLen;\n  }\n\n  public intersectsLine(start: vec3, end: vec3, point?: vec3) {\n    const d0 = this.distanceToPoint(start);\n    const d1 = this.distanceToPoint(end);\n    const t = d0 / (d0 - d1);\n    const intersects = t >= 0 && t <= 1;\n    if (intersects && point) {\n      vec3.lerp(point, start, end, t);\n    }\n    return intersects;\n  }\n}\n","import type { mat4 } from 'gl-matrix';\nimport { vec3 } from 'gl-matrix';\nimport { Plane } from './Plane';\n\nexport enum Mask {\n  OUTSIDE = 0xffffffff,\n  INSIDE = 0x00000000,\n  INDETERMINATE = 0x7fffffff,\n}\n\nexport class Frustum {\n  public planes: Plane[] = [];\n\n  constructor(planes?: Plane[]) {\n    if (planes) {\n      this.planes = planes;\n    } else {\n      for (let i = 0; i < 6; i++) {\n        this.planes.push(new Plane());\n      }\n    }\n  }\n\n  /**\n   * extract 6 planes from projectionMatrix\n   * @see http://www8.cs.umu.se/kurser/5DV051/HT12/lab/plane_extraction.pdf\n   */\n  public extractFromVPMatrix(projectionMatrix: mat4) {\n    // @ts-ignore\n    const [\n      m0,\n      m1,\n      m2,\n      m3,\n      m4,\n      m5,\n      m6,\n      m7,\n      m8,\n      m9,\n      m10,\n      m11,\n      m12,\n      m13,\n      m14,\n      m15,\n    ] = projectionMatrix;\n\n    // right\n    vec3.set(this.planes[0].normal, m3 - m0, m7 - m4, m11 - m8);\n    this.planes[0].distance = m15 - m12;\n\n    // left\n    vec3.set(this.planes[1].normal, m3 + m0, m7 + m4, m11 + m8);\n    this.planes[1].distance = m15 + m12;\n\n    // bottom\n    vec3.set(this.planes[2].normal, m3 + m1, m7 + m5, m11 + m9);\n    this.planes[2].distance = m15 + m13;\n\n    // top\n    vec3.set(this.planes[3].normal, m3 - m1, m7 - m5, m11 - m9);\n    this.planes[3].distance = m15 - m13;\n\n    // far\n    vec3.set(this.planes[4].normal, m3 - m2, m7 - m6, m11 - m10);\n    this.planes[4].distance = m15 - m14;\n\n    // near\n    vec3.set(this.planes[5].normal, m3 + m2, m7 + m6, m11 + m10);\n    this.planes[5].distance = m15 + m14;\n\n    this.planes.forEach((plane) => {\n      plane.normalize();\n      plane.updatePNVertexFlag();\n    });\n  }\n}\n","export interface PointLike {\n  x: number;\n  y: number;\n}\n\nexport class Point {\n  x = 0;\n  y = 0;\n\n  constructor(x = 0, y = 0) {\n    this.x = x;\n    this.y = y;\n  }\n\n  clone(): Point {\n    return new Point(this.x, this.y);\n  }\n\n  copyFrom(p: Point) {\n    this.x = p.x;\n    this.y = p.y;\n  }\n}\n","import { mat4, vec4 } from 'gl-matrix';\n\ntype RectangleLike = {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n};\n\nexport class Rectangle implements DOMRect {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMRect/fromRect_static\n   */\n  static fromRect(rect: RectangleLike) {\n    return new Rectangle(rect.x, rect.y, rect.width, rect.height);\n  }\n\n  /**\n   * will return a new rect instance\n   */\n  static applyTransform(rect: Rectangle, matrix: mat4) {\n    const topLeft = vec4.fromValues(rect.x, rect.y, 0, 1);\n    const topRight = vec4.fromValues(rect.x + rect.width, rect.y, 0, 1);\n    const bottomLeft = vec4.fromValues(rect.x, rect.y + rect.height, 0, 1);\n    const bottomRight = vec4.fromValues(\n      rect.x + rect.width,\n      rect.y + rect.height,\n      0,\n      1,\n    );\n\n    const transformedTopLeft = vec4.create();\n    const transformedTopRight = vec4.create();\n    const transformedBottomLeft = vec4.create();\n    const transformedBottomRight = vec4.create();\n\n    vec4.transformMat4(transformedTopLeft, topLeft, matrix);\n    vec4.transformMat4(transformedTopRight, topRight, matrix);\n    vec4.transformMat4(transformedBottomLeft, bottomLeft, matrix);\n    vec4.transformMat4(transformedBottomRight, bottomRight, matrix);\n\n    const minX = Math.min(\n      transformedTopLeft[0],\n      transformedTopRight[0],\n      transformedBottomLeft[0],\n      transformedBottomRight[0],\n    );\n    const minY = Math.min(\n      transformedTopLeft[1],\n      transformedTopRight[1],\n      transformedBottomLeft[1],\n      transformedBottomRight[1],\n    );\n    const maxX = Math.max(\n      transformedTopLeft[0],\n      transformedTopRight[0],\n      transformedBottomLeft[0],\n      transformedBottomRight[0],\n    );\n    const maxY = Math.max(\n      transformedTopLeft[1],\n      transformedTopRight[1],\n      transformedBottomLeft[1],\n      transformedBottomRight[1],\n    );\n\n    return Rectangle.fromRect({\n      x: minX,\n      y: minY,\n      width: maxX - minX,\n      height: maxY - minY,\n    });\n  }\n\n  left: number;\n  right: number;\n  top: number;\n  bottom: number;\n  constructor(\n    public x: number,\n    public y: number,\n    public width: number,\n    public height: number,\n  ) {\n    this.left = x;\n    this.right = x + width;\n    this.top = y;\n    this.bottom = y + height;\n  }\n  toJSON() {}\n}\n","export const ERROR_MSG_METHOD_NOT_IMPLEMENTED = 'Method not implemented.';\nexport const ERROR_MSG_USE_DOCUMENT_ELEMENT =\n  'Use document.documentElement instead.';\nexport const ERROR_MSG_APPEND_DESTROYED_ELEMENT =\n  'Cannot append a destroyed element.';\n","import { isNumber } from '@antv/util';\nimport type { quat, vec2 } from 'gl-matrix';\nimport { mat3, mat4, vec3, vec4 } from 'gl-matrix';\n\nexport function getAngle(angle?: number) {\n  if (angle === undefined) {\n    return 0;\n  }\n  if (angle > 360 || angle < -360) {\n    return angle % 360;\n  }\n  return angle;\n}\n\nconst $vec3 = vec3.create();\nexport function createVec3(\n  x: number | vec2 | vec3 | vec4,\n  y = 0,\n  z = 0,\n  clone = true,\n) {\n  if (Array.isArray(x) && x.length === 3) {\n    return clone ? vec3.clone(x) : vec3.copy($vec3, x);\n  }\n\n  if (isNumber(x)) {\n    return clone ? vec3.fromValues(x, y, z) : vec3.set($vec3, x, y, z);\n  }\n\n  return clone\n    ? vec3.fromValues(x[0], x[1] || y, x[2] || z)\n    : vec3.set($vec3, x[0], x[1] || y, x[2] || z);\n}\n\nconst DEG_RAD = Math.PI / 180;\nexport function deg2rad(deg: number) {\n  return deg * DEG_RAD;\n}\n\nconst RAD_DEG = 180 / Math.PI;\nexport function rad2deg(rad: number) {\n  return rad * RAD_DEG;\n}\n\nconst GRAD_DEG = 0.9; // 360 / 400;\nexport function grad2deg(grads: number) {\n  grads %= 400;\n  if (grads < 0) {\n    grads += 400;\n  }\n  return grads * GRAD_DEG;\n}\n\nexport function deg2turn(deg: number) {\n  return deg / 360;\n}\n\nexport function turn2deg(turn: number) {\n  return 360 * turn;\n}\n\n/**\n * decompose mat3\n * extract translation/scaling/rotation(in radians)\n *\n * gl-matrix didn't provide them for mat3, but we can\n * @see https://math.stackexchange.com/a/1463487\n * @see https://math.stackexchange.com/a/417813\n */\nexport function getScaling(out: vec2, mat: mat3): vec2 {\n  const m11 = mat[0];\n  const m12 = mat[1];\n  const m21 = mat[3];\n  const m22 = mat[4];\n\n  out[0] = Math.hypot(m11, m12);\n  out[1] = Math.hypot(m21, m22);\n  return out;\n}\nexport function getTranslation(out: vec2, mat: mat3): vec2 {\n  out[0] = mat[6];\n  out[1] = mat[7];\n  return out;\n}\nexport function getRotationInRadians(mat: mat3): number {\n  return Math.atan2(mat[1], mat[4]);\n}\n\nconst HALF_PI = Math.PI / 2;\nfunction getEulerFromQuat(out: vec3, quat: quat) {\n  const x = quat[0];\n  const y = quat[1];\n  const z = quat[2];\n  const w = quat[3];\n  const x2 = x * x;\n  const y2 = y * y;\n  const z2 = z * z;\n  const w2 = w * w;\n  const unit = x2 + y2 + z2 + w2;\n  const test = x * w - y * z;\n  if (test > 0.499995 * unit) {\n    // TODO: Use glmatrix.EPSILON\n    // singularity at the north pole\n    out[0] = HALF_PI;\n    out[1] = 2 * Math.atan2(y, x);\n    out[2] = 0;\n  } else if (test < -0.499995 * unit) {\n    // TODO: Use glmatrix.EPSILON\n    // singularity at the south pole\n    out[0] = -HALF_PI;\n    out[1] = 2 * Math.atan2(y, x);\n    out[2] = 0;\n  } else {\n    out[0] = Math.asin(2 * (x * z - w * y));\n    out[1] = Math.atan2(2 * (x * w + y * z), 1 - 2 * (z2 + w2));\n    out[2] = Math.atan2(2 * (x * y + z * w), 1 - 2 * (y2 + z2));\n  }\n  // TODO: Return them as degrees and not as radians\n  return out;\n}\n\nfunction getEulerFromMat4(out: vec3, m: mat4) {\n  let x: number;\n  let z: number;\n\n  const [sx, sy, sz] = mat4.getScaling(vec3.create(), m);\n\n  const y = Math.asin(-m[2] / sx);\n\n  if (y < HALF_PI) {\n    if (y > -HALF_PI) {\n      x = Math.atan2(m[6] / sy, m[10] / sz);\n      z = Math.atan2(m[1] / sx, m[0] / sx);\n    } else {\n      // Not a unique solution\n      z = 0;\n      x = -Math.atan2(m[4] / sy, m[5] / sy);\n    }\n  } else {\n    // Not a unique solution\n    z = 0;\n    x = Math.atan2(m[4] / sy, m[5] / sy);\n  }\n\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n\n  return out;\n}\n\n/**\n * @see https://github.com/toji/gl-matrix/issues/329\n * @see https://doc.babylonjs.com/divingDeeper/mesh/transforms/center_origin/rotation_conventions\n */\nexport function getEuler(out: vec3, quat: quat | mat4): vec3 {\n  if (quat.length === 16) {\n    return getEulerFromMat4(out, quat as mat4);\n  }\n  return getEulerFromQuat(out, quat as quat);\n}\n\nexport function fromRotationTranslationScale(\n  rotation: number,\n  x: number,\n  y: number,\n  scaleX: number,\n  scaleY: number,\n): mat3 {\n  const cos = Math.cos(rotation);\n  const sin = Math.sin(rotation);\n  return mat3.fromValues(\n    scaleX * cos,\n    scaleY * sin,\n    0,\n    -scaleX * sin,\n    scaleY * cos,\n    0,\n    x,\n    y,\n    1,\n  );\n}\n\nexport function makePerspective(\n  out: mat4,\n  left: number,\n  right: number,\n  top: number,\n  bottom: number,\n  near: number,\n  far: number,\n  zero = false,\n) {\n  const twoNear = 2 * near;\n  const rightMinusLeft = right - left;\n  const topMinusBottom = top - bottom;\n  const x = twoNear / rightMinusLeft;\n  const y = twoNear / topMinusBottom;\n\n  const a = (right + left) / rightMinusLeft;\n  const b = (top + bottom) / topMinusBottom;\n\n  let c: number;\n  let d: number;\n\n  const farMinusNear = far - near;\n  const farMulNear = far * near;\n  if (zero) {\n    c = -far / farMinusNear;\n    d = -farMulNear / farMinusNear;\n  } else {\n    c = -(far + near) / farMinusNear;\n    d = (-2 * farMulNear) / farMinusNear;\n  }\n\n  out[0] = x;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = y;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = a;\n  out[9] = b;\n  out[10] = c;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = d;\n  out[15] = 0;\n  return out;\n}\n\nexport function decompose(mat: mat3) {\n  let row0x = mat[0];\n  let row0y = mat[1];\n  let row1x = mat[3];\n  let row1y = mat[4];\n  // decompose 3x3 matrix\n  // @see https://www.w3.org/TR/css-transforms-1/#decomposing-a-2d-matrix\n  let scalingX = Math.sqrt(row0x * row0x + row0y * row0y);\n  let scalingY = Math.sqrt(row1x * row1x + row1y * row1y);\n\n  // If determinant is negative, one axis was flipped.\n  const determinant = row0x * row1y - row0y * row1x;\n  if (determinant < 0) {\n    // Flip axis with minimum unit vector dot product.\n    if (row0x < row1y) {\n      scalingX = -scalingX;\n    } else {\n      scalingY = -scalingY;\n    }\n  }\n\n  // Renormalize matrix to remove scale.\n  if (scalingX) {\n    const invScalingX = 1 / scalingX;\n    row0x *= invScalingX;\n    row0y *= invScalingX;\n  }\n  if (scalingY) {\n    const invScalingY = 1 / scalingY;\n    row1x *= invScalingY;\n    row1y *= invScalingY;\n  }\n\n  // Compute rotation and renormalize matrix.\n  const rotation = Math.atan2(row0y, row0x);\n\n  const angle = rad2deg(rotation);\n\n  return [mat[6], mat[7], scalingX, scalingY, angle];\n}\n\nconst tmp = mat4.create();\nconst perspectiveMatrix = mat4.create();\nconst tmpVec4 = vec4.create();\nconst row = [vec3.create(), vec3.create(), vec3.create()];\nconst pdum3 = vec3.create();\n\n/*\nInput:  matrix      ; a 4x4 matrix\nOutput: translation ; a 3 component vector\n        scale       ; a 3 component vector\n        skew        ; skew factors XY,XZ,YZ represented as a 3 component vector\n        perspective ; a 4 component vector\n        quaternion  ; a 4 component vector\nReturns false if the matrix cannot be decomposed, true if it can\n\n\nReferences:\nhttps://github.com/kamicane/matrix3d/blob/master/lib/Matrix3d.js\nhttps://github.com/ChromiumWebApps/chromium/blob/master/ui/gfx/transform_util.cc\nhttp://www.w3.org/TR/css3-transforms/#decomposing-a-3d-matrix\n*/\nexport function decomposeMat4(\n  matrix: mat4,\n  translation: vec3,\n  scale: vec3,\n  skew: vec3,\n  perspective: vec4,\n  quaternion: vec4,\n) {\n  // normalize, if not possible then bail out early\n  if (!normalize(tmp, matrix)) return false;\n\n  // perspectiveMatrix is used to solve for perspective, but it also provides\n  // an easy way to test for singularity of the upper 3x3 component.\n  mat4.copy(perspectiveMatrix, tmp);\n\n  perspectiveMatrix[3] = 0;\n  perspectiveMatrix[7] = 0;\n  perspectiveMatrix[11] = 0;\n  perspectiveMatrix[15] = 1;\n\n  // If the perspectiveMatrix is not invertible, we are also unable to\n  // decompose, so we'll bail early. Constant taken from SkMatrix44::invert.\n  if (Math.abs(mat4.determinant(perspectiveMatrix)) < 1e-8) return false;\n\n  const a03 = tmp[3];\n  const a13 = tmp[7];\n  const a23 = tmp[11];\n  const a30 = tmp[12];\n  const a31 = tmp[13];\n  const a32 = tmp[14];\n  const a33 = tmp[15];\n\n  // First, isolate perspective.\n  if (a03 !== 0 || a13 !== 0 || a23 !== 0) {\n    tmpVec4[0] = a03;\n    tmpVec4[1] = a13;\n    tmpVec4[2] = a23;\n    tmpVec4[3] = a33;\n\n    // Solve the equation by inverting perspectiveMatrix and multiplying\n    // rightHandSide by the inverse.\n    // resuing the perspectiveMatrix here since it's no longer needed\n    const ret = mat4.invert(perspectiveMatrix, perspectiveMatrix);\n    if (!ret) return false;\n    mat4.transpose(perspectiveMatrix, perspectiveMatrix);\n\n    // multiply by transposed inverse perspective matrix, into perspective vec4\n    vec4.transformMat4(perspective, tmpVec4, perspectiveMatrix);\n  } else {\n    // no perspective\n    perspective[0] = perspective[1] = perspective[2] = 0;\n    perspective[3] = 1;\n  }\n\n  // Next take care of translation\n  translation[0] = a30;\n  translation[1] = a31;\n  translation[2] = a32;\n\n  // Now get scale and shear. 'row' is a 3 element array of 3 component vectors\n  mat3from4(row as unknown as mat3, tmp);\n\n  // Compute X scale factor and normalize first row.\n  scale[0] = vec3.length(row[0]);\n  vec3.normalize(row[0], row[0]);\n\n  // Compute XY shear factor and make 2nd row orthogonal to 1st.\n  skew[0] = vec3.dot(row[0], row[1]);\n  combine(row[1], row[1], row[0], 1.0, -skew[0]);\n\n  // Now, compute Y scale and normalize 2nd row.\n  scale[1] = vec3.length(row[1]);\n  vec3.normalize(row[1], row[1]);\n  skew[0] /= scale[1];\n\n  // Compute XZ and YZ shears, orthogonalize 3rd row\n  skew[1] = vec3.dot(row[0], row[2]);\n  combine(row[2], row[2], row[0], 1.0, -skew[1]);\n  skew[2] = vec3.dot(row[1], row[2]);\n  combine(row[2], row[2], row[1], 1.0, -skew[2]);\n\n  // Next, get Z scale and normalize 3rd row.\n  scale[2] = vec3.length(row[2]);\n  vec3.normalize(row[2], row[2]);\n  skew[1] /= scale[2];\n  skew[2] /= scale[2];\n\n  // At this point, the matrix (in rows) is orthonormal.\n  // Check for a coordinate system flip.  If the determinant\n  // is -1, then negate the matrix and the scaling factors.\n  vec3.cross(pdum3, row[1], row[2]);\n  if (vec3.dot(row[0], pdum3) < 0) {\n    for (let i = 0; i < 3; i++) {\n      scale[i] *= -1;\n      row[i][0] *= -1;\n      row[i][1] *= -1;\n      row[i][2] *= -1;\n    }\n  }\n\n  // Now, get the rotations out\n  quaternion[0] =\n    0.5 * Math.sqrt(Math.max(1 + row[0][0] - row[1][1] - row[2][2], 0));\n  quaternion[1] =\n    0.5 * Math.sqrt(Math.max(1 - row[0][0] + row[1][1] - row[2][2], 0));\n  quaternion[2] =\n    0.5 * Math.sqrt(Math.max(1 - row[0][0] - row[1][1] + row[2][2], 0));\n  quaternion[3] =\n    0.5 * Math.sqrt(Math.max(1 + row[0][0] + row[1][1] + row[2][2], 0));\n\n  if (row[2][1] > row[1][2]) quaternion[0] = -quaternion[0];\n  if (row[0][2] > row[2][0]) quaternion[1] = -quaternion[1];\n  if (row[1][0] > row[0][1]) quaternion[2] = -quaternion[2];\n  return true;\n}\n\nfunction normalize(out: mat4, mat: mat4) {\n  const m44 = mat[15];\n  // Cannot normalize.\n  if (m44 === 0) return false;\n  const scale = 1 / m44;\n  for (let i = 0; i < 16; i++) out[i] = mat[i] * scale;\n  return true;\n}\n\n// gets upper-left of a 4x4 matrix into a 3x3 of vectors\nfunction mat3from4(out: mat3, mat4x4: mat4) {\n  out[0][0] = mat4x4[0];\n  out[0][1] = mat4x4[1];\n  out[0][2] = mat4x4[2];\n\n  out[1][0] = mat4x4[4];\n  out[1][1] = mat4x4[5];\n  out[1][2] = mat4x4[6];\n\n  out[2][0] = mat4x4[8];\n  out[2][1] = mat4x4[9];\n  out[2][2] = mat4x4[10];\n}\n\nfunction combine(out: vec3, a: vec3, b: vec3, scale1: number, scale2: number) {\n  out[0] = a[0] * scale1 + b[0] * scale2;\n  out[1] = a[1] * scale1 + b[1] * scale2;\n  out[2] = a[2] * scale1 + b[2] * scale2;\n}\n","import type { EventEmitter } from 'eventemitter3';\nimport type { mat4, vec2, vec3 } from 'gl-matrix';\nimport type { TypeEasingFunction } from '..';\nimport type { ICanvas } from '../dom';\nimport type { Frustum } from '../shapes';\nimport type { Landmark } from './Landmark';\n\n/**\n * Different type of cameras, eg. simple camera used in 2D scene or\n * advanced camera which can do actions & switch between landmarks.\n */\n\nexport enum CameraType {\n  /**\n   * Performs all the rotational operations with the focal point instead of the camera position.\n   * This type of camera is useful in applications(like CAD) where 3D objects are being designed or explored.\n   * Camera cannot orbits over the north & south poles.\n   * @see http://voxelent.com/tutorial-cameras/\n   *\n   * In Three.js it's used in OrbitControls.\n   * @see https://threejs.org/docs/#examples/zh/controls/OrbitControls\n   */\n  ORBITING,\n  /**\n   * It's similar to the ORBITING camera, but it allows the camera to orbit over the north or south poles.\n   *\n   * In Three.js it's used in OrbitControls.\n   * @see https://threejs.org/docs/#examples/en/controls/TrackballControls\n   */\n  EXPLORING,\n  /**\n   * Performs all the rotational operations with the camera position.\n   * It's useful in first person shooting games.\n   * Camera cannot orbits over the north & south poles.\n   *\n   * In Three.js it's used in FirstPersonControls.\n   * @see https://threejs.org/docs/#examples/en/controls/FirstPersonControls\n   */\n  TRACKING,\n}\n\n/**\n * CameraType must be TRACKING\n */\nexport enum CameraTrackingMode {\n  DEFAULT,\n  ROTATIONAL,\n  TRANSLATIONAL,\n  CINEMATIC,\n}\n\nexport enum CameraProjectionMode {\n  ORTHOGRAPHIC,\n  PERSPECTIVE,\n}\n\nexport const CameraEvent = {\n  UPDATED: 'updated',\n};\n\nexport interface ICamera {\n  canvas: ICanvas;\n  eventEmitter: EventEmitter;\n  isOrtho: () => boolean;\n  getProjectionMode: () => CameraProjectionMode;\n  getPerspective: () => mat4;\n  getPerspectiveInverse: () => mat4;\n  getFrustum: () => Frustum;\n  getPosition: () => vec3;\n  getFocalPoint: () => vec3;\n  getDollyingStep: () => number;\n  getNear: () => number;\n  getFar: () => number;\n  getZoom: () => number;\n  getOrthoMatrix: () => mat4;\n  getView: () => {\n    enabled: boolean;\n    fullWidth: number;\n    fullHeight: number;\n    offsetX: number;\n    offsetY: number;\n    width: number;\n    height: number;\n  };\n  setEnableUpdate: (enabled: boolean) => void;\n  setType: (type: CameraType, trackingMode?: CameraTrackingMode) => this;\n  setProjectionMode: (projectionMode: CameraProjectionMode) => this;\n  setTrackingMode: (trackingMode: CameraTrackingMode) => this;\n  /**\n   * If flag is true, it reverses the azimuth and elevation angles.\n   * Subsequent calls to rotate, setAzimuth, setElevation,\n   * changeAzimuth or changeElevation will cause the inverted effect.\n   * setRoll or changeRoll is not affected by this method.\n   *\n   * This inversion is useful when one wants to simulate that the world\n   * is moving, instead of the camera.\n   *\n   * By default the camera angles are not reversed.\n   * @param {Boolean} flag the boolean flag to reverse the angles.\n   */\n  setWorldRotation: (flag: boolean) => this;\n  /**\n   * 计算 MV 矩阵，为相机矩阵的逆矩阵\n   */\n  getViewTransform: () => mat4;\n  getWorldTransform: () => mat4;\n  jitterProjectionMatrix: (x: number, y: number) => void;\n  clearJitterProjectionMatrix: () => void;\n  /**\n   * 设置相机矩阵\n   */\n  setMatrix: (matrix: mat4) => this;\n  setFov: (fov: number) => this;\n  setAspect: (aspect: number) => this;\n  setNear: (near: number) => this;\n  setFar: (far: number) => this;\n  /**\n   * Sets an offset in a larger frustum, used in PixelPicking\n   */\n  setViewOffset: (\n    fullWidth: number,\n    fullHeight: number,\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n  ) => this;\n  clearViewOffset: () => this;\n  setZoom: (zoom: number) => this;\n  setZoomByViewportPoint: (zoom: number, viewportPoint: vec2) => this;\n  setPerspective: (\n    near: number,\n    far: number,\n    fov: number,\n    aspect: number,\n  ) => this;\n  setOrthographic: (\n    l: number,\n    r: number,\n    t: number,\n    b: number,\n    near: number,\n    far: number,\n  ) => this;\n  /**\n   * Move the camera in world coordinates.\n   * It will keep looking at the current focal point.\n   *\n   * support scalars or vectors.\n   * @example\n   * setPosition(1, 2, 3);\n   * setPosition([1, 2, 3]);\n   */\n  setPosition: (x: number | vec2 | vec3, y?: number, z?: number) => this;\n  /**\n   * Sets the focal point of this camera in world coordinates.\n   *\n   * support scalars or vectors.\n   * @example\n   * setFocalPoint(1, 2, 3);\n   * setFocalPoint([1, 2, 3]);\n   */\n  setFocalPoint: (x: number | vec2 | vec3, y?: number, z?: number) => this;\n  getDistance: () => number;\n  getDistanceVector: () => vec3;\n  /**\n   * Moves the camera towards/from the focal point.\n   */\n  setDistance: (d: number) => this;\n  setMaxDistance: (d: number) => this;\n  setMinDistance: (d: number) => this;\n  /**\n   * 设置相机方位角，不同相机模式下需要重新计算相机位置或者是视点位置\n   * the azimuth in degrees\n   */\n  setAzimuth: (az: number) => this;\n  getAzimuth: () => number;\n  /**\n   * 设置相机方位角，不同相机模式下需要重新计算相机位置或者是视点位置\n   */\n  setElevation: (el: number) => this;\n  getElevation: () => number;\n  /**\n   * 设置相机方位角，不同相机模式下需要重新计算相机位置或者是视点位置\n   */\n  setRoll: (angle: number) => this;\n  getRoll: () => number;\n  /**\n   * Changes the azimuth and elevation with respect to the current camera axes\n   * @param {Number} azimuth the relative azimuth\n   * @param {Number} elevation the relative elevation\n   * @param {Number} roll the relative roll\n   */\n  rotate: (azimuth: number, elevation: number, roll: number) => this;\n  /**\n   * 沿水平(right) & 垂直(up)平移相机\n   */\n  pan: (tx: number, ty: number) => this;\n  /**\n   * 沿 n 轴移动，当距离视点远时移动速度较快，离视点越近速度越慢\n   */\n  dolly: (value: number) => this;\n  createLandmark: (\n    name: string,\n    params?: Partial<{\n      position: vec3 | vec2;\n      focalPoint: vec3 | vec2;\n      zoom: number;\n      roll: number;\n    }>,\n  ) => Landmark;\n  gotoLandmark: (\n    name: string | Landmark,\n    options?:\n      | number\n      | Partial<{\n          easing: string;\n          easingFunction: TypeEasingFunction;\n          duration: number;\n          onfinish: () => void;\n        }>,\n  ) => void;\n  /**\n   * Stop camera animation immediately.\n   */\n  cancelLandmarkAnimation: () => void;\n}\n","import EventEmitter from 'eventemitter3';\nimport type { vec2 } from 'gl-matrix';\nimport { mat3, mat4, quat, vec3, vec4 } from 'gl-matrix';\nimport type { Canvas } from '../Canvas';\nimport { Frustum } from '../shapes';\nimport { ClipSpaceNearZ, TypeEasingFunction } from '../types';\nimport { ERROR_MSG_METHOD_NOT_IMPLEMENTED } from '../utils/error';\nimport {\n  createVec3,\n  deg2rad,\n  getAngle,\n  makePerspective,\n  rad2deg,\n} from '../utils/math';\nimport type { Landmark } from './Landmark';\nimport type { ICamera } from './interfaces';\nimport {\n  CameraEvent,\n  CameraProjectionMode,\n  CameraTrackingMode,\n  CameraType,\n} from './interfaces';\n\nconst MIN_DISTANCE = 0.0002;\n\n/**\n * 参考「WebGL Insights - 23.Designing Cameras for WebGL Applications」，基于 Responsible Camera 思路设计\n * @see https://github.com/d13g0/nucleo.js/blob/master/source/camera/Camera.js\n *\n * 保存相机参数，定义相机动作：\n * 1. dolly 沿 n 轴移动\n * 2. pan 沿 u v 轴移动\n * 3. rotate 以方位角旋转\n * 4. 移动到 Landmark，具有平滑的动画效果，其间禁止其他用户交互\n */\n\nexport class Camera implements ICamera {\n  canvas: Canvas;\n\n  /**\n   * Clip space near Z, default to range `[-1, 1]`\n   */\n  clipSpaceNearZ = ClipSpaceNearZ.NEGATIVE_ONE;\n\n  eventEmitter = new EventEmitter();\n\n  /**\n   * Matrix of camera\n   */\n  protected matrix = mat4.create();\n\n  /**\n   * u axis +X is right\n   * @see http://learnwebgl.brown37.net/07_cameras/camera_introduction.html#a-camera-definition\n   */\n  protected right = vec3.fromValues(1, 0, 0);\n\n  /**\n   * v axis +Y is up\n   */\n  protected up = vec3.fromValues(0, 1, 0);\n\n  /**\n   * n axis +Z is inside\n   */\n  protected forward = vec3.fromValues(0, 0, 1);\n\n  /**\n   * Position of camera.\n   */\n  protected position = vec3.fromValues(0, 0, 1);\n\n  /**\n   * Position of focal point.\n   */\n  protected focalPoint = vec3.fromValues(0, 0, 0);\n\n  /**\n   * vector from focalPoint to position\n   */\n  protected distanceVector = vec3.fromValues(0, 0, -1);\n\n  /**\n   * length(focalPoint - position)\n   */\n  protected distance = 1;\n\n  /**\n   * @see https://en.wikipedia.org/wiki/Azimuth\n   */\n  protected azimuth = 0;\n  protected elevation = 0;\n  protected roll = 0;\n  protected relAzimuth = 0;\n  protected relElevation = 0;\n  protected relRoll = 0;\n\n  /**\n   * 沿 n 轴移动时，保证移动速度从快到慢\n   */\n  protected dollyingStep = 0;\n  protected maxDistance = Infinity;\n  protected minDistance = -Infinity;\n\n  /**\n   * zoom factor of the camera, default is 1\n   * eg. https://threejs.org/docs/#api/en/cameras/OrthographicCamera.zoom\n   */\n  protected zoom = 1;\n\n  /**\n   * invert the horizontal coordinate system HCS\n   */\n  protected rotateWorld = false;\n\n  /**\n   * 投影矩阵参数\n   */\n\n  /**\n   * field of view [0-360]\n   * @see http://en.wikipedia.org/wiki/Angle_of_view\n   */\n  protected fov = 30;\n  protected near = 0.1;\n  protected far = 1000;\n  protected aspect = 1;\n  protected left: number;\n  protected rright: number;\n  protected top: number;\n  protected bottom: number;\n  protected projectionMatrix = mat4.create();\n  protected projectionMatrixInverse = mat4.create();\n  protected jitteredProjectionMatrix: mat4 | undefined = undefined;\n\n  protected view:\n    | {\n        enabled: boolean;\n        fullWidth: number;\n        fullHeight: number;\n        offsetX: number;\n        offsetY: number;\n        width: number;\n        height: number;\n      }\n    | undefined;\n  protected enableUpdate = true;\n\n  // protected following = undefined;\n\n  protected type = CameraType.EXPLORING;\n  protected trackingMode = CameraTrackingMode.DEFAULT;\n  protected projectionMode = CameraProjectionMode.PERSPECTIVE;\n\n  /**\n   * for culling use\n   */\n  protected frustum: Frustum = new Frustum();\n\n  /**\n   * ortho matrix for Canvas2D & SVG\n   */\n  protected orthoMatrix: mat4 = mat4.create();\n\n  // constructor(type = CameraType.EXPLORING, trackingMode = CameraTrackingMode.DEFAULT) {\n  //   this.setType(type, trackingMode);\n  // }\n\n  isOrtho() {\n    return this.projectionMode === CameraProjectionMode.ORTHOGRAPHIC;\n  }\n\n  getProjectionMode() {\n    return this.projectionMode;\n  }\n\n  getPerspective() {\n    // account for TAA\n    return this.jitteredProjectionMatrix || this.projectionMatrix;\n  }\n\n  getPerspectiveInverse() {\n    return this.projectionMatrixInverse;\n  }\n\n  getFrustum() {\n    return this.frustum;\n  }\n\n  getPosition() {\n    return this.position;\n  }\n\n  getFocalPoint() {\n    return this.focalPoint;\n  }\n\n  getDollyingStep() {\n    return this.dollyingStep;\n  }\n\n  getNear() {\n    return this.near;\n  }\n\n  getFar() {\n    return this.far;\n  }\n\n  getZoom() {\n    return this.zoom;\n  }\n\n  getOrthoMatrix() {\n    return this.orthoMatrix;\n  }\n\n  getView() {\n    return this.view;\n  }\n\n  setEnableUpdate(enabled: boolean) {\n    this.enableUpdate = enabled;\n  }\n\n  setType(type: CameraType, trackingMode?: CameraTrackingMode) {\n    this.type = type;\n    if (this.type === CameraType.EXPLORING) {\n      this.setWorldRotation(true);\n    } else {\n      this.setWorldRotation(false);\n    }\n    this._getAngles();\n\n    if (this.type === CameraType.TRACKING && trackingMode !== undefined) {\n      this.setTrackingMode(trackingMode);\n    }\n    return this;\n  }\n\n  setProjectionMode(projectionMode: CameraProjectionMode) {\n    this.projectionMode = projectionMode;\n    return this;\n  }\n\n  setTrackingMode(trackingMode: CameraTrackingMode) {\n    if (this.type !== CameraType.TRACKING) {\n      throw new Error(\n        'Impossible to set a tracking mode if the camera is not of tracking type',\n      );\n    }\n    this.trackingMode = trackingMode;\n    return this;\n  }\n\n  /**\n   * If flag is true, it reverses the azimuth and elevation angles.\n   * Subsequent calls to rotate, setAzimuth, setElevation,\n   * changeAzimuth or changeElevation will cause the inverted effect.\n   * setRoll or changeRoll is not affected by this method.\n   *\n   * This inversion is useful when one wants to simulate that the world\n   * is moving, instead of the camera.\n   *\n   * By default the camera angles are not reversed.\n   * @param {Boolean} flag the boolean flag to reverse the angles.\n   */\n  setWorldRotation(flag: boolean) {\n    this.rotateWorld = flag;\n    this._getAngles();\n    return this;\n  }\n\n  /**\n   * 计算 MV 矩阵，为相机矩阵的逆矩阵\n   */\n  getViewTransform(): mat4 {\n    // mat4.scale(this.matrix, this.matrix, vec3.fromValues(1, -1, 1));\n\n    return mat4.invert(mat4.create(), this.matrix);\n  }\n\n  getWorldTransform(): mat4 {\n    return this.matrix;\n  }\n\n  jitterProjectionMatrix(x: number, y: number) {\n    const translation = mat4.fromTranslation(mat4.create(), [x, y, 0]);\n\n    this.jitteredProjectionMatrix = mat4.multiply(\n      mat4.create(),\n      translation,\n      this.projectionMatrix,\n    );\n  }\n\n  clearJitterProjectionMatrix() {\n    this.jitteredProjectionMatrix = undefined;\n  }\n\n  /**\n   * 设置相机矩阵\n   */\n  setMatrix(matrix: mat4) {\n    this.matrix = matrix;\n    this._update();\n    return this;\n  }\n\n  /**\n   * Set projection matrix manually.\n   */\n  setProjectionMatrix(matrix: mat4) {\n    this.projectionMatrix = matrix;\n  }\n\n  setFov(fov: number) {\n    this.setPerspective(this.near, this.far, fov, this.aspect);\n    return this;\n  }\n\n  setAspect(aspect: number) {\n    this.setPerspective(this.near, this.far, this.fov, aspect);\n    return this;\n  }\n\n  setNear(near: number) {\n    if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n      this.setPerspective(near, this.far, this.fov, this.aspect);\n    } else {\n      this.setOrthographic(\n        this.left,\n        this.rright,\n        this.top,\n        this.bottom,\n        near,\n        this.far,\n      );\n    }\n    return this;\n  }\n\n  setFar(far: number) {\n    if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n      this.setPerspective(this.near, far, this.fov, this.aspect);\n    } else {\n      this.setOrthographic(\n        this.left,\n        this.rright,\n        this.top,\n        this.bottom,\n        this.near,\n        far,\n      );\n    }\n    return this;\n  }\n\n  /**\n   * Sets an offset in a larger frustum, used in PixelPicking\n   */\n  setViewOffset(\n    fullWidth: number,\n    fullHeight: number,\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n  ) {\n    this.aspect = fullWidth / fullHeight;\n    if (this.view === undefined) {\n      this.view = {\n        enabled: true,\n        fullWidth: 1,\n        fullHeight: 1,\n        offsetX: 0,\n        offsetY: 0,\n        width: 1,\n        height: 1,\n      };\n    }\n\n    this.view.enabled = true;\n    this.view.fullWidth = fullWidth;\n    this.view.fullHeight = fullHeight;\n    this.view.offsetX = x;\n    this.view.offsetY = y;\n    this.view.width = width;\n    this.view.height = height;\n\n    if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n      this.setPerspective(this.near, this.far, this.fov, this.aspect);\n    } else {\n      this.setOrthographic(\n        this.left,\n        this.rright,\n        this.top,\n        this.bottom,\n        this.near,\n        this.far,\n      );\n    }\n    return this;\n  }\n\n  clearViewOffset() {\n    if (this.view !== undefined) {\n      this.view.enabled = false;\n    }\n\n    if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n      this.setPerspective(this.near, this.far, this.fov, this.aspect);\n    } else {\n      this.setOrthographic(\n        this.left,\n        this.rright,\n        this.top,\n        this.bottom,\n        this.near,\n        this.far,\n      );\n    }\n    return this;\n  }\n\n  setZoom(zoom: number) {\n    this.zoom = zoom;\n    if (this.projectionMode === CameraProjectionMode.ORTHOGRAPHIC) {\n      this.setOrthographic(\n        this.left,\n        this.rright,\n        this.top,\n        this.bottom,\n        this.near,\n        this.far,\n      );\n    } else if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n      this.setPerspective(this.near, this.far, this.fov, this.aspect);\n    }\n    return this;\n  }\n\n  /**\n   * Zoom by specified point in viewport coordinates.\n   */\n  setZoomByViewportPoint(zoom: number, viewportPoint: vec2) {\n    const { x: ox, y: oy } = this.canvas.viewport2Canvas({\n      x: viewportPoint[0],\n      y: viewportPoint[1],\n    });\n\n    const { roll } = this;\n\n    this.rotate(0, 0, -roll);\n    this.setPosition(ox, oy);\n    this.setFocalPoint(ox, oy);\n    this.setZoom(zoom);\n    this.rotate(0, 0, roll);\n\n    const { x: cx, y: cy } = this.canvas.viewport2Canvas({\n      x: viewportPoint[0],\n      y: viewportPoint[1],\n    });\n\n    // project to rotated axis\n    const dvec = vec3.fromValues(cx - ox, cy - oy, 0);\n    const dx = vec3.dot(dvec, this.right) / vec3.length(this.right);\n    const dy = vec3.dot(dvec, this.up) / vec3.length(this.up);\n\n    const [px, py] = this.getPosition();\n    const [fx, fy] = this.getFocalPoint();\n\n    this.setPosition(px - dx, py - dy);\n    this.setFocalPoint(fx - dx, fy - dy);\n\n    return this;\n  }\n\n  setPerspective(near: number, far: number, fov: number, aspect: number) {\n    this.projectionMode = CameraProjectionMode.PERSPECTIVE;\n    this.fov = fov;\n    this.near = near;\n    this.far = far;\n    this.aspect = aspect;\n\n    let top = (this.near * Math.tan(deg2rad(0.5 * this.fov))) / this.zoom;\n    let height = 2 * top;\n    let width = this.aspect * height;\n    let left = -0.5 * width;\n\n    if (this.view?.enabled) {\n      const { fullWidth } = this.view;\n      const { fullHeight } = this.view;\n\n      left += (this.view.offsetX * width) / fullWidth;\n      top -= (this.view.offsetY * height) / fullHeight;\n      width *= this.view.width / fullWidth;\n      height *= this.view.height / fullHeight;\n    }\n\n    makePerspective(\n      this.projectionMatrix,\n      left,\n      left + width,\n      top - height,\n      top,\n      near,\n      this.far,\n      this.clipSpaceNearZ === ClipSpaceNearZ.ZERO,\n    );\n\n    mat4.invert(this.projectionMatrixInverse, this.projectionMatrix);\n\n    this.triggerUpdate();\n    return this;\n  }\n\n  setOrthographic(\n    l: number,\n    r: number,\n    t: number,\n    b: number,\n    near: number,\n    far: number,\n  ) {\n    this.projectionMode = CameraProjectionMode.ORTHOGRAPHIC;\n    this.rright = r;\n    this.left = l;\n    this.top = t;\n    this.bottom = b;\n    this.near = near;\n    this.far = far;\n\n    const dx = (this.rright - this.left) / (2 * this.zoom);\n    const dy = (this.top - this.bottom) / (2 * this.zoom);\n    const cx = (this.rright + this.left) / 2;\n    const cy = (this.top + this.bottom) / 2;\n\n    let left = cx - dx;\n    let right = cx + dx;\n    let top = cy + dy;\n    let bottom = cy - dy;\n\n    if (this.view?.enabled) {\n      const scaleW =\n        (this.rright - this.left) / this.view.fullWidth / this.zoom;\n      const scaleH =\n        (this.top - this.bottom) / this.view.fullHeight / this.zoom;\n\n      left += scaleW * this.view.offsetX;\n      right = left + scaleW * this.view.width;\n      top -= scaleH * this.view.offsetY;\n      bottom = top - scaleH * this.view.height;\n    }\n\n    if (this.clipSpaceNearZ === ClipSpaceNearZ.NEGATIVE_ONE) {\n      // FlipY with switching bottom & top.\n      // @see https://stackoverflow.com/a/4886656\n      mat4.ortho(this.projectionMatrix, left, right, top, bottom, near, far);\n    } else {\n      mat4.orthoZO(this.projectionMatrix, left, right, top, bottom, near, far);\n    }\n\n    mat4.invert(this.projectionMatrixInverse, this.projectionMatrix);\n\n    this._getOrthoMatrix();\n    this.triggerUpdate();\n    return this;\n  }\n\n  /**\n   * Move the camera in world coordinates.\n   * It will keep looking at the current focal point.\n   *\n   * support scalars or vectors.\n   * @example\n   * setPosition(1, 2, 3);\n   * setPosition([1, 2, 3]);\n   */\n  setPosition(\n    x: number | vec2 | vec3,\n    y: number = this.position[1],\n    z: number = this.position[2],\n  ) {\n    const position = createVec3(x, y, z);\n    this._setPosition(position);\n    this.setFocalPoint(this.focalPoint);\n\n    this.triggerUpdate();\n    return this;\n  }\n\n  /**\n   * Sets the focal point of this camera in world coordinates.\n   *\n   * support scalars or vectors.\n   * @example\n   * setFocalPoint(1, 2, 3);\n   * setFocalPoint([1, 2, 3]);\n   */\n  setFocalPoint(\n    x: number | vec2 | vec3,\n    y: number = this.focalPoint[1],\n    z: number = this.focalPoint[2],\n  ) {\n    let up = vec3.fromValues(0, 1, 0);\n    this.focalPoint = createVec3(x, y, z);\n\n    if (this.trackingMode === CameraTrackingMode.CINEMATIC) {\n      const d = vec3.subtract(vec3.create(), this.focalPoint, this.position);\n      x = d[0];\n      y = d[1];\n      z = d[2];\n      const r = vec3.length(d);\n      const el = rad2deg(Math.asin(y / r));\n      const az = 90 + rad2deg(Math.atan2(z, x));\n      const m = mat4.create();\n      mat4.rotateY(m, m, deg2rad(az));\n      mat4.rotateX(m, m, deg2rad(el));\n      up = vec3.transformMat4(vec3.create(), [0, 1, 0], m);\n    }\n\n    mat4.invert(\n      this.matrix,\n      mat4.lookAt(mat4.create(), this.position, this.focalPoint, up),\n    );\n\n    this._getAxes();\n    this._getDistance();\n    this._getAngles();\n    this.triggerUpdate();\n    return this;\n  }\n\n  getDistance() {\n    return this.distance;\n  }\n\n  getDistanceVector() {\n    return this.distanceVector;\n  }\n\n  /**\n   * Moves the camera towards/from the focal point.\n   */\n  setDistance(d: number) {\n    if (this.distance === d || d < 0) {\n      return this;\n    }\n\n    this.distance = d;\n\n    if (this.distance < MIN_DISTANCE) {\n      this.distance = MIN_DISTANCE;\n    }\n    this.dollyingStep = this.distance / 100;\n\n    const pos = vec3.create();\n    d = this.distance;\n    const n = this.forward;\n    const f = this.focalPoint;\n\n    pos[0] = d * n[0] + f[0];\n    pos[1] = d * n[1] + f[1];\n    pos[2] = d * n[2] + f[2];\n\n    this._setPosition(pos);\n    this.triggerUpdate();\n    return this;\n  }\n\n  setMaxDistance(d: number) {\n    this.maxDistance = d;\n    return this;\n  }\n\n  setMinDistance(d: number) {\n    this.minDistance = d;\n    return this;\n  }\n\n  /**\n   * 设置相机方位角，不同相机模式下需要重新计算相机位置或者是视点位置\n   * the azimuth in degrees\n   */\n  setAzimuth(az: number) {\n    this.azimuth = getAngle(az);\n    this.computeMatrix();\n\n    this._getAxes();\n    if (\n      this.type === CameraType.ORBITING ||\n      this.type === CameraType.EXPLORING\n    ) {\n      this._getPosition();\n    } else if (this.type === CameraType.TRACKING) {\n      this._getFocalPoint();\n    }\n\n    this.triggerUpdate();\n    return this;\n  }\n\n  getAzimuth() {\n    return this.azimuth;\n  }\n\n  /**\n   * 设置相机方位角，不同相机模式下需要重新计算相机位置或者是视点位置\n   */\n  setElevation(el: number) {\n    this.elevation = getAngle(el);\n    this.computeMatrix();\n\n    this._getAxes();\n    if (\n      this.type === CameraType.ORBITING ||\n      this.type === CameraType.EXPLORING\n    ) {\n      this._getPosition();\n    } else if (this.type === CameraType.TRACKING) {\n      this._getFocalPoint();\n    }\n\n    this.triggerUpdate();\n    return this;\n  }\n\n  getElevation() {\n    return this.elevation;\n  }\n\n  /**\n   * 设置相机方位角，不同相机模式下需要重新计算相机位置或者是视点位置\n   */\n  setRoll(angle: number) {\n    this.roll = getAngle(angle);\n    this.computeMatrix();\n\n    this._getAxes();\n    if (\n      this.type === CameraType.ORBITING ||\n      this.type === CameraType.EXPLORING\n    ) {\n      this._getPosition();\n    } else if (this.type === CameraType.TRACKING) {\n      this._getFocalPoint();\n    }\n\n    this.triggerUpdate();\n    return this;\n  }\n\n  getRoll() {\n    return this.roll;\n  }\n\n  /**\n   * 根据相机矩阵重新计算各种相机参数\n   */\n  protected _update() {\n    this._getAxes();\n    this._getPosition();\n    this._getDistance();\n    this._getAngles();\n    this._getOrthoMatrix();\n\n    this.triggerUpdate();\n  }\n\n  /**\n   * 计算相机矩阵\n   */\n  protected computeMatrix() {\n    // 使用四元数描述 3D 旋转\n    // @see https://xiaoiver.github.io/coding/2018/12/28/Camera-%E8%AE%BE%E8%AE%A1-%E4%B8%80.html\n    const rotZ = quat.setAxisAngle(\n      quat.create(),\n      [0, 0, 1],\n      deg2rad(this.roll),\n    );\n\n    mat4.identity(this.matrix);\n\n    // only consider HCS for EXPLORING and ORBITING cameras\n    const rotX = quat.setAxisAngle(\n      quat.create(),\n      [1, 0, 0],\n      deg2rad(\n        ((this.rotateWorld && this.type !== CameraType.TRACKING) ||\n        this.type === CameraType.TRACKING\n          ? 1\n          : -1) * this.elevation,\n      ),\n    );\n    const rotY = quat.setAxisAngle(\n      quat.create(),\n      [0, 1, 0],\n      deg2rad(\n        ((this.rotateWorld && this.type !== CameraType.TRACKING) ||\n        this.type === CameraType.TRACKING\n          ? 1\n          : -1) * this.azimuth,\n      ),\n    );\n\n    let rotQ = quat.multiply(quat.create(), rotY, rotX);\n    rotQ = quat.multiply(quat.create(), rotQ, rotZ);\n    const rotMatrix = mat4.fromQuat(mat4.create(), rotQ);\n\n    if (\n      this.type === CameraType.ORBITING ||\n      this.type === CameraType.EXPLORING\n    ) {\n      mat4.translate(this.matrix, this.matrix, this.focalPoint);\n      mat4.multiply(this.matrix, this.matrix, rotMatrix);\n      mat4.translate(this.matrix, this.matrix, [0, 0, this.distance]);\n    } else if (this.type === CameraType.TRACKING) {\n      mat4.translate(this.matrix, this.matrix, this.position);\n      mat4.multiply(this.matrix, this.matrix, rotMatrix);\n    }\n  }\n\n  /**\n   * Sets the camera position in the camera matrix\n   */\n  protected _setPosition(x: number | vec3, y?: number, z?: number) {\n    this.position = createVec3(x, y, z);\n    const m = this.matrix;\n    m[12] = this.position[0];\n    m[13] = this.position[1];\n    m[14] = this.position[2];\n    m[15] = 1;\n\n    this._getOrthoMatrix();\n  }\n\n  /**\n   * Recalculates axes based on the current matrix\n   */\n  protected _getAxes() {\n    vec3.copy(\n      this.right,\n      createVec3(vec4.transformMat4(vec4.create(), [1, 0, 0, 0], this.matrix)),\n    );\n    vec3.copy(\n      this.up,\n      createVec3(vec4.transformMat4(vec4.create(), [0, 1, 0, 0], this.matrix)),\n    );\n    vec3.copy(\n      this.forward,\n      createVec3(vec4.transformMat4(vec4.create(), [0, 0, 1, 0], this.matrix)),\n    );\n    vec3.normalize(this.right, this.right);\n    vec3.normalize(this.up, this.up);\n    vec3.normalize(this.forward, this.forward);\n  }\n\n  /**\n   * Recalculates euler angles based on the current state\n   */\n  protected _getAngles() {\n    // Recalculates angles\n    const x = this.distanceVector[0];\n    const y = this.distanceVector[1];\n    const z = this.distanceVector[2];\n    const r = vec3.length(this.distanceVector);\n\n    // FAST FAIL: If there is no distance we cannot compute angles\n    if (r === 0) {\n      this.elevation = 0;\n      this.azimuth = 0;\n      return;\n    }\n\n    if (this.type === CameraType.TRACKING) {\n      this.elevation = rad2deg(Math.asin(y / r));\n      this.azimuth = rad2deg(Math.atan2(-x, -z));\n    } else if (this.rotateWorld) {\n      this.elevation = rad2deg(Math.asin(y / r));\n      this.azimuth = rad2deg(Math.atan2(-x, -z));\n    } else {\n      this.elevation = -rad2deg(Math.asin(y / r));\n      this.azimuth = -rad2deg(Math.atan2(-x, -z));\n    }\n  }\n\n  /**\n   * 重新计算相机位置，只有 ORBITING 模式相机位置才会发生变化\n   */\n  protected _getPosition() {\n    vec3.copy(\n      this.position,\n      createVec3(vec4.transformMat4(vec4.create(), [0, 0, 0, 1], this.matrix)),\n    );\n\n    // 相机位置变化，需要重新计算视距\n    this._getDistance();\n  }\n\n  /**\n   * 重新计算视点，只有 TRACKING 模式视点才会发生变化\n   */\n  protected _getFocalPoint() {\n    vec3.transformMat3(\n      this.distanceVector,\n      [0, 0, -this.distance],\n      mat3.fromMat4(mat3.create(), this.matrix),\n    );\n    vec3.add(this.focalPoint, this.position, this.distanceVector);\n\n    // 视点变化，需要重新计算视距\n    this._getDistance();\n  }\n\n  /**\n   * 重新计算视距\n   */\n  protected _getDistance() {\n    this.distanceVector = vec3.subtract(\n      vec3.create(),\n      this.focalPoint,\n      this.position,\n    );\n    this.distance = vec3.length(this.distanceVector);\n    this.dollyingStep = this.distance / 100;\n  }\n\n  protected _getOrthoMatrix() {\n    if (this.projectionMode !== CameraProjectionMode.ORTHOGRAPHIC) {\n      return;\n    }\n\n    const { position } = this;\n    const rotZ = quat.setAxisAngle(\n      quat.create(),\n      [0, 0, 1],\n      (-this.roll * Math.PI) / 180,\n    );\n    mat4.fromRotationTranslationScaleOrigin(\n      this.orthoMatrix,\n      rotZ,\n      vec3.fromValues(\n        (this.rright - this.left) / 2 - position[0],\n        (this.top - this.bottom) / 2 - position[1],\n        0,\n      ),\n      vec3.fromValues(this.zoom, this.zoom, 1),\n      position,\n    );\n  }\n\n  protected triggerUpdate() {\n    if (this.enableUpdate) {\n      // update frustum\n      const viewMatrix = this.getViewTransform();\n      const vpMatrix = mat4.multiply(\n        mat4.create(),\n        this.getPerspective(),\n        viewMatrix,\n      );\n      this.getFrustum().extractFromVPMatrix(vpMatrix);\n\n      this.eventEmitter.emit(CameraEvent.UPDATED);\n    }\n  }\n\n  rotate(azimuth: number, elevation: number, roll: number): this {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  pan(tx: number, ty: number): this {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  dolly(value: number): this {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  createLandmark(\n    name: string,\n    params?: Partial<{\n      position: [number, number, number] | Float32Array | [number, number];\n      focalPoint: [number, number, number] | Float32Array | [number, number];\n      zoom: number;\n      roll: number;\n    }>,\n  ): Landmark {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  gotoLandmark(\n    name: string | Landmark,\n    options?:\n      | number\n      | Partial<{\n          easing: string;\n          easingFunction: TypeEasingFunction;\n          duration: number;\n          onfinish: () => void;\n        }>,\n  ): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  cancelLandmarkAnimation(): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n}\n","/**\n * @see https://doc.babylonjs.com/how_to/optimizing_your_scene#changing-mesh-culling-strategy\n */\nexport enum Strategy {\n  Standard,\n}\n\nexport interface Cullable {\n  strategy: Strategy;\n\n  visibilityPlaneMask: number;\n\n  visible: boolean;\n\n  enable: boolean;\n}\n","import type { INode } from '../dom/interfaces';\n\nexport enum SortReason {\n  ADDED,\n  REMOVED,\n  Z_INDEX_CHANGED,\n}\n\nexport interface Sortable {\n  /**\n   * need to re-sort\n   */\n  dirty: boolean;\n\n  /**\n   * sorted child entities\n   */\n  sorted: INode[];\n\n  /**\n   * render order in whole scenegraph\n   */\n  renderOrder: number;\n\n  /**\n   * dirty children\n   */\n  dirtyChildren: INode[];\n\n  dirtyReason: SortReason;\n}\n","import { mat4, quat, vec2, vec3 } from 'gl-matrix';\n\n/**\n * do RTS transformation for 2D/3D\n */\nexport interface Transform {\n  /**\n   * Update flag for the world transformation matrix\n   *\n   * ! This flag should usually not be updated manually, it should be derived from the parent node's `dirtyFlag` and its own `localDirtyFlag`\n   */\n  dirtyFlag: boolean;\n  localDirtyFlag: boolean;\n\n  /**\n   * local space RTS\n   */\n  localPosition: vec3;\n  localRotation: quat;\n  localScale: vec3;\n  localTransform: mat4;\n\n  /**\n   * @see https://www.w3.org/TR/css-transforms-1/#SkewDefined\n   */\n  localSkew: vec2;\n\n  /**\n   * world space RTS\n   */\n  position: vec3;\n  rotation: quat;\n  scaling: vec3;\n  worldTransform: mat4;\n\n  /**\n   * the origin of scaling and rotation\n   */\n  origin: vec3;\n}\n\n/** shared objects */\nconst $vec3 = vec3.create();\n/** shared objects */\nconst $mat4 = mat4.create();\n/** shared objects */\nconst $quat = quat.create();\n\nexport function updateLocalTransform(transform: Transform) {\n  if (!transform.localDirtyFlag) {\n    return;\n  }\n\n  const hasSkew = transform.localSkew[0] !== 0 || transform.localSkew[1] !== 0;\n\n  if (hasSkew) {\n    mat4.fromRotationTranslationScaleOrigin(\n      transform.localTransform,\n      transform.localRotation,\n      transform.localPosition,\n      vec3.fromValues(1, 1, 1),\n      transform.origin,\n    );\n\n    // apply skew2D\n    if (transform.localSkew[0] !== 0 || transform.localSkew[1] !== 0) {\n      mat4.identity($mat4);\n      $mat4[4] = Math.tan(transform.localSkew[0]);\n      $mat4[1] = Math.tan(transform.localSkew[1]);\n      mat4.multiply(transform.localTransform, transform.localTransform, $mat4);\n    }\n\n    const scaling = mat4.fromRotationTranslationScaleOrigin(\n      $mat4,\n      quat.set($quat, 0, 0, 0, 1),\n      vec3.set($vec3, 1, 1, 1),\n      transform.localScale,\n      transform.origin,\n    );\n    mat4.multiply(transform.localTransform, transform.localTransform, scaling);\n  } else {\n    const { localTransform, localPosition, localRotation, localScale, origin } =\n      transform;\n\n    const hasPosition =\n      localPosition[0] !== 0 ||\n      localPosition[1] !== 0 ||\n      localPosition[2] !== 0;\n\n    const hasRotation =\n      localRotation[3] !== 1 ||\n      localRotation[0] !== 0 ||\n      localRotation[1] !== 0 ||\n      localRotation[2] !== 0;\n\n    const hasScale =\n      localScale[0] !== 1 || localScale[1] !== 1 || localScale[2] !== 1;\n\n    const hasOrigin = origin[0] !== 0 || origin[1] !== 0 || origin[2] !== 0;\n\n    if (!hasRotation && !hasScale && !hasOrigin) {\n      if (hasPosition) {\n        mat4.fromTranslation(localTransform, localPosition);\n      } else {\n        mat4.identity(localTransform);\n      }\n    } else {\n      // @see https://github.com/mattdesl/css-mat4/blob/master/index.js\n      mat4.fromRotationTranslationScaleOrigin(\n        localTransform,\n        localRotation,\n        localPosition,\n        localScale,\n        origin,\n      );\n    }\n  }\n\n  transform.localDirtyFlag = false;\n}\n\nexport function updateWorldTransform(\n  transform: Transform,\n  parentTransform: Transform,\n) {\n  if (!transform.dirtyFlag) {\n    return;\n  }\n\n  if (!parentTransform) {\n    mat4.copy(transform.worldTransform, transform.localTransform);\n  } else {\n    // TODO: should we support scale compensation?\n    // @see https://github.com/playcanvas/engine/issues/1077#issuecomment-359765557\n    mat4.multiply(\n      transform.worldTransform,\n      parentTransform.worldTransform,\n      transform.localTransform,\n    );\n  }\n\n  transform.dirtyFlag = false;\n}\n","import { AbsoluteArray } from '@antv/util';\nimport { Rectangle } from '../shapes';\n\nexport const EMPTY_PARSED_PATH = {\n  absolutePath: [] as unknown as AbsoluteArray,\n  hasArc: false,\n  segments: [],\n  polygons: [],\n  polylines: [],\n  curve: null,\n  totalLength: 0,\n  rect: new Rectangle(0, 0, 0, 0),\n};\n","import type { BaseStyleProps } from '..';\nimport type { DisplayObject } from '../display-objects';\nimport type { CSSProperty } from './CSSProperty';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type\n */\nexport enum PropertySyntax {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#coordinate\n   */\n  COORDINATE = '<coordinate>',\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#color\n   */\n  COLOR = '<color>',\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#paint\n   */\n  PAINT = '<paint>',\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#number\n   */\n  NUMBER = '<number>',\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/angle\n   */\n  ANGLE = '<angle>',\n  /**\n   * <number> with range 0..1\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#opacity_value\n   */\n  OPACITY_VALUE = '<opacity-value>',\n  /**\n   * <number> with range 0..Infinity\n   */\n  SHADOW_BLUR = '<shadow-blur>',\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#length\n   */\n  LENGTH = '<length>',\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#percentage\n   */\n  PERCENTAGE = '<percentage>',\n  LENGTH_PERCENTAGE = '<length> | <percentage>',\n\n  LENGTH_PERCENTAGE_12 = '[<length> | <percentage>]{1,2}',\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/margin#formal_syntax\n   */\n  LENGTH_PERCENTAGE_14 = '[<length> | <percentage>]{1,4}',\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#list-of-ts\n   */\n  LIST_OF_POINTS = '<list-of-points>',\n  PATH = '<path>',\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/filter#formal_syntax\n   */\n  FILTER = '<filter>',\n  Z_INDEX = '<z-index>',\n  OFFSET_DISTANCE = '<offset-distance>',\n  DEFINED_PATH = '<defined-path>',\n  MARKER = '<marker>',\n  TRANSFORM = '<transform>',\n  TRANSFORM_ORIGIN = '<transform-origin>',\n  TEXT = '<text>',\n  TEXT_TRANSFORM = '<text-transform>',\n}\n\nexport interface PropertyMetadata {\n  n: string;\n\n  /**\n   * The interpolable flag indicates whether a property can be animated smoothly.\n   * Default to `false`.\n   */\n  int?: boolean;\n\n  /**\n   * The property will inherit by default if no value is specified.\n   * Default to `false`.\n   */\n  inh?: boolean;\n\n  /**\n   * This property affects only one field on ComputedStyle, and can be set\n   * directly during inheritance instead of forcing a recalc.\n   */\n  ind?: boolean;\n\n  /**\n   * This specifies the default value for this field.\n   * - for keyword fields, this is the initial keyword\n   * - for other fields, this is a string containg the C++ expression that is used to initialise the field.\n   */\n  d?: string | ((nodeName: string) => string);\n\n  /**\n   * The resolved value used for getComputedStyle() depends on layout for this\n   * property, which means we may need to update layout to return the correct\n   * value from getComputedStyle().\n   */\n  l?: boolean;\n\n  /**\n   * This specifies all valid keyword values for the property.\n   */\n  k?: string[];\n\n  /**\n   * eg. strokeWidth is an alias of lineWidth\n   */\n  a?: string[];\n\n  /**\n   * sort before init attributes according to this priority\n   */\n  p?: number;\n\n  /**\n   * eg. <color> <paint> <number>\n   */\n  syntax?: string;\n}\n\nexport interface PropertyParseOptions {\n  skipUpdateAttribute: boolean;\n  skipParse: boolean;\n  forceUpdateGeometry: boolean;\n  usedAttributes: string[];\n  memoize: boolean;\n}\n\nexport interface StyleValueRegistry {\n  updateSizeAttenuation: (displayObject: DisplayObject, zoom: number) => void;\n  registerMetadata: (metadata: PropertyMetadata) => void;\n  getPropertySyntax: (syntax: string) => CSSProperty<any, any>;\n  processProperties: (\n    object: DisplayObject,\n    attributes: BaseStyleProps,\n    options?: Partial<PropertyParseOptions>,\n  ) => void;\n}\n\nexport interface LayoutRegistry {\n  registerLayout: (name: string, ctor: any) => void;\n  hasLayout: (name: string) => boolean;\n  getLayout: (name: string) => any;\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export function memoize<F = (...args: unknown[]) => unknown>(\n  func: F,\n  resolver?: (...args: any[]) => any,\n) {\n  if (\n    typeof func !== 'function' ||\n    (resolver != null && typeof resolver !== 'function')\n  ) {\n    throw new TypeError('Expected a function');\n  }\n\n  const memoized = function (...args) {\n    const key = resolver ? resolver.apply(this, args) : args[0];\n    const { cache } = memoized;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    const result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || Map)();\n  memoize.cacheList.push(memoized.cache);\n\n  return memoized as F;\n}\n\nmemoize.Cache = Map;\nmemoize.cacheList = [];\nmemoize.clearCache = () => {\n  memoize.cacheList.forEach((cache) =>\n    (cache as unknown as Map<unknown, unknown>).clear(),\n  );\n};\n","// These units are iterated through, so be careful when adding or changing the\n// order.\nexport enum UnitType {\n  kUnknown,\n  kNumber,\n  kPercentage,\n  // Length units\n  kEms,\n  // kExs,\n  kPixels,\n  // kCentimeters,\n  // kMillimeters,\n  // kInches,\n  // kPoints,\n  // kPicas,\n  // kQuarterMillimeters,\n  // https://drafts.csswg.org/css-values-4/#viewport-relative-lengths\n  //\n  // See also IsViewportPercentageLength.\n  // kViewportWidth,\n  // kViewportHeight,\n  // kViewportInlineSize,\n  // kViewportBlockSize,\n  // kViewportMin,\n  // kViewportMax,\n  // kSmallViewportWidth,\n  // kSmallViewportHeight,\n  // kSmallViewportInlineSize,\n  // kSmallViewportBlockSize,\n  // kSmallViewportMin,\n  // kSmallViewportMax,\n  // kLargeViewportWidth,\n  // kLargeViewportHeight,\n  // kLargeViewportInlineSize,\n  // kLargeViewportBlockSize,\n  // kLargeViewportMin,\n  // kLargeViewportMax,\n  // kDynamicViewportWidth,\n  // kDynamicViewportHeight,\n  // kDynamicViewportInlineSize,\n  // kDynamicViewportBlockSize,\n  // kDynamicViewportMin,\n  // kDynamicViewportMax,\n  // https://drafts.csswg.org/css-contain-3/#container-lengths\n  //\n  // See also IsContainerPercentageLength.\n  // kContainerWidth,\n  // kContainerHeight,\n  // kContainerInlineSize,\n  // kContainerBlockSize,\n  // kContainerMin,\n  // kContainerMax,\n  kRems,\n  // kChs,\n  // kUserUnits, // The SVG term for unitless lengths\n  // Angle units\n  kDegrees,\n  kRadians,\n  kGradians,\n  kTurns,\n  // Time units\n  kMilliseconds,\n  kSeconds,\n  // kHertz,\n  // kKilohertz,\n  // Resolution\n  // kDotsPerPixel,\n  // kDotsPerInch,\n  // kDotsPerCentimeter,\n  // Other units\n  // kFraction,\n  kInteger,\n  // This value is used to handle quirky margins in reflow roots (body, td,\n  // and th) like WinIE. The basic idea is that a stylesheet can use the value\n  // __qem (for quirky em) instead of em. When the quirky value is used, if\n  // you're in quirks mode, the margin will collapse away inside a table cell.\n  // This quirk is specified in the HTML spec but our impl is different.\n  // TODO: Remove this. crbug.com/443952\n  // kQuirkyEms,\n}\n\nexport enum UnitCategory {\n  kUNumber,\n  kUPercent,\n  kULength,\n  kUAngle,\n  kUTime,\n  // kUFrequency,\n  // kUResolution,\n  kUOther,\n}\n\nexport enum Nested {\n  kYes,\n  kNo,\n}\nexport enum ParenLess {\n  kYes,\n  kNo,\n}\n","import { Nested, ParenLess, UnitCategory, UnitType } from './types';\n\n// This file specifies the unit strings used in CSSPrimitiveValues.\nconst data = [\n  {\n    name: 'em',\n    unit_type: UnitType.kEms,\n  },\n  // {\n  //   name: 'ex',\n  //   unit_type: UnitType.kExs,\n  // },\n  {\n    name: 'px',\n    unit_type: UnitType.kPixels,\n  },\n  // {\n  //   name: \"cm\",\n  //   unit_type: UnitType.kCentimeters,\n  // },\n  // {\n  //   name: \"mm\",\n  //   unit_type: UnitType.kMillimeters,\n  // },\n  // {\n  //   name: \"q\",\n  //   unit_type: UnitType.kQuarterMillimeters,\n  // },\n  // {\n  //   name: \"in\",\n  //   unit_type: UnitType.kInches,\n  // },\n  // {\n  //   name: \"pt\",\n  //   unit_type: UnitType.kPoints,\n  // },\n  // {\n  //   name: \"pc\",\n  //   unit_type: UnitType.kPicas,\n  // },\n  {\n    name: 'deg',\n    unit_type: UnitType.kDegrees,\n  },\n  {\n    name: 'rad',\n    unit_type: UnitType.kRadians,\n  },\n  {\n    name: 'grad',\n    unit_type: UnitType.kGradians,\n  },\n  {\n    name: 'ms',\n    unit_type: UnitType.kMilliseconds,\n  },\n  {\n    name: 's',\n    unit_type: UnitType.kSeconds,\n  },\n  // {\n  //   name: \"hz\",\n  //   unit_type: UnitType.kHertz,\n  // },\n  // {\n  //   name: \"khz\",\n  //   unit_type: UnitType.kKilohertz,\n  // },\n  // {\n  //   name: \"dpi\",\n  //   unit_type: \"kDotsPerInch\",\n  // },\n  // {\n  //   name: \"dpcm\",\n  //   unit_type: \"kDotsPerCentimeter\",\n  // },\n  // {\n  //   name: \"dppx\",\n  //   unit_type: \"kDotsPerPixel\",\n  // },\n  // {\n  //   name: \"x\",\n  //   unit_type: \"kDotsPerPixel\",\n  // },\n  // {\n  //   name: \"vw\",\n  //   unit_type: \"kViewportWidth\",\n  // },\n  // {\n  //   name: \"vh\",\n  //   unit_type: \"kViewportHeight\",\n  // },\n  // {\n  //   name: \"vi\",\n  //   unit_type: \"kViewportInlineSize\",\n  // },\n  // {\n  //   name: \"vb\",\n  //   unit_type: \"kViewportBlockSize\",\n  // },\n  // {\n  //   name: \"vmin\",\n  //   unit_type: UnitType.kViewportMin,\n  // },\n  // {\n  //   name: \"vmax\",\n  //   unit_type: UnitType.kViewportMax,\n  // },\n  // {\n  //   name: \"svw\",\n  //   unit_type: \"kSmallViewportWidth\",\n  // },\n  // {\n  //   name: \"svh\",\n  //   unit_type: \"kSmallViewportHeight\",\n  // },\n  // {\n  //   name: \"svi\",\n  //   unit_type: \"kSmallViewportInlineSize\",\n  // },\n  // {\n  //   name: \"svb\",\n  //   unit_type: \"kSmallViewportBlockSize\",\n  // },\n  // {\n  //   name: \"svmin\",\n  //   unit_type: \"kSmallViewportMin\",\n  // },\n  // {\n  //   name: \"svmax\",\n  //   unit_type: \"kSmallViewportMax\",\n  // },\n  // {\n  //   name: \"lvw\",\n  //   unit_type: \"kLargeViewportWidth\",\n  // },\n  // {\n  //   name: \"lvh\",\n  //   unit_type: \"kLargeViewportHeight\",\n  // },\n  // {\n  //   name: \"lvi\",\n  //   unit_type: \"kLargeViewportInlineSize\",\n  // },\n  // {\n  //   name: \"lvb\",\n  //   unit_type: \"kLargeViewportBlockSize\",\n  // },\n  // {\n  //   name: \"lvmin\",\n  //   unit_type: UnitType.kLargeViewportMin,\n  // },\n  // {\n  //   name: \"lvmax\",\n  //   unit_type: UnitType.kLargeViewportMax,\n  // },\n  // {\n  //   name: \"dvw\",\n  //   unit_type: UnitType.kDynamicViewportWidth,\n  // },\n  // {\n  //   name: \"dvh\",\n  //   unit_type: UnitType.kDynamicViewportHeight,\n  // },\n  // {\n  //   name: \"dvi\",\n  //   unit_type: UnitType.kDynamicViewportInlineSize,\n  // },\n  // {\n  //   name: \"dvb\",\n  //   unit_type: UnitType.kDynamicViewportBlockSize,\n  // },\n  // {\n  //   name: \"dvmin\",\n  //   unit_type: UnitType.kDynamicViewportMin,\n  // },\n  // {\n  //   name: \"dvmax\",\n  //   unit_type: UnitType.kDynamicViewportMax,\n  // },\n  // {\n  //   name: \"cqw\",\n  //   unit_type: UnitType.kContainerWidth,\n  // },\n  // {\n  //   name: \"cqh\",\n  //   unit_type: UnitType.kContainerHeight,\n  // },\n  // {\n  //   name: \"cqi\",\n  //   unit_type: UnitType.kContainerInlineSize,\n  // },\n  // {\n  //   name: \"cqb\",\n  //   unit_type: UnitType.kContainerBlockSize,\n  // },\n  // {\n  //   name: \"cqmin\",\n  //   unit_type: UnitType.kContainerMin,\n  // },\n  // {\n  //   name: \"cqmax\",\n  //   unit_type: UnitType.kContainerMax,\n  // },\n  {\n    name: 'rem',\n    unit_type: UnitType.kRems,\n  },\n  // {\n  //   name: 'fr',\n  //   unit_type: UnitType.kFraction,\n  // },\n  {\n    name: 'turn',\n    unit_type: UnitType.kTurns,\n  },\n  // {\n  //   name: 'ch',\n  //   unit_type: UnitType.kChs,\n  // },\n  // {\n  //   name: '__qem',\n  //   unit_type: UnitType.kQuirkyEms,\n  // },\n];\n\nexport enum CSSStyleValueType {\n  kUnknownType,\n  kUnparsedType,\n  kKeywordType,\n  // Start of CSSNumericValue subclasses\n  kUnitType,\n  kSumType,\n  kProductType,\n  kNegateType,\n  kInvertType,\n  kMinType,\n  kMaxType,\n  kClampType,\n  // End of CSSNumericValue subclasses\n  kTransformType,\n  kPositionType,\n  kURLImageType,\n  kColorType,\n  kUnsupportedColorType,\n}\n\n// function parseCSSStyleValue(propertyName: string, value: string): CSSStyleValue[] {\n//   // const propertyId = cssPropertyID(propertyName);\n\n//   // if (propertyId === CSSPropertyID.kInvalid) {\n//   //   return [];\n//   // }\n\n//   // const customPropertyName = propertyId === CSSPropertyID.kVariable ? propertyName : null;\n//   // return fromString(propertyId, customPropertyName, value);\n//   return [];\n// }\n\nconst stringToUnitType = (name: string): UnitType => {\n  return data.find((item) => item.name === name).unit_type;\n};\n\nexport const unitFromName = (name: string) => {\n  if (!name) {\n    return UnitType.kUnknown;\n  }\n  if (name === 'number') {\n    return UnitType.kNumber;\n  }\n  if (name === 'percent' || name === '%') {\n    return UnitType.kPercentage;\n  }\n  return stringToUnitType(name);\n};\n\nexport const unitTypeToUnitCategory = (type: UnitType) => {\n  switch (type) {\n    case UnitType.kNumber:\n    case UnitType.kInteger:\n      return UnitCategory.kUNumber;\n    case UnitType.kPercentage:\n      return UnitCategory.kUPercent;\n    case UnitType.kPixels:\n      // case UnitType.kCentimeters:\n      // case UnitType.kMillimeters:\n      // case UnitType.kQuarterMillimeters:\n      // case UnitType.kInches:\n      // case UnitType.kPoints:\n      // case UnitType.kPicas:\n      // case UnitType.kUserUnits:\n      return UnitCategory.kULength;\n    case UnitType.kMilliseconds:\n    case UnitType.kSeconds:\n      return UnitCategory.kUTime;\n    case UnitType.kDegrees:\n    case UnitType.kRadians:\n    case UnitType.kGradians:\n    case UnitType.kTurns:\n      return UnitCategory.kUAngle;\n    // case UnitType.kHertz:\n    // case UnitType.kKilohertz:\n    //   return UnitCategory.kUFrequency;\n    // case UnitType.kDotsPerPixel:\n    // case UnitType.kDotsPerInch:\n    // case UnitType.kDotsPerCentimeter:\n    //   return UnitCategory.kUResolution;\n    default:\n      return UnitCategory.kUOther;\n  }\n};\n\nexport const canonicalUnitTypeForCategory = (category: UnitCategory) => {\n  // The canonical unit type is chosen according to the way\n  // CSSPropertyParser.ValidUnit() chooses the default unit in each category\n  // (based on unitflags).\n  switch (category) {\n    case UnitCategory.kUNumber:\n      return UnitType.kNumber;\n    case UnitCategory.kULength:\n      return UnitType.kPixels;\n    case UnitCategory.kUPercent:\n      return UnitType.kPercentage;\n    // return UnitType.kUnknown; // Cannot convert between numbers and percent.\n    case UnitCategory.kUTime:\n      return UnitType.kSeconds;\n    case UnitCategory.kUAngle:\n      return UnitType.kDegrees;\n    // case UnitCategory.kUFrequency:\n    //   return UnitType.kHertz;\n    // case UnitCategory.kUResolution:\n    //   return UnitType.kDotsPerPixel;\n    default:\n      return UnitType.kUnknown;\n  }\n};\n\n/**\n * @see https://chromium.googlesource.com/chromium/src/+/refs/heads/main/third_party/blink/renderer/core/css/css_primitive_value.cc#353\n */\nexport const conversionToCanonicalUnitsScaleFactor = (unit_type: UnitType) => {\n  let factor = 1.0;\n  // FIXME: the switch can be replaced by an array of scale factors.\n  switch (unit_type) {\n    // These are \"canonical\" units in their respective categories.\n    case UnitType.kPixels:\n    // case UnitType.kUserUnits:\n    case UnitType.kDegrees:\n    case UnitType.kSeconds:\n      // case UnitType.kHertz:\n      break;\n    case UnitType.kMilliseconds:\n      factor = 0.001;\n      break;\n    // case UnitType.kCentimeters:\n    //   // factor = kCssPixelsPerCentimeter;\n    //   break;\n    // case UnitType.kDotsPerCentimeter:\n    //   // factor = 1 / kCssPixelsPerCentimeter;\n    //   break;\n    // case UnitType.kMillimeters:\n    //   // factor = kCssPixelsPerMillimeter;\n    //   break;\n    // case UnitType.kQuarterMillimeters:\n    //   // factor = kCssPixelsPerQuarterMillimeter;\n    //   break;\n    // case UnitType.kInches:\n    //   // factor = kCssPixelsPerInch;\n    //   break;\n    // case UnitType.kDotsPerInch:\n    //   // factor = 1 / kCssPixelsPerInch;\n    //   break;\n    // case UnitType.kPoints:\n    //   // factor = kCssPixelsPerPoint;\n    //   break;\n    // case UnitType.kPicas:\n    //   // factor = kCssPixelsPerPica;\n    //   break;\n    case UnitType.kRadians:\n      factor = 180 / Math.PI;\n      break;\n    case UnitType.kGradians:\n      factor = 0.9;\n      break;\n    case UnitType.kTurns:\n      factor = 360;\n      break;\n    // case UnitType.kKilohertz:\n    //   factor = 1000;\n    //   break;\n    default:\n      break;\n  }\n  return factor;\n};\n\nexport const unitTypeToString = (type: UnitType) => {\n  switch (type) {\n    case UnitType.kNumber:\n    case UnitType.kInteger:\n      // case UnitType.kUserUnits:\n      return '';\n    case UnitType.kPercentage:\n      return '%';\n    case UnitType.kEms:\n      // case UnitType.kQuirkyEms:\n      return 'em';\n    // case UnitType.kExs:\n    //   return 'ex';\n    case UnitType.kRems:\n      return 'rem';\n    // case UnitType.kChs:\n    //   return 'ch';\n    case UnitType.kPixels:\n      return 'px';\n    // case UnitType.kCentimeters:\n    //   return 'cm';\n    // case UnitType.kDotsPerPixel:\n    //   return 'dppx';\n    // case UnitType.kDotsPerInch:\n    //   return 'dpi';\n    // case UnitType.kDotsPerCentimeter:\n    //   return 'dpcm';\n    // case UnitType.kMillimeters:\n    //   return 'mm';\n    // case UnitType.kQuarterMillimeters:\n    //   return 'q';\n    // case UnitType.kInches:\n    //   return 'in';\n    // case UnitType.kPoints:\n    //   return 'pt';\n    // case UnitType.kPicas:\n    //   return 'pc';\n    case UnitType.kDegrees:\n      return 'deg';\n    case UnitType.kRadians:\n      return 'rad';\n    case UnitType.kGradians:\n      return 'grad';\n    case UnitType.kMilliseconds:\n      return 'ms';\n    case UnitType.kSeconds:\n      return 's';\n    // case UnitType.kHertz:\n    //   return 'hz';\n    // case UnitType.kKilohertz:\n    //   return 'khz';\n    case UnitType.kTurns:\n      return 'turn';\n    // case UnitType.kFraction:\n    //   return 'fr';\n    // case UnitType.kViewportWidth:\n    //   return 'vw';\n    // case UnitType.kViewportHeight:\n    //   return 'vh';\n    // case UnitType.kViewportInlineSize:\n    //   return 'vi';\n    // case UnitType.kViewportBlockSize:\n    //   return 'vb';\n    // case UnitType.kViewportMin:\n    //   return 'vmin';\n    // case UnitType.kViewportMax:\n    //   return 'vmax';\n    // case UnitType.kSmallViewportWidth:\n    //   return 'svw';\n    // case UnitType.kSmallViewportHeight:\n    //   return 'svh';\n    // case UnitType.kSmallViewportInlineSize:\n    //   return 'svi';\n    // case UnitType.kSmallViewportBlockSize:\n    //   return 'svb';\n    // case UnitType.kSmallViewportMin:\n    //   return 'svmin';\n    // case UnitType.kSmallViewportMax:\n    //   return 'svmax';\n    // case UnitType.kLargeViewportWidth:\n    //   return 'lvw';\n    // case UnitType.kLargeViewportHeight:\n    //   return 'lvh';\n    // case UnitType.kLargeViewportInlineSize:\n    //   return 'lvi';\n    // case UnitType.kLargeViewportBlockSize:\n    //   return 'lvb';\n    // case UnitType.kLargeViewportMin:\n    //   return 'lvmin';\n    // case UnitType.kLargeViewportMax:\n    //   return 'lvmax';\n    // case UnitType.kDynamicViewportWidth:\n    //   return 'dvw';\n    // case UnitType.kDynamicViewportHeight:\n    //   return 'dvh';\n    // case UnitType.kDynamicViewportInlineSize:\n    //   return 'dvi';\n    // case UnitType.kDynamicViewportBlockSize:\n    //   return 'dvb';\n    // case UnitType.kDynamicViewportMin:\n    //   return 'dvmin';\n    // case UnitType.kDynamicViewportMax:\n    //   return 'dvmax';\n    // case UnitType.kContainerWidth:\n    //   return 'cqw';\n    // case UnitType.kContainerHeight:\n    //   return 'cqh';\n    // case UnitType.kContainerInlineSize:\n    //   return 'cqi';\n    // case UnitType.kContainerBlockSize:\n    //   return 'cqb';\n    // case UnitType.kContainerMin:\n    //   return 'cqmin';\n    // case UnitType.kContainerMax:\n    //   return 'cqmax';\n    default:\n      break;\n  }\n  return '';\n};\n\n/**\n * CSSStyleValue is the base class for all CSS values accessible from Typed OM.\n * Values that are not yet supported as specific types are also returned as base CSSStyleValues.\n *\n * Spec @see https://drafts.css-houdini.org/css-typed-om/#stylevalue-objects\n * Docs @see https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleValue\n */\nexport abstract class CSSStyleValue {\n  // static parse(propertyName: string, value: string): CSSStyleValue {\n  //   return parseCSSStyleValue(propertyName, value)[0];\n  // }\n\n  // static parseAll(propertyName: string, value: string): CSSStyleValue[] {\n  //   return parseCSSStyleValue(propertyName, value);\n  // }\n\n  static isAngle(unit: UnitType) {\n    return (\n      unit === UnitType.kDegrees ||\n      unit === UnitType.kRadians ||\n      unit === UnitType.kGradians ||\n      unit === UnitType.kTurns\n    );\n  }\n\n  // static isViewportPercentageLength(type: UnitType) {\n  //   return type >= UnitType.kViewportWidth && type <= UnitType.kDynamicViewportMax;\n  // }\n\n  // static isContainerPercentageLength(type: UnitType) {\n  //   return type >= UnitType.kContainerWidth && type <= UnitType.kContainerMax;\n  // }\n\n  static isLength(type: UnitType) {\n    // return (type >= UnitType.kEms && type <= UnitType.kUserUnits) || type == UnitType.kQuirkyEms;\n    return type >= UnitType.kEms && type < UnitType.kDegrees;\n  }\n\n  static isRelativeUnit(type: UnitType) {\n    return (\n      type === UnitType.kPercentage ||\n      type === UnitType.kEms ||\n      // type === UnitType.kExs ||\n      type === UnitType.kRems\n      // type === UnitType.kChs ||\n      // this.isViewportPercentageLength(type) ||\n      // this.isContainerPercentageLength(type)\n    );\n  }\n\n  static isTime(unit: UnitType) {\n    return unit === UnitType.kSeconds || unit === UnitType.kMilliseconds;\n  }\n\n  // static isFrequency(unit: UnitType) {\n  //   return unit == UnitType.kHertz || unit == UnitType.kKilohertz;\n  // }\n\n  // static isResolution(type: UnitType) {\n  //   return type >= UnitType.kDotsPerPixel && type <= UnitType.kDotsPerCentimeter;\n  // }\n\n  // static isFlex(unit: UnitType) {\n  //   return unit === UnitType.kFraction;\n  // }\n\n  protected abstract getType(): CSSStyleValueType;\n\n  abstract buildCSSText(n: Nested, p: ParenLess, result: string): string;\n\n  abstract clone(): CSSStyleValue;\n\n  // protected abstract toCSSValue(): CSSValue;\n\n  toString(): string {\n    return this.buildCSSText(Nested.kNo, ParenLess.kNo, '');\n  }\n\n  isNumericValue() {\n    return (\n      this.getType() >= CSSStyleValueType.kUnitType &&\n      this.getType() <= CSSStyleValueType.kClampType\n    );\n  }\n}\n","import { CSSStyleValue, CSSStyleValueType } from './CSSStyleValue';\nimport { CSSNumberish } from './CSSNumericValue';\n\n/**\n * @see https://drafts.css-houdini.org/css-typed-om-1/#dom-csscolorvalue-colorspace\n */\nexport type ColorSpace = 'rgb' | 'hsl' | 'hwb' | 'lch' | 'lab';\nexport type CSSColorRGBComp = CSSNumberish | 'none';\nexport type CSSColorPercent = CSSNumberish | 'none';\nexport type CSSColorNumber = CSSNumberish | 'none';\nexport type CSSColorAngle = CSSNumberish | 'none';\n\n/**\n * CSSColorValue is the base class used for the various CSS color interfaces.\n *\n * @see https://drafts.css-houdini.org/css-typed-om-1/#colorvalue-objects\n */\nexport abstract class CSSColorValue extends CSSStyleValue {\n  constructor(public colorSpace: ColorSpace) {\n    super();\n  }\n\n  getType() {\n    return CSSStyleValueType.kColorType;\n  }\n\n  /**\n   * @see https://drafts.css-houdini.org/css-typed-om-1/#dom-csscolorvalue-to\n   */\n  to(colorSpace: ColorSpace): CSSColorValue {\n    return this;\n  }\n}\n","import type { CSSKeywordValue } from './CSSKeywordValue';\nimport type { CSSUnitValue } from './CSSNumericValue';\nimport { CSSStyleValue, CSSStyleValueType } from './CSSStyleValue';\nimport type { Nested, ParenLess } from './types';\n\nexport interface LinearColorStop {\n  offset: CSSUnitValue;\n  color: string; // use user-defined value instead of parsed CSSRGB\n}\n\nexport interface LinearGradient {\n  angle: CSSUnitValue;\n  steps: LinearColorStop[];\n}\n\nexport interface RadialGradient {\n  cx: CSSUnitValue;\n  cy: CSSUnitValue;\n  size?: CSSUnitValue | CSSKeywordValue;\n  steps: LinearColorStop[];\n}\n\nexport enum GradientType {\n  Constant,\n  LinearGradient,\n  RadialGradient,\n}\n\nexport class CSSGradientValue extends CSSStyleValue {\n  constructor(\n    public type: GradientType,\n    public value: LinearGradient | RadialGradient,\n  ) {\n    super();\n  }\n\n  clone() {\n    return new CSSGradientValue(this.type, this.value);\n  }\n\n  buildCSSText(n: Nested, p: ParenLess, result: string): string {\n    return result;\n  }\n\n  getType() {\n    return CSSStyleValueType.kColorType;\n  }\n}\n","import { CSSStyleValue, CSSStyleValueType } from './CSSStyleValue';\nimport type { Nested, ParenLess } from './types';\n\n/**\n * CSSKeywordValue represents CSS Values that are specified as keywords\n * eg. 'initial'\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSKeywordValue\n * @see https://chromium.googlesource.com/chromium/src/+/refs/heads/main/third_party/blink/renderer/core/css/cssom/css_keyword_value.idl\n */\nexport class CSSKeywordValue extends CSSStyleValue {\n  constructor(public value: string) {\n    super();\n  }\n\n  clone() {\n    return new CSSKeywordValue(this.value);\n  }\n\n  getType() {\n    return CSSStyleValueType.kKeywordType;\n  }\n\n  buildCSSText(n: Nested, p: ParenLess, result: string) {\n    return result + this.value;\n  }\n}\n","import {\n  canonicalUnitTypeForCategory,\n  conversionToCanonicalUnitsScaleFactor,\n  CSSStyleValue,\n  CSSStyleValueType,\n  unitFromName,\n  unitTypeToString,\n  unitTypeToUnitCategory,\n} from './CSSStyleValue';\nimport { Nested, ParenLess, UnitType } from './types';\n\nexport type CSSNumberish = number;\n\nconst formatInfinityOrNaN = (number: number, suffix = '') => {\n  let result = '';\n  if (!Number.isFinite(number)) {\n    if (number > 0) result = 'infinity';\n    else result = '-infinity';\n  } else {\n    result = 'NaN';\n  }\n  return (result += suffix);\n};\n\nexport const toCanonicalUnit = (unit: UnitType) => {\n  return canonicalUnitTypeForCategory(unitTypeToUnitCategory(unit));\n};\n\n/**\n * CSSNumericValue is the base class for numeric and length typed CSS Values.\n * @see https://drafts.css-houdini.org/css-typed-om/#numeric-objects\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSNumericValue\n * @see https://chromium.googlesource.com/chromium/src/+/refs/heads/main/third_party/blink/renderer/core/css/cssom/css_numeric_value.idl\n */\n\n/**\n * Represents numeric values that can be expressed as a single number plus a\n * unit (or a naked number or percentage).\n * @see https://drafts.css-houdini.org/css-typed-om/#cssunitvalue\n */\nexport class CSSUnitValue extends CSSStyleValue {\n  unit: UnitType;\n  value: number;\n\n  constructor(value: number, unitOrName: UnitType | string = UnitType.kNumber) {\n    super();\n\n    let unit: UnitType;\n    if (typeof unitOrName === 'string') {\n      unit = unitFromName(unitOrName);\n    } else {\n      unit = unitOrName;\n    }\n    this.unit = unit;\n    this.value = value;\n  }\n\n  clone() {\n    return new CSSUnitValue(this.value, this.unit);\n  }\n\n  equals(other: CSSUnitValue): boolean {\n    const other_unit_value = other as unknown as CSSUnitValue;\n    return (\n      this.value === other_unit_value.value &&\n      this.unit === other_unit_value.unit\n    );\n  }\n\n  getType() {\n    return CSSStyleValueType.kUnitType;\n  }\n\n  convertTo(target_unit: UnitType): CSSUnitValue {\n    if (this.unit === target_unit) {\n      return new CSSUnitValue(this.value, this.unit);\n    }\n\n    // Instead of defining the scale factors for every unit to every other unit,\n    // we simply convert to the canonical unit and back since we already have\n    // the scale factors for canonical units.\n    const canonical_unit = toCanonicalUnit(this.unit);\n    if (\n      canonical_unit !== toCanonicalUnit(target_unit) ||\n      canonical_unit === UnitType.kUnknown\n    ) {\n      return null;\n    }\n\n    const scale_factor =\n      conversionToCanonicalUnitsScaleFactor(this.unit) /\n      conversionToCanonicalUnitsScaleFactor(target_unit);\n\n    return new CSSUnitValue(this.value * scale_factor, target_unit);\n  }\n\n  buildCSSText(n: Nested, p: ParenLess, result: string) {\n    let text: string;\n    switch (this.unit) {\n      case UnitType.kUnknown:\n        // FIXME\n        break;\n      case UnitType.kInteger:\n        text = Number(this.value).toFixed(0);\n        break;\n      case UnitType.kNumber:\n      case UnitType.kPercentage:\n      case UnitType.kEms:\n      // case UnitType.kQuirkyEms:\n      // case UnitType.kExs:\n      case UnitType.kRems:\n      // case UnitType.kChs:\n      case UnitType.kPixels:\n      // case UnitType.kCentimeters:\n      // case UnitType.kDotsPerPixel:\n      // case UnitType.kDotsPerInch:\n      // case UnitType.kDotsPerCentimeter:\n      // case UnitType.kMillimeters:\n      // case UnitType.kQuarterMillimeters:\n      // case UnitType.kInches:\n      // case UnitType.kPoints:\n      // case UnitType.kPicas:\n      // case UnitType.kUserUnits:\n      case UnitType.kDegrees:\n      case UnitType.kRadians:\n      case UnitType.kGradians:\n      case UnitType.kMilliseconds:\n      case UnitType.kSeconds:\n      // case UnitType.kHertz:\n      // case UnitType.kKilohertz:\n      case UnitType.kTurns: {\n        // case UnitType.kContainerMax: { // case UnitType.kContainerMin: // case UnitType.kContainerBlockSize: // case UnitType.kContainerInlineSize: // case UnitType.kContainerHeight: // case UnitType.kContainerWidth: // case UnitType.kDynamicViewportMax: // case UnitType.kDynamicViewportMin: // case UnitType.kDynamicViewportBlockSize: // case UnitType.kDynamicViewportInlineSize: // case UnitType.kDynamicViewportHeight: // case UnitType.kDynamicViewportWidth: // case UnitType.kLargeViewportMax: // case UnitType.kLargeViewportMin: // case UnitType.kLargeViewportBlockSize: // case UnitType.kLargeViewportInlineSize: // case UnitType.kLargeViewportHeight: // case UnitType.kLargeViewportWidth: // case UnitType.kSmallViewportMax: // case UnitType.kSmallViewportMin: // case UnitType.kSmallViewportBlockSize: // case UnitType.kSmallViewportInlineSize: // case UnitType.kSmallViewportHeight: // case UnitType.kSmallViewportWidth: // case UnitType.kViewportMax: // case UnitType.kViewportMin: // case UnitType.kViewportBlockSize: // case UnitType.kViewportInlineSize: // case UnitType.kViewportHeight: // case UnitType.kViewportWidth: // case UnitType.kFraction:\n        const kMinInteger = -999999;\n        const kMaxInteger = 999999;\n\n        const { value } = this;\n        const unit = unitTypeToString(this.unit);\n        if (value < kMinInteger || value > kMaxInteger) {\n          const unit = unitTypeToString(this.unit);\n          if (!Number.isFinite(value) || Number.isNaN(value)) {\n            text = formatInfinityOrNaN(value, unit);\n          } else {\n            text = value + (unit || '');\n          }\n        } else {\n          text = `${value}${unit}`;\n        }\n      }\n    }\n\n    result += text;\n    return result;\n  }\n}\n\nexport const Opx: CSSUnitValue = new CSSUnitValue(0, 'px');\nexport const Lpx: CSSUnitValue = new CSSUnitValue(1, 'px');\nexport const Odeg: CSSUnitValue = new CSSUnitValue(0, 'deg');\n","import type { CSSColorPercent, CSSColorRGBComp } from './CSSColorValue';\nimport { CSSColorValue } from './CSSColorValue';\nimport type { Nested, ParenLess } from './types';\n\n/**\n * The CSSRGB class represents the CSS rgb()/rgba() functions.\n *\n * @see https://drafts.css-houdini.org/css-typed-om-1/#cssrgb\n */\nexport class CSSRGB extends CSSColorValue {\n  constructor(\n    public r: CSSColorRGBComp,\n    public g: CSSColorRGBComp,\n    public b: CSSColorRGBComp,\n    public alpha: CSSColorPercent = 1,\n    /**\n     * 'transparent' & 'none' has the same rgba data\n     */\n    public isNone = false,\n  ) {\n    super('rgb');\n  }\n\n  clone() {\n    return new CSSRGB(this.r, this.g, this.b, this.alpha);\n  }\n\n  buildCSSText(n: Nested, p: ParenLess, result: string): string {\n    return `${result}rgba(${this.r},${this.g},${this.b},${this.alpha})`;\n  }\n}\n","import { memoize } from '../utils/memoize';\nimport { CSSKeywordValue, CSSRGB, CSSUnitValue, UnitType } from './cssom';\n\n/**\n * CSSKeywordValue\n */\nexport const unsetKeywordValue = new CSSKeywordValue('unset');\nexport const initialKeywordValue = new CSSKeywordValue('initial');\nexport const inheritKeywordValue = new CSSKeywordValue('inherit');\nconst keywordCache: Record<string, CSSKeywordValue> = {\n  '': unsetKeywordValue,\n  unset: unsetKeywordValue,\n  initial: initialKeywordValue,\n  inherit: inheritKeywordValue,\n};\nexport const getOrCreateKeyword = (name: string) => {\n  if (!keywordCache[name]) {\n    keywordCache[name] = new CSSKeywordValue(name);\n  }\n\n  return keywordCache[name];\n};\n\n/**\n * CSSColor\n */\nexport const noneColor = new CSSRGB(0, 0, 0, 0, true);\nexport const transparentColor = new CSSRGB(0, 0, 0, 0);\nexport const getOrCreateRGBA = memoize(\n  (r: number, g: number, b: number, a: number) => {\n    return new CSSRGB(r, g, b, a);\n  },\n  (r: number, g: number, b: number, a: number) => {\n    return `rgba(${r},${g},${b},${a})`;\n  },\n);\n\n// export const getOrCreateUnitValue = memoize(\n//   (value: number, unitOrName: UnitType | string = UnitType.kNumber) => {\n//     return new CSSUnitValue(value, unitOrName);\n//   },\n//   (value: number, unitOrName: UnitType | string = UnitType.kNumber) => {\n//     return `${value}${unitOrName}`;\n//   },\n// );\n\nexport const getOrCreateUnitValue = (\n  value: number,\n  unitOrName: UnitType | string = UnitType.kNumber,\n) => {\n  return new CSSUnitValue(value, unitOrName);\n};\nexport const PECENTAGE_50 = new CSSUnitValue(50, '%');\n","/**\n * borrow from gradient-parser, but we delete some browser compatible prefix such as `-webkit-`\n * @see https://github.com/rafaelcaricio/gradient-parser\n */\n\nimport { distanceSquareRoot } from '@antv/util';\nimport { CSSKeywordValue, CSSUnitValue, UnitType } from '../css/cssom';\nimport { deg2rad } from './math';\n\nexport interface LinearGradientNode {\n  type: 'linear-gradient';\n  orientation?: DirectionalNode | AngularNode | undefined;\n  colorStops: ColorStop[];\n}\n\nexport interface RepeatingLinearGradientNode {\n  type: 'repeating-linear-gradient';\n  orientation?: DirectionalNode | AngularNode | undefined;\n  colorStops: ColorStop[];\n}\n\nexport interface RadialGradientNode {\n  type: 'radial-gradient';\n  orientation?:\n    | (ShapeNode | DefaultRadialNode | ExtentKeywordNode)[]\n    | undefined;\n  colorStops: ColorStop[];\n}\n\nexport interface RepeatingRadialGradientNode {\n  type: 'repeating-radial-gradient';\n  orientation?:\n    | (ShapeNode | DefaultRadialNode | ExtentKeywordNode)[]\n    | undefined;\n  colorStops: ColorStop[];\n}\n\nexport interface DirectionalNode {\n  type: 'directional';\n  value:\n    | 'left'\n    | 'top'\n    | 'bottom'\n    | 'right'\n    | 'left top'\n    | 'top left'\n    | 'left bottom'\n    | 'bottom left'\n    | 'right top'\n    | 'top right'\n    | 'right bottom'\n    | 'bottom right';\n}\n\nexport interface AngularNode {\n  type: 'angular';\n  value: string;\n}\n\nexport interface LiteralNode {\n  type: 'literal';\n  value: string;\n  length?: PxNode | EmNode | PercentNode | undefined;\n}\n\nexport interface HexNode {\n  type: 'hex';\n  value: string;\n  length?: PxNode | EmNode | PercentNode | undefined;\n}\n\nexport interface RgbNode {\n  type: 'rgb';\n  value: [string, string, string];\n  length?: PxNode | EmNode | PercentNode | undefined;\n}\n\nexport interface RgbaNode {\n  type: 'rgba';\n  value: [string, string, string, string?];\n  length?: PxNode | EmNode | PercentNode | undefined;\n}\n\nexport interface ShapeNode {\n  type: 'shape';\n  style?:\n    | ExtentKeywordNode\n    | PxNode\n    | EmNode\n    | PercentNode\n    | PositionKeywordNode\n    | undefined;\n  value: 'ellipse' | 'circle';\n  at?: PositionNode | undefined;\n}\n\nexport interface DefaultRadialNode {\n  type: 'default-radial';\n  at: PositionNode;\n}\n\nexport interface PositionKeywordNode {\n  type: 'position-keyword';\n  value: 'center' | 'left' | 'top' | 'bottom' | 'right';\n}\n\nexport interface PositionNode {\n  type: 'position';\n  value: {\n    x: ExtentKeywordNode | PxNode | EmNode | PercentNode | PositionKeywordNode;\n    y: ExtentKeywordNode | PxNode | EmNode | PercentNode | PositionKeywordNode;\n  };\n}\n\nexport interface ExtentKeywordNode {\n  type: 'extent-keyword';\n  value:\n    | 'closest-side'\n    | 'closest-corner'\n    | 'farthest-side'\n    | 'farthest-corner'\n    | 'contain'\n    | 'cover';\n  at?: PositionNode | undefined;\n}\n\nexport interface PxNode {\n  type: 'px';\n  value: string;\n}\n\nexport interface EmNode {\n  type: 'em';\n  value: string;\n}\n\nexport interface PercentNode {\n  type: '%';\n  value: string;\n}\n\nexport type ColorStop = LiteralNode | HexNode | RgbNode | RgbaNode;\n\nexport type GradientNode =\n  | LinearGradientNode\n  | RepeatingLinearGradientNode\n  | RadialGradientNode\n  | RepeatingRadialGradientNode;\n\nexport function colorStopToString(colorStop: ColorStop) {\n  const { type, value } = colorStop;\n  if (type === 'hex') {\n    return `#${value}`;\n  }\n  if (type === 'literal') {\n    return value;\n  }\n  if (type === 'rgb') {\n    return `rgb(${value.join(',')})`;\n  }\n  return `rgba(${value.join(',')})`;\n}\n\nexport const parseGradient = (function () {\n  const tokens = {\n    linearGradient: /^(linear\\-gradient)/i,\n    repeatingLinearGradient: /^(repeating\\-linear\\-gradient)/i,\n    radialGradient: /^(radial\\-gradient)/i,\n    repeatingRadialGradient: /^(repeating\\-radial\\-gradient)/i,\n    /**\n     * @see https://projects.verou.me/conic-gradient/\n     */\n    conicGradient: /^(conic\\-gradient)/i,\n    sideOrCorner:\n      /^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,\n    extentKeywords:\n      /^(closest\\-side|closest\\-corner|farthest\\-side|farthest\\-corner|contain|cover)/,\n    positionKeywords: /^(left|center|right|top|bottom)/i,\n    pixelValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))px/,\n    percentageValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))\\%/,\n    emValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))em/,\n    angleValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))deg/,\n    startCall: /^\\(/,\n    endCall: /^\\)/,\n    comma: /^,/,\n    hexColor: /^\\#([0-9a-fA-F]+)/,\n    literalColor: /^([a-zA-Z]+)/,\n    rgbColor: /^rgb/i,\n    rgbaColor: /^rgba/i,\n    number: /^(([0-9]*\\.[0-9]+)|([0-9]+\\.?))/,\n  };\n\n  let input = '';\n\n  function error(msg: string) {\n    throw new Error(`${input}: ${msg}`);\n  }\n\n  function getAST() {\n    const ast = matchListDefinitions();\n\n    if (input.length > 0) {\n      error('Invalid input not EOF');\n    }\n\n    return ast;\n  }\n\n  function matchListDefinitions() {\n    return matchListing(matchDefinition);\n  }\n\n  function matchDefinition() {\n    return (\n      matchGradient(\n        'linear-gradient',\n        tokens.linearGradient,\n        matchLinearOrientation,\n      ) ||\n      matchGradient(\n        'repeating-linear-gradient',\n        tokens.repeatingLinearGradient,\n        matchLinearOrientation,\n      ) ||\n      matchGradient(\n        'radial-gradient',\n        tokens.radialGradient,\n        matchListRadialOrientations,\n      ) ||\n      matchGradient(\n        'repeating-radial-gradient',\n        tokens.repeatingRadialGradient,\n        matchListRadialOrientations,\n      ) ||\n      matchGradient(\n        'conic-gradient',\n        tokens.conicGradient,\n        matchListRadialOrientations,\n      )\n    );\n  }\n\n  function matchGradient(\n    gradientType: string,\n    pattern: RegExp,\n    orientationMatcher,\n  ) {\n    return matchCall(pattern, function (captures) {\n      const orientation = orientationMatcher();\n      if (orientation) {\n        if (!scan(tokens.comma)) {\n          error('Missing comma before color stops');\n        }\n      }\n\n      return {\n        type: gradientType,\n        orientation,\n        colorStops: matchListing(matchColorStop),\n      };\n    });\n  }\n\n  function matchCall(pattern, callback) {\n    const captures = scan(pattern);\n\n    if (captures) {\n      if (!scan(tokens.startCall)) {\n        error('Missing (');\n      }\n\n      const result = callback(captures);\n\n      if (!scan(tokens.endCall)) {\n        error('Missing )');\n      }\n\n      return result;\n    }\n  }\n\n  function matchLinearOrientation() {\n    return matchSideOrCorner() || matchAngle();\n  }\n\n  function matchSideOrCorner() {\n    return match('directional', tokens.sideOrCorner, 1);\n  }\n\n  function matchAngle() {\n    return match('angular', tokens.angleValue, 1);\n  }\n\n  function matchListRadialOrientations() {\n    let radialOrientations;\n    let radialOrientation = matchRadialOrientation();\n    let lookaheadCache;\n\n    if (radialOrientation) {\n      radialOrientations = [];\n      radialOrientations.push(radialOrientation);\n\n      lookaheadCache = input;\n      if (scan(tokens.comma)) {\n        radialOrientation = matchRadialOrientation();\n        if (radialOrientation) {\n          radialOrientations.push(radialOrientation);\n        } else {\n          input = lookaheadCache;\n        }\n      }\n    }\n\n    return radialOrientations;\n  }\n\n  function matchRadialOrientation() {\n    let radialType = matchCircle() || matchEllipse();\n\n    if (radialType) {\n      // @ts-ignore\n      radialType.at = matchAtPosition();\n    } else {\n      const extent = matchExtentKeyword();\n      if (extent) {\n        radialType = extent;\n        const positionAt = matchAtPosition();\n        if (positionAt) {\n          // @ts-ignore\n          radialType.at = positionAt;\n        }\n      } else {\n        const defaultPosition = matchPositioning();\n        if (defaultPosition) {\n          radialType = {\n            type: 'default-radial',\n            // @ts-ignore\n            at: defaultPosition,\n          };\n        }\n      }\n    }\n\n    return radialType;\n  }\n\n  function matchCircle() {\n    const circle = match('shape', /^(circle)/i, 0);\n\n    if (circle) {\n      // @ts-ignore\n      circle.style = matchLength() || matchExtentKeyword();\n    }\n\n    return circle;\n  }\n\n  function matchEllipse() {\n    const ellipse = match('shape', /^(ellipse)/i, 0);\n\n    if (ellipse) {\n      // @ts-ignore\n      ellipse.style = matchDistance() || matchExtentKeyword();\n    }\n\n    return ellipse;\n  }\n\n  function matchExtentKeyword() {\n    return match('extent-keyword', tokens.extentKeywords, 1);\n  }\n\n  function matchAtPosition() {\n    if (match('position', /^at/, 0)) {\n      const positioning = matchPositioning();\n\n      if (!positioning) {\n        error('Missing positioning value');\n      }\n\n      return positioning;\n    }\n  }\n\n  function matchPositioning() {\n    const location = matchCoordinates();\n\n    if (location.x || location.y) {\n      return {\n        type: 'position',\n        value: location,\n      };\n    }\n  }\n\n  function matchCoordinates() {\n    return {\n      x: matchDistance(),\n      y: matchDistance(),\n    };\n  }\n\n  function matchListing(matcher: () => any) {\n    let captures = matcher();\n    const result = [];\n\n    if (captures) {\n      result.push(captures);\n      while (scan(tokens.comma)) {\n        captures = matcher();\n        if (captures) {\n          result.push(captures);\n        } else {\n          error('One extra comma');\n        }\n      }\n    }\n\n    return result;\n  }\n\n  function matchColorStop() {\n    const color = matchColor();\n\n    if (!color) {\n      error('Expected color definition');\n    }\n\n    color.length = matchDistance();\n    return color;\n  }\n\n  function matchColor() {\n    return (\n      matchHexColor() ||\n      matchRGBAColor() ||\n      matchRGBColor() ||\n      matchLiteralColor()\n    );\n  }\n\n  function matchLiteralColor() {\n    return match('literal', tokens.literalColor, 0);\n  }\n\n  function matchHexColor() {\n    return match('hex', tokens.hexColor, 1);\n  }\n\n  function matchRGBColor() {\n    return matchCall(tokens.rgbColor, function () {\n      return {\n        type: 'rgb',\n        value: matchListing(matchNumber),\n      };\n    });\n  }\n\n  function matchRGBAColor() {\n    return matchCall(tokens.rgbaColor, function () {\n      return {\n        type: 'rgba',\n        value: matchListing(matchNumber),\n      };\n    });\n  }\n\n  function matchNumber() {\n    return scan(tokens.number)[1];\n  }\n\n  function matchDistance() {\n    return (\n      match('%', tokens.percentageValue, 1) ||\n      matchPositionKeyword() ||\n      matchLength()\n    );\n  }\n\n  function matchPositionKeyword() {\n    return match('position-keyword', tokens.positionKeywords, 1);\n  }\n\n  function matchLength() {\n    return match('px', tokens.pixelValue, 1) || match('em', tokens.emValue, 1);\n  }\n\n  function match(type: string, pattern, captureIndex: number) {\n    const captures = scan(pattern);\n    if (captures) {\n      return {\n        type,\n        value: captures[captureIndex],\n      };\n    }\n  }\n\n  function scan(regexp) {\n    const blankCaptures = /^[\\n\\r\\t\\s]+/.exec(input);\n    if (blankCaptures) {\n      consume(blankCaptures[0].length);\n    }\n\n    const captures = regexp.exec(input);\n    if (captures) {\n      consume(captures[0].length);\n    }\n\n    return captures;\n  }\n\n  function consume(size: number) {\n    input = input.substring(size);\n  }\n\n  return function (code: string): GradientNode[] {\n    input = code;\n    return getAST();\n  };\n})();\n\nexport function computeLinearGradient(\n  min: [number, number],\n  width: number,\n  height: number,\n  angle: CSSUnitValue,\n) {\n  const rad = deg2rad(angle.value);\n  const rx = 0;\n  const ry = 0;\n  const rcx = rx + width / 2;\n  const rcy = ry + height / 2;\n  // get the length of gradient line\n  // @see https://observablehq.com/@danburzo/css-gradient-line\n  const length =\n    Math.abs(width * Math.cos(rad)) + Math.abs(height * Math.sin(rad));\n  const x1 = min[0] + rcx - (Math.cos(rad) * length) / 2;\n  const y1 = min[1] + rcy - (Math.sin(rad) * length) / 2;\n  const x2 = min[0] + rcx + (Math.cos(rad) * length) / 2;\n  const y2 = min[1] + rcy + (Math.sin(rad) * length) / 2;\n\n  return { x1, y1, x2, y2 };\n}\n\nexport function computeRadialGradient(\n  min: [number, number],\n  width: number,\n  height: number,\n  cx: CSSUnitValue,\n  cy: CSSUnitValue,\n  size?: CSSUnitValue | CSSKeywordValue,\n) {\n  // 'px'\n  let x = cx.value;\n  let y = cy.value;\n\n  // TODO: 'em'\n\n  // '%'\n  if (cx.unit === UnitType.kPercentage) {\n    x = (cx.value / 100) * width;\n  }\n  if (cy.unit === UnitType.kPercentage) {\n    y = (cy.value / 100) * height;\n  }\n\n  // default to farthest-side\n  let r = Math.max(\n    distanceSquareRoot([0, 0], [x, y]),\n    distanceSquareRoot([0, height], [x, y]),\n    distanceSquareRoot([width, height], [x, y]),\n    distanceSquareRoot([width, 0], [x, y]),\n  );\n  if (size) {\n    if (size instanceof CSSUnitValue) {\n      r = size.value;\n    } else if (size instanceof CSSKeywordValue) {\n      // @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Images/Using_CSS_gradients#example_closest-side_for_circles\n      if (size.value === 'closest-side') {\n        r = Math.min(x, width - x, y, height - y);\n      } else if (size.value === 'farthest-side') {\n        r = Math.max(x, width - x, y, height - y);\n      } else if (size.value === 'closest-corner') {\n        r = Math.min(\n          distanceSquareRoot([0, 0], [x, y]),\n          distanceSquareRoot([0, height], [x, y]),\n          distanceSquareRoot([width, height], [x, y]),\n          distanceSquareRoot([width, 0], [x, y]),\n        );\n      }\n    }\n  }\n\n  return { x: x + min[0], y: y + min[1], r };\n}\n","import { isNil, isString } from '@antv/util';\nimport type {\n  AngularNode,\n  ColorStop,\n  DirectionalNode,\n  PositionNode,\n} from '../../utils';\nimport {\n  colorStopToString,\n  parseGradient as parse,\n} from '../../utils/gradient';\nimport { memoize } from '../../utils/memoize';\nimport { getOrCreateKeyword, getOrCreateUnitValue } from '../CSSStyleValuePool';\nimport type {\n  CSSKeywordValue,\n  CSSUnitValue,\n  LinearColorStop,\n  RadialGradient,\n} from '../cssom';\nimport { CSSGradientValue, GradientType, Odeg } from '../cssom';\nimport type { Pattern } from './color';\n\nconst regexLG = /^l\\s*\\(\\s*([\\d.]+)\\s*\\)\\s*(.*)/i;\nconst regexRG = /^r\\s*\\(\\s*([\\d.]+)\\s*,\\s*([\\d.]+)\\s*,\\s*([\\d.]+)\\s*\\)\\s*(.*)/i;\nconst regexPR = /^p\\s*\\(\\s*([axyn])\\s*\\)\\s*(.*)/i;\nconst regexColorStop = /[\\d.]+:(#[^\\s]+|[^\\)]+\\))/gi;\n\nfunction spaceColorStops(colorStops: ColorStop[]) {\n  const { length } = colorStops;\n  colorStops[length - 1].length = colorStops[length - 1].length ?? {\n    type: '%',\n    value: '100',\n  };\n  if (length > 1) {\n    colorStops[0].length = colorStops[0].length ?? {\n      type: '%',\n      value: '0',\n    };\n  }\n\n  let previousIndex = 0;\n  let previousOffset = Number(colorStops[0].length.value);\n  for (let i = 1; i < length; i++) {\n    // support '%' & 'px'\n    const offset = colorStops[i].length?.value;\n    if (!isNil(offset) && !isNil(previousOffset)) {\n      for (let j = 1; j < i - previousIndex; j++)\n        colorStops[previousIndex + j].length = {\n          type: '%',\n          value: `${\n            previousOffset +\n            ((Number(offset) - previousOffset) * j) / (i - previousIndex)\n          }`,\n        };\n      previousIndex = i;\n      previousOffset = Number(offset);\n    }\n  }\n}\n\n// The position of the gradient line's starting point.\n// different from CSS side(to top) @see https://developer.mozilla.org/en-US/docs/Web/CSS/gradient/linear-gradient#values\nconst SideOrCornerToDegMap: Record<DirectionalNode['value'], number> = {\n  left: 270 - 90,\n  top: 0 - 90,\n  bottom: 180 - 90,\n  right: 90 - 90,\n  'left top': 315 - 90,\n  'top left': 315 - 90,\n  'left bottom': 225 - 90,\n  'bottom left': 225 - 90,\n  'right top': 45 - 90,\n  'top right': 45 - 90,\n  'right bottom': 135 - 90,\n  'bottom right': 135 - 90,\n};\n\nconst angleToDeg: (orientation: DirectionalNode | AngularNode) => CSSUnitValue =\n  memoize((orientation: DirectionalNode | AngularNode) => {\n    let angle: number;\n    if (orientation.type === 'angular') {\n      angle = Number(orientation.value);\n    } else {\n      angle = SideOrCornerToDegMap[orientation.value] || 0;\n    }\n    return getOrCreateUnitValue(angle, 'deg');\n  });\n\nconst positonToCSSUnitValue: (position: PositionNode) => {\n  cx: CSSUnitValue;\n  cy: CSSUnitValue;\n} = memoize((position: PositionNode) => {\n  let cx = 50;\n  let cy = 50;\n  let unitX = '%';\n  let unitY = '%';\n  if (position?.type === 'position') {\n    const { x, y } = position.value;\n    if (x?.type === 'position-keyword') {\n      if (x.value === 'left') {\n        cx = 0;\n      } else if (x.value === 'center') {\n        cx = 50;\n      } else if (x.value === 'right') {\n        cx = 100;\n      } else if (x.value === 'top') {\n        cy = 0;\n      } else if (x.value === 'bottom') {\n        cy = 100;\n      }\n    }\n\n    if (y?.type === 'position-keyword') {\n      if (y.value === 'left') {\n        cx = 0;\n      } else if (y.value === 'center') {\n        cy = 50;\n      } else if (y.value === 'right') {\n        cx = 100;\n      } else if (y.value === 'top') {\n        cy = 0;\n      } else if (y.value === 'bottom') {\n        cy = 100;\n      }\n    }\n\n    if (x?.type === 'px' || x?.type === '%' || x?.type === 'em') {\n      unitX = x?.type;\n      cx = Number(x.value);\n    }\n    if (y?.type === 'px' || y?.type === '%' || y?.type === 'em') {\n      unitY = y?.type;\n      cy = Number(y.value);\n    }\n  }\n\n  return {\n    cx: getOrCreateUnitValue(cx, unitX),\n    cy: getOrCreateUnitValue(cy, unitY),\n  };\n});\n\nexport const parseGradient = memoize((colorStr: string) => {\n  if (colorStr.indexOf('linear') > -1 || colorStr.indexOf('radial') > -1) {\n    const ast = parse(colorStr);\n    return ast.map(({ type, orientation, colorStops }) => {\n      spaceColorStops(colorStops);\n      const steps = colorStops.map<LinearColorStop>((colorStop) => {\n        // TODO: only support % for now, should calc percentage of axis length when using px/em\n        return {\n          offset: getOrCreateUnitValue(Number(colorStop.length.value), '%'),\n          color: colorStopToString(colorStop),\n        };\n      });\n      if (type === 'linear-gradient') {\n        return new CSSGradientValue(GradientType.LinearGradient, {\n          angle: orientation\n            ? angleToDeg(orientation as DirectionalNode | AngularNode)\n            : Odeg,\n          steps,\n        });\n      }\n      if (type === 'radial-gradient') {\n        if (!orientation) {\n          orientation = [\n            {\n              type: 'shape',\n              value: 'circle',\n            },\n          ];\n        }\n        if (\n          orientation[0].type === 'shape' &&\n          orientation[0].value === 'circle'\n        ) {\n          const { cx, cy } = positonToCSSUnitValue(orientation[0].at);\n          let size: CSSUnitValue | CSSKeywordValue;\n          if (orientation[0].style) {\n            const { type, value } = orientation[0].style;\n\n            if (type === 'extent-keyword') {\n              size = getOrCreateKeyword(value);\n            } else {\n              size = getOrCreateUnitValue(value, type);\n            }\n          }\n          return new CSSGradientValue(GradientType.RadialGradient, {\n            cx,\n            cy,\n            size,\n            steps,\n          });\n        }\n        // TODO: support ellipse shape\n        // TODO: repeating-linear-gradient & repeating-radial-gradient\n        // } else if (type === 'repeating-linear-gradient') {\n        // } else if (type === 'repeating-radial-gradient') {\n      }\n\n      return undefined;\n    });\n  }\n\n  // legacy format, should be deprecated later\n  const type = colorStr[0];\n  if (colorStr[1] === '(' || colorStr[2] === '(') {\n    if (type === 'l') {\n      const arr = regexLG.exec(colorStr);\n      if (arr) {\n        const steps =\n          arr[2].match(regexColorStop)?.map((stop) => stop.split(':')) || [];\n        return [\n          new CSSGradientValue(GradientType.LinearGradient, {\n            angle: getOrCreateUnitValue(parseFloat(arr[1]), 'deg'),\n            steps: steps.map(([offset, color]) => ({\n              offset: getOrCreateUnitValue(Number(offset) * 100, '%'),\n              color,\n            })),\n          }),\n        ];\n      }\n    } else if (type === 'r') {\n      const parsedRadialGradient = parseRadialGradient(colorStr);\n      if (parsedRadialGradient) {\n        if (isString(parsedRadialGradient)) {\n          colorStr = parsedRadialGradient;\n        } else {\n          return [\n            new CSSGradientValue(\n              GradientType.RadialGradient,\n              parsedRadialGradient,\n            ),\n          ];\n        }\n      }\n    } else if (type === 'p') {\n      return parsePattern(colorStr);\n    }\n  }\n});\n\nfunction parseRadialGradient(\n  gradientStr: string,\n): RadialGradient | string | null {\n  const arr = regexRG.exec(gradientStr);\n  if (arr) {\n    const steps =\n      arr[4].match(regexColorStop)?.map((stop) => stop.split(':')) || [];\n    return {\n      cx: getOrCreateUnitValue(50, '%'),\n      cy: getOrCreateUnitValue(50, '%'),\n      steps: steps.map(([offset, color]) => ({\n        offset: getOrCreateUnitValue(Number(offset) * 100, '%'),\n        color,\n      })),\n    };\n  }\n  return null;\n}\n\nfunction parsePattern(patternStr: string): Pattern | null {\n  const arr = regexPR.exec(patternStr);\n  if (arr) {\n    let repetition = arr[1];\n    const src = arr[2];\n    switch (repetition) {\n      case 'a':\n        repetition = 'repeat';\n        break;\n      case 'x':\n        repetition = 'repeat-x';\n        break;\n      case 'y':\n        repetition = 'repeat-y';\n        break;\n      case 'n':\n        repetition = 'no-repeat';\n        break;\n      default:\n        repetition = 'no-repeat';\n    }\n    return {\n      image: src,\n      // @ts-ignore\n      repetition,\n    };\n  }\n  return null;\n}\n","import { clamp, isNil } from '@antv/util';\nimport * as d3 from '@antv/vendor/d3-color';\nimport { Rect } from '../..';\nimport { memoize } from '../../utils/memoize';\nimport type { Tuple4Number } from '../../types';\nimport type { CSSGradientValue } from '../cssom';\nimport { CSSRGB } from '../cssom';\nimport {\n  getOrCreateRGBA,\n  noneColor,\n  transparentColor,\n} from '../CSSStyleValuePool';\nimport { parseGradient } from './gradient';\n\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/createPattern\n */\nexport interface Pattern {\n  image: string | CanvasImageSource | Rect;\n  repetition?: 'repeat' | 'repeat-x' | 'repeat-y' | 'no-repeat';\n  transform?: string;\n}\n\nexport function isCSSGradientValue(object: any): object is CSSGradientValue {\n  return (\n    !!(object as CSSGradientValue).type && !!(object as CSSGradientValue).value\n  );\n}\n\nexport function isPattern(object: any): object is Pattern {\n  return object && !!(object as Pattern).image;\n}\n\nexport function isCSSRGB(object: any): object is CSSRGB {\n  return (\n    object &&\n    !isNil((object as CSSRGB).r) &&\n    !isNil((object as CSSRGB).g) &&\n    !isNil((object as CSSRGB).b)\n  );\n}\n\n/**\n * @see https://github.com/WebKit/WebKit/blob/main/Source/WebCore/css/parser/CSSParser.cpp#L97\n */\nexport const parseColor = memoize(\n  (colorStr: string | Pattern): CSSRGB | CSSGradientValue[] | Pattern => {\n    if (isPattern(colorStr)) {\n      return {\n        repetition: 'repeat',\n        ...colorStr,\n      };\n    }\n\n    if (isNil(colorStr)) {\n      colorStr = '';\n    }\n\n    if (colorStr === 'transparent') {\n      // transparent black\n      return transparentColor;\n    }\n    if (colorStr === 'currentColor') {\n      // @see https://github.com/adobe-webplatform/Snap.svg/issues/526\n      colorStr = 'black';\n    } else if (colorStr === 'none') {\n      return noneColor;\n    }\n\n    // support CSS gradient syntax\n    const g = parseGradient(colorStr);\n    if (g) {\n      return g;\n    }\n\n    // constants\n    const color = d3.color(colorStr) as d3.RGBColor;\n    const rgba: Tuple4Number = [0, 0, 0, 0];\n    if (color !== null) {\n      rgba[0] = color.r || 0;\n      rgba[1] = color.g || 0;\n      rgba[2] = color.b || 0;\n      rgba[3] = color.opacity;\n    }\n\n    // return new CSSRGB(...rgba);\n    return getOrCreateRGBA(...rgba);\n  },\n);\n\nexport function mergeColors(\n  left: CSSRGB | CSSGradientValue[] | Pattern,\n  right: CSSRGB | CSSGradientValue[] | Pattern,\n): [number[], number[], (color: number[]) => string] | undefined {\n  // only support constant value, exclude gradient & pattern\n  if (!isCSSRGB(left) || !isCSSRGB(right)) {\n    return;\n  }\n\n  return [\n    [Number(left.r), Number(left.g), Number(left.b), Number(left.alpha)],\n    [Number(right.r), Number(right.g), Number(right.b), Number(right.alpha)],\n    (color: number[]) => {\n      const rgba = color.slice();\n      if (rgba[3]) {\n        for (let i = 0; i < 3; i++)\n          rgba[i] = Math.round(clamp(rgba[i], 0, 255));\n      }\n      rgba[3] = clamp(rgba[3], 0, 1);\n      return `rgba(${rgba.join(',')})`;\n    },\n  ];\n}\n","import { isNil, isNumber, isString } from '@antv/util';\nimport type { DisplayObject } from '../../display-objects';\nimport type { IElement } from '../../dom';\nimport { Shape } from '../../types';\nimport { rad2deg, turn2deg } from '../../utils/math';\nimport { memoize } from '../../utils/memoize';\nimport { getOrCreateUnitValue } from '../CSSStyleValuePool';\nimport type { CSSStyleValue } from '../cssom';\nimport {\n  CSSUnitValue,\n  UnitType,\n  toCanonicalUnit,\n  unitTypeToString,\n} from '../cssom';\n\ntype LengthUnit = 'px' | '%' | 'em' | 'rem';\ntype AngleUnit = 'deg' | 'rad' | 'turn';\ntype Unit = LengthUnit | AngleUnit | '';\n\nexport function parseDimension(\n  unitRegExp: RegExp,\n  string: string,\n): CSSStyleValue | undefined {\n  if (isNil(string)) {\n    return getOrCreateUnitValue(0, 'px');\n  }\n\n  string = `${string}`.trim().toLowerCase();\n\n  if (isFinite(Number(string))) {\n    if ('px'.search(unitRegExp) >= 0) {\n      return getOrCreateUnitValue(Number(string), 'px');\n    }\n    if ('deg'.search(unitRegExp) >= 0) {\n      return getOrCreateUnitValue(Number(string), 'deg');\n    }\n  }\n\n  const matchedUnits: Unit[] = [];\n  string = string.replace(unitRegExp, (match: string) => {\n    matchedUnits.push(match as Unit);\n    return `U${match}`;\n  });\n  const taggedUnitRegExp = `U(${unitRegExp.source})`;\n\n  return matchedUnits.map((unit) =>\n    getOrCreateUnitValue(\n      Number(\n        string\n          .replace(new RegExp(`U${unit}`, 'g'), '')\n          .replace(new RegExp(taggedUnitRegExp, 'g'), '*0'),\n      ),\n      unit,\n    ),\n  )[0];\n}\n\n/**\n * <length>\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/length\n * length with only absolute unit, eg. 1px\n */\nexport const parseLengthUnmemoize = (css: string) => {\n  return parseDimension(new RegExp('px', 'g'), css);\n};\nexport const parseLength = memoize(parseLengthUnmemoize);\n\n/**\n * <percentage>\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/percentage\n */\nexport const parserPercentageUnmemoize = (css: string) => {\n  return parseDimension(new RegExp('%', 'g'), css);\n};\nexport const parserPercentage = memoize(parserPercentageUnmemoize);\n\n/**\n * length with absolute or relative unit,\n * eg. 1px, 0.7em, 50%, calc(100% - 200px);\n *\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/length-percentage\n */\nexport const parseLengthOrPercentageUnmemoize = (css: string): CSSUnitValue => {\n  if (isNumber(css) || isFinite(Number(css))) {\n    // Number(css) is NaN\n    return getOrCreateUnitValue(Number(css) || 0, 'px');\n    // return Number(css);\n  }\n  return parseDimension(new RegExp('px|%|em|rem', 'g'), css) as CSSUnitValue;\n};\nexport const parseLengthOrPercentage = memoize(\n  parseLengthOrPercentageUnmemoize,\n);\n\nexport const parseAngleUnmemoize = (css: string): CSSUnitValue => {\n  return parseDimension(\n    new RegExp('deg|rad|grad|turn', 'g'),\n    css,\n  ) as CSSUnitValue;\n};\nexport const parseAngle = memoize(parseAngleUnmemoize);\n\n/**\n * merge CSSUnitValue\n *\n * @example\n * 10px + 20px = 30px\n * 10deg + 10rad\n * 10% + 20% = 30%\n */\nexport function mergeDimensions(\n  left: CSSUnitValue,\n  right: CSSUnitValue,\n  target: IElement,\n  nonNegative?: boolean,\n  index = 0,\n): [number, number, (value: number) => string] {\n  let unit = '';\n  let leftValue = left.value || 0;\n  let rightValue = right.value || 0;\n\n  const canonicalUnit = toCanonicalUnit(left.unit);\n  const leftCanonicalUnitValue = left.convertTo(canonicalUnit);\n  const rightCanonicalUnitValue = right.convertTo(canonicalUnit);\n\n  if (leftCanonicalUnitValue && rightCanonicalUnitValue) {\n    leftValue = leftCanonicalUnitValue.value;\n    rightValue = rightCanonicalUnitValue.value;\n    unit = unitTypeToString(left.unit);\n  }\n  // format '%' to 'px'\n  else if (\n    CSSUnitValue.isLength(left.unit) ||\n    CSSUnitValue.isLength(right.unit)\n  ) {\n    leftValue = convertPercentUnit(left, index, target as DisplayObject);\n    rightValue = convertPercentUnit(right, index, target as DisplayObject);\n    unit = 'px';\n  }\n\n  return [\n    leftValue,\n    rightValue,\n    (value: number) => {\n      if (nonNegative) {\n        value = Math.max(value, 0);\n      }\n      return value + unit;\n    },\n  ];\n}\n\nexport function convertAngleUnit(value: CSSUnitValue) {\n  let deg = 0;\n  if (value.unit === UnitType.kDegrees) {\n    deg = value.value;\n  } else if (value.unit === UnitType.kRadians) {\n    deg = rad2deg(Number(value.value));\n  } else if (value.unit === UnitType.kTurns) {\n    deg = turn2deg(Number(value.value));\n  } else if (value.value) {\n    deg = value.value;\n  }\n  return deg;\n}\n\nexport function parseDimensionArrayFormat(\n  string: string | number | (string | number)[],\n  size?: 2 | 4 | 'even',\n): number[] {\n  let parsed: number[];\n\n  if (Array.isArray(string)) {\n    // [1, '2px', 3]\n    parsed = string.map((segment) => Number(segment));\n  } else if (isString(string)) {\n    parsed = string.split(' ').map((segment) => Number(segment));\n  } else if (isNumber(string)) {\n    parsed = [string];\n  }\n\n  if (size === 2) {\n    if (parsed.length === 1) {\n      return [parsed[0], parsed[0]];\n    }\n    return [parsed[0], parsed[1]];\n  }\n  if (size === 4) {\n    if (parsed.length === 1) {\n      return [parsed[0], parsed[0], parsed[0], parsed[0]];\n    }\n    if (parsed.length === 2) {\n      return [parsed[0], parsed[1], parsed[0], parsed[1]];\n    }\n    if (parsed.length === 3) {\n      return [parsed[0], parsed[1], parsed[2], parsed[1]];\n    }\n    return [parsed[0], parsed[1], parsed[2], parsed[3]];\n  }\n  if (size === 'even' && parsed.length % 2 === 1) {\n    return [...parsed, ...parsed];\n  }\n  return parsed;\n}\n\nexport function parseDimensionArray(\n  string: string | (string | number)[],\n): CSSUnitValue[] {\n  if (isString(string)) {\n    // \"1px 2px 3px\"\n    return string.split(' ').map((segment) => parseLengthOrPercentage(segment));\n  }\n  // [1, '2px', 3]\n  return string.map((segment) => parseLengthOrPercentage(segment.toString()));\n}\nexport function parseDimensionArrayUnmemoize(\n  string: string | (string | number)[],\n): CSSUnitValue[] {\n  if (isString(string)) {\n    // \"1px 2px 3px\"\n    return string\n      .split(' ')\n      .map((segment) => parseLengthOrPercentageUnmemoize(segment));\n  }\n  // [1, '2px', 3]\n  return string.map((segment) =>\n    parseLengthOrPercentageUnmemoize(segment.toString()),\n  );\n}\n\n// export function mergeDimensionList(\n//   left: CSSUnitValue[],\n//   right: CSSUnitValue[],\n//   target: IElement | null,\n// ): [number[], number[], (list: number[]) => string] | undefined {\n//   if (left.length !== right.length) {\n//     return;\n//   }\n\n//   const unit = left[0].unit;\n\n//   return [\n//     left.map((l) => l.value),\n//     right.map((l) => l.value),\n//     (values: number[]) => {\n//       return values.map((n) => new CSSUnitValue(n, unit)).join(' ');\n//     },\n//   ];\n// }\n\nexport function convertPercentUnit(\n  valueWithUnit: CSSUnitValue,\n  vec3Index: number,\n  target: DisplayObject,\n  useMin = false,\n): number {\n  if (valueWithUnit.unit === UnitType.kPixels) {\n    return Number(valueWithUnit.value);\n  }\n  if (valueWithUnit.unit === UnitType.kPercentage && target) {\n    const bounds =\n      target.nodeName === Shape.GROUP\n        ? target.getLocalBounds()\n        : target.getGeometryBounds();\n    return (\n      (useMin ? bounds.min[vec3Index] : 0) +\n      (valueWithUnit.value / 100) * bounds.halfExtents[vec3Index] * 2\n    );\n  }\n  return 0;\n}\n","import type { CSSUnitValue } from '../cssom';\nimport { parseColor } from './color';\nimport { parseDimension } from './dimension';\n\nexport interface ParsedFilterStyleProperty {\n  name: string;\n  params: CSSUnitValue[];\n}\n\nexport const parseParam = (css: string) =>\n  parseDimension(/deg|rad|grad|turn|px|%/g, css);\n\nconst supportedFilters = [\n  'blur',\n  'brightness',\n  'drop-shadow',\n  'contrast',\n  'grayscale',\n  'sepia',\n  'saturate',\n  'hue-rotate',\n  'invert',\n];\n\nexport function parseFilter(filterStr = ''): ParsedFilterStyleProperty[] {\n  filterStr = filterStr.toLowerCase().trim();\n  if (filterStr === 'none') {\n    return [];\n  }\n  const filterRegExp = /\\s*([\\w-]+)\\(([^)]*)\\)/g;\n  const result: ParsedFilterStyleProperty[] = [];\n  let match;\n  let prevLastIndex = 0;\n  while ((match = filterRegExp.exec(filterStr))) {\n    if (match.index !== prevLastIndex) {\n      return [];\n    }\n    prevLastIndex = match.index + match[0].length;\n\n    if (supportedFilters.indexOf(match[1]) > -1) {\n      result.push({\n        name: match[1],\n        params: match[2].split(' ').map((p) => parseParam(p) || parseColor(p)),\n      });\n    }\n\n    if (filterRegExp.lastIndex === filterStr.length) {\n      return result;\n    }\n  }\n\n  return [];\n}\n","import { clamp, isString } from '@antv/util';\nimport { memoize } from '../../utils/memoize';\nimport type { CSSUnitValue } from '../cssom';\nimport { getOrCreateUnitValue } from '../CSSStyleValuePool';\n\nexport function numberToString(x: number) {\n  // scale(0.00000001) -> scale(0)\n  // return x.toFixed(6).replace(/0+$/, '').replace(/\\.$/, '');\n  return x.toString();\n}\n\n/**\n * parse string or number to CSSUnitValue(numeric)\n *\n * eg.\n * * 0 -> CSSUnitValue(0)\n * * '2' -> CSSUnitValue(2)\n */\nexport const parseNumberUnmemoize = (string: string | number): CSSUnitValue => {\n  if (typeof string === 'number') {\n    return getOrCreateUnitValue(string);\n  }\n  if (/^\\s*[-+]?(\\d*\\.)?\\d+\\s*$/.test(string)) {\n    return getOrCreateUnitValue(Number(string));\n  }\n  return getOrCreateUnitValue(0);\n};\nexport const parseNumber = memoize(parseNumberUnmemoize);\n\n/**\n * separate string to array\n * eg.\n * * [0.5, 0.5] -> [CSSUnitValue, CSSUnitValue]\n */\nexport const parseNumberListUnmemoize = (\n  string: string | number[],\n): CSSUnitValue[] => {\n  if (isString(string)) {\n    return string.split(' ').map(parseNumberUnmemoize);\n  }\n  return string.map(parseNumberUnmemoize);\n};\nexport const parseNumberList = memoize(\n  (string: string | number[]): CSSUnitValue[] => {\n    if (isString(string)) {\n      return string.split(' ').map(parseNumber);\n    }\n    return string.map(parseNumber);\n  },\n);\n\nexport function mergeNumbers(\n  left: number,\n  right: number,\n): [number, number, (n: number) => string] {\n  return [left, right, numberToString];\n}\n\nexport function clampedMergeNumbers(min: number, max: number) {\n  return (\n    left: number,\n    right: number,\n  ): [number, number, (i: number) => string] => [\n    left,\n    right,\n    (x: number) => numberToString(clamp(x, min, max)),\n  ];\n}\n\nexport function mergeNumberLists(\n  left: number[],\n  right: number[],\n): [number[], number[], (numberList: number[]) => number[]] | undefined {\n  if (left.length !== right.length) {\n    return;\n  }\n  return [\n    left,\n    right,\n    (numberList: number[]) => {\n      return numberList;\n    },\n  ];\n}\n","/**\n * implements morph animation with cubic splitting\n * @see http://thednp.github.io/kute.js/svgCubicMorph.html\n */\nimport { arcBox, cubicBox, polylineLength, quadBox } from '@antv/g-math';\nimport type { AbsoluteArray, ASegment } from '@antv/util';\nimport {\n  clamp,\n  getTotalLength,\n  isNumberEqual,\n  max,\n  min,\n  mod,\n} from '@antv/util';\nimport { mat4, vec3 } from 'gl-matrix';\nimport type {\n  Circle,\n  Ellipse,\n  Line,\n  Path,\n  PathArcParams,\n  PathSegment,\n  PathSegmentBBox,\n  Polygon,\n  Polyline,\n  Rect,\n} from '../display-objects';\nimport type { PointLike } from '../shapes';\nimport { Shape } from '../types';\nimport { deg2rad } from './math';\n\nexport function getOrCalculatePathTotalLength(path: Path) {\n  if (path.parsedStyle.d.totalLength === 0) {\n    path.parsedStyle.d.totalLength = getTotalLength(\n      path.parsedStyle.d.absolutePath,\n    );\n  }\n  return path.parsedStyle.d.totalLength;\n}\n\nexport function getOrCalculatePolylineTotalLength(polyline: Polyline) {\n  if (polyline.parsedStyle.points.totalLength === 0) {\n    polyline.parsedStyle.points.totalLength = polylineLength(\n      polyline.parsedStyle.points.points as [number, number][],\n    );\n  }\n  return polyline.parsedStyle.points.totalLength;\n}\n\nexport function removeRedundantMCommand(path: AbsoluteArray) {\n  for (let i = 0; i < path.length; i++) {\n    const prevSegment = path[i - 1];\n    const segment = path[i];\n    const cmd = segment[0];\n    if (cmd === 'M') {\n      if (prevSegment) {\n        const prevCmd = prevSegment[0];\n        const srcPoint = [segment[1], segment[2]];\n        let destPoint: [number, number];\n\n        if (prevCmd === 'L' || prevCmd === 'M') {\n          destPoint = [prevSegment[1], prevSegment[2]];\n        } else if (prevCmd === 'C' || prevCmd === 'A' || prevCmd === 'Q') {\n          destPoint = [\n            prevSegment[prevSegment.length - 2] as number,\n            prevSegment[prevSegment.length - 1] as number,\n          ];\n        }\n\n        if (destPoint && isSamePoint(srcPoint, destPoint)) {\n          path.splice(i, 1);\n          i--;\n        }\n      }\n    }\n  }\n}\n\nexport function hasArcOrBezier(path: AbsoluteArray) {\n  let hasArc = false;\n  const count = path.length;\n  for (let i = 0; i < count; i++) {\n    const params = path[i];\n    const cmd = params[0];\n    if (cmd === 'C' || cmd === 'A' || cmd === 'Q') {\n      hasArc = true;\n      break;\n    }\n  }\n  return hasArc;\n}\n\nexport function extractPolygons(pathArray: AbsoluteArray) {\n  const polygons: [number, number][][] = [];\n  const polylines: [number, number][][] = [];\n  let points: [number, number][] = []; // 防止第一个命令不是 'M'\n  for (let i = 0; i < pathArray.length; i++) {\n    const params = pathArray[i];\n    const cmd = params[0];\n    if (cmd === 'M') {\n      // 遇到 'M' 判定是否是新数组，新数组中没有点\n      if (points.length) {\n        // 如果存在点，则说明没有遇到 'Z'，开始了一个新的多边形\n        polylines.push(points);\n        points = []; // 创建新的点\n      }\n      points.push([params[1], params[2]]);\n    } else if (cmd === 'Z') {\n      if (points.length) {\n        // 存在点\n        polygons.push(points);\n        points = []; // 开始新的点集合\n      }\n      // 如果不存在点，同时 'Z'，则说明是错误，不处理\n    } else {\n      points.push([params[1], params[2]]);\n    }\n  }\n  // 说明 points 未放入 polygons 或者 polyline\n  // 仅当只有一个 M，没有 Z 时会发生这种情况\n  if (points.length > 0) {\n    polylines.push(points);\n  }\n  return {\n    polygons,\n    polylines,\n  };\n}\n\nfunction isSamePoint(point1, point2) {\n  return point1[0] === point2[0] && point1[1] === point2[1];\n}\n\nexport function getPathBBox(segments: any[], lineWidth: number) {\n  let xArr = [];\n  let yArr = [];\n  const segmentsWithAngle = [];\n  for (let i = 0; i < segments.length; i++) {\n    const segment = segments[i];\n    const { currentPoint, params, prePoint } = segment;\n    let box: PathSegmentBBox;\n    switch (segment.command) {\n      case 'Q':\n        box = quadBox(\n          prePoint[0],\n          prePoint[1],\n          params[1],\n          params[2],\n          params[3],\n          params[4],\n        );\n        break;\n      case 'C':\n        box = cubicBox(\n          prePoint[0],\n          prePoint[1],\n          params[1],\n          params[2],\n          params[3],\n          params[4],\n          params[5],\n          params[6],\n        );\n        break;\n      case 'A':\n        const { arcParams } = segment;\n        box = arcBox(\n          arcParams.cx,\n          arcParams.cy,\n          arcParams.rx,\n          arcParams.ry,\n          arcParams.xRotation,\n          arcParams.startAngle,\n          arcParams.endAngle,\n        );\n        break;\n      default:\n        xArr.push(currentPoint[0]);\n        yArr.push(currentPoint[1]);\n        break;\n    }\n    if (box) {\n      segment.box = box;\n      xArr.push(box.x, box.x + box.width);\n      yArr.push(box.y, box.y + box.height);\n    }\n    if (\n      lineWidth &&\n      (segment.command === 'L' || segment.command === 'M') &&\n      segment.prePoint &&\n      segment.nextPoint\n    ) {\n      segmentsWithAngle.push(segment);\n    }\n  }\n  // bbox calculation should ignore NaN for path attribute\n  // ref: https://github.com/antvis/g/issues/210\n  // ref: https://github.com/antvis/G2/issues/3109\n  xArr = xArr.filter(\n    (item) => !Number.isNaN(item) && item !== Infinity && item !== -Infinity,\n  );\n  yArr = yArr.filter(\n    (item) => !Number.isNaN(item) && item !== Infinity && item !== -Infinity,\n  );\n  let minX = min(xArr);\n  let minY = min(yArr);\n  let maxX = max(xArr);\n  let maxY = max(yArr);\n  if (segmentsWithAngle.length === 0) {\n    return {\n      x: minX,\n      y: minY,\n      width: maxX - minX,\n      height: maxY - minY,\n    };\n  }\n  for (let i = 0; i < segmentsWithAngle.length; i++) {\n    const segment = segmentsWithAngle[i];\n    const { currentPoint } = segment;\n    let extra;\n    if (currentPoint[0] === minX) {\n      extra = getExtraFromSegmentWithAngle(segment, lineWidth);\n      minX -= extra.xExtra;\n    } else if (currentPoint[0] === maxX) {\n      extra = getExtraFromSegmentWithAngle(segment, lineWidth);\n      maxX += extra.xExtra;\n    }\n    if (currentPoint[1] === minY) {\n      extra = getExtraFromSegmentWithAngle(segment, lineWidth);\n      minY -= extra.yExtra;\n    } else if (currentPoint[1] === maxY) {\n      extra = getExtraFromSegmentWithAngle(segment, lineWidth);\n      maxY += extra.yExtra;\n    }\n  }\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY,\n  };\n}\n\nfunction getExtraFromSegmentWithAngle(segment, lineWidth: number) {\n  const { prePoint, currentPoint, nextPoint } = segment;\n  const currentAndPre =\n    (currentPoint[0] - prePoint[0]) ** 2 + (currentPoint[1] - prePoint[1]) ** 2;\n  const currentAndNext =\n    (currentPoint[0] - nextPoint[0]) ** 2 +\n    (currentPoint[1] - nextPoint[1]) ** 2;\n  const preAndNext =\n    (prePoint[0] - nextPoint[0]) ** 2 + (prePoint[1] - nextPoint[1]) ** 2;\n  // 以 currentPoint 为顶点的夹角\n  const currentAngle = Math.acos(\n    (currentAndPre + currentAndNext - preAndNext) /\n      (2 * Math.sqrt(currentAndPre) * Math.sqrt(currentAndNext)),\n  );\n  // 夹角为空、 0 或 PI 时，不需要计算夹角处的额外宽度\n  // 注意: 由于计算精度问题，夹角为 0 的情况计算出来的角度可能是一个很小的值，还需要判断其与 0 是否近似相等\n  if (\n    !currentAngle ||\n    Math.sin(currentAngle) === 0 ||\n    isNumberEqual(currentAngle, 0)\n  ) {\n    return {\n      xExtra: 0,\n      yExtra: 0,\n    };\n  }\n  let xAngle = Math.abs(\n    Math.atan2(nextPoint[1] - currentPoint[1], nextPoint[0] - currentPoint[0]),\n  );\n  let yAngle = Math.abs(\n    Math.atan2(nextPoint[0] - currentPoint[0], nextPoint[1] - currentPoint[1]),\n  );\n  // 将夹角转为锐角\n  xAngle = xAngle > Math.PI / 2 ? Math.PI - xAngle : xAngle;\n  yAngle = yAngle > Math.PI / 2 ? Math.PI - yAngle : yAngle;\n  // 这里不考虑在水平和垂直方向的投影，直接使用最大差值\n  // 由于上层统一加减了二分之一线宽，这里需要进行弥补\n  const extra = {\n    // 水平方向投影\n    xExtra:\n      Math.cos(currentAngle / 2 - xAngle) *\n        ((lineWidth / 2) * (1 / Math.sin(currentAngle / 2))) -\n        lineWidth / 2 || 0,\n    // 垂直方向投影\n    yExtra:\n      Math.cos(yAngle - currentAngle / 2) *\n        ((lineWidth / 2) * (1 / Math.sin(currentAngle / 2))) -\n        lineWidth / 2 || 0,\n  };\n  return extra;\n}\n\n// 点对称\nfunction toSymmetry(point: number[], center: number[]) {\n  return [\n    center[0] + (center[0] - point[0]),\n    center[1] + (center[1] - point[1]),\n  ];\n}\n\nconst angleBetween = (v0: PointLike, v1: PointLike) => {\n  const p = v0.x * v1.x + v0.y * v1.y;\n  const n = Math.sqrt((v0.x ** 2 + v0.y ** 2) * (v1.x ** 2 + v1.y ** 2));\n  const sign = v0.x * v1.y - v0.y * v1.x < 0 ? -1 : 1;\n  const angle = sign * Math.acos(p / n);\n\n  return angle;\n};\ninterface PointOnEllipticalArc {\n  x: number;\n  y: number;\n  ellipticalArcAngle: number;\n}\n/**\n * @see https://github.com/rveciana/svg-path-properties/blob/b6bd9a322966f6ef7a311872d80c56e3718de861/src/arc.ts#L121\n */\nconst pointOnEllipticalArc = (\n  p0: PointLike,\n  rx: number,\n  ry: number,\n  xAxisRotation: number,\n  largeArcFlag: boolean,\n  sweepFlag: boolean,\n  p1: PointLike,\n  t: number,\n): PointOnEllipticalArc => {\n  // In accordance to: http://www.w3.org/TR/SVG/implnote.html#ArcOutOfRangeParameters\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n  xAxisRotation = mod(xAxisRotation, 360);\n  const xAxisRotationRadians = deg2rad(xAxisRotation);\n  // If the endpoints are identical, then this is equivalent to omitting the elliptical arc segment entirely.\n  if (p0.x === p1.x && p0.y === p1.y) {\n    return { x: p0.x, y: p0.y, ellipticalArcAngle: 0 }; // Check if angle is correct\n  }\n\n  // If rx = 0 or ry = 0 then this arc is treated as a straight line segment joining the endpoints.\n  if (rx === 0 || ry === 0) {\n    // return this.pointOnLine(p0, p1, t);\n    return { x: 0, y: 0, ellipticalArcAngle: 0 }; // Check if angle is correct\n  }\n\n  // Following \"Conversion from endpoint to center parameterization\"\n  // http://www.w3.org/TR/SVG/implnote.html#ArcConversionEndpointToCenter\n\n  // Step #1: Compute transformedPoint\n  const dx = (p0.x - p1.x) / 2;\n  const dy = (p0.y - p1.y) / 2;\n  const transformedPoint = {\n    x:\n      Math.cos(xAxisRotationRadians) * dx + Math.sin(xAxisRotationRadians) * dy,\n    y:\n      -Math.sin(xAxisRotationRadians) * dx +\n      Math.cos(xAxisRotationRadians) * dy,\n  };\n  // Ensure radii are large enough\n  const radiiCheck =\n    transformedPoint.x ** 2 / rx ** 2 + transformedPoint.y ** 2 / ry ** 2;\n  if (radiiCheck > 1) {\n    rx *= Math.sqrt(radiiCheck);\n    ry *= Math.sqrt(radiiCheck);\n  }\n\n  // Step #2: Compute transformedCenter\n  const cSquareNumerator =\n    rx ** 2 * ry ** 2 -\n    rx ** 2 * transformedPoint.y ** 2 -\n    ry ** 2 * transformedPoint.x ** 2;\n  const cSquareRootDenom =\n    rx ** 2 * transformedPoint.y ** 2 + ry ** 2 * transformedPoint.x ** 2;\n  let cRadicand = cSquareNumerator / cSquareRootDenom;\n  // Make sure this never drops below zero because of precision\n  cRadicand = cRadicand < 0 ? 0 : cRadicand;\n  const cCoef = (largeArcFlag !== sweepFlag ? 1 : -1) * Math.sqrt(cRadicand);\n  const transformedCenter = {\n    x: cCoef * ((rx * transformedPoint.y) / ry),\n    y: cCoef * (-(ry * transformedPoint.x) / rx),\n  };\n\n  // Step #3: Compute center\n  const center = {\n    x:\n      Math.cos(xAxisRotationRadians) * transformedCenter.x -\n      Math.sin(xAxisRotationRadians) * transformedCenter.y +\n      (p0.x + p1.x) / 2,\n    y:\n      Math.sin(xAxisRotationRadians) * transformedCenter.x +\n      Math.cos(xAxisRotationRadians) * transformedCenter.y +\n      (p0.y + p1.y) / 2,\n  };\n\n  // Step #4: Compute start/sweep angles\n  // Start angle of the elliptical arc prior to the stretch and rotate operations.\n  // Difference between the start and end angles\n  const startVector = {\n    x: (transformedPoint.x - transformedCenter.x) / rx,\n    y: (transformedPoint.y - transformedCenter.y) / ry,\n  };\n  const startAngle = angleBetween(\n    {\n      x: 1,\n      y: 0,\n    },\n    startVector,\n  );\n\n  const endVector = {\n    x: (-transformedPoint.x - transformedCenter.x) / rx,\n    y: (-transformedPoint.y - transformedCenter.y) / ry,\n  };\n  let sweepAngle = angleBetween(startVector, endVector);\n\n  if (!sweepFlag && sweepAngle > 0) {\n    sweepAngle -= 2 * Math.PI;\n  } else if (sweepFlag && sweepAngle < 0) {\n    sweepAngle += 2 * Math.PI;\n  }\n  // We use % instead of `mod(..)` because we want it to be -360deg to 360deg(but actually in radians)\n  sweepAngle %= 2 * Math.PI;\n\n  // From http://www.w3.org/TR/SVG/implnote.html#ArcParameterizationAlternatives\n  const angle = startAngle + sweepAngle * t;\n  const ellipseComponentX = rx * Math.cos(angle);\n  const ellipseComponentY = ry * Math.sin(angle);\n\n  const point = {\n    x:\n      Math.cos(xAxisRotationRadians) * ellipseComponentX -\n      Math.sin(xAxisRotationRadians) * ellipseComponentY +\n      center.x,\n    y:\n      Math.sin(xAxisRotationRadians) * ellipseComponentX +\n      Math.cos(xAxisRotationRadians) * ellipseComponentY +\n      center.y,\n    ellipticalArcStartAngle: startAngle,\n    ellipticalArcEndAngle: startAngle + sweepAngle,\n    ellipticalArcAngle: angle,\n    ellipticalArcCenter: center,\n    resultantRx: rx,\n    resultantRy: ry,\n  };\n\n  return point;\n};\n\nexport function path2Segments(path: AbsoluteArray): PathSegment[] {\n  const segments = [];\n  let currentPoint = null; // 当前图形\n  let nextParams = null; // 下一节点的 path 参数\n  let startMovePoint = null; // 开始 M 的点，可能会有多个\n  let lastStartMovePointIndex = 0; // 最近一个开始点 M 的索引\n  const count = path.length;\n  for (let i = 0; i < count; i++) {\n    const params = path[i];\n    nextParams = path[i + 1];\n    const command = params[0];\n    // 数学定义上的参数，便于后面的计算\n    const segment: PathSegment = {\n      command,\n      prePoint: currentPoint,\n      params,\n      startTangent: null,\n      endTangent: null,\n      currentPoint: null,\n      nextPoint: null,\n      arcParams: null,\n      box: null,\n      cubicParams: null,\n    };\n    switch (command) {\n      case 'M':\n        startMovePoint = [params[1], params[2]];\n        lastStartMovePointIndex = i;\n        break;\n      case 'A':\n        const arcParams = getArcParams(currentPoint, params);\n        segment.arcParams = arcParams;\n        break;\n      default:\n        break;\n    }\n    if (command === 'Z') {\n      // 有了 Z 后，当前节点从开始 M 的点开始\n      currentPoint = startMovePoint;\n      // 如果当前点的命令为 Z，相当于当前点为最近一个 M 点，则下一个点直接指向最近一个 M 点的下一个点\n      nextParams = path[lastStartMovePointIndex + 1];\n    } else {\n      const len = params.length;\n      currentPoint = [params[len - 2], params[len - 1]];\n    }\n    if (nextParams && nextParams[0] === 'Z') {\n      // 如果下一个点的命令为 Z，则下一个点直接指向最近一个 M 点\n      nextParams = path[lastStartMovePointIndex];\n      if (segments[lastStartMovePointIndex]) {\n        // 如果下一个点的命令为 Z，则最近一个 M 点的前一个点为当前点\n        segments[lastStartMovePointIndex].prePoint = currentPoint;\n      }\n    }\n    segment.currentPoint = currentPoint;\n    // 如果当前点与最近一个 M 点相同，则最近一个 M 点的前一个点为当前点的前一个点\n    if (\n      segments[lastStartMovePointIndex] &&\n      isSamePoint(currentPoint, segments[lastStartMovePointIndex].currentPoint)\n    ) {\n      segments[lastStartMovePointIndex].prePoint = segment.prePoint;\n    }\n    const nextPoint = nextParams\n      ? [nextParams[nextParams.length - 2], nextParams[nextParams.length - 1]]\n      : null;\n    segment.nextPoint = nextPoint as [number, number];\n    // Add startTangent and endTangent\n    const { prePoint } = segment;\n    if (['L', 'H', 'V'].includes(command)) {\n      segment.startTangent = [\n        prePoint[0] - currentPoint[0],\n        prePoint[1] - currentPoint[1],\n      ];\n      segment.endTangent = [\n        currentPoint[0] - prePoint[0],\n        currentPoint[1] - prePoint[1],\n      ];\n    } else if (command === 'Q') {\n      // 二次贝塞尔曲线只有一个控制点\n      const cp = [params[1], params[2]];\n      // 二次贝塞尔曲线的终点为 currentPoint\n      segment.startTangent = [prePoint[0] - cp[0], prePoint[1] - cp[1]];\n      segment.endTangent = [currentPoint[0] - cp[0], currentPoint[1] - cp[1]];\n    } else if (command === 'T') {\n      const preSegment = segments[i - 1];\n      const cp = toSymmetry(preSegment.currentPoint, prePoint);\n      if (preSegment.command === 'Q') {\n        segment.command = 'Q';\n        segment.startTangent = [prePoint[0] - cp[0], prePoint[1] - cp[1]];\n        segment.endTangent = [currentPoint[0] - cp[0], currentPoint[1] - cp[1]];\n      } else {\n        // @ts-ignore\n        segment.command = 'TL';\n        segment.startTangent = [\n          prePoint[0] - currentPoint[0],\n          prePoint[1] - currentPoint[1],\n        ];\n        segment.endTangent = [\n          currentPoint[0] - prePoint[0],\n          currentPoint[1] - prePoint[1],\n        ];\n      }\n    } else if (command === 'C') {\n      // 三次贝塞尔曲线有两个控制点\n      const cp1 = [params[1], params[2]];\n      const cp2 = [params[3], params[4]];\n      segment.startTangent = [prePoint[0] - cp1[0], prePoint[1] - cp1[1]];\n      segment.endTangent = [currentPoint[0] - cp2[0], currentPoint[1] - cp2[1]];\n\n      // horizontal line, eg. ['C', 100, 100, 100, 100, 200, 200]\n      if (segment.startTangent[0] === 0 && segment.startTangent[1] === 0) {\n        segment.startTangent = [cp1[0] - cp2[0], cp1[1] - cp2[1]];\n      }\n      if (segment.endTangent[0] === 0 && segment.endTangent[1] === 0) {\n        segment.endTangent = [cp2[0] - cp1[0], cp2[1] - cp1[1]];\n      }\n    } else if (command === 'S') {\n      const preSegment = segments[i - 1];\n      const cp1 = toSymmetry(preSegment.currentPoint, prePoint);\n      const cp2 = [params[1], params[2]];\n      if (preSegment.command === 'C') {\n        segment.command = 'C'; // 将 S 命令变换为 C 命令\n        segment.startTangent = [prePoint[0] - cp1[0], prePoint[1] - cp1[1]];\n        segment.endTangent = [\n          currentPoint[0] - cp2[0],\n          currentPoint[1] - cp2[1],\n        ];\n      } else {\n        // @ts-ignore\n        segment.command = 'SQ'; // 将 S 命令变换为 SQ 命令\n        segment.startTangent = [prePoint[0] - cp2[0], prePoint[1] - cp2[1]];\n        segment.endTangent = [\n          currentPoint[0] - cp2[0],\n          currentPoint[1] - cp2[1],\n        ];\n      }\n    } else if (command === 'A') {\n      const { x: dx1, y: dy1 } = getTangentAtRatio(segment, 0);\n      const { x: dx2, y: dy2 } = getTangentAtRatio(segment, 1, false);\n\n      segment.startTangent = [dx1, dy1];\n      segment.endTangent = [dx2, dy2];\n    }\n    segments.push(segment);\n  }\n  return segments;\n}\n\n/**\n * Use length instead of ratio\n */\nfunction getTangentAtRatio(segment: PathSegment, ratio: number, sign = true) {\n  const { rx = 0, ry = 0, xRotation, arcFlag, sweepFlag } = segment.arcParams;\n  const p1 = pointOnEllipticalArc(\n    { x: segment.prePoint[0], y: segment.prePoint[1] },\n    rx,\n    ry,\n    xRotation,\n    !!arcFlag,\n    !!sweepFlag,\n    { x: segment.currentPoint[0], y: segment.currentPoint[1] },\n    ratio,\n  );\n\n  const p2 = pointOnEllipticalArc(\n    { x: segment.prePoint[0], y: segment.prePoint[1] },\n    rx,\n    ry,\n    xRotation,\n    !!arcFlag,\n    !!sweepFlag,\n    { x: segment.currentPoint[0], y: segment.currentPoint[1] },\n    sign ? ratio + 0.005 : ratio - 0.005,\n  );\n\n  const xDist = p2.x - p1.x;\n  const yDist = p2.y - p1.y;\n\n  const dist = Math.sqrt(xDist * xDist + yDist * yDist);\n  return { x: -xDist / dist, y: -yDist / dist };\n}\n\n// 向量长度\nfunction vMag(v: number[]) {\n  return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n}\n\n// u.v/|u||v|，计算夹角的余弦值\nfunction vRatio(u: number[], v: number[]) {\n  // 当存在一个向量的长度为 0 时，夹角也为 0，即夹角的余弦值为 1\n  return vMag(u) * vMag(v)\n    ? (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v))\n    : 1;\n}\n\n// 向量角度\nfunction vAngle(u: number[], v: number[]) {\n  return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n}\n\nfunction getArcParams(\n  startPoint: [number, number],\n  params: ASegment,\n): PathArcParams {\n  let rx = params[1];\n  let ry = params[2];\n  const xRotation = mod(deg2rad(params[3]), Math.PI * 2);\n  const arcFlag = params[4];\n  const sweepFlag = params[5];\n  // 弧形起点坐标\n  const x1 = startPoint[0];\n  const y1 = startPoint[1];\n  // 弧形终点坐标\n  const x2 = params[6];\n  const y2 = params[7];\n  const xp =\n    (Math.cos(xRotation) * (x1 - x2)) / 2.0 +\n    (Math.sin(xRotation) * (y1 - y2)) / 2.0;\n  const yp =\n    (-1 * Math.sin(xRotation) * (x1 - x2)) / 2.0 +\n    (Math.cos(xRotation) * (y1 - y2)) / 2.0;\n  const lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\n\n  if (lambda > 1) {\n    rx *= Math.sqrt(lambda);\n    ry *= Math.sqrt(lambda);\n  }\n  const diff = rx * rx * (yp * yp) + ry * ry * (xp * xp);\n\n  let f = diff ? Math.sqrt((rx * rx * (ry * ry) - diff) / diff) : 1;\n\n  if (arcFlag === sweepFlag) {\n    f *= -1;\n  }\n  if (isNaN(f)) {\n    f = 0;\n  }\n\n  // 旋转前的起点坐标，且当长半轴和短半轴的长度为 0 时，坐标按 (0, 0) 处理\n  const cxp = ry ? (f * rx * yp) / ry : 0;\n  const cyp = rx ? (f * -ry * xp) / rx : 0;\n\n  // 椭圆圆心坐标\n  const cx =\n    (x1 + x2) / 2.0 + Math.cos(xRotation) * cxp - Math.sin(xRotation) * cyp;\n  const cy =\n    (y1 + y2) / 2.0 + Math.sin(xRotation) * cxp + Math.cos(xRotation) * cyp;\n\n  // 起始点的单位向量\n  const u = [(xp - cxp) / rx, (yp - cyp) / ry];\n  // 终止点的单位向量\n  const v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n  // 计算起始点和圆心的连线，与 x 轴正方向的夹角\n  const theta = vAngle([1, 0], u);\n\n  // 计算圆弧起始点和终止点与椭圆圆心连线的夹角\n  let dTheta = vAngle(u, v);\n\n  if (vRatio(u, v) <= -1) {\n    dTheta = Math.PI;\n  }\n  if (vRatio(u, v) >= 1) {\n    dTheta = 0;\n  }\n  if (sweepFlag === 0 && dTheta > 0) {\n    dTheta -= 2 * Math.PI;\n  }\n  if (sweepFlag === 1 && dTheta < 0) {\n    dTheta += 2 * Math.PI;\n  }\n  return {\n    cx,\n    cy,\n    // 弧形的起点和终点相同时，长轴和短轴的长度按 0 处理\n    rx: isSamePoint(startPoint, [x2, y2]) ? 0 : rx,\n    ry: isSamePoint(startPoint, [x2, y2]) ? 0 : ry,\n    startAngle: theta,\n    endAngle: theta + dTheta,\n    xRotation,\n    arcFlag,\n    sweepFlag,\n  };\n}\n\nfunction commandsToPathString(\n  commands: AbsoluteArray,\n  object: Circle | Ellipse | Rect | Line | Polyline | Polygon | Path,\n  transform?: mat4,\n) {\n  return commands.reduce((prev, cur) => {\n    let path = '';\n    if (cur[0] === 'M' || cur[0] === 'L') {\n      const p = vec3.fromValues(cur[1], cur[2], 0);\n\n      if (transform) {\n        vec3.transformMat4(p, p, transform);\n      }\n\n      path = `${cur[0]}${p[0]},${p[1]}`;\n    } else if (cur[0] === 'Z') {\n      path = cur[0];\n    } else if (cur[0] === 'C') {\n      const p1 = vec3.fromValues(cur[1], cur[2], 0);\n      const p2 = vec3.fromValues(cur[3], cur[4], 0);\n      const p3 = vec3.fromValues(cur[5], cur[6], 0);\n\n      if (transform) {\n        vec3.transformMat4(p1, p1, transform);\n        vec3.transformMat4(p2, p2, transform);\n        vec3.transformMat4(p3, p3, transform);\n      }\n\n      path = `${cur[0]}${p1[0]},${p1[1]},${p2[0]},${p2[1]},${p3[0]},${p3[1]}`;\n    } else if (cur[0] === 'A') {\n      const c = vec3.fromValues(cur[6], cur[7], 0);\n      if (transform) {\n        vec3.transformMat4(c, c, transform);\n      }\n      path = `${cur[0]}${cur[1]},${cur[2]},${cur[3]},${cur[4]},${cur[5]},${c[0]},${c[1]}`;\n    } else if (cur[0] === 'Q') {\n      const p1 = vec3.fromValues(cur[1], cur[2], 0);\n      const p2 = vec3.fromValues(cur[3], cur[4], 0);\n      if (transform) {\n        vec3.transformMat4(p1, p1, transform);\n        vec3.transformMat4(p2, p2, transform);\n      }\n      path = `${cur[0]}${cur[1]},${cur[2]},${cur[3]},${cur[4]}}`;\n    }\n\n    return (prev += path);\n  }, '');\n}\n\nfunction lineToCommands(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n): AbsoluteArray {\n  return [\n    ['M', x1, y1],\n    ['L', x2, y2],\n  ];\n}\n\nfunction ellipseToCommands(\n  rx: number,\n  ry: number,\n  cx: number,\n  cy: number,\n): AbsoluteArray {\n  const factor = ((-1 + Math.sqrt(2)) / 3) * 4;\n  const dx = rx * factor;\n  const dy = ry * factor;\n  const left = cx - rx;\n  const right = cx + rx;\n  const top = cy - ry;\n  const bottom = cy + ry;\n\n  return [\n    ['M', left, cy],\n    ['C', left, cy - dy, cx - dx, top, cx, top],\n    ['C', cx + dx, top, right, cy - dy, right, cy],\n    ['C', right, cy + dy, cx + dx, bottom, cx, bottom],\n    ['C', cx - dx, bottom, left, cy + dy, left, cy],\n    ['Z'],\n  ];\n}\n\nfunction polygonToCommands(\n  points: ([number, number] | [number, number, number])[],\n  closed: boolean,\n): AbsoluteArray {\n  const result = points.map((point, i) => {\n    return [i === 0 ? 'M' : 'L', point[0], point[1]];\n  });\n\n  if (closed) {\n    result.push(['Z']);\n  }\n\n  return result as AbsoluteArray;\n}\n\nfunction rectToCommands(\n  width: number,\n  height: number,\n  x: number,\n  y: number,\n  radius?: [number, number, number, number],\n): AbsoluteArray {\n  // @see https://gist.github.com/danielpquinn/dd966af424030d47e476\n  if (radius) {\n    const [tlr, trr, brr, blr] = radius;\n    const signX = width > 0 ? 1 : -1;\n    const signY = height > 0 ? 1 : -1;\n    // sweep-flag @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Tutorial/Paths#arcs\n    const sweepFlag = signX + signY !== 0 ? 1 : 0;\n    return [\n      ['M', signX * tlr + x, y],\n      ['L', width - signX * trr + x, y],\n      trr ? ['A', trr, trr, 0, 0, sweepFlag, width + x, signY * trr + y] : null,\n      ['L', width + x, height - signY * brr + y],\n      brr\n        ? ['A', brr, brr, 0, 0, sweepFlag, width + x - signX * brr, height + y]\n        : null,\n      ['L', x + signX * blr, height + y],\n      blr\n        ? ['A', blr, blr, 0, 0, sweepFlag, x, height + y - signY * blr]\n        : null,\n      ['L', x, signY * tlr + y],\n      tlr ? ['A', tlr, tlr, 0, 0, sweepFlag, signX * tlr + x, y] : null,\n      ['Z'],\n    ].filter((command) => command) as AbsoluteArray;\n  }\n\n  return [\n    ['M', x, y],\n    ['L', x + width, y],\n    ['L', x + width, y + height],\n    ['L', x, y + height],\n    ['Z'],\n  ];\n}\n\n/**\n * convert object to path, should account for:\n * * transform & origin\n * * lineWidth\n */\nexport function convertToPath(\n  object: Circle | Ellipse | Rect | Line | Polyline | Polygon | Path,\n  transform: mat4 = object.getLocalTransform(),\n) {\n  let commands: AbsoluteArray = [] as unknown as AbsoluteArray;\n  switch (object.nodeName) {\n    case Shape.LINE:\n      const { x1 = 0, y1 = 0, x2 = 0, y2 = 0 } = (object as Line).parsedStyle;\n      commands = lineToCommands(x1, y1, x2, y2);\n      break;\n    case Shape.CIRCLE: {\n      const { r = 0, cx = 0, cy = 0 } = (object as Circle).parsedStyle;\n      commands = ellipseToCommands(r, r, cx, cy);\n      break;\n    }\n    case Shape.ELLIPSE: {\n      const {\n        rx = 0,\n        ry = 0,\n        cx = 0,\n        cy = 0,\n      } = (object as Ellipse).parsedStyle;\n      commands = ellipseToCommands(rx, ry, cx, cy);\n      break;\n    }\n    case Shape.POLYLINE:\n    case Shape.POLYGON:\n      const { points } = (object as Polyline).parsedStyle;\n      commands = polygonToCommands(\n        points.points,\n        object.nodeName === Shape.POLYGON,\n      );\n      break;\n    case Shape.RECT:\n      const {\n        width = 0,\n        height = 0,\n        x = 0,\n        y = 0,\n        radius,\n      } = (object as Rect).parsedStyle;\n\n      const hasRadius = radius && radius.some((r) => r !== 0);\n      commands = rectToCommands(\n        width,\n        height,\n        x,\n        y,\n        hasRadius &&\n          (radius.map((r) =>\n            clamp(r, 0, Math.min(Math.abs(width) / 2, Math.abs(height) / 2)),\n          ) as [number, number, number, number]),\n      );\n      break;\n    case Shape.PATH:\n      const { absolutePath } = (object as Path).parsedStyle.d;\n      commands = [...absolutePath];\n      break;\n  }\n\n  if (commands.length) {\n    return commandsToPathString(commands, object, transform);\n  }\n}\n\nexport function translatePathToString(\n  absolutePath: AbsoluteArray,\n  startOffsetX = 0,\n  startOffsetY = 0,\n  endOffsetX = 0,\n  endOffsetY = 0,\n) {\n  const newValue = absolutePath\n    .map((params, i) => {\n      const command = params[0];\n      const nextSegment = absolutePath[i + 1];\n      const useStartOffset =\n        i === 0 && (startOffsetX !== 0 || startOffsetY !== 0);\n      const useEndOffset =\n        (i === absolutePath.length - 1 ||\n          (nextSegment &&\n            (nextSegment[0] === 'M' || nextSegment[0] === 'Z'))) &&\n        endOffsetX !== 0 &&\n        endOffsetY !== 0;\n      const [startOffsetXTemp, startOffsetYTemp] = useStartOffset\n        ? [startOffsetX, startOffsetY]\n        : [0, 0];\n      const [endOffsetXTemp, endOffsetYTemp] = useEndOffset\n        ? [endOffsetX, endOffsetY]\n        : [0, 0];\n\n      switch (command) {\n        case 'M':\n          return `M ${params[1] + startOffsetXTemp},${params[2] + startOffsetYTemp}`;\n\n        case 'L':\n          return `L ${params[1] + endOffsetXTemp},${\n            params[2] + endOffsetYTemp\n          }`;\n\n        case 'Q':\n          return `Q ${params[1]} ${params[2]},${params[3] + endOffsetXTemp} ${params[4] + endOffsetYTemp}`;\n\n        case 'C':\n          return `C ${params[1]} ${params[2]},${params[3]} ${params[4]},${params[5] + endOffsetXTemp} ${params[6] + endOffsetYTemp}`;\n\n        case 'A':\n          return `A ${params[1]} ${params[2]} ${params[3]} ${params[4]} ${params[5]} ${params[6]} ${params[7]}${\n            useEndOffset\n              ? ` L ${params[6] + endOffsetX},${params[7] + endOffsetY}`\n              : ''\n          }`;\n\n        case 'Z':\n          return 'Z';\n\n        default:\n          return null;\n      }\n    })\n    .filter((item) => item !== null)\n    .join(' ');\n  if (~newValue.indexOf('NaN')) {\n    return '';\n  }\n  return newValue;\n}\n","import type { AbsoluteArray, CurveArray, PathArray } from '@antv/util';\nimport {\n  clonePath,\n  equalizeSegments,\n  getDrawDirection,\n  getRotatedCurve,\n  isString,\n  normalizePath,\n  path2Curve,\n  reverseCurve,\n} from '@antv/util';\nimport type { ParsedPathStyleProps } from '../../display-objects';\nimport type { IElement } from '../../dom';\nimport { memoize } from '../../utils/memoize';\nimport {\n  extractPolygons,\n  getPathBBox,\n  hasArcOrBezier,\n  path2Segments,\n  removeRedundantMCommand,\n} from '../../utils/path';\n\nconst internalParsePath = (path: string | PathArray) => {\n  // empty path\n  if (path === '' || (Array.isArray(path) && path.length === 0)) {\n    return {\n      absolutePath: [],\n      hasArc: false,\n      segments: [],\n      polygons: [],\n      polylines: [],\n      curve: null,\n      totalLength: 0,\n      rect: {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n      },\n    };\n  }\n\n  let absolutePath: AbsoluteArray;\n  try {\n    absolutePath = normalizePath(path);\n  } catch {\n    absolutePath = normalizePath('');\n    console.error(`[g]: Invalid SVG Path definition: ${path}`);\n  }\n\n  removeRedundantMCommand(absolutePath);\n\n  const hasArc = hasArcOrBezier(absolutePath);\n\n  const { polygons, polylines } = extractPolygons(absolutePath);\n\n  // for later use\n  const segments = path2Segments(absolutePath);\n\n  // Only calculate bbox here since we don't need length now.\n  const { x, y, width, height } = getPathBBox(segments, 0);\n\n  return {\n    absolutePath,\n    hasArc,\n    segments,\n    polygons,\n    polylines,\n    // curve,\n    // Delay the calculation of length.\n    totalLength: 0,\n    rect: {\n      x: Number.isFinite(x) ? x : 0,\n      y: Number.isFinite(y) ? y : 0,\n      width: Number.isFinite(width) ? width : 0,\n      height: Number.isFinite(height) ? height : 0,\n    },\n  };\n};\n\nconst memoizedParsePath = memoize(internalParsePath);\n\nexport function parsePath(path: string | PathArray): ParsedPathStyleProps['d'] {\n  return (\n    isString(path) ? memoizedParsePath(path) : internalParsePath(path)\n  ) as ParsedPathStyleProps['d'];\n}\n\nexport function mergePaths(\n  left: ParsedPathStyleProps['d'],\n  right: ParsedPathStyleProps['d'],\n  object?: IElement,\n): [CurveArray, CurveArray, (b: CurveArray) => CurveArray] {\n  let curve1 = left.curve;\n  let curve2 = right.curve;\n  if (!curve1 || curve1.length === 0) {\n    // convert to curves to do morphing & picking later\n    // @see http://thednp.github.io/kute.js/svgCubicMorph.html\n    curve1 = path2Curve(left.absolutePath, false) as CurveArray;\n    left.curve = curve1;\n  }\n  if (!curve2 || curve2.length === 0) {\n    curve2 = path2Curve(right.absolutePath, false) as CurveArray;\n    right.curve = curve2;\n  }\n\n  let curves = [curve1, curve2];\n  if (curve1.length !== curve2.length) {\n    curves = equalizeSegments(curve1, curve2);\n  }\n\n  const curve0 =\n    getDrawDirection(curves[0]) !== getDrawDirection(curves[1])\n      ? reverseCurve(curves[0])\n      : (clonePath(curves[0]) as CurveArray);\n\n  return [\n    curve0,\n    getRotatedCurve(curves[1], curve0) as CurveArray,\n    (pathArray: CurveArray) => {\n      // need converting to path string?\n      return pathArray;\n    },\n  ];\n}\n","import { isString } from '@antv/util';\nimport type { DisplayObject } from '../..';\n\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Attribute/points\n *\n * @example\n * points=\"100,10 250,150 200,110\"\n */\nexport function parsePoints(\n  pointsOrStr: string | [number, number][],\n  object?: DisplayObject,\n) {\n  let points: [number, number][];\n  if (isString(pointsOrStr)) {\n    points = pointsOrStr.split(' ').map((pointStr) => {\n      const [x, y] = pointStr.split(',');\n      return [Number(x), Number(y)];\n    });\n  } else {\n    points = pointsOrStr;\n  }\n\n  return {\n    points,\n    totalLength: 0,\n    segments: [],\n  };\n}\n\nexport function mergePoints(\n  left,\n  right,\n):\n  | [\n      [number, number][],\n      [number, number][],\n      (numberList: [number, number][]) => [number, number][],\n    ]\n  | undefined {\n  return [\n    left.points,\n    right.points,\n    (points) => {\n      return points;\n    },\n  ];\n}\n","import { clamp } from '@antv/util';\nimport type { DisplayObject } from '../../display-objects';\nimport { decomposeMat4, deg2rad } from '../../utils/math';\nimport { getOrCreateUnitValue } from '../CSSStyleValuePool';\nimport { CSSUnitValue, Odeg, Opx } from '../cssom';\nimport {\n  convertAngleUnit,\n  convertPercentUnit,\n  mergeDimensions,\n  parseAngle,\n  parseAngleUnmemoize,\n  parseLength,\n  parseLengthUnmemoize,\n  parseLengthOrPercentage,\n  parseLengthOrPercentageUnmemoize,\n} from './dimension';\nimport { parseNumber, parseNumberUnmemoize } from './numeric';\nimport type { TransformArray, TransformType } from '../../types';\n\n// eg. { t: 'scale', d: [CSSUnitValue(1), CSSUnitValue(2)] }\nexport interface ParsedTransform {\n  t: string;\n  d: CSSUnitValue[];\n}\n\ntype PatternElement = string | number | null | CSSUnitValue;\ntype CastFunction =\n  | ((string: string) => string)\n  | ((contents: (number | PatternElement)[]) => PatternElement[]);\n\nconst _ = null;\nconst TRANSFORM_REGEXP = /\\s*(\\w+)\\(([^)]*)\\)/g;\nfunction cast(pattern: PatternElement[]) {\n  return function (contents: PatternElement[]) {\n    let i = 0;\n    return pattern.map((x) => {\n      return x === _ ? contents[i++] : x;\n    });\n  };\n}\n\nfunction id(x: string) {\n  return x;\n}\n\n// type: [argTypes, convertTo3D, convertTo2D]\n// In the argument types string, lowercase characters represent optional arguments\nconst transformFunctions: Record<\n  TransformType,\n  [string] | [string, CastFunction] | [string, CastFunction, CastFunction]\n> = {\n  // @ts-ignore\n  matrix: ['NNNNNN', [_, _, 0, 0, _, _, 0, 0, 0, 0, 1, 0, _, _, 0, 1], id],\n  matrix3d: ['NNNNNNNNNNNNNNNN', id],\n  rotate: ['A'],\n  rotateX: ['A'],\n  rotateY: ['A'],\n  rotateZ: ['A'],\n  rotate3d: ['NNNA'],\n  perspective: ['L'],\n  scale: ['Nn', cast([_, _, new CSSUnitValue(1)]), id],\n  scaleX: [\n    'N',\n    cast([_, new CSSUnitValue(1), new CSSUnitValue(1)]),\n    cast([_, new CSSUnitValue(1)]),\n  ],\n  scaleY: [\n    'N',\n    cast([new CSSUnitValue(1), _, new CSSUnitValue(1)]),\n    cast([new CSSUnitValue(1), _]),\n  ],\n  scaleZ: ['N', cast([new CSSUnitValue(1), new CSSUnitValue(1), _])],\n  scale3d: ['NNN', id],\n  skew: ['Aa', null, id],\n  skewX: ['A', null, cast([_, Odeg])],\n  skewY: ['A', null, cast([Odeg, _])],\n  translate: ['Tt', cast([_, _, Opx]), id],\n  translateX: ['T', cast([_, Opx, Opx]), cast([_, Opx])],\n  translateY: ['T', cast([Opx, _, Opx]), cast([Opx, _])],\n  translateZ: ['L', cast([Opx, Opx, _])],\n  translate3d: ['TTL', id],\n};\n\nfunction parseArrayTransform(transform: TransformArray): ParsedTransform[] {\n  const result: ParsedTransform[] = [];\n  const length = transform.length;\n\n  for (let i = 0; i < length; i++) {\n    const item = transform[i];\n    const name = item[0];\n    const args = item.slice(1) as number[];\n    // infer default value\n    if (name === 'translate' || name === 'skew') {\n      if (args.length === 1) args.push(0);\n    } else if (name === 'scale') {\n      if (args.length === 1) args.push(args[0]);\n    }\n\n    const functionData = transformFunctions[name];\n    if (!functionData) return [];\n    const parsedArgs = args.map((value) => getOrCreateUnitValue(value));\n    result.push({ t: name, d: parsedArgs });\n  }\n\n  return result;\n}\n\n/**\n * none\n * scale(1) scale(1, 2)\n * scaleX(1)\n */\nexport function parseTransform(\n  transform: string | TransformArray,\n): ParsedTransform[] {\n  if (Array.isArray(transform)) {\n    return parseArrayTransform(transform);\n  }\n\n  transform = (transform || 'none').trim();\n  if (transform === 'none') {\n    return [];\n  }\n  const result: ParsedTransform[] = [];\n  let match;\n  let prevLastIndex = 0;\n  TRANSFORM_REGEXP.lastIndex = 0;\n  while ((match = TRANSFORM_REGEXP.exec(transform))) {\n    if (match.index !== prevLastIndex) {\n      return [];\n    }\n    prevLastIndex = match.index + match[0].length;\n    const functionName = match[1] as TransformType; // scale\n    const functionData = transformFunctions[functionName]; // scale(1, 2)\n    if (!functionData) {\n      // invalid, eg. scale()\n      return [];\n    }\n    const args = match[2].split(','); // 1,2\n    const argTypes = functionData[0]; // Nn\n    if (argTypes.length < args.length) {\n      // scale(N, n)\n      return [];\n    }\n\n    const parsedArgs: CSSUnitValue[] = [];\n    for (let i = 0; i < argTypes.length; i++) {\n      const arg = args[i];\n      const type = argTypes[i];\n      let parsedArg;\n      if (!arg) {\n        // @ts-ignore\n        parsedArg = {\n          a: Odeg,\n          n: parsedArgs[0],\n          t: Opx,\n        }[type];\n      } else {\n        // @ts-ignore\n        parsedArg = {\n          A: (s: string) => {\n            return s.trim() === '0' ? Odeg : parseAngle(s);\n          },\n          N: parseNumber,\n          T: parseLengthOrPercentage,\n          L: parseLength,\n        }[type.toUpperCase()](arg);\n      }\n      if (parsedArg === undefined) {\n        return [];\n      }\n      parsedArgs.push(parsedArg);\n    }\n    result.push({ t: functionName, d: parsedArgs }); // { t: scale, d: [1, 2] }\n\n    if (TRANSFORM_REGEXP.lastIndex === transform.length) {\n      return result;\n    }\n  }\n\n  return [];\n}\nexport function parseTransformUnmemoize(\n  transform: string | TransformArray,\n): ParsedTransform[] {\n  if (Array.isArray(transform)) {\n    return parseArrayTransform(transform);\n  }\n\n  transform = (transform || 'none').trim();\n  if (transform === 'none') {\n    return [];\n  }\n  const result: ParsedTransform[] = [];\n  let match;\n  let prevLastIndex = 0;\n  TRANSFORM_REGEXP.lastIndex = 0;\n  while ((match = TRANSFORM_REGEXP.exec(transform))) {\n    if (match.index !== prevLastIndex) {\n      return [];\n    }\n    prevLastIndex = match.index + match[0].length;\n    const functionName = match[1] as TransformType; // scale\n    const functionData = transformFunctions[functionName]; // scale(1, 2)\n    if (!functionData) {\n      // invalid, eg. scale()\n      return [];\n    }\n    const args = match[2].split(','); // 1,2\n    const argTypes = functionData[0]; // Nn\n    if (argTypes.length < args.length) {\n      // scale(N, n)\n      return [];\n    }\n\n    const parsedArgs: CSSUnitValue[] = [];\n    for (let i = 0; i < argTypes.length; i++) {\n      const arg = args[i];\n      const type = argTypes[i];\n      let parsedArg;\n      if (!arg) {\n        // @ts-ignore\n        parsedArg = {\n          a: Odeg,\n          n: parsedArgs[0],\n          t: Opx,\n        }[type];\n      } else {\n        // @ts-ignore\n        parsedArg = {\n          A: (s: string) => {\n            return s.trim() === '0' ? Odeg : parseAngleUnmemoize(s);\n          },\n          N: parseNumberUnmemoize,\n          T: parseLengthOrPercentageUnmemoize,\n          L: parseLengthUnmemoize,\n        }[type.toUpperCase()](arg);\n      }\n      if (parsedArg === undefined) {\n        return [];\n      }\n      parsedArgs.push(parsedArg);\n    }\n    result.push({ t: functionName, d: parsedArgs }); // { t: scale, d: [1, 2] }\n\n    if (TRANSFORM_REGEXP.lastIndex === transform.length) {\n      return result;\n    }\n  }\n\n  return [];\n}\n\nexport function convertItemToMatrix(item: ParsedTransform): number[] {\n  let x: number;\n  let y: number;\n  let z: number;\n  let angle: number;\n  switch (item.t) {\n    case 'rotateX':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [\n        1,\n        0,\n        0,\n        0,\n        0,\n        Math.cos(angle),\n        Math.sin(angle),\n        0,\n        0,\n        -Math.sin(angle),\n        Math.cos(angle),\n        0,\n        0,\n        0,\n        0,\n        1,\n      ];\n    case 'rotateY':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [\n        Math.cos(angle),\n        0,\n        -Math.sin(angle),\n        0,\n        0,\n        1,\n        0,\n        0,\n        Math.sin(angle),\n        0,\n        Math.cos(angle),\n        0,\n        0,\n        0,\n        0,\n        1,\n      ];\n    case 'rotate':\n    case 'rotateZ':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [\n        Math.cos(angle),\n        Math.sin(angle),\n        0,\n        0,\n        -Math.sin(angle),\n        Math.cos(angle),\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n      ];\n    case 'rotate3d':\n      x = item.d[0].value;\n      y = item.d[1].value;\n      z = item.d[2].value;\n      angle = deg2rad(convertAngleUnit(item.d[3]));\n\n      const sqrLength = x * x + y * y + z * z;\n      if (sqrLength === 0) {\n        x = 1;\n        y = 0;\n        z = 0;\n      } else if (sqrLength !== 1) {\n        const length = Math.sqrt(sqrLength);\n        x /= length;\n        y /= length;\n        z /= length;\n      }\n\n      const s = Math.sin(angle / 2);\n      const sc = s * Math.cos(angle / 2);\n      const sq = s * s;\n      return [\n        1 - 2 * (y * y + z * z) * sq,\n        2 * (x * y * sq + z * sc),\n        2 * (x * z * sq - y * sc),\n        0,\n\n        2 * (x * y * sq - z * sc),\n        1 - 2 * (x * x + z * z) * sq,\n        2 * (y * z * sq + x * sc),\n        0,\n\n        2 * (x * z * sq + y * sc),\n        2 * (y * z * sq - x * sc),\n        1 - 2 * (x * x + y * y) * sq,\n        0,\n\n        0,\n        0,\n        0,\n        1,\n      ];\n    case 'scale':\n      return [\n        item.d[0].value,\n        0,\n        0,\n        0,\n        0,\n        item.d[1].value,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n      ];\n    case 'scaleX':\n      return [item.d[0].value, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'scaleY':\n      return [1, 0, 0, 0, 0, item.d[0].value, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'scaleZ':\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, item.d[0].value, 0, 0, 0, 0, 1];\n    case 'scale3d':\n      return [\n        item.d[0].value,\n        0,\n        0,\n        0,\n        0,\n        item.d[1].value,\n        0,\n        0,\n        0,\n        0,\n        item.d[2].value,\n        0,\n        0,\n        0,\n        0,\n        1,\n      ];\n    case 'skew':\n      const xAngle = deg2rad(convertAngleUnit(item.d[0]));\n      const yAngle = deg2rad(convertAngleUnit(item.d[1]));\n      return [\n        1,\n        Math.tan(yAngle),\n        0,\n        0,\n        Math.tan(xAngle),\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n      ];\n    case 'skewX':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [1, 0, 0, 0, Math.tan(angle), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'skewY':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [1, Math.tan(angle), 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'translate':\n      // TODO: pass target\n      x = convertPercentUnit(item.d[0], 0, null) || 0;\n      y = convertPercentUnit(item.d[1], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, x, y, 0, 1];\n    case 'translateX':\n      x = convertPercentUnit(item.d[0], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, x, 0, 0, 1];\n    case 'translateY':\n      y = convertPercentUnit(item.d[0], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, y, 0, 1];\n    case 'translateZ':\n      z = convertPercentUnit(item.d[0], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, z, 1];\n    case 'translate3d':\n      x = convertPercentUnit(item.d[0], 0, null) || 0;\n      y = convertPercentUnit(item.d[1], 0, null) || 0;\n      z = convertPercentUnit(item.d[2], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, x, y, z, 1];\n    case 'perspective':\n      const t = convertPercentUnit(item.d[0], 0, null) || 0;\n      const p = t ? -1 / t : 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, p, 0, 0, 0, 1];\n    case 'matrix':\n      return [\n        item.d[0].value,\n        item.d[1].value,\n        0,\n        0,\n        item.d[2].value,\n        item.d[3].value,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        item.d[4].value,\n        item.d[5].value,\n        0,\n        1,\n      ];\n    case 'matrix3d':\n      return item.d.map((d) => d.value);\n    default:\n  }\n}\n\nfunction multiplyMatrices(a: number[], b: number[]) {\n  return [\n    a[0] * b[0] + a[4] * b[1] + a[8] * b[2] + a[12] * b[3],\n    a[1] * b[0] + a[5] * b[1] + a[9] * b[2] + a[13] * b[3],\n    a[2] * b[0] + a[6] * b[1] + a[10] * b[2] + a[14] * b[3],\n    a[3] * b[0] + a[7] * b[1] + a[11] * b[2] + a[15] * b[3],\n\n    a[0] * b[4] + a[4] * b[5] + a[8] * b[6] + a[12] * b[7],\n    a[1] * b[4] + a[5] * b[5] + a[9] * b[6] + a[13] * b[7],\n    a[2] * b[4] + a[6] * b[5] + a[10] * b[6] + a[14] * b[7],\n    a[3] * b[4] + a[7] * b[5] + a[11] * b[6] + a[15] * b[7],\n\n    a[0] * b[8] + a[4] * b[9] + a[8] * b[10] + a[12] * b[11],\n    a[1] * b[8] + a[5] * b[9] + a[9] * b[10] + a[13] * b[11],\n    a[2] * b[8] + a[6] * b[9] + a[10] * b[10] + a[14] * b[11],\n    a[3] * b[8] + a[7] * b[9] + a[11] * b[10] + a[15] * b[11],\n\n    a[0] * b[12] + a[4] * b[13] + a[8] * b[14] + a[12] * b[15],\n    a[1] * b[12] + a[5] * b[13] + a[9] * b[14] + a[13] * b[15],\n    a[2] * b[12] + a[6] * b[13] + a[10] * b[14] + a[14] * b[15],\n    a[3] * b[12] + a[7] * b[13] + a[11] * b[14] + a[15] * b[15],\n  ];\n}\n\nfunction convertToMatrix(transformList: ParsedTransform[]) {\n  if (transformList.length === 0) {\n    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n  }\n  return transformList.map(convertItemToMatrix).reduce(multiplyMatrices);\n}\n\nfunction makeMatrixDecomposition(transformList: ParsedTransform[]) {\n  const translate = [0, 0, 0];\n  const scale = [1, 1, 1];\n  const skew = [0, 0, 0];\n  const perspective = [0, 0, 0, 1];\n  const quaternion = [0, 0, 0, 1];\n  decomposeMat4(\n    // @ts-ignore\n    convertToMatrix(transformList),\n    translate,\n    scale,\n    skew,\n    perspective,\n    quaternion,\n  );\n  return [[translate, scale, skew, quaternion, perspective]];\n}\n\nexport const composeMatrix = (function () {\n  function multiply(a, b) {\n    const result = [\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n    ];\n    for (let i = 0; i < 4; i++) {\n      for (let j = 0; j < 4; j++) {\n        for (let k = 0; k < 4; k++) {\n          result[i][j] += b[i][k] * a[k][j];\n        }\n      }\n    }\n    return result;\n  }\n\n  function is2D(m) {\n    return (\n      m[0][2] === 0 &&\n      m[0][3] === 0 &&\n      m[1][2] === 0 &&\n      m[1][3] === 0 &&\n      m[2][0] === 0 &&\n      m[2][1] === 0 &&\n      m[2][2] === 1 &&\n      m[2][3] === 0 &&\n      m[3][2] === 0 &&\n      m[3][3] === 1\n    );\n  }\n\n  function composeMatrix(translate, scale, skew, quat, perspective) {\n    let matrix = [\n      [1, 0, 0, 0],\n      [0, 1, 0, 0],\n      [0, 0, 1, 0],\n      [0, 0, 0, 1],\n    ];\n\n    for (let i = 0; i < 4; i++) {\n      matrix[i][3] = perspective[i];\n    }\n\n    for (let i = 0; i < 3; i++) {\n      for (let j = 0; j < 3; j++) {\n        matrix[3][i] += translate[j] * matrix[j][i];\n      }\n    }\n\n    const x = quat[0];\n    const y = quat[1];\n    const z = quat[2];\n    const w = quat[3];\n\n    const rotMatrix = [\n      [1, 0, 0, 0],\n      [0, 1, 0, 0],\n      [0, 0, 1, 0],\n      [0, 0, 0, 1],\n    ];\n\n    rotMatrix[0][0] = 1 - 2 * (y * y + z * z);\n    rotMatrix[0][1] = 2 * (x * y - z * w);\n    rotMatrix[0][2] = 2 * (x * z + y * w);\n    rotMatrix[1][0] = 2 * (x * y + z * w);\n    rotMatrix[1][1] = 1 - 2 * (x * x + z * z);\n    rotMatrix[1][2] = 2 * (y * z - x * w);\n    rotMatrix[2][0] = 2 * (x * z - y * w);\n    rotMatrix[2][1] = 2 * (y * z + x * w);\n    rotMatrix[2][2] = 1 - 2 * (x * x + y * y);\n\n    matrix = multiply(matrix, rotMatrix);\n\n    const temp = [\n      [1, 0, 0, 0],\n      [0, 1, 0, 0],\n      [0, 0, 1, 0],\n      [0, 0, 0, 1],\n    ];\n    if (skew[2]) {\n      temp[2][1] = skew[2];\n      matrix = multiply(matrix, temp);\n    }\n\n    if (skew[1]) {\n      temp[2][1] = 0;\n      temp[2][0] = skew[0];\n      matrix = multiply(matrix, temp);\n    }\n\n    if (skew[0]) {\n      temp[2][0] = 0;\n      temp[1][0] = skew[0];\n      matrix = multiply(matrix, temp);\n    }\n\n    for (let i = 0; i < 3; i++) {\n      for (let j = 0; j < 3; j++) {\n        matrix[i][j] *= scale[i];\n      }\n    }\n\n    if (is2D(matrix)) {\n      return [\n        matrix[0][0],\n        matrix[0][1],\n        matrix[1][0],\n        matrix[1][1],\n        matrix[3][0],\n        matrix[3][1],\n      ];\n    }\n    return matrix[0].concat(matrix[1], matrix[2], matrix[3]);\n  }\n  return composeMatrix;\n})();\n\nfunction numberToLongString(x: number) {\n  return x.toFixed(6).replace('.000000', '');\n}\n\nfunction mergeMatrices(\n  left: ParsedTransform[],\n  right: ParsedTransform[],\n): [number[][], number[][], () => string] {\n  let leftArgs: number[][];\n  let rightArgs: number[][];\n  // @ts-ignore\n  if (left.decompositionPair !== right) {\n    // @ts-ignore\n    left.decompositionPair = right;\n    // @ts-ignore\n    leftArgs = makeMatrixDecomposition(left);\n  }\n  // @ts-ignore\n  if (right.decompositionPair !== left) {\n    // @ts-ignore\n    right.decompositionPair = left;\n    // @ts-ignore\n    rightArgs = makeMatrixDecomposition(right);\n  }\n  if (leftArgs[0] === null || rightArgs[0] === null)\n    return [\n      // @ts-ignore\n      [false],\n      // @ts-ignore\n      [true],\n      // @ts-ignore\n      (x) => {\n        return x ? right[0].d : left[0].d;\n      },\n    ];\n  leftArgs[0].push(0);\n  rightArgs[0].push(1);\n  return [\n    leftArgs,\n    rightArgs,\n    // @ts-ignore\n    (list) => {\n      // @ts-ignore\n      const q = quat(leftArgs[0][3], rightArgs[0][3], list[5]);\n      const mat = composeMatrix(list[0], list[1], list[2], q, list[4]);\n      const stringifiedArgs = mat.map(numberToLongString).join(',');\n      return stringifiedArgs;\n    },\n  ];\n}\n\nfunction dot(v1: number[], v2: number[]) {\n  let result = 0;\n  for (let i = 0; i < v1.length; i++) {\n    result += v1[i] * v2[i];\n  }\n  return result;\n}\n\nfunction quat(fromQ: number[], toQ: number[], f: number): number[] {\n  let product = dot(fromQ, toQ);\n  product = clamp(product, -1.0, 1.0);\n\n  let quat = [];\n  if (product === 1.0) {\n    quat = fromQ;\n  } else {\n    const theta = Math.acos(product);\n    const w = (Math.sin(f * theta) * 1) / Math.sqrt(1 - product * product);\n\n    for (let i = 0; i < 4; i++) {\n      quat.push(fromQ[i] * (Math.cos(f * theta) - product * w) + toQ[i] * w);\n    }\n  }\n  return quat;\n}\n\n// scaleX/Y/Z -> scale\nfunction typeTo2D(type: string) {\n  return type.replace(/[XY]/, '');\n}\n\n// scaleX/Y/Z -> scale3d\nfunction typeTo3D(type: string) {\n  return type.replace(/(X|Y|Z|3d)?$/, '3d');\n}\n\nconst isMatrixOrPerspective = function (lt: string, rt: string) {\n  return (\n    (lt === 'perspective' && rt === 'perspective') ||\n    ((lt === 'matrix' || lt === 'matrix3d') &&\n      (rt === 'matrix' || rt === 'matrix3d'))\n  );\n};\n\nexport function mergeTransforms(\n  left: ParsedTransform[],\n  right: ParsedTransform[],\n  target: DisplayObject | null,\n): [number[][], number[][], (d: number[][]) => string] {\n  let flipResults = false;\n  // padding empty transform, eg. merge 'scale(10)' with 'none' -> scale(1)\n  if (!left.length || !right.length) {\n    if (!left.length) {\n      flipResults = true;\n      left = right;\n      right = [];\n    }\n    for (let i = 0; i < left.length; i++) {\n      const { t: type, d: args } = left[i];\n      // none -> scale(1)/translateX(0)\n      const defaultValue = type.substring(0, 5) === 'scale' ? 1 : 0;\n      right.push({\n        t: type,\n        d: args.map((arg) => {\n          if (typeof arg === 'number') {\n            return getOrCreateUnitValue(defaultValue);\n          }\n          return getOrCreateUnitValue(defaultValue, arg.unit);\n          //   {\n          //     unit: arg.unit,\n          //     value: defaultValue,\n          //   };\n        }),\n      });\n    }\n  }\n\n  let leftResult: number[][] = [];\n  let rightResult: number[][] = [];\n  let types: any = [];\n\n  // merge matrix() with matrix3d()\n  if (left.length !== right.length) {\n    const merged = mergeMatrices(left, right);\n    // @ts-ignore\n    leftResult = [merged[0]];\n    // @ts-ignore\n    rightResult = [merged[1]];\n    types = [['matrix', [merged[2]]]];\n  } else {\n    for (let i = 0; i < left.length; i++) {\n      const leftType = left[i].t as TransformType;\n      const rightType = right[i].t as TransformType;\n      let leftArgs = left[i].d;\n      let rightArgs = right[i].d;\n\n      const leftFunctionData = transformFunctions[leftType];\n      const rightFunctionData = transformFunctions[rightType];\n\n      let type;\n      if (isMatrixOrPerspective(leftType, rightType)) {\n        const merged = mergeMatrices([left[i]], [right[i]]);\n        // @ts-ignore\n        leftResult.push(merged[0]);\n        // @ts-ignore\n        rightResult.push(merged[1]);\n        types.push(['matrix', [merged[2]]]);\n        continue;\n      } else if (leftType === rightType) {\n        type = leftType;\n      } else if (\n        leftFunctionData[2] &&\n        rightFunctionData[2] &&\n        typeTo2D(leftType) === typeTo2D(rightType)\n      ) {\n        type = typeTo2D(leftType);\n        // @ts-ignore\n        leftArgs = leftFunctionData[2](leftArgs);\n        // @ts-ignore\n        rightArgs = rightFunctionData[2](rightArgs);\n      } else if (\n        leftFunctionData[1] &&\n        rightFunctionData[1] &&\n        typeTo3D(leftType) === typeTo3D(rightType)\n      ) {\n        type = typeTo3D(leftType);\n        // @ts-ignore\n        leftArgs = leftFunctionData[1](leftArgs);\n        // @ts-ignore\n        rightArgs = rightFunctionData[1](rightArgs);\n      } else {\n        const merged = mergeMatrices(left, right);\n        // @ts-ignore\n        leftResult = [merged[0]];\n        // @ts-ignore\n        rightResult = [merged[1]];\n        types = [['matrix', [merged[2]]]];\n        break;\n      }\n\n      const leftArgsCopy = [];\n      const rightArgsCopy = [];\n      const stringConversions = [];\n      for (let j = 0; j < leftArgs.length; j++) {\n        // const merge = leftArgs[j].unit === UnitType.kNumber ? mergeDimensions : mergeDimensions;\n        const merged = mergeDimensions(\n          leftArgs[j],\n          rightArgs[j],\n          target,\n          false,\n          j,\n        );\n        leftArgsCopy[j] = merged[0];\n        rightArgsCopy[j] = merged[1];\n        stringConversions.push(merged[2]);\n      }\n      leftResult.push(leftArgsCopy);\n      rightResult.push(rightArgsCopy);\n      types.push([type, stringConversions]);\n    }\n  }\n\n  if (flipResults) {\n    const tmp = leftResult;\n    leftResult = rightResult;\n    rightResult = tmp;\n  }\n\n  return [\n    leftResult,\n    rightResult,\n    (list: number[][]) => {\n      return list\n        .map((args, i: number) => {\n          const stringifiedArgs = args\n            .map((arg, j: number) => {\n              return types[i][1][j](arg);\n            })\n            .join(',');\n          if (\n            types[i][0] === 'matrix' &&\n            stringifiedArgs.split(',').length === 16\n          ) {\n            types[i][0] = 'matrix3d';\n          }\n          if (\n            types[i][0] === 'matrix3d' &&\n            stringifiedArgs.split(',').length === 6\n          ) {\n            types[i][0] = 'matrix';\n          }\n          return `${types[i][0]}(${stringifiedArgs})`;\n        })\n        .join(' ');\n    },\n  ];\n}\n","import { isString } from '@antv/util';\nimport type { CSSUnitValue } from '../cssom';\nimport { getOrCreateUnitValue } from '../CSSStyleValuePool';\nimport { parseLengthOrPercentage } from './dimension';\nimport { memoize } from '../../utils/memoize';\n\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/transform-origin\n * eg. 'center' 'top left' '50px 50px'\n */\nexport const parseTransformOrigin = memoize(\n  (value: string | number[]): [CSSUnitValue, CSSUnitValue] => {\n    if (isString(value)) {\n      if (value === 'text-anchor') {\n        return [getOrCreateUnitValue(0, 'px'), getOrCreateUnitValue(0, 'px')];\n      }\n\n      const values = value.split(' ');\n      if (values.length === 1) {\n        if (values[0] === 'top' || values[0] === 'bottom') {\n          // 'top' -> 'center top'\n          values[1] = values[0];\n          values[0] = 'center';\n        } else {\n          // '50px' -> '50px center'\n          values[1] = 'center';\n        }\n      }\n\n      if (values.length !== 2) {\n        return null;\n      }\n\n      // eg. center bottom\n      return [\n        parseLengthOrPercentage(convertKeyword2Percent(values[0])),\n        parseLengthOrPercentage(convertKeyword2Percent(values[1])),\n      ];\n    }\n    return [\n      getOrCreateUnitValue(value[0] || 0, 'px'),\n      getOrCreateUnitValue(value[1] || 0, 'px'),\n    ];\n  },\n);\n\nfunction convertKeyword2Percent(keyword: string) {\n  if (keyword === 'center') {\n    return '50%';\n  }\n  if (keyword === 'left' || keyword === 'top') {\n    return '0%';\n  }\n  if (keyword === 'right' || keyword === 'bottom') {\n    return '100%';\n  }\n  return keyword;\n}\n","import { isNil, isUndefined } from '@antv/util';\nimport { vec3 } from 'gl-matrix';\nimport type { DisplayObject } from '../display-objects';\nimport { EMPTY_PARSED_PATH } from '../display-objects/constants';\nimport type { GlobalRuntime } from '../global-runtime';\nimport { GeometryAABBUpdater } from '../services';\nimport { AABB } from '../shapes';\nimport type { BaseStyleProps, Tuple3Number } from '../types';\nimport { Shape } from '../types';\nimport type { CSSRGB } from './cssom';\nimport type {\n  PropertyMetadata,\n  PropertyParseOptions,\n  StyleValueRegistry,\n} from './interfaces';\nimport { PropertySyntax } from './interfaces';\nimport {\n  parseColor,\n  parseFilter,\n  parsePath,\n  parsePoints,\n  parseTransform,\n  parseTransformOrigin,\n} from './parser';\nimport {\n  convertPercentUnit,\n  parseDimensionArrayFormat,\n} from './parser/dimension';\n\nexport type CSSGlobalKeywords = 'unset' | 'initial' | 'inherit' | '';\n\n/**\n * Blink used them in code generation(css_properties.json5)\n */\nexport const BUILT_IN_PROPERTIES: PropertyMetadata[] = [\n  {\n    /**\n     * used in CSS Layout API\n     * eg. `display: 'flex'`\n     */\n    n: 'display',\n    k: ['none'],\n  },\n  {\n    /**\n     * range [0.0, 1.0]\n     * @see https://developer.mozilla.org/en-US/docs/Web/CSS/opacity\n     */\n    n: 'opacity',\n    int: true,\n    inh: true,\n    d: '1',\n    syntax: PropertySyntax.OPACITY_VALUE,\n  },\n  {\n    /**\n     * inheritable, range [0.0, 1.0]\n     * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-opacity\n     * @see https://svgwg.org/svg2-draft/painting.html#FillOpacity\n     */\n    n: 'fillOpacity',\n    int: true,\n    inh: true,\n    d: '1',\n    syntax: PropertySyntax.OPACITY_VALUE,\n  },\n  {\n    /**\n     * inheritable, range [0.0, 1.0]\n     * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-opacity\n     * @see https://svgwg.org/svg2-draft/painting.html#StrokeOpacity\n     */\n    n: 'strokeOpacity',\n    int: true,\n    inh: true,\n    d: '1',\n    syntax: PropertySyntax.OPACITY_VALUE,\n  },\n  {\n    /**\n     * background-color is not inheritable\n     * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Fills_and_Strokes\n     */\n    n: 'fill',\n    int: true,\n    k: ['none'],\n    d: 'none',\n    syntax: PropertySyntax.PAINT,\n  },\n  {\n    n: 'fillRule',\n    k: ['nonzero', 'evenodd'],\n    d: 'nonzero',\n  },\n  /**\n   * default to none\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke#usage_notes\n   */\n  {\n    n: 'stroke',\n    int: true,\n    k: ['none'],\n    d: 'none',\n    syntax: PropertySyntax.PAINT,\n    /**\n     * Stroke 'none' won't affect geometry but others will.\n     */\n    l: true,\n  },\n  {\n    n: 'shadowType',\n    k: ['inner', 'outer', 'both'],\n    d: 'outer',\n    l: true,\n  },\n  {\n    n: 'shadowColor',\n    int: true,\n    syntax: PropertySyntax.COLOR,\n  },\n  {\n    n: 'shadowOffsetX',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'shadowOffsetY',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'shadowBlur',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.SHADOW_BLUR,\n  },\n  {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-width\n     */\n    n: 'lineWidth',\n    int: true,\n    inh: true,\n    d: '1',\n    l: true,\n    a: ['strokeWidth'],\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'increasedLineWidthForHitTesting',\n    inh: true,\n    d: '0',\n    l: true,\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'lineJoin',\n    inh: true,\n    l: true,\n    a: ['strokeLinejoin'],\n    k: ['miter', 'bevel', 'round'],\n    d: 'miter',\n  },\n  {\n    n: 'lineCap',\n    inh: true,\n    l: true,\n    a: ['strokeLinecap'],\n    k: ['butt', 'round', 'square'],\n    d: 'butt',\n  },\n  {\n    n: 'lineDash',\n    int: true,\n    inh: true,\n    k: ['none'],\n    a: ['strokeDasharray'],\n    syntax: PropertySyntax.LENGTH_PERCENTAGE_12,\n  },\n  {\n    n: 'lineDashOffset',\n    int: true,\n    inh: true,\n    d: '0',\n    a: ['strokeDashoffset'],\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'offsetPath',\n    syntax: PropertySyntax.DEFINED_PATH,\n  },\n  {\n    n: 'offsetDistance',\n    int: true,\n    syntax: PropertySyntax.OFFSET_DISTANCE,\n  },\n  {\n    n: 'dx',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'dy',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'zIndex',\n    ind: true,\n    int: true,\n    d: '0',\n    k: ['auto'],\n    syntax: PropertySyntax.Z_INDEX,\n  },\n  {\n    n: 'visibility',\n    k: ['visible', 'hidden'],\n    ind: true,\n    inh: true,\n    /**\n     * support interpolation\n     * @see https://developer.mozilla.org/en-US/docs/Web/CSS/visibility#interpolation\n     */\n    int: true,\n    d: 'visible',\n  },\n  {\n    n: 'pointerEvents',\n    inh: true,\n    k: [\n      'none',\n      'auto',\n      'stroke',\n      'fill',\n      'painted',\n      'visible',\n      'visiblestroke',\n      'visiblefill',\n      'visiblepainted',\n      // 'bounding-box',\n      'all',\n    ],\n    d: 'auto',\n  },\n  {\n    n: 'filter',\n    ind: true,\n    l: true,\n    k: ['none'],\n    d: 'none',\n    syntax: PropertySyntax.FILTER,\n  },\n  {\n    n: 'clipPath',\n    syntax: PropertySyntax.DEFINED_PATH,\n  },\n  {\n    n: 'textPath',\n    syntax: PropertySyntax.DEFINED_PATH,\n  },\n  {\n    n: 'textPathSide',\n    k: ['left', 'right'],\n    d: 'left',\n  },\n  {\n    n: 'textPathStartOffset',\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'transform',\n    p: 100,\n    int: true,\n    k: ['none'],\n    d: 'none',\n    syntax: PropertySyntax.TRANSFORM,\n  },\n  {\n    n: 'transformOrigin',\n    p: 100,\n    d: '0 0',\n    // // int: true,\n    // d: (nodeName: string) => {\n    //   if (nodeName === Shape.CIRCLE || nodeName === Shape.ELLIPSE) {\n    //     return 'center';\n    //   }\n    //   if (nodeName === Shape.TEXT) {\n    //     return 'text-anchor';\n    //   }\n    //   return 'left top';\n    // },\n    l: true,\n    syntax: PropertySyntax.TRANSFORM_ORIGIN,\n  },\n  {\n    n: 'cx',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.COORDINATE,\n  },\n  {\n    n: 'cy',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.COORDINATE,\n  },\n  {\n    n: 'cz',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.COORDINATE,\n  },\n  {\n    n: 'r',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'rx',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'ry',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  // Rect Image Group\n  {\n    // x in local space\n    n: 'x',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.COORDINATE,\n  },\n  {\n    // y in local space\n    n: 'y',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.COORDINATE,\n  },\n  {\n    // z in local space\n    n: 'z',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.COORDINATE,\n  },\n  {\n    n: 'width',\n    int: true,\n    l: true,\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/width\n     */\n    k: ['auto', 'fit-content', 'min-content', 'max-content'],\n    d: '0',\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'height',\n    int: true,\n    l: true,\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/height\n     */\n    k: ['auto', 'fit-content', 'min-content', 'max-content'],\n    d: '0',\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'radius',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.LENGTH_PERCENTAGE_14,\n  },\n  // Line\n  {\n    n: 'x1',\n    int: true,\n    l: true,\n    syntax: PropertySyntax.COORDINATE,\n  },\n  {\n    n: 'y1',\n    int: true,\n    l: true,\n    syntax: PropertySyntax.COORDINATE,\n  },\n  {\n    n: 'z1',\n    int: true,\n    l: true,\n    syntax: PropertySyntax.COORDINATE,\n  },\n  {\n    n: 'x2',\n    int: true,\n    l: true,\n    syntax: PropertySyntax.COORDINATE,\n  },\n  {\n    n: 'y2',\n    int: true,\n    l: true,\n    syntax: PropertySyntax.COORDINATE,\n  },\n  {\n    n: 'z2',\n    int: true,\n    l: true,\n    syntax: PropertySyntax.COORDINATE,\n  },\n  // Path\n  {\n    n: 'd',\n    int: true,\n    l: true,\n    d: '',\n    syntax: PropertySyntax.PATH,\n    p: 50,\n  },\n  // Polyline & Polygon\n  {\n    n: 'points',\n    /**\n     * support interpolation\n     */\n    int: true,\n    l: true,\n    syntax: PropertySyntax.LIST_OF_POINTS,\n    p: 50,\n  },\n  // Text\n  {\n    n: 'text',\n    l: true,\n    d: '',\n    syntax: PropertySyntax.TEXT,\n    p: 50,\n  },\n  {\n    n: 'textTransform',\n    l: true,\n    inh: true,\n    k: ['capitalize', 'uppercase', 'lowercase', 'none'],\n    d: 'none',\n    syntax: PropertySyntax.TEXT_TRANSFORM,\n    p: 51, // it must get parsed after text\n  },\n  {\n    n: 'font',\n    l: true,\n  },\n  {\n    n: 'fontSize',\n    int: true,\n    inh: true,\n    /**\n     * @see https://www.w3schools.com/css/css_font_size.asp\n     */\n    d: '16px',\n    l: true,\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'fontFamily',\n    l: true,\n    inh: true,\n    d: 'sans-serif',\n  },\n  {\n    n: 'fontStyle',\n    l: true,\n    inh: true,\n    k: ['normal', 'italic', 'oblique'],\n    d: 'normal',\n  },\n  {\n    n: 'fontWeight',\n    l: true,\n    inh: true,\n    k: ['normal', 'bold', 'bolder', 'lighter'],\n    d: 'normal',\n  },\n  {\n    n: 'fontVariant',\n    l: true,\n    inh: true,\n    k: ['normal', 'small-caps'],\n    d: 'normal',\n  },\n  {\n    n: 'lineHeight',\n    l: true,\n    syntax: PropertySyntax.LENGTH,\n    int: true,\n    d: '0',\n  },\n  {\n    n: 'letterSpacing',\n    l: true,\n    syntax: PropertySyntax.LENGTH,\n    int: true,\n    d: '0',\n  },\n  {\n    n: 'miterLimit',\n    l: true,\n    syntax: PropertySyntax.NUMBER,\n    d: (nodeName: string) => {\n      if (\n        nodeName === Shape.PATH ||\n        nodeName === Shape.POLYGON ||\n        nodeName === Shape.POLYLINE\n      ) {\n        return '4';\n      }\n      return '10';\n    },\n  },\n  {\n    n: 'wordWrap',\n    l: true,\n  },\n  {\n    n: 'wordWrapWidth',\n    l: true,\n  },\n  {\n    n: 'maxLines',\n    l: true,\n  },\n  {\n    n: 'textOverflow',\n    l: true,\n    d: 'clip',\n  },\n  {\n    n: 'leading',\n    l: true,\n  },\n  {\n    n: 'textBaseline',\n    l: true,\n    inh: true,\n    k: ['top', 'hanging', 'middle', 'alphabetic', 'ideographic', 'bottom'],\n    d: 'alphabetic',\n  },\n  {\n    n: 'textAlign',\n    l: true,\n    inh: true,\n    k: ['start', 'center', 'middle', 'end', 'left', 'right'],\n    d: 'start',\n  },\n  // {\n  //   n: 'whiteSpace',\n  //   l: true,\n  // },\n  {\n    n: 'markerStart',\n    syntax: PropertySyntax.MARKER,\n  },\n  {\n    n: 'markerEnd',\n    syntax: PropertySyntax.MARKER,\n  },\n  {\n    n: 'markerMid',\n    syntax: PropertySyntax.MARKER,\n  },\n  {\n    n: 'markerStartOffset',\n    syntax: PropertySyntax.LENGTH,\n    l: true,\n    int: true,\n    d: '0',\n  },\n  {\n    n: 'markerEndOffset',\n    syntax: PropertySyntax.LENGTH,\n    l: true,\n    int: true,\n    d: '0',\n  },\n];\n\nconst GEOMETRY_ATTRIBUTE_NAMES = new Set(\n  BUILT_IN_PROPERTIES.filter((n) => !!n.l).map((n) => n.n),\n);\n\nexport const propertyMetadataCache: Record<string, PropertyMetadata> = {};\n\nexport class DefaultStyleValueRegistry implements StyleValueRegistry {\n  constructor(private runtime: GlobalRuntime) {\n    BUILT_IN_PROPERTIES.forEach((property) => {\n      this.registerMetadata(property);\n    });\n  }\n\n  registerMetadata(metadata: PropertyMetadata) {\n    [metadata.n, ...(metadata.a || [])].forEach((name) => {\n      propertyMetadataCache[name] = metadata;\n    });\n  }\n\n  getPropertySyntax(syntax: string) {\n    return this.runtime.CSSPropertySyntaxFactory[syntax];\n  }\n\n  /**\n   * * parse value, eg.\n   * fill: 'red' => CSSRGB\n   * translateX: '10px' => CSSUnitValue { unit: 'px', value: 10 }\n   * fontSize: '2em' => { unit: 'px', value: 32 }\n   *\n   * * calculate used value\n   * * post process\n   */\n  processProperties(\n    object: DisplayObject,\n    attributes: BaseStyleProps,\n    options: Partial<PropertyParseOptions> = {\n      skipUpdateAttribute: false,\n      skipParse: false,\n      forceUpdateGeometry: false,\n      usedAttributes: [],\n      memoize: true,\n    },\n  ) {\n    Object.assign(object.attributes, attributes);\n\n    // clipPath\n    const oldClipPath = object.parsedStyle.clipPath;\n    const oldOffsetPath = object.parsedStyle.offsetPath;\n\n    assignParsedStyle(object, attributes);\n\n    let needUpdateGeometry = !!options.forceUpdateGeometry;\n    if (!needUpdateGeometry) {\n      for (const i in attributes) {\n        if (GEOMETRY_ATTRIBUTE_NAMES.has(i)) {\n          needUpdateGeometry = true;\n          break;\n        }\n      }\n    }\n\n    const list = getParsedStyleListOf(object);\n\n    if (list.has('fill') && attributes.fill) {\n      object.parsedStyle.fill = parseColor(attributes.fill);\n    }\n    if (list.has('stroke') && attributes.stroke) {\n      object.parsedStyle.stroke = parseColor(attributes.stroke);\n    }\n    if (list.has('shadowColor') && attributes.shadowColor) {\n      object.parsedStyle.shadowColor = parseColor(attributes.shadowColor);\n    }\n    if (list.has('filter') && attributes.filter) {\n      object.parsedStyle.filter = parseFilter(attributes.filter);\n    }\n    // Rect\n    // @ts-ignore\n    if (list.has('radius') && !isNil(attributes.radius)) {\n      // @ts-ignore\n      object.parsedStyle.radius = parseDimensionArrayFormat(\n        // @ts-ignore\n        attributes.radius,\n        4,\n      );\n    }\n    // Polyline\n    if (list.has('lineDash') && !isNil(attributes.lineDash)) {\n      // dom标准自动转化奇数长度数组,webgl需要手动处理\n      object.parsedStyle.lineDash = parseDimensionArrayFormat(\n        attributes.lineDash,\n        'even',\n      );\n    }\n    // @ts-ignore\n    if (list.has('points') && attributes.points) {\n      // @ts-ignore\n      object.parsedStyle.points = parsePoints(attributes.points, object);\n    }\n    // Path\n    // @ts-ignore\n    if (list.has('d') && attributes.d === '') {\n      object.parsedStyle.d = {\n        ...EMPTY_PARSED_PATH,\n      };\n    }\n    // @ts-ignore\n    if (list.has('d') && attributes.d) {\n      object.parsedStyle.d = parsePath(\n        // @ts-ignore\n        attributes.d,\n      );\n    }\n    // Text\n    if (list.has('textTransform') && attributes.textTransform) {\n      this.runtime.CSSPropertySyntaxFactory[\n        PropertySyntax.TEXT_TRANSFORM\n      ].calculator(\n        null,\n        null,\n        { value: attributes.textTransform },\n        object,\n        null,\n      );\n    }\n    if (list.has('clipPath') && !isUndefined(attributes.clipPath)) {\n      this.runtime.CSSPropertySyntaxFactory[\n        PropertySyntax.DEFINED_PATH\n      ].calculator(\n        'clipPath',\n        oldClipPath,\n        attributes.clipPath,\n        object,\n        this.runtime,\n      );\n    }\n    if (list.has('offsetPath') && attributes.offsetPath) {\n      this.runtime.CSSPropertySyntaxFactory[\n        PropertySyntax.DEFINED_PATH\n      ].calculator(\n        'offsetPath',\n        oldOffsetPath,\n        attributes.offsetPath,\n        object,\n        this.runtime,\n      );\n    }\n    if (list.has('transform') && attributes.transform) {\n      object.parsedStyle.transform = parseTransform(attributes.transform);\n    }\n    if (list.has('transformOrigin') && attributes.transformOrigin) {\n      object.parsedStyle.transformOrigin = parseTransformOrigin(\n        attributes.transformOrigin,\n      );\n    }\n    // Marker\n    // @ts-ignore\n    if (list.has('markerStart') && attributes.markerStart) {\n      object.parsedStyle.markerStart = this.runtime.CSSPropertySyntaxFactory[\n        PropertySyntax.MARKER\n      ].calculator(\n        null,\n        // @ts-ignore\n        attributes.markerStart,\n        // @ts-ignore\n        attributes.markerStart,\n        null,\n        null,\n      );\n    }\n    // @ts-ignore\n    if (list.has('markerEnd') && attributes.markerEnd) {\n      object.parsedStyle.markerEnd = this.runtime.CSSPropertySyntaxFactory[\n        PropertySyntax.MARKER\n      ].calculator(\n        null,\n        // @ts-ignore\n        attributes.markerEnd,\n        // @ts-ignore\n        attributes.markerEnd,\n        null,\n        null,\n      );\n    }\n    // @ts-ignore\n    if (list.has('markerMid') && attributes.markerMid) {\n      object.parsedStyle.markerMid = this.runtime.CSSPropertySyntaxFactory[\n        PropertySyntax.MARKER\n      ].calculator(\n        '',\n        // @ts-ignore\n        attributes.markerMid,\n        // @ts-ignore\n        attributes.markerMid,\n        null,\n        null,\n      );\n    }\n\n    if (list.has('zIndex') && !isNil(attributes.zIndex)) {\n      this.runtime.CSSPropertySyntaxFactory[\n        PropertySyntax.Z_INDEX\n      ].postProcessor(object);\n    }\n    if (list.has('offsetDistance') && !isNil(attributes.offsetDistance)) {\n      this.runtime.CSSPropertySyntaxFactory[\n        PropertySyntax.OFFSET_DISTANCE\n      ].postProcessor(object);\n    }\n    if (list.has('transform') && attributes.transform) {\n      this.runtime.CSSPropertySyntaxFactory[\n        PropertySyntax.TRANSFORM\n      ].postProcessor(object);\n    }\n    if (list.has('transformOrigin') && attributes.transformOrigin) {\n      this.runtime.CSSPropertySyntaxFactory[\n        PropertySyntax.TRANSFORM_ORIGIN\n      ].postProcessor(object);\n    }\n\n    if (needUpdateGeometry) {\n      object.geometry.dirty = true;\n      object.dirty(true, true);\n\n      if (!options.forceUpdateGeometry) {\n        this.runtime.sceneGraphService.dirtyToRoot(object);\n      }\n    }\n  }\n\n  /**\n   * update geometry when relative props changed,\n   * eg. r of Circle, width/height of Rect\n   */\n  updateGeometry(object: DisplayObject) {\n    const { nodeName } = object;\n    const geometryUpdater = this.runtime.geometryUpdaterFactory[\n      nodeName\n    ] as GeometryAABBUpdater;\n    if (geometryUpdater) {\n      const { geometry } = object;\n      if (!geometry.contentBounds) {\n        geometry.contentBounds = new AABB();\n      }\n      if (!geometry.renderBounds) {\n        geometry.renderBounds = new AABB();\n      }\n      const parsedStyle = object.parsedStyle;\n      const {\n        cx = 0,\n        cy = 0,\n        cz = 0,\n        hwidth = 0,\n        hheight = 0,\n        hdepth = 0,\n      } = geometryUpdater.update(parsedStyle, object);\n      // init with content box\n      const halfExtents: Tuple3Number = [\n        Math.abs(hwidth),\n        Math.abs(hheight),\n        hdepth,\n      ];\n      // anchor is center by default, don't account for lineWidth here\n      const {\n        stroke,\n        lineWidth = 1,\n        // lineCap,\n        // lineJoin,\n        // miterLimit,\n        increasedLineWidthForHitTesting = 0,\n        shadowType = 'outer',\n        shadowColor,\n        filter = [],\n        transformOrigin,\n      } = parsedStyle;\n      const center: Tuple3Number = [cx, cy, cz];\n      // update geometry's AABB\n      geometry.contentBounds.update(center, halfExtents);\n      // @see https://github.molgen.mpg.de/git-mirror/cairo/blob/master/src/cairo-stroke-style.c#L97..L128\n      const expansion =\n        nodeName === Shape.POLYLINE ||\n        nodeName === Shape.POLYGON ||\n        nodeName === Shape.PATH\n          ? Math.SQRT2\n          : 0.5;\n      // append border only if stroke existed\n      const hasStroke = stroke && !(stroke as CSSRGB).isNone;\n      if (hasStroke) {\n        const halfLineWidth =\n          ((lineWidth || 0) + (increasedLineWidthForHitTesting || 0)) *\n          expansion;\n        halfExtents[0] += halfLineWidth;\n        halfExtents[1] += halfLineWidth;\n      }\n      geometry.renderBounds.update(center, halfExtents);\n      // account for shadow, only support constant value now\n      if (shadowColor && shadowType && shadowType !== 'inner') {\n        const { min, max } = geometry.renderBounds;\n        const { shadowBlur, shadowOffsetX, shadowOffsetY } = parsedStyle;\n        const shadowBlurInPixels = shadowBlur || 0;\n        const shadowOffsetXInPixels = shadowOffsetX || 0;\n        const shadowOffsetYInPixels = shadowOffsetY || 0;\n        const shadowLeft = min[0] - shadowBlurInPixels + shadowOffsetXInPixels;\n        const shadowRight = max[0] + shadowBlurInPixels + shadowOffsetXInPixels;\n        const shadowTop = min[1] - shadowBlurInPixels + shadowOffsetYInPixels;\n        const shadowBottom =\n          max[1] + shadowBlurInPixels + shadowOffsetYInPixels;\n        min[0] = Math.min(min[0], shadowLeft);\n        max[0] = Math.max(max[0], shadowRight);\n        min[1] = Math.min(min[1], shadowTop);\n        max[1] = Math.max(max[1], shadowBottom);\n        geometry.renderBounds.setMinMax(min, max);\n      }\n      // account for filter, eg. blur(5px), drop-shadow()\n      filter.forEach(({ name, params }) => {\n        if (name === 'blur') {\n          const blurRadius = params[0].value;\n          geometry.renderBounds.update(\n            geometry.renderBounds.center,\n            vec3.add(\n              geometry.renderBounds.halfExtents,\n              geometry.renderBounds.halfExtents,\n              [blurRadius, blurRadius, 0],\n            ) as Tuple3Number,\n          );\n        } else if (name === 'drop-shadow') {\n          const shadowOffsetX = params[0].value;\n          const shadowOffsetY = params[1].value;\n          const shadowBlur = params[2].value;\n          const { min, max } = geometry.renderBounds;\n          const shadowLeft = min[0] - shadowBlur + shadowOffsetX;\n          const shadowRight = max[0] + shadowBlur + shadowOffsetX;\n          const shadowTop = min[1] - shadowBlur + shadowOffsetY;\n          const shadowBottom = max[1] + shadowBlur + shadowOffsetY;\n          min[0] = Math.min(min[0], shadowLeft);\n          max[0] = Math.max(max[0], shadowRight);\n          min[1] = Math.min(min[1], shadowTop);\n          max[1] = Math.max(max[1], shadowBottom);\n          geometry.renderBounds.setMinMax(min, max);\n        }\n      });\n\n      object.geometry.dirty = false;\n\n      // @see https://github.com/antvis/g/issues/957\n      const flipY = hwidth < 0;\n      const flipX = hheight < 0;\n      // set transform origin\n      const usedOriginXValue =\n        (flipY ? -1 : 1) *\n        (transformOrigin\n          ? convertPercentUnit(transformOrigin[0], 0, object, true)\n          : 0);\n      const usedOriginYValue =\n        (flipX ? -1 : 1) *\n        (transformOrigin\n          ? convertPercentUnit(transformOrigin[1], 1, object, true)\n          : 0);\n\n      if (usedOriginXValue || usedOriginYValue) {\n        object.setOrigin(usedOriginXValue, usedOriginYValue);\n      }\n    }\n  }\n\n  updateSizeAttenuation(node: DisplayObject, zoom: number) {\n    if (node.style.isSizeAttenuation) {\n      if (!node.style.rawLineWidth) {\n        node.style.rawLineWidth = node.style.lineWidth;\n      }\n      node.style.lineWidth = (node.style.rawLineWidth || 1) / zoom;\n\n      if (node.nodeName === Shape.CIRCLE) {\n        if (!node.style.rawR) {\n          node.style.rawR = node.style.r;\n        }\n        node.style.r = (node.style.rawR || 1) / zoom;\n      }\n    } else {\n      if (node.style.rawLineWidth) {\n        node.style.lineWidth = node.style.rawLineWidth;\n        delete node.style.rawLineWidth;\n      }\n      if (node.nodeName === Shape.CIRCLE) {\n        if (node.style.rawR) {\n          node.style.r = node.style.rawR;\n          delete node.style.rawR;\n        }\n      }\n    }\n  }\n}\n\nfunction assignParsedStyle(\n  object: DisplayObject,\n  attributes: Record<string, any>,\n) {\n  const list = getParsedStyleListOf(object);\n  for (const key in attributes) {\n    if (list.has(key)) {\n      object.parsedStyle[key] = attributes[key];\n    }\n  }\n}\n\nfunction getParsedStyleListOf(object: DisplayObject) {\n  return (object.constructor as typeof DisplayObject).PARSED_STYLE_LIST;\n}\n","import type { DisplayObject } from '../../display-objects';\nimport type { CSSUnitValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\nimport { mergeNumbers } from '../parser';\nimport { convertAngleUnit } from '../parser/dimension';\n\nexport class CSSPropertyAngle\n  implements Partial<CSSProperty<CSSUnitValue, number>>\n{\n  mixer = mergeNumbers;\n\n  calculator(\n    name: string,\n    oldParsed: CSSUnitValue,\n    parsed: CSSUnitValue,\n    object: DisplayObject,\n  ) {\n    return convertAngleUnit(parsed);\n  }\n}\n","import type { DisplayObject } from '../../display-objects';\nimport type { GlobalRuntime } from '../../global-runtime';\nimport type { CSSProperty } from '../CSSProperty';\nimport { CSSKeywordValue } from '../cssom';\n\n/**\n * clipPath / textPath / offsetPath\n */\nexport class CSSPropertyClipPath\n  implements Partial<CSSProperty<DisplayObject, DisplayObject>>\n{\n  calculator(\n    name: string,\n    oldPath: DisplayObject,\n    newPath: DisplayObject,\n    object: DisplayObject,\n    runtime: GlobalRuntime,\n  ) {\n    // unset\n    if (newPath instanceof CSSKeywordValue) {\n      newPath = null;\n    }\n\n    runtime.sceneGraphService.updateDisplayObjectDependency(\n      name,\n      oldPath,\n      newPath,\n      object,\n    );\n\n    if (name === 'clipPath') {\n      // should affect children\n      object.forEach((leaf) => {\n        if (leaf.childNodes.length === 0) {\n          runtime.sceneGraphService.dirtyToRoot(leaf);\n        }\n      });\n    }\n\n    return newPath;\n  }\n}\n","import type { DisplayObject } from '../../display-objects';\nimport type { CSSGradientValue, CSSRGB } from '../cssom';\nimport { CSSKeywordValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\nimport { noneColor, transparentColor } from '../CSSStyleValuePool';\nimport type { Pattern } from '../parser/color';\nimport { mergeColors, parseColor } from '../parser/color';\n\nexport class CSSPropertyColor\n  implements\n    Partial<\n      CSSProperty<\n        CSSRGB | CSSGradientValue[] | Pattern | CSSKeywordValue,\n        CSSRGB | CSSGradientValue[] | Pattern\n      >\n    >\n{\n  parser = parseColor;\n  calculator(\n    name: string,\n    oldParsed: CSSRGB | CSSGradientValue[] | CSSKeywordValue | Pattern,\n    parsed: CSSRGB | CSSGradientValue[] | CSSKeywordValue | Pattern,\n    object: DisplayObject,\n  ) {\n    if (parsed instanceof CSSKeywordValue) {\n      // 'unset' 'none'\n      return parsed.value === 'none' ? noneColor : transparentColor;\n    }\n    return parsed;\n  }\n\n  mixer = mergeColors;\n}\n","import { CSSKeywordValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\nimport type { ParsedFilterStyleProperty } from '../parser';\n\nexport class CSSPropertyFilter\n  implements\n    Partial<\n      CSSProperty<ParsedFilterStyleProperty[], ParsedFilterStyleProperty[]>\n    >\n{\n  calculator(\n    name: string,\n    oldParsed: ParsedFilterStyleProperty[],\n    parsed: ParsedFilterStyleProperty[],\n  ) {\n    // unset or none\n    if (parsed instanceof CSSKeywordValue) {\n      return [];\n    }\n    return parsed;\n  }\n}\n","import { isNil, isNumber } from '@antv/util';\nimport type {\n  DisplayObject,\n  ParsedTextStyleProps,\n} from '../../display-objects';\nimport type { GlobalRuntime } from '../../global-runtime';\nimport type { CSSProperty } from '../CSSProperty';\nimport { CSSUnitValue, UnitType } from '../cssom';\nimport { mergeNumbers } from '../parser';\n\nfunction getFontSize(object: DisplayObject): number {\n  const { fontSize } = object.parsedStyle as ParsedTextStyleProps;\n  return isNil(fontSize) ? null : fontSize;\n}\n\n/**\n * <length> & <percentage>\n */\nexport class CSSPropertyLengthOrPercentage\n  implements Partial<CSSProperty<CSSUnitValue, number>>\n{\n  mixer = mergeNumbers;\n\n  /**\n   * according to parent's bounds\n   *\n   * @example\n   * CSS.percent(50) -> CSS.px(0.5 * parent.width)\n   */\n  calculator(\n    name: string,\n    oldParsed: CSSUnitValue,\n    computed: CSSUnitValue,\n    object: DisplayObject,\n    runtime: GlobalRuntime,\n  ): number {\n    if (isNumber(computed)) {\n      return computed;\n    }\n\n    if (CSSUnitValue.isRelativeUnit(computed.unit)) {\n      if (computed.unit === UnitType.kPercentage) {\n        // TODO: merge dimensions\n        return 0;\n      }\n      if (computed.unit === UnitType.kEms) {\n        if (object.parentNode) {\n          let fontSize = getFontSize(object.parentNode as DisplayObject);\n          if (fontSize) {\n            fontSize *= computed.value;\n            return fontSize;\n          }\n        }\n        return 0;\n      }\n      if (computed.unit === UnitType.kRems) {\n        if (object?.ownerDocument?.documentElement) {\n          let fontSize = getFontSize(\n            object.ownerDocument.documentElement as DisplayObject,\n          );\n\n          if (fontSize) {\n            fontSize *= computed.value;\n            return fontSize;\n          }\n        }\n        return 0;\n      }\n    } else {\n      // remove listener if exists\n      // registry.unregisterParentGeometryBoundsChangedHandler(object, name);\n\n      // return absolute value\n      return computed.value;\n    }\n  }\n}\n","import type { CSSUnitValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\nimport { mergeNumberLists } from '../parser';\n\n/**\n * format to Tuple2<CSSUnitValue>\n *\n * @example\n * rect.style.lineDash = 10;\n * rect.style.lineDash = [10, 10];\n * rect.style.lineDash = '10 10';\n */\nexport class CSSPropertyLengthOrPercentage12\n  implements\n    Partial<CSSProperty<[CSSUnitValue, CSSUnitValue], [number, number]>>\n{\n  calculator(\n    name: string,\n    oldParsed: [CSSUnitValue, CSSUnitValue],\n    computed: [CSSUnitValue, CSSUnitValue],\n  ): [number, number] {\n    return computed.map((c) => c.value) as [number, number];\n  }\n\n  mixer = mergeNumberLists;\n}\n","import type { CSSUnitValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\nimport { mergeNumberLists } from '../parser';\n\n/**\n * used in rounded rect\n *\n * @example\n * rect.style.radius = 10;\n * rect.style.radius = '10 10';\n * rect.style.radius = '10 10 10 10';\n */\nexport class CSSPropertyLengthOrPercentage14\n  implements\n    Partial<\n      CSSProperty<\n        [CSSUnitValue, CSSUnitValue, CSSUnitValue, CSSUnitValue],\n        [number, number, number, number]\n      >\n    >\n{\n  calculator(\n    name: string,\n    oldParsed: [CSSUnitValue, CSSUnitValue, CSSUnitValue, CSSUnitValue],\n    computed: [CSSUnitValue, CSSUnitValue, CSSUnitValue, CSSUnitValue],\n  ): [number, number, number, number] {\n    return computed.map((c) => c.value) as [number, number, number, number];\n  }\n\n  mixer = mergeNumberLists;\n}\n","import type { DisplayObject } from '../../display-objects';\nimport { CSSKeywordValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\n\nexport class CSSPropertyMarker\n  implements Partial<CSSProperty<DisplayObject, DisplayObject>>\n{\n  calculator(\n    name: string,\n    oldMarker: DisplayObject,\n    newMarker: DisplayObject,\n    object: DisplayObject,\n  ) {\n    // unset\n    if (newMarker instanceof CSSKeywordValue) {\n      newMarker = null;\n    }\n\n    const cloned = newMarker?.cloneNode(true);\n    if (cloned) {\n      // FIXME: SVG should not inherit parent's style, add a flag here\n      cloned.style.isMarker = true;\n    }\n\n    return cloned;\n  }\n}\n","import type { CSSUnitValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\nimport { mergeNumbers } from '../parser/numeric';\n\nexport class CSSPropertyNumber\n  implements Partial<CSSProperty<CSSUnitValue, number>>\n{\n  mixer = mergeNumbers;\n  calculator(\n    name: string,\n    oldParsed: CSSUnitValue,\n    computed: CSSUnitValue,\n  ): number {\n    return computed.value;\n  }\n}\n","import { Shape } from '../../types';\nimport type { DisplayObject } from '../../display-objects';\nimport type { CSSUnitValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\nimport { clampedMergeNumbers } from '../parser/numeric';\n\nexport class CSSPropertyOffsetDistance\n  implements Partial<CSSProperty<CSSUnitValue, number>>\n{\n  calculator(\n    name: string,\n    oldParsed: CSSUnitValue,\n    computed: CSSUnitValue,\n  ): number {\n    return computed.value;\n  }\n\n  mixer = clampedMergeNumbers(0, 1);\n\n  postProcessor(object: DisplayObject) {\n    const { offsetPath, offsetDistance } = object.parsedStyle;\n    if (!offsetPath) {\n      return;\n    }\n\n    const { nodeName } = offsetPath;\n    if (\n      nodeName === Shape.LINE ||\n      nodeName === Shape.PATH ||\n      nodeName === Shape.POLYLINE\n    ) {\n      // set position in world space\n      const point = offsetPath.getPoint(offsetDistance);\n      if (point) {\n        object.setLocalPosition(point.x, point.y);\n      }\n    }\n  }\n}\n","import type { CSSUnitValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\nimport { clampedMergeNumbers } from '../parser/numeric';\n\n/**\n * opacity\n */\nexport class CSSPropertyOpacity\n  implements Partial<CSSProperty<CSSUnitValue, number>>\n{\n  calculator(\n    name: string,\n    oldParsed: CSSUnitValue,\n    computed: CSSUnitValue,\n  ): number {\n    return computed.value;\n  }\n\n  mixer = clampedMergeNumbers(0, 1);\n}\n","import type { AbsoluteArray } from '@antv/util';\nimport type { ParsedPathStyleProps } from '../../display-objects';\nimport { Rectangle } from '../../shapes';\nimport { CSSKeywordValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\nimport { mergePaths, parsePath } from '../parser/path';\n\nexport class CSSPropertyPath\n  implements\n    Partial<CSSProperty<ParsedPathStyleProps['d'], ParsedPathStyleProps['d']>>\n{\n  /**\n   * path2Curve\n   */\n  parser = parsePath;\n\n  calculator(\n    name: string,\n    oldParsed: ParsedPathStyleProps['d'],\n    parsed: ParsedPathStyleProps['d'],\n  ) {\n    // unset\n    if (parsed instanceof CSSKeywordValue && parsed.value === 'unset') {\n      return {\n        absolutePath: [] as unknown as AbsoluteArray,\n        hasArc: false,\n        segments: [],\n        polygons: [],\n        polylines: [],\n        curve: null,\n        totalLength: 0,\n        rect: new Rectangle(0, 0, 0, 0),\n      };\n    }\n\n    return parsed;\n  }\n\n  mixer = mergePaths;\n}\n","import type { CSSProperty } from '../CSSProperty';\nimport { mergePoints } from '../parser/points';\n\nexport class CSSPropertyPoints\n  implements\n    Partial<\n      CSSProperty<\n        {\n          points: [number, number][];\n          totalLength: number;\n          segments: [number, number][];\n        },\n        {\n          points: [number, number][];\n          totalLength: number;\n          segments: [number, number][];\n        }\n      >\n    >\n{\n  mixer = mergePoints;\n}\n","import { clampedMergeNumbers } from '../parser/numeric';\nimport { CSSPropertyLengthOrPercentage } from './CSSPropertyLengthOrPercentage';\n\nexport class CSSPropertyShadowBlur extends CSSPropertyLengthOrPercentage {\n  mixer = clampedMergeNumbers(0, Infinity);\n}\n","import type { DisplayObject } from '../../display-objects';\nimport { CSSKeywordValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\n\nexport class CSSPropertyText\n  implements Partial<CSSProperty<CSSKeywordValue | string, string>>\n{\n  calculator(\n    name: string,\n    oldParsed: CSSKeywordValue | string,\n    parsed: CSSKeywordValue | string,\n    object: DisplayObject,\n  ) {\n    if (parsed instanceof CSSKeywordValue) {\n      if (parsed.value === 'unset') {\n        return '';\n      }\n      return parsed.value;\n    }\n\n    // allow number as valid text content\n    return `${parsed}`;\n  }\n\n  postProcessor(object: DisplayObject) {\n    object.nodeValue = `${object.parsedStyle.text}` || '';\n  }\n}\n","import type { TextTransform } from '../..';\nimport type { DisplayObject } from '../../display-objects';\nimport type { CSSKeywordValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\n\n/**\n * it must transform after text get parsed\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/text-transform\n */\nexport class CSSPropertyTextTransform\n  implements Partial<CSSProperty<CSSKeywordValue, TextTransform>>\n{\n  calculator(\n    name: string,\n    oldParsed: CSSKeywordValue,\n    parsed: CSSKeywordValue,\n    object: DisplayObject,\n  ) {\n    const rawText = object.getAttribute('text');\n    if (rawText) {\n      let transformedText = rawText;\n      if (parsed.value === 'capitalize') {\n        transformedText = rawText.charAt(0).toUpperCase() + rawText.slice(1);\n      } else if (parsed.value === 'lowercase') {\n        transformedText = rawText.toLowerCase();\n      } else if (parsed.value === 'uppercase') {\n        transformedText = rawText.toUpperCase();\n      }\n\n      object.parsedStyle.text = transformedText;\n    }\n\n    return parsed.value as TextTransform;\n  }\n}\n","export const definedProps = (obj: Record<string, unknown>) =>\n  Object.fromEntries(Object.entries(obj).filter(([, v]) => v !== undefined));\n","import type { Canvas } from '../Canvas';\n\nconst CANVAS_Map = new WeakMap<Element, Canvas>();\n\n/**\n * destroy existed canvas with the same id\n */\nexport function cleanExistedCanvas(\n  container: string | HTMLElement,\n  canvas: Canvas,\n  cleanUp?: boolean,\n) {\n  if (container) {\n    const $dom =\n      typeof container === 'string'\n        ? document.getElementById(container)\n        : container;\n    if (CANVAS_Map.has($dom)) CANVAS_Map.get($dom).destroy(cleanUp);\n    CANVAS_Map.set($dom, canvas);\n  }\n}\n\nexport const isBrowser =\n  typeof window !== 'undefined' && typeof window.document !== 'undefined';\n","import type { DisplayObject } from '../display-objects';\nimport type { IElement, IEventTarget, INode } from '../dom';\nimport type { CanvasLike } from '../types';\nimport { isBrowser } from './canvas';\n\nexport function isElement(\n  target: IEventTarget | INode | IElement,\n): target is IElement {\n  return !!(target as IElement).getAttribute;\n}\n\nexport function sortedIndex(array: IElement[], value: IElement) {\n  let low = 0;\n  let high = array.length;\n\n  while (low < high) {\n    const mid = (low + high) >>> 1;\n    if (sortByZIndex(array[mid], value) < 0) {\n      low = mid + 1;\n    } else {\n      high = mid;\n    }\n  }\n  return low;\n}\n\nexport function sortByZIndex(o1: IElement, o2: IElement) {\n  const zIndex1 = Number(o1.parsedStyle.zIndex || 0);\n  const zIndex2 = Number(o2.parsedStyle.zIndex || 0);\n  if (zIndex1 === zIndex2) {\n    const parent = o1.parentNode;\n    if (parent) {\n      const children = parent.childNodes || [];\n      return children.indexOf(o1) - children.indexOf(o2);\n    }\n  }\n  return zIndex1 - zIndex2;\n}\n\nexport function findClosestClipPathTarget(\n  object: DisplayObject,\n): DisplayObject {\n  let el = object;\n  do {\n    const clipPath = el.parsedStyle?.clipPath;\n    if (clipPath) return el;\n    el = el.parentElement as DisplayObject;\n  } while (el !== null);\n  return null;\n}\n\nconst PX_SUFFIX = 'px';\nexport function setDOMSize($el: CanvasLike, width: number, height: number) {\n  if (isBrowser && ($el as unknown as HTMLElement).style) {\n    ($el as unknown as HTMLElement).style.width = width + PX_SUFFIX;\n    ($el as unknown as HTMLElement).style.height = height + PX_SUFFIX;\n  }\n}\n\nexport function getStyle($el: HTMLElement | CanvasLike, property: string) {\n  if (isBrowser) {\n    return document.defaultView\n      .getComputedStyle($el as Element, null)\n      .getPropertyValue(property);\n  }\n}\n\nexport function getWidth($el: HTMLElement | CanvasLike) {\n  const width = getStyle($el, 'width');\n  if (width === 'auto') {\n    return ($el as HTMLElement).offsetWidth;\n  }\n  return parseFloat(width);\n}\n\nexport function getHeight($el: HTMLElement | CanvasLike) {\n  const height = getStyle($el, 'height');\n  if (height === 'auto') {\n    return ($el as HTMLElement).offsetHeight;\n  }\n  return parseFloat(height);\n}\n","// borrow from hammer.js\nexport const MOUSE_POINTER_ID = 1;\nexport const TOUCH_TO_POINTER: Record<string, string> = {\n  touchstart: 'pointerdown',\n  touchend: 'pointerup',\n  touchendoutside: 'pointerupoutside',\n  touchmove: 'pointermove',\n  touchcancel: 'pointercancel',\n};\n\nexport interface FormattedPointerEvent extends PointerEvent {\n  isPrimary: boolean;\n  width: number;\n  height: number;\n  tiltX: number;\n  tiltY: number;\n  pointerType: string;\n  pointerId: number;\n  pressure: number;\n  twist: number;\n  tangentialPressure: number;\n  isNormalized: boolean;\n  type: string;\n}\n\nexport interface FormattedTouch extends Touch {\n  button: number;\n  buttons: number;\n  isPrimary: boolean;\n  width: number;\n  height: number;\n  tiltX: number;\n  tiltY: number;\n  pointerType: string;\n  pointerId: number;\n  pressure: number;\n  twist: number;\n  tangentialPressure: number;\n  layerY: number;\n  offsetX: number;\n  offsetY: number;\n  isNormalized: boolean;\n  type: string;\n}\n\nexport const clock =\n  typeof performance === 'object' && performance.now ? performance : Date;\n","import { INode } from '../dom';\nimport { Shape } from '../types';\n\nexport function isInFragment(node: INode) {\n  if (node.nodeName === Shape.FRAGMENT) return true;\n  return node.getRootNode().nodeName === Shape.FRAGMENT;\n}\n","import type { CSSRGB } from '../css';\nimport type { ParsedBaseStyleProps } from '../types';\n\nexport function isFillOrStrokeAffected(\n  pointerEvents: ParsedBaseStyleProps['pointerEvents'] = 'auto',\n  fill: ParsedBaseStyleProps['fill'],\n  stroke: ParsedBaseStyleProps['stroke'],\n): [boolean, boolean] {\n  // account for pointerEvents\n  // @see https://developer.mozilla.org/en-US/docs/Web/CSS/pointer-events\n\n  let hasFill = false;\n  let hasStroke = false;\n  const isFillOtherThanNone = !!fill && !(fill as CSSRGB).isNone;\n  const isStrokeOtherThanNone = !!stroke && !(stroke as CSSRGB).isNone;\n  if (\n    pointerEvents === 'visiblepainted' ||\n    pointerEvents === 'painted' ||\n    pointerEvents === 'auto'\n  ) {\n    hasFill = isFillOtherThanNone;\n    hasStroke = isStrokeOtherThanNone;\n  } else if (pointerEvents === 'visiblefill' || pointerEvents === 'fill') {\n    hasFill = true;\n  } else if (pointerEvents === 'visiblestroke' || pointerEvents === 'stroke') {\n    hasStroke = true;\n  } else if (pointerEvents === 'visible' || pointerEvents === 'all') {\n    // The values of the fill and stroke do not affect event processing.\n    hasFill = true;\n    hasStroke = true;\n  }\n\n  return [hasFill, hasStroke];\n}\n","/**\n * Thanks for following contributor of codes\n * https://gist.github.com/1866474\n * http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n * http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n * https://github.com/Financial-Times/polyfill-library/blob/master/polyfills/requestAnimationFrame/polyfill.js\n * */\n\nlet uId = 1;\nconst uniqueId = () => uId++;\n\n// We use `self` instead of `window` for `WebWorker` support.\nexport const root: any =\n  // eslint-disable-next-line no-nested-ternary\n  typeof self === 'object' && self.self === self\n    ? self\n    : // @ts-ignore\n      typeof global === 'object' && global.global === global\n      ? // @ts-ignore\n        global\n      : {};\n\nconst nowOffset = Date.now();\n\n// use performance api if exist, otherwise use Date.now.\n// Date.now polyfill required.\nexport const pnow = (): number => {\n  if (root.performance && typeof root.performance.now === 'function') {\n    return root.performance.now();\n  }\n\n  // fallback\n  return Date.now() - nowOffset;\n};\n\ninterface IReservedCBs {\n  [key: string]: (...args: any[]) => any;\n}\nlet reservedCBs: IReservedCBs = {};\n\nlet lastTime = Date.now();\n\nconst polyfillRaf = (callback: (...args: any[]) => any) => {\n  if (typeof callback !== 'function') {\n    throw new TypeError(`${callback} is not a function`);\n  }\n\n  const currentTime = Date.now();\n  const gap = currentTime - lastTime;\n  const delay = gap > 16 ? 0 : 16 - gap;\n\n  const id = uniqueId();\n  reservedCBs[id] = callback;\n\n  // keys(reservedCBs).length > 1 의미는 이미 setTimeout 이 걸려있는 경우.\n  // 함께 callback 이 실행될 수 있게 reservedCBs 에만 추가해주고 return\n  if (Object.keys(reservedCBs).length > 1) return id;\n\n  setTimeout(() => {\n    lastTime = currentTime;\n    const copied = reservedCBs;\n    reservedCBs = {};\n\n    Object.keys(copied).forEach((key: string) => copied[key](pnow()));\n  }, delay);\n\n  return id;\n};\n\nconst polyfillCaf = (id: number) => {\n  delete reservedCBs[id];\n};\n\nconst vendorPrefixes = ['', 'webkit', 'moz', 'ms', 'o'];\n\nconst getRequestAnimationFrame = (\n  vp: string | void,\n): typeof requestAnimationFrame => {\n  if (typeof vp !== 'string') return polyfillRaf;\n  if (vp === '') return root.requestAnimationFrame;\n  return root[`${vp}RequestAnimationFrame`];\n};\n\nconst getCancelAnimationFrame = (\n  vp: string | void,\n): typeof cancelAnimationFrame => {\n  if (typeof vp !== 'string') return polyfillCaf;\n  if (vp === '') return root.cancelAnimationFrame;\n  return (\n    root[`${vp}CancelAnimationFrame`] ||\n    root[`${vp}CancelRequestAnimationFrame`]\n  );\n};\n\nconst find = (arr: any[], predicate: (...args: any[]) => any) => {\n  let i = 0;\n  while (arr[i] !== undefined) {\n    if (predicate(arr[i])) return arr[i];\n\n    i += 1;\n  }\n};\n\nconst vp = find(vendorPrefixes, (vp: string) => !!getRequestAnimationFrame(vp));\n\nexport const raf = getRequestAnimationFrame(vp);\nexport const caf = getCancelAnimationFrame(vp);\n\nroot.requestAnimationFrame = raf;\nroot.cancelAnimationFrame = caf;\n","export class AsyncParallelHook<T> {\n  private callbacks: ((...args: T[]) => Promise<void>)[] = [];\n\n  getCallbacksNum() {\n    return this.callbacks.length;\n  }\n\n  tapPromise(options: string, fn: (...args: T[]) => Promise<void>) {\n    this.callbacks.push(fn);\n  }\n\n  promise(...args: T[]): Promise<void[]> {\n    return Promise.all(\n      this.callbacks.map((callback) => {\n        return callback(...args);\n      }),\n    );\n  }\n}\n","import type { AsArray } from './Hook';\n\nexport class AsyncSeriesWaterfallHook<T, R> {\n  private callbacks: ((...args: AsArray<T>) => Promise<R>)[] = [];\n\n  tapPromise(options: string, fn: (...args: AsArray<T>) => Promise<R>) {\n    this.callbacks.push(fn);\n  }\n\n  async promise(...args: AsArray<T>): Promise<R> {\n    if (this.callbacks.length) {\n      let result: R = await this.callbacks[0](...args);\n      for (let i = 0; i < this.callbacks.length - 1; i++) {\n        const callback = this.callbacks[i];\n        // @ts-ignore\n        // eslint-disable-next-line no-await-in-loop\n        result = await callback(result);\n      }\n\n      return result;\n    }\n\n    return null;\n  }\n}\n","import type { AsArray } from './Hook';\n\nexport class SyncHook<T, R = void> {\n  private callbacks: ((...args: AsArray<T>) => R)[] = [];\n\n  tap(options: string, fn: (...args: AsArray<T>) => R) {\n    this.callbacks.push(fn);\n  }\n\n  call(...args: AsArray<T>): void {\n    /* eslint-disable-next-line prefer-rest-params */\n    const argsArr = arguments;\n    this.callbacks.forEach(function (callback) {\n      /* eslint-disable-next-line prefer-spread */\n      callback.apply(undefined, argsArr);\n    });\n  }\n}\n","import type { AsArray } from './Hook';\n\nexport class SyncWaterfallHook<T, R> {\n  private callbacks: ((...args: AsArray<T>) => R)[] = [];\n\n  tap(options: string, fn: (...args: AsArray<T>) => R) {\n    this.callbacks.push(fn);\n  }\n\n  call(...args: AsArray<T>): R {\n    if (this.callbacks.length) {\n      /* eslint-disable-next-line prefer-rest-params */\n      const argsArr = arguments;\n      /* eslint-disable-next-line prefer-spread */\n      let result: R = this.callbacks[0].apply(undefined, argsArr);\n      for (let i = 0; i < this.callbacks.length - 1; i++) {\n        const callback = this.callbacks[i];\n        // @ts-ignore\n        result = callback(result);\n      }\n\n      return result;\n    }\n\n    return null;\n  }\n}\n","import { isNumber } from '@antv/util';\nimport type { ParsedTextStyleProps } from '../display-objects/Text';\nimport { memoize } from './memoize';\n\nconst genericFontFamilies = [\n  'serif',\n  'sans-serif',\n  'monospace',\n  'cursive',\n  'fantasy',\n  'system-ui',\n];\nconst stringRegExp = /([\\\"\\'])[^\\'\\\"]+\\1/;\n\nfunction getFontAttr(attributes: Partial<ParsedTextStyleProps>) {\n  const {\n    fontSize = 16,\n    fontFamily = 'sans-serif',\n    fontStyle = 'normal',\n    fontVariant = 'normal',\n    fontWeight = 'normal',\n  } = attributes;\n  return { fontSize, fontFamily, fontStyle, fontVariant, fontWeight };\n}\n\nexport const toFontString = memoize(\n  function toFontStringRaw(attributes: Partial<ParsedTextStyleProps>) {\n    const { fontSize, fontFamily, fontStyle, fontVariant, fontWeight } =\n      getFontAttr(attributes);\n\n    // build canvas api font setting from individual components. Convert a numeric this.fontSize to px\n    // const fontSizeString: string = isNumber(fontSize) ? `${fontSize}px` : fontSize.toString();\n    const fontSizeString: string =\n      (isNumber(fontSize) && `${fontSize}px`) || '16px';\n    // Clean-up fontFamily property by quoting each font name\n    // this will support font names with spaces\n\n    const fontFamilies: string[] = fontFamily.split(',');\n\n    for (let i = fontFamilies.length - 1; i >= 0; i--) {\n      // Trim any extra white-space\n      let fontFamily = fontFamilies[i].trim();\n      // Check if font already contains strings\n      if (\n        !stringRegExp.test(fontFamily) &&\n        genericFontFamilies.indexOf(fontFamily) < 0\n      ) {\n        fontFamily = `\"${fontFamily}\"`;\n      }\n      fontFamilies[i] = fontFamily;\n    }\n    return `${fontStyle} ${fontVariant} ${fontWeight} ${fontSizeString} ${fontFamilies.join(\n      ',',\n    )}`;\n  },\n  (attributes: Partial<ParsedTextStyleProps>) => {\n    const { fontSize, fontFamily, fontStyle, fontVariant, fontWeight } =\n      getFontAttr(attributes);\n    return `${fontStyle}_${fontVariant}_${fontWeight}_${fontSize}_${fontFamily}`;\n  },\n);\n","import { mat4, vec3 } from 'gl-matrix';\nimport type { CSSUnitValue } from '../css/cssom';\nimport { ParsedTransform, convertAngleUnit } from '../css/parser';\nimport type { DisplayObject } from '../display-objects/DisplayObject';\nimport { runtime } from '../global-runtime';\nimport type { TransformType } from '../types';\nimport { deg2rad } from './math';\n\n/**\n * Minimum scaling limit\n *\n * When `scale` is 0, the matrix will become an irreversible matrix,\n * and `NaN` will appear during matrix calculation and decomposition,\n * causing exceptions\n */\nconst MIN_SCALE = 0.000001;\nconst clampScale = (item: number) => Math.max(item, MIN_SCALE);\n\nfunction createSkewMatrix(skewMatrix: mat4, skewX: number, skewY: number) {\n  // Create an identity matrix\n  mat4.identity(skewMatrix);\n  // Apply skew to the matrix\n  skewMatrix[4] = Math.tan(skewX); // Skew Y axis in X direction\n  skewMatrix[1] = Math.tan(skewY); // Skew X axis in Y direction\n\n  return skewMatrix;\n}\n\nconst $mat4_1 = mat4.create();\nconst $mat4_2 = mat4.create();\n\nconst parser: Record<TransformType, (d: CSSUnitValue[]) => void> = {\n  scale: (d: CSSUnitValue[]) => {\n    mat4.fromScaling(\n      $mat4_1,\n      [d[0].value, d[1].value, 1].map((item) => clampScale(item)) as vec3,\n    );\n  },\n  scaleX: (d: CSSUnitValue[]) => {\n    mat4.fromScaling(\n      $mat4_1,\n      [d[0].value, 1, 1].map((item) => clampScale(item)) as vec3,\n    );\n  },\n  scaleY: (d: CSSUnitValue[]) => {\n    mat4.fromScaling(\n      $mat4_1,\n      [1, d[0].value, 1].map((item) => clampScale(item)) as vec3,\n    );\n  },\n  scaleZ: (d: CSSUnitValue[]) => {\n    mat4.fromScaling(\n      $mat4_1,\n      [1, 1, d[0].value].map((item) => clampScale(item)) as vec3,\n    );\n  },\n  scale3d: (d: CSSUnitValue[]) => {\n    mat4.fromScaling(\n      $mat4_1,\n      [d[0].value, d[1].value, d[2].value].map((item) =>\n        clampScale(item),\n      ) as vec3,\n    );\n  },\n  translate: (d: CSSUnitValue[]) => {\n    mat4.fromTranslation($mat4_1, [d[0].value, d[1].value, 0]);\n  },\n  translateX: (d: CSSUnitValue[]) => {\n    mat4.fromTranslation($mat4_1, [d[0].value, 0, 0]);\n  },\n  translateY: (d: CSSUnitValue[]) => {\n    mat4.fromTranslation($mat4_1, [0, d[0].value, 0]);\n  },\n  translateZ: (d: CSSUnitValue[]) => {\n    mat4.fromTranslation($mat4_1, [0, 0, d[0].value]);\n  },\n  translate3d: (d: CSSUnitValue[]) => {\n    mat4.fromTranslation($mat4_1, [d[0].value, d[1].value, d[2].value]);\n  },\n  rotate: (d: CSSUnitValue[]) => {\n    mat4.fromZRotation($mat4_1, deg2rad(convertAngleUnit(d[0])));\n  },\n  rotateX: (d: CSSUnitValue[]) => {\n    mat4.fromXRotation($mat4_1, deg2rad(convertAngleUnit(d[0])));\n  },\n  rotateY: (d: CSSUnitValue[]) => {\n    mat4.fromYRotation($mat4_1, deg2rad(convertAngleUnit(d[0])));\n  },\n  rotateZ: (d: CSSUnitValue[]) => {\n    mat4.fromZRotation($mat4_1, deg2rad(convertAngleUnit(d[0])));\n  },\n  rotate3d: (d: CSSUnitValue[]) => {\n    mat4.fromRotation($mat4_1, deg2rad(convertAngleUnit(d[3])), [\n      d[0].value,\n      d[1].value,\n      d[2].value,\n    ]);\n  },\n  skew: (d: CSSUnitValue[]) => {\n    createSkewMatrix($mat4_1, deg2rad(d[0].value), deg2rad(d[1].value));\n  },\n  skewX: (d: CSSUnitValue[]) => {\n    createSkewMatrix($mat4_1, deg2rad(d[0].value), 0);\n  },\n  skewY: (d: CSSUnitValue[]) => {\n    createSkewMatrix($mat4_1, 0, deg2rad(d[0].value));\n  },\n  matrix: (d: CSSUnitValue[]) => {\n    // prettier-ignore\n    mat4.set(\n      $mat4_1,\n      d[0].value, d[1].value, 0, 0,\n      d[2].value, d[3].value, 0, 0,\n      0,                   0, 1, 0,\n      d[4].value, d[5].value, 0, 1,\n    );\n  },\n  matrix3d: (d: CSSUnitValue[]) => {\n    // @ts-ignore\n    mat4.set($mat4_1, ...d.map((s) => s.value));\n  },\n};\n\nconst $vec3One = vec3.fromValues(1, 1, 1);\nconst $vec3Zero = vec3.create();\nconst optimizer: {\n  [key in TransformType]?: (object: DisplayObject, d: CSSUnitValue[]) => void;\n} = {\n  translate: (object: DisplayObject, d: CSSUnitValue[]) => {\n    runtime.sceneGraphService.setLocalScale(object, $vec3One, false);\n    runtime.sceneGraphService.setLocalEulerAngles(\n      object,\n      $vec3Zero,\n      undefined,\n      undefined,\n      false,\n    );\n    runtime.sceneGraphService.setLocalPosition(\n      object,\n      [d[0].value, d[1].value, 0],\n      false,\n    );\n    runtime.sceneGraphService.dirtyLocalTransform(object, object.transformable);\n  },\n};\n\nexport function parsedTransformToMat4(\n  transform: ParsedTransform[],\n  object: DisplayObject,\n): mat4 {\n  if (transform.length) {\n    if (transform.length === 1 && optimizer[transform[0].t]) {\n      optimizer[transform[0].t](object, transform[0].d);\n      return;\n    }\n    const m = mat4.identity($mat4_2);\n    for (let i = 0; i < transform.length; i++) {\n      const { t, d } = transform[i];\n      const p = parser[t];\n      if (p) {\n        p(d);\n        mat4.mul(m, m, $mat4_1);\n      }\n    }\n\n    object.setLocalTransform(m);\n  } else {\n    object.resetLocalTransform();\n  }\n\n  return object.getLocalTransform();\n}\n","import type { DisplayObject } from '../../display-objects';\nimport { parsedTransformToMat4 } from '../../utils';\nimport { CSSKeywordValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\nimport type { ParsedTransform } from '../parser/transform';\nimport { mergeTransforms, parseTransformUnmemoize } from '../parser/transform';\n\n/**\n * @see /zh/docs/api/animation#支持变换的属性\n *\n * support the following formats like CSS Transform:\n *\n * scale\n * * scale(x, y)\n * * scaleX(x)\n * * scaleY(x)\n * * scaleZ(z)\n * * scale3d(x, y, z)\n *\n * translate (unit: none, px, %(relative to its bounds))\n * * translate(x, y) eg. translate(0, 0) translate(0, 30px) translate(100%, 100%)\n * * translateX(0)\n * * translateY(0)\n * * translateZ(0)\n * * translate3d(0, 0, 0)\n *\n * rotate (unit: deg rad turn)\n * * rotate(0.5turn) rotate(30deg) rotate(1rad)\n *\n * none\n *\n * unsupported for now:\n * * calc() eg. translate(calc(100% + 10px))\n * * matrix/matrix3d()\n * * skew/skewX/skewY\n * * perspective\n */\nexport class CSSPropertyTransform\n  implements\n    Partial<CSSProperty<CSSKeywordValue | ParsedTransform[], ParsedTransform[]>>\n{\n  parser = parseTransformUnmemoize;\n\n  calculator(\n    name: string,\n    oldParsed: CSSKeywordValue | ParsedTransform[],\n    parsed: CSSKeywordValue | ParsedTransform[],\n    object: DisplayObject,\n  ): ParsedTransform[] {\n    // 'none'\n    if (parsed instanceof CSSKeywordValue) {\n      return [];\n    }\n    return parsed;\n  }\n\n  mixer = mergeTransforms;\n\n  postProcessor(object: DisplayObject) {\n    parsedTransformToMat4(object.parsedStyle.transform, object);\n  }\n}\n","import { DisplayObject } from '../../display-objects';\nimport { UnitType, type CSSUnitValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\n\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/transform-origin\n * @example\n * [10px, 10px] [10%, 10%]\n */\nexport class CSSPropertyTransformOrigin\n  implements\n    Partial<\n      CSSProperty<[CSSUnitValue, CSSUnitValue], [CSSUnitValue, CSSUnitValue]>\n    >\n{\n  postProcessor(object: DisplayObject) {\n    const { transformOrigin } = object.parsedStyle;\n    if (\n      transformOrigin[0].unit === UnitType.kPixels &&\n      transformOrigin[1].unit === UnitType.kPixels\n    ) {\n      object.setOrigin(transformOrigin[0].value, transformOrigin[1].value);\n    } else {\n      // Relative to geometry bounds, calculate later.\n      object.getGeometryBounds();\n    }\n  }\n}\n","import { SortReason } from '../../components';\nimport type { DisplayObject } from '../../display-objects';\nimport type { CSSUnitValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\n\nexport class CSSPropertyZIndex\n  implements Partial<CSSProperty<CSSUnitValue, number>>\n{\n  calculator(\n    name: string,\n    oldParsed: CSSUnitValue,\n    computed: CSSUnitValue,\n    object: DisplayObject,\n  ): number {\n    return computed.value;\n  }\n\n  postProcessor(object: DisplayObject) {\n    if (object.parentNode) {\n      const parentEntity = object.parentNode as DisplayObject;\n      const parentRenderable = parentEntity.renderable;\n      const parentSortable = parentEntity.sortable;\n      if (parentRenderable) {\n        parentEntity.dirty();\n      }\n      // need re-sort on parent\n      if (parentSortable) {\n        parentSortable.dirty = true;\n        parentSortable.dirtyReason = SortReason.Z_INDEX_CHANGED;\n      }\n    }\n  }\n}\n","import type {\n  Circle,\n  ParsedCircleStyleProps,\n} from '../../display-objects/Circle';\nimport type { GeometryAABBUpdater } from './interfaces';\n\nexport class CircleUpdater\n  implements GeometryAABBUpdater<ParsedCircleStyleProps>\n{\n  update(parsedStyle: ParsedCircleStyleProps, object: Circle) {\n    const { cx = 0, cy = 0, r = 0 } = parsedStyle;\n\n    return {\n      cx,\n      cy,\n      hwidth: r,\n      hheight: r,\n    };\n  }\n}\n","import type {\n  Ellipse,\n  ParsedEllipseStyleProps,\n} from '../../display-objects/Ellipse';\nimport type { GeometryAABBUpdater } from './interfaces';\n\nexport class EllipseUpdater\n  implements GeometryAABBUpdater<ParsedEllipseStyleProps>\n{\n  update(parsedStyle: ParsedEllipseStyleProps, object: Ellipse) {\n    const { cx = 0, cy = 0, rx = 0, ry = 0 } = parsedStyle;\n\n    return {\n      cx,\n      cy,\n      hwidth: rx,\n      hheight: ry,\n    };\n  }\n}\n","import type { ParsedLineStyleProps } from '../../display-objects/Line';\nimport type { GeometryAABBUpdater } from './interfaces';\n\nexport class LineUpdater implements GeometryAABBUpdater<ParsedLineStyleProps> {\n  update(parsedStyle: ParsedLineStyleProps) {\n    const { x1, y1, x2, y2 } = parsedStyle;\n\n    const minX = Math.min(x1, x2);\n    const maxX = Math.max(x1, x2);\n    const minY = Math.min(y1, y2);\n    const maxY = Math.max(y1, y2);\n\n    const width = maxX - minX;\n    const height = maxY - minY;\n    const hwidth = width / 2;\n    const hheight = height / 2;\n\n    return {\n      cx: minX + hwidth,\n      cy: minY + hheight,\n      hwidth,\n      hheight,\n    };\n  }\n}\n","import type { ParsedPathStyleProps } from '../../display-objects';\nimport type { GeometryAABBUpdater } from './interfaces';\n\nexport class PathUpdater implements GeometryAABBUpdater<ParsedPathStyleProps> {\n  update(parsedStyle: ParsedPathStyleProps) {\n    const { d } = parsedStyle;\n\n    const { x, y, width, height } = d.rect;\n    const hwidth = width / 2;\n    const hheight = height / 2;\n\n    return {\n      cx: x + hwidth,\n      cy: y + hheight,\n      hwidth,\n      hheight,\n    };\n  }\n}\n","import { isArray } from '@antv/util';\nimport type { ParsedPolylineStyleProps } from '../../display-objects';\nimport type { GeometryAABBUpdater } from './interfaces';\n\nexport class PolylineUpdater\n  implements GeometryAABBUpdater<ParsedPolylineStyleProps>\n{\n  update(parsedStyle: ParsedPolylineStyleProps) {\n    if (parsedStyle.points && isArray(parsedStyle.points.points)) {\n      const { points } = parsedStyle.points;\n\n      // FIXME: account for miter lineJoin\n      const minX = Math.min(...points.map((point) => point[0]));\n      const maxX = Math.max(...points.map((point) => point[0]));\n      const minY = Math.min(...points.map((point) => point[1]));\n      const maxY = Math.max(...points.map((point) => point[1]));\n\n      const width = maxX - minX;\n      const height = maxY - minY;\n      const hwidth = width / 2;\n      const hheight = height / 2;\n\n      return {\n        cx: minX + hwidth,\n        cy: minY + hheight,\n        hwidth,\n        hheight,\n      };\n    }\n    return {\n      cx: 0,\n      cy: 0,\n      hwidth: 0,\n      hheight: 0,\n    };\n  }\n}\n","import { isString } from '@antv/util';\nimport type {\n  Group,\n  Image,\n  ParsedImageStyleProps,\n  Rect,\n} from '../../display-objects';\nimport type { GeometryAABBUpdater } from './interfaces';\n\nexport class RectUpdater implements GeometryAABBUpdater<ParsedImageStyleProps> {\n  update(parsedStyle: ParsedImageStyleProps, object: Image | Rect | Group) {\n    const { x = 0, y = 0, src, width = 0, height = 0 } = parsedStyle;\n\n    let contentWidth = width;\n    let contentHeight = height;\n\n    // resize with HTMLImageElement's size\n    if (src && !isString(src)) {\n      if (!contentWidth) {\n        contentWidth = src.width;\n        parsedStyle.width = contentWidth;\n      }\n      if (!contentHeight) {\n        contentHeight = src.height;\n        parsedStyle.height = contentHeight;\n      }\n    }\n\n    return {\n      cx: x + contentWidth / 2,\n      cy: y + contentHeight / 2,\n      hwidth: contentWidth / 2,\n      hheight: contentHeight / 2,\n    };\n  }\n}\n","import type {\n  DisplayObject,\n  ParsedTextStyleProps,\n} from '../../display-objects';\nimport { GlobalRuntime } from '../../global-runtime';\nimport type { GeometryAABBUpdater } from './interfaces';\n\nexport class TextUpdater implements GeometryAABBUpdater<ParsedTextStyleProps> {\n  constructor(private globalRuntime: GlobalRuntime) {}\n\n  private isReadyToMeasure(\n    parsedStyle: ParsedTextStyleProps,\n    object: DisplayObject,\n  ) {\n    const { text } = parsedStyle;\n\n    return text;\n  }\n\n  update(parsedStyle: ParsedTextStyleProps, object: DisplayObject) {\n    const {\n      text,\n      textAlign = 'start',\n      lineWidth = 1,\n      textBaseline = 'alphabetic',\n      dx = 0,\n      dy = 0,\n      x = 0,\n      y = 0,\n    } = parsedStyle;\n\n    if (!this.isReadyToMeasure(parsedStyle, object)) {\n      parsedStyle.metrics = {\n        font: '',\n        width: 0,\n        height: 0,\n        lines: [],\n        lineWidths: [],\n        lineHeight: 0,\n        maxLineWidth: 0,\n        fontProperties: {\n          ascent: 0,\n          descent: 0,\n          fontSize: 0,\n        },\n        lineMetrics: [],\n      };\n      return {\n        hwidth: 0,\n        hheight: 0,\n        cx: 0,\n        cy: 0,\n      };\n    }\n\n    const { offscreenCanvas } =\n      object?.ownerDocument?.defaultView?.getConfig() || {};\n    const metrics = this.globalRuntime.textService.measureText(\n      text,\n      parsedStyle,\n      offscreenCanvas,\n    );\n    parsedStyle.metrics = metrics;\n\n    const { width, height } = metrics;\n\n    const hwidth = width / 2;\n    const hheight = height / 2;\n\n    // default 'left'\n    let lineXOffset = x + hwidth;\n    if (textAlign === 'center' || textAlign === 'middle') {\n      lineXOffset += lineWidth / 2 - hwidth;\n    } else if (textAlign === 'right' || textAlign === 'end') {\n      lineXOffset += lineWidth - hwidth * 2;\n    }\n\n    let lineYOffset = y - hheight;\n    if (textBaseline === 'middle') {\n      lineYOffset += hheight;\n    } else if (textBaseline === 'top' || textBaseline === 'hanging') {\n      lineYOffset += hheight * 2;\n    } else if (textBaseline === 'alphabetic') {\n      // alphabetic has been removed in the latest version, will be treated as bottom\n    } else if (textBaseline === 'bottom' || textBaseline === 'ideographic') {\n      lineYOffset += 0;\n    }\n    // TODO: ideographic & bottom\n\n    if (dx) {\n      lineXOffset += dx;\n    }\n    if (dy) {\n      lineYOffset += dy;\n    }\n\n    return {\n      cx: lineXOffset,\n      cy: lineYOffset,\n      hwidth,\n      hheight,\n    };\n  }\n}\n","import type { Group, ParsedImageStyleProps } from '../../display-objects';\nimport type { GeometryAABBUpdater } from './interfaces';\n\nexport class GroupUpdater\n  implements GeometryAABBUpdater<ParsedImageStyleProps>\n{\n  update(parsedStyle: ParsedImageStyleProps, object: Group) {\n    return {\n      cx: 0,\n      cy: 0,\n      hwidth: 0,\n      hheight: 0,\n    };\n  }\n}\n","import type { HTML, ParsedHTMLStyleProps } from '../../display-objects/HTML';\nimport type { GeometryAABBUpdater } from './interfaces';\n\nexport class HTMLUpdater implements GeometryAABBUpdater<ParsedHTMLStyleProps> {\n  update(parsedStyle: ParsedHTMLStyleProps, object: HTML) {\n    const { x = 0, y = 0, width = 0, height = 0 } = parsedStyle;\n\n    return {\n      cx: x + width / 2,\n      cy: y + height / 2,\n      hwidth: width / 2,\n      hheight: height / 2,\n    };\n  }\n}\n","import type { EventService } from '../services';\nimport { Point } from '../shapes/Point';\nimport { ERROR_MSG_METHOD_NOT_IMPLEMENTED } from '../utils';\nimport type { IEventTarget } from './interfaces';\n\nexport function isFederatedEvent(value: any): value is FederatedEvent {\n  return !!(value as FederatedEvent).type;\n}\n\n/**\n * An DOM-compatible synthetic event implementation that is \"forwarded\" on behalf of an original\n * FederatedEvent or native Event.\n */\nexport class FederatedEvent<N extends Event = Event, T = any> {\n  /**\n   * The type of event, supports the following:\n   * * pointerdown\n   * * touchstart\n   * * mousedown\n   * * rightdown\n   * * ...\n   */\n  type: string;\n\n  /**\n   * @deprecated\n   */\n  get name() {\n    return this.type;\n  }\n\n  /**\n   * The propagation phase.\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/eventPhase\n   */\n  eventPhase = FederatedEvent.prototype.NONE;\n\n  /**\n   * can be used to implement event delegation\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/target\n   */\n  target: IEventTarget | null;\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/bubbles\n   */\n  bubbles = true;\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/cancelBubble\n   */\n  cancelBubble = true;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/cancelable\n   */\n  readonly cancelable = false;\n\n  /** the event target when listeners binded */\n  currentTarget: IEventTarget | null;\n\n  /** Flags whether the default response of the user agent was prevent through this event. */\n  defaultPrevented = false;\n\n  /**\n   * timestamp when the event created\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/timeStamp\n   */\n  timeStamp: number;\n\n  /**\n   * the original event.\n   */\n  nativeEvent: N;\n\n  /** The original event that caused this event, if any. */\n  originalEvent: FederatedEvent<N>;\n\n  /** Flags whether propagation was stopped. */\n  propagationStopped = false;\n\n  /** Flags whether propagation was immediately stopped. */\n  propagationImmediatelyStopped = false;\n\n  manager: EventService | null;\n\n  /** Event-specific detail */\n  detail: T;\n\n  /**\n   * The coordinates of the evnet relative to the nearest DOM layer.\n   * This is a non-standard property.\n   */\n  layer: Point = new Point();\n  get layerX(): number {\n    return this.layer.x;\n  }\n  get layerY(): number {\n    return this.layer.y;\n  }\n\n  /**\n   * The coordinates of the event relative to the DOM document.\n   * This is a non-standard property.\n   * relative to the DOM document.\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/MouseEvent/pageX\n   */\n  page: Point = new Point();\n  get pageX(): number {\n    return this.page.x;\n  }\n  get pageY(): number {\n    return this.page.y;\n  }\n\n  /**\n   * relative to Canvas, origin is left-top\n   */\n  canvas: Point = new Point();\n  get x(): number {\n    return this.canvas.x;\n  }\n  get y(): number {\n    return this.canvas.y;\n  }\n  get canvasX(): number {\n    return this.canvas.x;\n  }\n  get canvasY(): number {\n    return this.canvas.y;\n  }\n\n  /**\n   * relative to Viewport, account for Camera\n   */\n  viewport: Point = new Point();\n  get viewportX(): number {\n    return this.viewport.x;\n  }\n  get viewportY(): number {\n    return this.viewport.y;\n  }\n\n  /**\n   * The event boundary which manages this event. Propagation can only occur\n   *  within the boundary's jurisdiction.\n   */\n  constructor(manager: EventService | null) {\n    this.manager = manager;\n  }\n\n  path: IEventTarget[];\n  /**\n   * The propagation path for this event\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/composedPath\n   *\n   * So composedPath()[0] represents the original target.\n   * @see https://polymer-library.polymer-project.org/3.0/docs/devguide/events#retargeting\n   */\n  composedPath(): IEventTarget[] {\n    if (this.manager && (!this.path || this.path[0] !== this.target)) {\n      this.path = this.target ? this.manager.propagationPath(this.target) : [];\n    }\n\n    return this.path;\n  }\n  /**\n   * @deprecated\n   */\n  get propagationPath() {\n    return this.composedPath();\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/preventDefault\n   */\n  preventDefault(): void {\n    if (this.nativeEvent instanceof Event && this.nativeEvent.cancelable) {\n      this.nativeEvent.preventDefault();\n    }\n\n    this.defaultPrevented = true;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/stopImmediatePropagation\n   */\n  stopImmediatePropagation(): void {\n    this.propagationImmediatelyStopped = true;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/stopPropagation\n   */\n  stopPropagation(): void {\n    this.propagationStopped = true;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/view\n   */\n  view: any;\n\n  /**\n   * added for compatibility with DOM Event,\n   * deprecated props and methods\n   */\n  initEvent(): void {}\n  initUIEvent(): void {}\n  which: number;\n  returnValue: boolean;\n  srcElement: IEventTarget;\n  readonly composed = false;\n  isTrusted: boolean;\n\n  clone() {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  NONE = 0;\n  CAPTURING_PHASE = 1;\n  AT_TARGET = 2;\n  BUBBLING_PHASE = 3;\n}\n","import type { DisplayObject } from '../display-objects/DisplayObject';\nimport { Point } from '../shapes/Point';\nimport { ERROR_MSG_METHOD_NOT_IMPLEMENTED } from '../utils';\nimport { FederatedEvent } from './FederatedEvent';\n\nexport class FederatedMouseEvent\n  extends FederatedEvent<MouseEvent | PointerEvent | TouchEvent>\n  implements MouseEvent\n{\n  /** Whether the \"alt\" key was pressed when this mouse event occurred. */\n  altKey: boolean;\n\n  /** The specific button that was pressed in this mouse event. */\n  button: number;\n\n  /** The button depressed when this event occurred. */\n  buttons: number;\n\n  /** Whether the \"control\" key was pressed when this mouse event occurred. */\n  ctrlKey: boolean;\n\n  /** Whether the \"meta\" key was pressed when this mouse event occurred. */\n  metaKey: boolean;\n\n  /** This is currently not implemented in the Federated Events API. */\n  // @ts-ignore\n  relatedTarget: DisplayObject | null;\n\n  /** Whether the \"shift\" key was pressed when this mouse event occurred. */\n  shiftKey: boolean;\n\n  /**\n   * The coordinates of the mouse event relative to the canvas.\n   */\n  client: Point = new Point();\n  get clientX(): number {\n    return this.client.x;\n  }\n  get clientY(): number {\n    return this.client.y;\n  }\n\n  /**\n   * The movement in this pointer relative to the last `mousemove` event.\n   */\n  movement: Point = new Point();\n  get movementX(): number {\n    return this.movement.x;\n  }\n  get movementY(): number {\n    return this.movement.y;\n  }\n\n  /**\n   * The offset of the pointer coordinates w.r.t. target DisplayObject in world space. This is\n   * not supported at the moment.\n   */\n  offset: Point = new Point();\n  get offsetX(): number {\n    return this.offset.x;\n  }\n  get offsetY(): number {\n    return this.offset.y;\n  }\n\n  /**\n   * The pointer coordinates in world space.\n   */\n  global: Point = new Point();\n  get globalX(): number {\n    return this.global.x;\n  }\n  get globalY(): number {\n    return this.global.y;\n  }\n\n  /**\n   * The pointer coordinates in sceen space.\n   */\n  screen: Point = new Point();\n  get screenX(): number {\n    return this.screen.x;\n  }\n  get screenY(): number {\n    return this.screen.y;\n  }\n\n  getModifierState(key: string): boolean {\n    return (\n      'getModifierState' in this.nativeEvent &&\n      this.nativeEvent.getModifierState(key)\n    );\n  }\n  initMouseEvent(): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n}\n","import { FederatedMouseEvent } from './FederatedMouseEvent';\n\n// @ts-ignore\nexport class FederatedPointerEvent\n  extends FederatedMouseEvent\n  implements PointerEvent\n{\n  /**\n   * The unique identifier of the pointer.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/pointerId\n   */\n  pointerId: number;\n\n  /**\n   * The width of the pointer's contact along the x-axis, measured in CSS pixels.\n   * radiusX of TouchEvents will be represented by this value.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/width\n   */\n  width = 0;\n\n  /**\n   * The height of the pointer's contact along the y-axis, measured in CSS pixels.\n   * radiusY of TouchEvents will be represented by this value.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/height\n   */\n  height = 0;\n\n  /**\n   * Indicates whether or not the pointer device that created the event is the primary pointer.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/isPrimary\n   */\n  isPrimary = false;\n\n  /**\n   * The type of pointer that triggered the event.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/pointerType\n   */\n  pointerType: string;\n\n  /**\n   * Pressure applied by the pointing device during the event.\n   *s\n   * A Touch's force property will be represented by this value.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/pressure\n   */\n  pressure: number;\n\n  /**\n   * Barrel pressure on a stylus pointer.\n   *\n   * @see https://w3c.github.io/pointerevents/#pointerevent-interface\n   */\n  tangentialPressure: number;\n\n  /**\n   * The angle, in degrees, between the pointer device and the screen.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/tiltX\n   */\n  tiltX: number;\n\n  /**\n   * The angle, in degrees, between the pointer device and the screen.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/tiltY\n   */\n  tiltY: number;\n\n  /**\n   * Twist of a stylus pointer.\n   *\n   * @see https://w3c.github.io/pointerevents/#pointerevent-interface\n   */\n  twist: number;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/getCoalescedEvents\n   */\n  getCoalescedEvents(): PointerEvent[] {\n    if (\n      this.type === 'pointermove' ||\n      this.type === 'mousemove' ||\n      this.type === 'touchmove'\n    ) {\n      // @ts-ignore\n      return [this];\n    }\n    return [];\n  }\n\n  /**\n   * @see https://chromestatus.com/feature/5765569655603200\n   */\n  getPredictedEvents(): PointerEvent[] {\n    throw new Error('getPredictedEvents is not supported!');\n  }\n\n  /**\n   * @see https://github.com/antvis/G/issues/1115\n   * We currently reuses event objects in the event system,\n   * avoiding the creation of a large number of event objects.\n   * Reused objects are only used to carry different data,\n   * such as coordinate information, native event objects,\n   * and therefore the lifecycle is limited to the event handler,\n   * which can lead to unintended consequences if an attempt is made to cache the entire event object.\n   *\n   * Therefore, while keeping the above performance considerations in mind, it is possible to provide a clone method that creates a new object when the user really wants to cache it, e.g.\n   */\n  clone() {\n    return this.manager.clonePointerEvent(this);\n  }\n}\n","import { FederatedMouseEvent } from './FederatedMouseEvent';\n\n// @ts-ignore\nexport class FederatedWheelEvent\n  extends FederatedMouseEvent\n  implements WheelEvent\n{\n  /**\n   * The units of `deltaX`, `deltaY`, and `deltaZ`. This is one of `DOM_DELTA_LINE`,\n   * `DOM_DELTA_PAGE`, `DOM_DELTA_PIXEL`.\n   */\n  deltaMode: number;\n\n  /** Horizontal scroll amount */\n  deltaX: number;\n\n  /** Vertical scroll amount */\n  deltaY: number;\n\n  /** z-axis scroll amount. */\n  deltaZ: number;\n\n  readonly DOM_DELTA_PIXEL: 0x00;\n  readonly DOM_DELTA_LINE: 0x01;\n  readonly DOM_DELTA_PAGE: 0x02;\n\n  clone() {\n    return this.manager.cloneWheelEvent(this);\n  }\n}\n","import { FederatedEvent } from './FederatedEvent';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/Events/Creating_and_triggering_events\n *\n * @example\n  const event = new CustomEvent('build', { detail: { prop1: 'xx' } });\n  circle.addEventListener('build', (e) => {\n    e.target; // circle\n    e.detail; // { prop1: 'xx' }\n  });\n\n  circle.dispatchEvent(event);\n */\nexport class CustomEvent extends FederatedEvent {\n  constructor(eventName: string, object?: object) {\n    super(null);\n\n    this.type = eventName;\n    this.detail = object;\n\n    // compatible with G 3.0\n    Object.assign(this, object);\n  }\n}\n","import { isBoolean, isFunction } from '@antv/util';\nimport EventEmitter from 'eventemitter3';\nimport { CustomEvent } from './CustomEvent';\nimport { FederatedEvent } from './FederatedEvent';\nimport type {\n  EventListenerOrEventListenerObject,\n  ICanvas,\n  IDocument,\n  IEventTarget,\n  INode,\n} from './interfaces';\n\n/**\n * Objects that can receive events and may have listeners for them.\n * eg. Element, Canvas, DisplayObject\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget\n */\nexport class EventTarget implements IEventTarget {\n  /**\n   * event emitter\n   */\n  emitter = new EventEmitter();\n\n  /**\n   * @deprecated\n   * @alias addEventListener\n   */\n  on(\n    type: string,\n    listener: EventListenerOrEventListenerObject | ((...args: any[]) => void),\n    options?: boolean | AddEventListenerOptions,\n  ) {\n    this.addEventListener(type, listener, options);\n    return this;\n  }\n  /**\n   * support `capture` & `once` in options\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener\n   */\n  addEventListener(\n    type: string,\n    listener: EventListenerOrEventListenerObject | ((...args: any[]) => void),\n    options?: boolean | AddEventListenerOptions,\n  ) {\n    let capture = false;\n    let once = false;\n\n    if (isBoolean(options)) capture = options;\n    else if (options) ({ capture = false, once = false } = options);\n\n    if (capture) type += 'capture';\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    listener = isFunction(listener) ? listener : listener.handleEvent;\n\n    const context = isFunction(listener) ? undefined : listener;\n\n    if (once) this.emitter.once(type, listener, context);\n    else this.emitter.on(type, listener, context);\n\n    return this;\n  }\n  /**\n   * @deprecated\n   * @alias removeEventListener\n   */\n  off(\n    type: string,\n    listener: EventListenerOrEventListenerObject | ((...args: any[]) => void),\n    options?: boolean | AddEventListenerOptions,\n  ) {\n    if (type) {\n      this.removeEventListener(type, listener, options);\n    } else {\n      // remove all listeners\n      this.removeAllEventListeners();\n    }\n    return this;\n  }\n\n  removeAllEventListeners() {\n    this.emitter?.removeAllListeners();\n  }\n\n  removeEventListener(\n    type: string,\n    listener?: EventListenerOrEventListenerObject | ((...args: any[]) => void),\n    options?: boolean | AddEventListenerOptions,\n  ) {\n    if (!this.emitter) return this;\n\n    const capture = isBoolean(options) ? options : options?.capture;\n    if (capture) type += 'capture';\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    listener = isFunction(listener) ? listener : listener?.handleEvent;\n    const context = isFunction(listener) ? undefined : listener;\n\n    this.emitter.off(type, listener, context);\n    return this;\n  }\n  /**\n   * @deprecated\n   * @alias dispatchEvent\n   */\n  emit(eventName: string, object: object) {\n    this.dispatchEvent(new CustomEvent(eventName, object));\n  }\n\n  dispatchEventToSelf<T extends FederatedEvent>(e: T) {\n    e.target ||= this;\n    e.currentTarget = this;\n    this.emitter.emit(e.type, e);\n  }\n\n  dispatchEvent<T extends FederatedEvent>(\n    e: T,\n    skipPropagate = false,\n    dispatchToSelf?: boolean,\n  ): boolean {\n    if (dispatchToSelf) {\n      this.dispatchEventToSelf(e);\n\n      return true;\n    }\n\n    let canvas: ICanvas;\n\n    if ((this as unknown as ICanvas).document) {\n      canvas = this as unknown as ICanvas;\n    } else if ((this as unknown as IDocument).defaultView) {\n      canvas = (this as unknown as IDocument).defaultView;\n    } else {\n      canvas = (this as unknown as INode).ownerDocument?.defaultView;\n    }\n\n    if (canvas) {\n      e.manager = canvas.getEventService();\n      if (!e.manager) return false;\n\n      e.defaultPrevented = false;\n      if (e.path) {\n        e.path.length = 0;\n      } else {\n        // @ts-ignore\n        e.page = [];\n      }\n\n      if (!skipPropagate) {\n        e.target = this;\n      }\n      e.manager.dispatchEvent(e, e.type, skipPropagate);\n    } else {\n      // HACK Fixed the issue that after an element leaves the DOM tree, there is no associated canvas,\n      // which causes the removed and destroy events to not be triggered\n      this.dispatchEventToSelf(e);\n    }\n\n    return !e.defaultPrevented;\n  }\n}\n","import { Shape } from '../types';\nimport { ERROR_MSG_METHOD_NOT_IMPLEMENTED } from '../utils';\n// import { Text } from '../display-objects/Text';\nimport { EventTarget } from './EventTarget';\nimport type {\n  IChildNode,\n  IDocument,\n  IElement,\n  IEventTarget,\n  INode,\n  IParentNode,\n} from './interfaces';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Node\n */\nexport abstract class Node extends EventTarget implements INode {\n  /**\n   * Both nodes are in different documents or different trees in the same document.\n   */\n  static DOCUMENT_POSITION_DISCONNECTED = 1;\n\n  /**\n   * otherNode precedes the node in either a pre-order depth-first traversal\n   * of a tree containing both (e.g., as an ancestor or previous sibling or a descendant of a previous sibling or previous sibling of an ancestor) or (if they are disconnected) in an arbitrary but consistent ordering.\n   */\n  static DOCUMENT_POSITION_PRECEDING = 2;\n\n  /**\n   * otherNode follows the node in either a pre-order depth-first traversal of a tree containing both (e.g., as a descendant or following sibling or a descendant of a following sibling or following sibling of an ancestor) or (if they are disconnected) in an arbitrary but consistent ordering.\n   */\n  static DOCUMENT_POSITION_FOLLOWING = 4;\n\n  /**\n   * otherNode is an ancestor of the node.\n   */\n  static DOCUMENT_POSITION_CONTAINS = 8;\n\n  /**\n   * otherNode is a descendant of the node.\n   */\n  static DOCUMENT_POSITION_CONTAINED_BY = 16;\n\n  /**\n   * The result relies upon arbitrary and/or implementation-specific behavior and is not guaranteed to be portable.\n   */\n  static DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC = 32;\n\n  static isNode(target: IEventTarget | INode): target is INode {\n    return !!(target as INode).childNodes;\n  }\n\n  shadow = false;\n  /**\n   * points to canvas.document\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/ownerDocument\n   */\n  ownerDocument: IDocument | null = null;\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/isConnected\n   * @example\n      circle.isConnected; // false\n      canvas.appendChild(circle);\n      circle.isConnected; // true\n   */\n  isConnected = false;\n\n  /**\n   * Returns node's node document's document base URL.\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node\n   */\n  readonly baseURI: string = '';\n\n  /**\n   * Returns the children.\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/childNodes\n   */\n  childNodes: IChildNode[] = [];\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeType\n   */\n  nodeType = 0;\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeName\n   */\n  nodeName = '';\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeValue\n   */\n  nodeValue: string | null = null;\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/textContent\n   */\n  get textContent(): string {\n    let out = '';\n\n    if (this.nodeName === Shape.TEXT) {\n      // @ts-ignore\n      out += this.style.text;\n    }\n\n    for (const child of this.childNodes) {\n      if (child.nodeName === Shape.TEXT) {\n        out += child.nodeValue;\n      } else {\n        out += child.textContent;\n      }\n    }\n\n    return out;\n  }\n\n  set textContent(content: string) {\n    // remove all children\n    this.childNodes.slice().forEach((child) => {\n      this.removeChild(child);\n    });\n\n    if (this.nodeName === Shape.TEXT) {\n      // @ts-ignore\n      this.style.text = `${content}`;\n    } else {\n      // this.appendChild(\n      //   new Text({\n      //     style: {\n      //       text: content,\n      //     },\n      //   }),\n      // );\n    }\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/getRootNode\n   */\n  getRootNode(opts: { composed?: boolean } = {}): INode {\n    if (this.parentNode) {\n      return this.parentNode.getRootNode(opts);\n    }\n    if (opts.composed && (this as any).host) {\n      return (this as any).host.getRootNode(opts);\n    }\n    return this;\n  }\n  hasChildNodes(): boolean {\n    return this.childNodes.length > 0;\n  }\n\n  isDefaultNamespace(namespace: string | null): boolean {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  lookupNamespaceURI(prefix: string | null): string | null {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  lookupPrefix(namespace: string | null): string | null {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  normalize(): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/isEqualNode\n   */\n  isEqualNode(otherNode: INode | null): boolean {\n    // TODO: compare 2 nodes, not sameness\n    return this === otherNode;\n  }\n  isSameNode(otherNode: INode | null): boolean {\n    return this.isEqualNode(otherNode);\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/ParentNode\n   */\n  parentNode: (INode & IParentNode) | null = null;\n\n  /**\n   * @deprecated\n   * @alias parentNode\n   */\n  get parent(): INode | null {\n    return this.parentNode;\n  }\n  get parentElement(): IElement | null {\n    return null;\n  }\n  get nextSibling(): IChildNode | null {\n    return null;\n  }\n  get previousSibling(): IChildNode | null {\n    return null;\n  }\n  get firstChild(): IChildNode | null {\n    return this.childNodes.length > 0 ? this.childNodes[0] : null;\n  }\n  get lastChild(): IChildNode | null {\n    return this.childNodes.length > 0\n      ? this.childNodes[this.childNodes.length - 1]\n      : null;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition\n   * @see https://github.com/b-fuze/deno-dom/blob/master/src/dom/node.ts#L338\n   */\n  compareDocumentPosition(other: INode): number {\n    if (other === this) {\n      // same node\n      return 0;\n    }\n\n    // if (!(other instanceof Node)) {\n    //   throw new TypeError(\n    //     'Node.compareDocumentPosition: Argument 1 does not implement interface Node.',\n    //   );\n    // }\n\n    let node1Root: INode = other;\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let node2Root: INode = this;\n    const node1Hierarchy: INode[] = [node1Root];\n    const node2Hierarchy: INode[] = [node2Root];\n    while (node1Root.parentNode ?? node2Root.parentNode) {\n      node1Root = node1Root.parentNode\n        ? (node1Hierarchy.push(node1Root.parentNode), node1Root.parentNode)\n        : node1Root;\n      node2Root = node2Root.parentNode\n        ? (node2Hierarchy.push(node2Root.parentNode), node2Root.parentNode)\n        : node2Root;\n    }\n\n    // Check if they don't share the same root node\n    if (node1Root !== node2Root) {\n      return (\n        Node.DOCUMENT_POSITION_DISCONNECTED |\n        Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC |\n        Node.DOCUMENT_POSITION_PRECEDING\n      );\n    }\n\n    const longerHierarchy =\n      node1Hierarchy.length > node2Hierarchy.length\n        ? node1Hierarchy\n        : node2Hierarchy;\n    const shorterHierarchy =\n      longerHierarchy === node1Hierarchy ? node2Hierarchy : node1Hierarchy;\n\n    // Check if either is a container of the other\n    if (\n      longerHierarchy[longerHierarchy.length - shorterHierarchy.length] ===\n      shorterHierarchy[0]\n    ) {\n      return longerHierarchy === node1Hierarchy\n        ? // other is a child of this\n          Node.DOCUMENT_POSITION_CONTAINED_BY | Node.DOCUMENT_POSITION_FOLLOWING\n        : // this is a child of other\n          Node.DOCUMENT_POSITION_CONTAINS | Node.DOCUMENT_POSITION_PRECEDING;\n    }\n\n    // Find their first common ancestor and see whether they\n    // are preceding or following\n    const longerStart = longerHierarchy.length - shorterHierarchy.length;\n    for (let i = shorterHierarchy.length - 1; i >= 0; i--) {\n      const shorterHierarchyNode = shorterHierarchy[i];\n      const longerHierarchyNode = longerHierarchy[longerStart + i];\n\n      // We found the first common ancestor\n      if (longerHierarchyNode !== shorterHierarchyNode) {\n        const siblings = shorterHierarchyNode.parentNode.childNodes as INode[];\n\n        if (\n          siblings.indexOf(shorterHierarchyNode) <\n          siblings.indexOf(longerHierarchyNode)\n        ) {\n          // Shorter is before longer\n          if (shorterHierarchy === node1Hierarchy) {\n            // Other is before this\n            return Node.DOCUMENT_POSITION_PRECEDING;\n          }\n          // This is before other\n          return Node.DOCUMENT_POSITION_FOLLOWING;\n        }\n        // Longer is before shorter\n        if (longerHierarchy === node1Hierarchy) {\n          // Other is before this\n          return Node.DOCUMENT_POSITION_PRECEDING;\n        }\n        // Other is after this\n        return Node.DOCUMENT_POSITION_FOLLOWING;\n      }\n    }\n\n    return Node.DOCUMENT_POSITION_FOLLOWING;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/cloneNode\n   */\n  abstract cloneNode(deep?: boolean): this;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/appendChild\n   */\n  abstract appendChild<T extends INode>(newChild: T, index?: number): T;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/insertBefore\n   */\n  abstract insertBefore<T extends INode>(\n    newChild: T,\n    refChild: INode | null,\n  ): T;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/removeChild\n   */\n  abstract removeChild<T extends INode>(child: T): T;\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/replaceChild\n   */\n  abstract replaceChild<T extends INode>(newChild: INode, oldChild: T): T;\n\n  destroyed = false;\n  abstract destroy(): void;\n\n  /**\n   * @deprecated\n   * @alias contains\n   */\n  contain<T extends INode>(other: T | null) {\n    return this.contains(other);\n  }\n  contains<T extends INode>(other: T | null): boolean {\n    // the node itself, one of its direct children\n    let tmp: INode | null = other;\n    // @see https://developer.mozilla.org/en-US/docs/Web/API/Node/contains\n    while (tmp && this !== tmp) {\n      tmp = tmp.parentNode;\n    }\n    return !!tmp;\n  }\n\n  getAncestor(n: number): INode | null {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let temp: INode | null = this;\n    while (n > 0 && temp) {\n      temp = temp.parentNode;\n      n--;\n    }\n    return temp;\n  }\n\n  forEach(callback: (o: INode) => void | boolean) {\n    const stack: INode[] = [this];\n\n    while (stack.length > 0) {\n      const node = stack.pop();\n      const result = callback(node);\n      if (result === false) {\n        break;\n      }\n\n      for (let i = node.childNodes.length - 1; i >= 0; i--) {\n        stack.push(node.childNodes[i]);\n      }\n    }\n  }\n}\n","import { mat4, vec3 } from 'gl-matrix';\nimport type { CanvasContext, GlobalRuntime, InteractivePointerEvent } from '..';\nimport type { HTML } from '../display-objects';\nimport type { FederatedEvent } from '../dom/FederatedEvent';\nimport { FederatedMouseEvent } from '../dom/FederatedMouseEvent';\nimport { FederatedPointerEvent } from '../dom/FederatedPointerEvent';\nimport { FederatedWheelEvent } from '../dom/FederatedWheelEvent';\nimport { Node } from '../dom/Node';\nimport type {\n  ICanvas,\n  IDocument,\n  IEventTarget,\n  INode,\n} from '../dom/interfaces';\nimport type { PointLike } from '../shapes';\nimport { Point } from '../shapes';\nimport type { Cursor, EventPosition } from '../types';\nimport { isElement } from '../utils/dom';\nimport { clock } from '../utils/event';\n\ntype Picker = (position: EventPosition) => IEventTarget | null;\ntype TrackingData = {\n  pressTargetsByButton: Record<number, IEventTarget[]>;\n  clicksByButton: Record<\n    number,\n    {\n      clickCount: number;\n      target: IEventTarget;\n      timeStamp: number;\n    }\n  >;\n  overTargets: IEventTarget[] | null;\n};\nexport type EmitterListeners = Record<\n  string,\n  | { fn: (...args: any[]) => any; context: any; once: boolean }[]\n  | { fn: (...args: any[]) => any; context: any; once: boolean }\n>;\nconst PROPAGATION_LIMIT = 2048;\n\nexport class EventService {\n  constructor(\n    private globalRuntime: GlobalRuntime,\n    private context: CanvasContext,\n  ) {}\n\n  private rootTarget: IEventTarget;\n\n  /**\n   * Store HTML elements in current canvas.\n   */\n  nativeHTMLMap = new WeakMap<HTMLElement, HTML>();\n\n  cursor: Cursor | null = 'default';\n\n  private mappingTable: Record<\n    string,\n    {\n      fn: (e: FederatedEvent) => void;\n      priority: number;\n    }[]\n  > = {};\n  private mappingState: Record<string, any> = {\n    trackingData: {},\n  };\n  private eventPool: Map<typeof FederatedEvent, FederatedEvent[]> = new Map();\n\n  private pickHandler: Picker;\n\n  private tmpMatrix = mat4.create();\n  private tmpVec3 = vec3.create();\n\n  init() {\n    this.rootTarget = this.context.renderingContext.root.parentNode; // document\n    this.addEventMapping('pointerdown', this.onPointerDown);\n    this.addEventMapping('pointerup', this.onPointerUp);\n    this.addEventMapping('pointermove', this.onPointerMove);\n    this.addEventMapping('pointerout', this.onPointerOut);\n    this.addEventMapping('pointerleave', this.onPointerOut);\n    this.addEventMapping('pointercancel', this.onPointerCancel);\n    this.addEventMapping('pointerover', this.onPointerOver);\n    this.addEventMapping('pointerupoutside', this.onPointerUpOutside);\n    this.addEventMapping('wheel', this.onWheel);\n    this.addEventMapping('click', this.onClick);\n  }\n\n  destroy() {\n    this.mappingTable = {};\n    this.mappingState = {};\n    this.eventPool.clear();\n  }\n\n  private getScale() {\n    const bbox = this.context.contextService.getBoundingClientRect();\n    let scaleX = 1;\n    let scaleY = 1;\n    const $el =\n      this.context.contextService.getDomElement() as HTMLCanvasElement;\n    if ($el && bbox) {\n      const { offsetWidth, offsetHeight } = $el;\n      if (offsetWidth && offsetHeight) {\n        scaleX = bbox.width / offsetWidth;\n        scaleY = bbox.height / offsetHeight;\n      }\n    }\n    return {\n      scaleX,\n      scaleY,\n      bbox,\n    };\n  }\n\n  /**\n   * Should account for CSS Transform applied on container.\n   * @see https://github.com/antvis/G/issues/1161\n   * @see https://github.com/antvis/G/issues/1677\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/MouseEvent/offsetX\n   */\n  client2Viewport(client: PointLike): PointLike {\n    const { scaleX, scaleY, bbox } = this.getScale();\n    return new Point(\n      (client.x - (bbox?.left || 0)) / scaleX,\n      (client.y - (bbox?.top || 0)) / scaleY,\n    );\n  }\n\n  viewport2Client(canvas: PointLike): PointLike {\n    const { scaleX, scaleY, bbox } = this.getScale();\n    return new Point(\n      (canvas.x + (bbox?.left || 0)) * scaleX,\n      (canvas.y + (bbox?.top || 0)) * scaleY,\n    );\n  }\n\n  viewport2Canvas({ x, y }: PointLike): PointLike {\n    const canvas = (this.rootTarget as IDocument).defaultView;\n    const camera = canvas.getCamera();\n\n    const { width, height } = this.context.config;\n\n    const projectionMatrixInverse = camera.getPerspectiveInverse();\n    const worldMatrix = camera.getWorldTransform();\n    const vpMatrix = mat4.multiply(\n      this.tmpMatrix,\n      worldMatrix,\n      projectionMatrixInverse,\n    );\n\n    const viewport = vec3.set(\n      this.tmpVec3,\n      (x / width) * 2 - 1,\n      (1 - y / height) * 2 - 1,\n      0,\n    );\n\n    vec3.transformMat4(viewport, viewport, vpMatrix);\n\n    return new Point(viewport[0], viewport[1]);\n  }\n\n  canvas2Viewport(canvasP: PointLike): PointLike {\n    const canvas = (this.rootTarget as IDocument).defaultView;\n    const camera = canvas.getCamera();\n\n    // World -> Clip\n    const projectionMatrix = camera.getPerspective();\n    const viewMatrix = camera.getViewTransform();\n    const vpMatrix = mat4.multiply(\n      this.tmpMatrix,\n      projectionMatrix,\n      viewMatrix,\n    );\n\n    const clip = vec3.set(this.tmpVec3, canvasP.x, canvasP.y, 0);\n    vec3.transformMat4(this.tmpVec3, this.tmpVec3, vpMatrix);\n\n    // Clip -> NDC -> Viewport, flip Y\n    const { width, height } = this.context.config;\n    return new Point(\n      ((clip[0] + 1) / 2) * width,\n      (1 - (clip[1] + 1) / 2) * height,\n    );\n  }\n\n  setPickHandler(pickHandler: Picker) {\n    this.pickHandler = pickHandler;\n  }\n\n  addEventMapping(type: string, fn: (e: FederatedEvent) => void) {\n    if (!this.mappingTable[type]) {\n      this.mappingTable[type] = [];\n    }\n\n    this.mappingTable[type].push({\n      fn,\n      priority: 0,\n    });\n    this.mappingTable[type].sort((a, b) => a.priority - b.priority);\n  }\n\n  mapEvent(e: FederatedEvent) {\n    if (!this.rootTarget) {\n      return;\n    }\n\n    const mappers = this.mappingTable[e.type];\n\n    if (mappers) {\n      for (let i = 0, j = mappers.length; i < j; i++) {\n        mappers[i].fn(e);\n      }\n    } else {\n      console.warn(`[EventService]: Event mapping not defined for ${e.type}`);\n    }\n  }\n\n  onPointerDown = (from: FederatedPointerEvent) => {\n    const e = this.createPointerEvent(from);\n\n    this.dispatchEvent(e, 'pointerdown');\n\n    if (e.pointerType === 'touch') {\n      this.dispatchEvent(e, 'touchstart');\n    } else if (e.pointerType === 'mouse' || e.pointerType === 'pen') {\n      const isRightButton = e.button === 2;\n      this.dispatchEvent(e, isRightButton ? 'rightdown' : 'mousedown');\n    }\n\n    const trackingData = this.trackingData(from.pointerId);\n\n    trackingData.pressTargetsByButton[from.button] = e.composedPath();\n\n    this.freeEvent(e);\n  };\n\n  onPointerUp = (from: FederatedPointerEvent) => {\n    const now = clock.now();\n    const e = this.createPointerEvent(\n      from,\n      undefined,\n      undefined,\n      this.context.config.alwaysTriggerPointerEventOnCanvas\n        ? this.rootTarget\n        : undefined,\n    );\n\n    this.dispatchEvent(e, 'pointerup');\n\n    if (e.pointerType === 'touch') {\n      this.dispatchEvent(e, 'touchend');\n    } else if (e.pointerType === 'mouse' || e.pointerType === 'pen') {\n      const isRightButton = e.button === 2;\n      this.dispatchEvent(e, isRightButton ? 'rightup' : 'mouseup');\n    }\n\n    const trackingData = this.trackingData(from.pointerId);\n    const pressTarget = this.findMountedTarget(\n      trackingData.pressTargetsByButton[from.button],\n    );\n\n    let clickTarget = pressTarget;\n\n    // pointerupoutside only bubbles. It only bubbles upto the parent that doesn't contain\n    // the pointerup location.\n    if (pressTarget && !e.composedPath().includes(pressTarget)) {\n      let currentTarget: IEventTarget | null = pressTarget;\n\n      while (currentTarget && !e.composedPath().includes(currentTarget)) {\n        e.currentTarget = currentTarget;\n\n        this.notifyTarget(e, 'pointerupoutside');\n\n        if (e.pointerType === 'touch') {\n          this.notifyTarget(e, 'touchendoutside');\n        } else if (e.pointerType === 'mouse' || e.pointerType === 'pen') {\n          const isRightButton = e.button === 2;\n\n          this.notifyTarget(\n            e,\n            isRightButton ? 'rightupoutside' : 'mouseupoutside',\n          );\n        }\n\n        if (Node.isNode(currentTarget)) {\n          currentTarget = currentTarget.parentNode;\n        }\n      }\n\n      delete trackingData.pressTargetsByButton[from.button];\n\n      // currentTarget is the most specific ancestor holding both the pointerdown and pointerup\n      // targets. That is - it's our click target!\n      clickTarget = currentTarget;\n    }\n\n    if (clickTarget) {\n      const clickEvent = this.clonePointerEvent(e, 'click');\n\n      clickEvent.target = clickTarget;\n      clickEvent.path = [];\n\n      if (!trackingData.clicksByButton[from.button]) {\n        trackingData.clicksByButton[from.button] = {\n          clickCount: 0,\n          target: clickEvent.target,\n          timeStamp: now,\n        };\n      }\n\n      const canvas =\n        this.context.renderingContext.root.ownerDocument.defaultView;\n      const clickHistory = trackingData.clicksByButton[from.button];\n\n      if (\n        clickHistory.target === clickEvent.target &&\n        now - clickHistory.timeStamp < canvas.getConfig().dblClickSpeed\n      ) {\n        ++clickHistory.clickCount;\n      } else {\n        clickHistory.clickCount = 1;\n      }\n\n      clickHistory.target = clickEvent.target;\n      clickHistory.timeStamp = now;\n\n      clickEvent.detail = clickHistory.clickCount;\n\n      // @see https://github.com/antvis/G/issues/1091\n      if (!e.detail?.preventClick) {\n        if (\n          !this.context.config.useNativeClickEvent &&\n          (clickEvent.pointerType === 'mouse' ||\n            clickEvent.pointerType === 'touch')\n        ) {\n          this.dispatchEvent(clickEvent, 'click');\n        }\n        this.dispatchEvent(clickEvent, 'pointertap');\n      }\n\n      this.freeEvent(clickEvent);\n    }\n\n    this.freeEvent(e);\n  };\n\n  onPointerMove = (from: FederatedPointerEvent) => {\n    const e = this.createPointerEvent(\n      from,\n      undefined,\n      undefined,\n      this.context.config.alwaysTriggerPointerEventOnCanvas\n        ? this.rootTarget\n        : undefined,\n    );\n\n    const isMouse = e.pointerType === 'mouse' || e.pointerType === 'pen';\n    const trackingData = this.trackingData(from.pointerId);\n    const outTarget = this.findMountedTarget(trackingData.overTargets);\n\n    // First pointerout/pointerleave\n    if (trackingData.overTargets && outTarget !== e.target) {\n      // pointerout always occurs on the overTarget when the pointer hovers over another element.\n      const outType = from.type === 'mousemove' ? 'mouseout' : 'pointerout';\n      const outEvent = this.createPointerEvent(\n        from,\n        outType,\n        outTarget || undefined,\n      );\n\n      this.dispatchEvent(outEvent, 'pointerout');\n      if (isMouse) this.dispatchEvent(outEvent, 'mouseout');\n\n      // If the pointer exits overTarget and its descendants, then a pointerleave event is also fired. This event\n      // is dispatched to all ancestors that no longer capture the pointer.\n      if (!e.composedPath().includes(outTarget)) {\n        const leaveEvent = this.createPointerEvent(\n          from,\n          'pointerleave',\n          outTarget || undefined,\n        );\n\n        leaveEvent.eventPhase = leaveEvent.AT_TARGET;\n\n        while (\n          leaveEvent.target &&\n          !e.composedPath().includes(leaveEvent.target)\n        ) {\n          leaveEvent.currentTarget = leaveEvent.target;\n\n          this.notifyTarget(leaveEvent);\n          if (isMouse) {\n            this.notifyTarget(leaveEvent, 'mouseleave');\n          }\n\n          if (Node.isNode(leaveEvent.target)) {\n            leaveEvent.target = leaveEvent.target.parentNode;\n          }\n        }\n\n        this.freeEvent(leaveEvent);\n      }\n\n      this.freeEvent(outEvent);\n    }\n\n    // Then pointerover\n    if (outTarget !== e.target) {\n      // pointerover always occurs on the new overTarget\n      const overType = from.type === 'mousemove' ? 'mouseover' : 'pointerover';\n      const overEvent = this.clonePointerEvent(e, overType); // clone faster\n\n      this.dispatchEvent(overEvent, 'pointerover');\n      if (isMouse) this.dispatchEvent(overEvent, 'mouseover');\n\n      // Probe whether the newly hovered Node is an ancestor of the original overTarget.\n      let overTargetAncestor =\n        outTarget && Node.isNode(outTarget) && outTarget.parentNode;\n\n      while (\n        overTargetAncestor &&\n        overTargetAncestor !==\n          (Node.isNode(this.rootTarget) && this.rootTarget.parentNode)\n      ) {\n        if (overTargetAncestor === e.target) break;\n\n        overTargetAncestor = overTargetAncestor.parentNode;\n      }\n\n      // The pointer has entered a non-ancestor of the original overTarget. This means we need a pointerentered\n      // event.\n      const didPointerEnter =\n        !overTargetAncestor ||\n        overTargetAncestor ===\n          (Node.isNode(this.rootTarget) && this.rootTarget.parentNode);\n\n      if (didPointerEnter) {\n        const enterEvent = this.clonePointerEvent(e, 'pointerenter');\n\n        enterEvent.eventPhase = enterEvent.AT_TARGET;\n\n        while (\n          enterEvent.target &&\n          enterEvent.target !== outTarget &&\n          enterEvent.target !==\n            (Node.isNode(this.rootTarget) && this.rootTarget.parentNode)\n        ) {\n          enterEvent.currentTarget = enterEvent.target;\n\n          this.notifyTarget(enterEvent);\n          if (isMouse) this.notifyTarget(enterEvent, 'mouseenter');\n\n          if (Node.isNode(enterEvent.target)) {\n            enterEvent.target = enterEvent.target.parentNode;\n          }\n        }\n\n        this.freeEvent(enterEvent);\n      }\n\n      this.freeEvent(overEvent);\n    }\n\n    // Then pointermove\n    this.dispatchEvent(e, 'pointermove');\n\n    if (e.pointerType === 'touch') this.dispatchEvent(e, 'touchmove');\n\n    if (isMouse) {\n      this.dispatchEvent(e, 'mousemove');\n      this.cursor = this.getCursor(e.target);\n    }\n\n    trackingData.overTargets = e.composedPath();\n\n    this.freeEvent(e);\n  };\n\n  onPointerOut = (from: FederatedPointerEvent) => {\n    const trackingData = this.trackingData(from.pointerId);\n\n    if (trackingData.overTargets) {\n      const isMouse =\n        from.pointerType === 'mouse' || from.pointerType === 'pen';\n      const outTarget = this.findMountedTarget(trackingData.overTargets);\n\n      // pointerout first\n      const outEvent = this.createPointerEvent(\n        from,\n        'pointerout',\n        outTarget || undefined,\n      );\n\n      this.dispatchEvent(outEvent);\n      if (isMouse) this.dispatchEvent(outEvent, 'mouseout');\n\n      // pointerleave(s) are also dispatched b/c the pointer must've left rootTarget and its descendants to\n      // get an upstream pointerout event (upstream events do not know rootTarget has descendants).\n      const leaveEvent = this.createPointerEvent(\n        from,\n        'pointerleave',\n        outTarget || undefined,\n      );\n\n      leaveEvent.eventPhase = leaveEvent.AT_TARGET;\n\n      while (\n        leaveEvent.target &&\n        leaveEvent.target !==\n          (Node.isNode(this.rootTarget) && this.rootTarget.parentNode)\n      ) {\n        leaveEvent.currentTarget = leaveEvent.target;\n\n        this.notifyTarget(leaveEvent);\n        if (isMouse) {\n          this.notifyTarget(leaveEvent, 'mouseleave');\n        }\n\n        if (Node.isNode(leaveEvent.target)) {\n          leaveEvent.target = leaveEvent.target.parentNode;\n        }\n      }\n\n      trackingData.overTargets = null;\n\n      this.freeEvent(outEvent);\n      this.freeEvent(leaveEvent);\n    }\n\n    this.cursor = null;\n  };\n\n  onPointerOver = (from: FederatedPointerEvent) => {\n    const trackingData = this.trackingData(from.pointerId);\n    const e = this.createPointerEvent(from);\n\n    const isMouse = e.pointerType === 'mouse' || e.pointerType === 'pen';\n\n    this.dispatchEvent(e, 'pointerover');\n    if (isMouse) this.dispatchEvent(e, 'mouseover');\n    if (e.pointerType === 'mouse') this.cursor = this.getCursor(e.target);\n\n    // pointerenter events must be fired since the pointer entered from upstream.\n    const enterEvent = this.clonePointerEvent(e, 'pointerenter');\n\n    enterEvent.eventPhase = enterEvent.AT_TARGET;\n\n    while (\n      enterEvent.target &&\n      enterEvent.target !==\n        (Node.isNode(this.rootTarget) && this.rootTarget.parentNode)\n    ) {\n      enterEvent.currentTarget = enterEvent.target;\n\n      this.notifyTarget(enterEvent);\n      if (isMouse) {\n        // mouseenter should not bubble\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/Element/mouseenter_event#usage_notes\n        this.notifyTarget(enterEvent, 'mouseenter');\n      }\n\n      if (Node.isNode(enterEvent.target)) {\n        enterEvent.target = enterEvent.target.parentNode;\n      }\n    }\n\n    trackingData.overTargets = e.composedPath();\n\n    this.freeEvent(e);\n    this.freeEvent(enterEvent);\n  };\n\n  onPointerUpOutside = (from: FederatedPointerEvent) => {\n    const trackingData = this.trackingData(from.pointerId);\n    const pressTarget = this.findMountedTarget(\n      trackingData.pressTargetsByButton[from.button],\n    );\n    const e = this.createPointerEvent(from);\n\n    if (pressTarget) {\n      let currentTarget: IEventTarget | null = pressTarget;\n\n      while (currentTarget) {\n        e.currentTarget = currentTarget;\n\n        this.notifyTarget(e, 'pointerupoutside');\n\n        if (e.pointerType === 'touch') {\n          // this.notifyTarget(e, 'touchendoutside');\n        } else if (e.pointerType === 'mouse' || e.pointerType === 'pen') {\n          this.notifyTarget(\n            e,\n            e.button === 2 ? 'rightupoutside' : 'mouseupoutside',\n          );\n        }\n\n        if (Node.isNode(currentTarget)) {\n          currentTarget = currentTarget.parentNode;\n        }\n      }\n\n      delete trackingData.pressTargetsByButton[from.button];\n    }\n\n    this.freeEvent(e);\n  };\n\n  onWheel = (from: FederatedWheelEvent) => {\n    const wheelEvent = this.createWheelEvent(from);\n\n    this.dispatchEvent(wheelEvent);\n    this.freeEvent(wheelEvent);\n  };\n\n  onClick = (from: FederatedPointerEvent) => {\n    if (this.context.config.useNativeClickEvent) {\n      const e = this.createPointerEvent(from);\n      this.dispatchEvent(e);\n      this.freeEvent(e);\n    }\n  };\n\n  onPointerCancel = (from: FederatedPointerEvent) => {\n    const e = this.createPointerEvent(\n      from,\n      undefined,\n      undefined,\n      this.context.config.alwaysTriggerPointerEventOnCanvas\n        ? this.rootTarget\n        : undefined,\n    );\n\n    this.dispatchEvent(e);\n    this.freeEvent(e);\n  };\n\n  dispatchEvent(e: FederatedEvent, type?: string, skipPropagate?: boolean) {\n    // Canvas should skip\n    if (!skipPropagate) {\n      e.propagationStopped = false;\n      e.propagationImmediatelyStopped = false;\n      this.propagate(e, type);\n    } else {\n      // target phase\n      e.eventPhase = e.AT_TARGET;\n      const canvas = (this.rootTarget as IDocument).defaultView || null;\n      e.currentTarget = canvas;\n      this.notifyListeners(e, type);\n    }\n  }\n\n  propagate(e: FederatedEvent, type?: string) {\n    if (!e.target) {\n      return;\n    }\n\n    // [target, parent, root, Canvas]\n    const composedPath = e.composedPath();\n\n    // event flow: capture -> target -> bubbling\n\n    // capture phase\n    e.eventPhase = e.CAPTURING_PHASE;\n    for (let i = composedPath.length - 1; i >= 1; i--) {\n      e.currentTarget = composedPath[i];\n      this.notifyTarget(e, type);\n      if (e.propagationStopped || e.propagationImmediatelyStopped) return;\n    }\n\n    // target phase\n    e.eventPhase = e.AT_TARGET;\n    e.currentTarget = e.target;\n    this.notifyTarget(e, type);\n    if (e.propagationStopped || e.propagationImmediatelyStopped) return;\n\n    // find current target in composed path\n    const index = composedPath.indexOf(e.currentTarget);\n\n    // bubbling phase\n    e.eventPhase = e.BUBBLING_PHASE;\n    for (let i = index + 1; i < composedPath.length; i++) {\n      e.currentTarget = composedPath[i];\n      this.notifyTarget(e, type);\n      if (e.propagationStopped || e.propagationImmediatelyStopped) return;\n    }\n  }\n\n  propagationPath(target: IEventTarget): IEventTarget[] {\n    const propagationPath = [target];\n    const canvas = (this.rootTarget as IDocument).defaultView || null;\n\n    if (canvas && canvas === (target as unknown as ICanvas)) {\n      propagationPath.unshift(canvas.document);\n      return propagationPath;\n    }\n\n    for (let i = 0; i < PROPAGATION_LIMIT && target !== this.rootTarget; i++) {\n      // if (Node.isNode(target) && !target.parentNode) {\n      //   throw new Error('Cannot find propagation path to disconnected target');\n      // }\n\n      if (Node.isNode(target) && target.parentNode) {\n        // [target, parent, parent, root]\n        propagationPath.push(target.parentNode);\n        target = target.parentNode;\n      }\n    }\n\n    if (canvas) {\n      // @ts-ignore\n      propagationPath.push(canvas);\n    }\n\n    return propagationPath;\n  }\n\n  hitTest(position: EventPosition): IEventTarget | null {\n    const { viewportX, viewportY } = position;\n    const { width, height, disableHitTesting } = this.context.config;\n    // outside canvas\n    if (\n      viewportX < 0 ||\n      viewportY < 0 ||\n      viewportX > width ||\n      viewportY > height\n    ) {\n      return null;\n    }\n\n    return (\n      (!disableHitTesting && this.pickHandler(position)) ||\n      this.rootTarget || // return Document\n      null\n    );\n  }\n\n  /**\n   * whether the native event trigger came from Canvas,\n   * should account for HTML shape\n   */\n  isNativeEventFromCanvas(\n    $el: HTMLCanvasElement,\n    nativeEvent: InteractivePointerEvent,\n  ) {\n    let target = nativeEvent?.target as Element;\n    // Get event target inside a web component.\n    // @see https://stackoverflow.com/questions/57963312/get-event-target-inside-a-web-component\n    if (target?.shadowRoot) {\n      target = nativeEvent.composedPath()[0] as Element;\n    }\n\n    if (target) {\n      // from <canvas>\n      if (target === $el) {\n        return true;\n      }\n\n      // from <svg>\n      if ($el && ($el as unknown as HTMLCanvasElement).contains) {\n        return ($el as unknown as HTMLCanvasElement).contains(target as any);\n      }\n    }\n\n    if (nativeEvent?.composedPath) {\n      return nativeEvent.composedPath().indexOf($el as EventTarget) > -1;\n    }\n\n    // account for Touch\n    return false;\n  }\n\n  /**\n   * Find HTML from composed path in native UI event.\n   */\n  private getExistedHTML(event: FederatedEvent): HTML {\n    if (event.nativeEvent.composedPath) {\n      for (const eventTarget of event.nativeEvent.composedPath() as HTMLElement[]) {\n        const existed = this.nativeHTMLMap.get(eventTarget);\n        if (existed) {\n          return existed;\n        }\n      }\n    }\n\n    return null;\n  }\n\n  private pickTarget(\n    event: FederatedPointerEvent | FederatedWheelEvent,\n  ): INode {\n    return this.hitTest({\n      clientX: event.clientX,\n      clientY: event.clientY,\n      viewportX: event.viewportX,\n      viewportY: event.viewportY,\n      x: event.canvasX,\n      y: event.canvasY,\n    }) as INode;\n  }\n\n  private createPointerEvent(\n    from: FederatedPointerEvent,\n    type?: string,\n    target?: IEventTarget,\n    fallbackTarget?: IEventTarget,\n  ): FederatedPointerEvent {\n    const event = this.allocateEvent(FederatedPointerEvent);\n\n    this.copyPointerData(from, event);\n    this.copyMouseData(from, event);\n    this.copyData(from, event);\n\n    event.nativeEvent = from.nativeEvent;\n    event.originalEvent = from;\n\n    const existedHTML = this.getExistedHTML(event);\n    const $el =\n      this.context.contextService.getDomElement() as HTMLCanvasElement;\n    event.target =\n      target ??\n      (existedHTML ||\n        (this.isNativeEventFromCanvas($el, event.nativeEvent) &&\n          this.pickTarget(event)) ||\n        fallbackTarget);\n\n    if (typeof type === 'string') {\n      event.type = type;\n    }\n\n    return event;\n  }\n\n  private createWheelEvent(from: FederatedWheelEvent): FederatedWheelEvent {\n    const event = this.allocateEvent(FederatedWheelEvent);\n\n    this.copyWheelData(from, event);\n    this.copyMouseData(from, event);\n    this.copyData(from, event);\n\n    event.nativeEvent = from.nativeEvent;\n    event.originalEvent = from;\n    const existedHTML = this.getExistedHTML(event);\n\n    const $el =\n      this.context.contextService.getDomElement() as HTMLCanvasElement;\n    event.target =\n      existedHTML ||\n      (this.isNativeEventFromCanvas($el, event.nativeEvent) &&\n        this.pickTarget(event));\n    return event;\n  }\n\n  private trackingData(id: number): TrackingData {\n    if (!this.mappingState.trackingData[id]) {\n      this.mappingState.trackingData[id] = {\n        pressTargetsByButton: {},\n        clicksByButton: {},\n        overTarget: null,\n      };\n    }\n\n    return this.mappingState.trackingData[id];\n  }\n\n  cloneWheelEvent(from: FederatedWheelEvent) {\n    const event = this.allocateEvent(FederatedWheelEvent);\n\n    event.nativeEvent = from.nativeEvent;\n    event.originalEvent = from.originalEvent;\n\n    this.copyWheelData(from, event);\n    this.copyMouseData(from, event);\n    this.copyData(from, event);\n\n    event.target = from.target;\n    event.path = from.composedPath().slice();\n    event.type = from.type;\n\n    return event;\n  }\n\n  clonePointerEvent(\n    from: FederatedPointerEvent,\n    type?: string,\n  ): FederatedPointerEvent {\n    const event = this.allocateEvent(FederatedPointerEvent);\n\n    event.nativeEvent = from.nativeEvent;\n    event.originalEvent = from.originalEvent;\n\n    this.copyPointerData(from, event);\n    this.copyMouseData(from, event);\n    this.copyData(from, event);\n\n    event.target = from.target;\n    event.path = from.composedPath().slice();\n    event.type = type ?? event.type;\n\n    return event;\n  }\n\n  private copyPointerData(\n    from: FederatedPointerEvent,\n    to: FederatedPointerEvent,\n  ) {\n    // if (\n    //   !(\n    //     from instanceof FederatedPointerEvent &&\n    //     to instanceof FederatedPointerEvent\n    //   )\n    // )\n    //   return;\n\n    to.pointerId = from.pointerId;\n    to.width = from.width;\n    to.height = from.height;\n    to.isPrimary = from.isPrimary;\n    to.pointerType = from.pointerType;\n    to.pressure = from.pressure;\n    to.tangentialPressure = from.tangentialPressure;\n    to.tiltX = from.tiltX;\n    to.tiltY = from.tiltY;\n    to.twist = from.twist;\n  }\n\n  private copyMouseData(from: FederatedMouseEvent, to: FederatedMouseEvent) {\n    // if (\n    //   !(\n    //     from instanceof FederatedMouseEvent && to instanceof FederatedMouseEvent\n    //   )\n    // )\n    //   return;\n\n    to.altKey = from.altKey;\n    to.button = from.button;\n    to.buttons = from.buttons;\n    to.ctrlKey = from.ctrlKey;\n    to.metaKey = from.metaKey;\n    to.shiftKey = from.shiftKey;\n    to.client.copyFrom(from.client);\n    to.movement.copyFrom(from.movement);\n    to.canvas.copyFrom(from.canvas);\n    to.screen.copyFrom(from.screen);\n    to.global.copyFrom(from.global);\n    to.offset.copyFrom(from.offset);\n  }\n\n  private copyWheelData(from: FederatedWheelEvent, to: FederatedWheelEvent) {\n    to.deltaMode = from.deltaMode;\n    to.deltaX = from.deltaX;\n    to.deltaY = from.deltaY;\n    to.deltaZ = from.deltaZ;\n  }\n\n  private copyData(from: FederatedEvent, to: FederatedEvent) {\n    to.isTrusted = from.isTrusted;\n    to.timeStamp = clock.now();\n    to.type = from.type;\n    to.detail = from.detail;\n    to.view = from.view;\n    to.page.copyFrom(from.page);\n    to.viewport.copyFrom(from.viewport);\n  }\n\n  private allocateEvent<T extends FederatedEvent>(constructor: {\n    new (boundary: EventService): T;\n  }): T {\n    if (!this.eventPool.has(constructor as any)) {\n      this.eventPool.set(constructor as any, []);\n    }\n\n    // @ts-ignore\n    const event =\n      (this.eventPool.get(constructor as any).pop() as T) ||\n      new constructor(this);\n\n    event.eventPhase = event.NONE;\n    event.currentTarget = null;\n    event.path = [];\n    event.target = null;\n\n    return event;\n  }\n\n  private freeEvent<T extends FederatedEvent>(event: T) {\n    if (event.manager !== this)\n      throw new Error(\n        'It is illegal to free an event not managed by this EventBoundary!',\n      );\n\n    const { constructor } = event;\n\n    if (!this.eventPool.has(constructor as any)) {\n      this.eventPool.set(constructor as any, []);\n    }\n\n    // @ts-ignore\n    this.eventPool.get(constructor as any).push(event);\n  }\n\n  private notifyTarget(e: FederatedEvent, type?: string) {\n    type = type ?? e.type;\n    const key =\n      e.eventPhase === e.CAPTURING_PHASE || e.eventPhase === e.AT_TARGET\n        ? `${type}capture`\n        : type;\n\n    this.notifyListeners(e, key);\n\n    if (e.eventPhase === e.AT_TARGET) {\n      this.notifyListeners(e, type);\n    }\n  }\n\n  private notifyListeners(e: FederatedEvent, type: string) {\n    // hack EventEmitter, stops if the `propagationImmediatelyStopped` flag is set\n    const { emitter } = e.currentTarget;\n    // @ts-ignore\n    const listeners = (emitter._events as EmitterListeners)[type];\n\n    if (!listeners) return;\n\n    if ('fn' in listeners) {\n      if (listeners.once) {\n        emitter.removeListener(type, listeners.fn, undefined, true);\n      }\n      listeners.fn.call(e.currentTarget || listeners.context, e);\n      // listeners.fn.call(listeners.context, e);\n    } else {\n      for (\n        let i = 0;\n        i < listeners.length && !e.propagationImmediatelyStopped;\n        i++\n      ) {\n        if (listeners[i].once) {\n          emitter.removeListener(type, listeners[i].fn, undefined, true);\n        }\n        listeners[i].fn.call(e.currentTarget || listeners[i].context, e);\n        // listeners[i].fn.call(listeners[i].context, e);\n      }\n    }\n  }\n\n  /**\n   * some detached nodes may exist in propagation path, need to skip them\n   */\n  private findMountedTarget(\n    propagationPath: IEventTarget[] | null,\n  ): IEventTarget | null {\n    if (!propagationPath) {\n      return null;\n    }\n\n    let currentTarget = propagationPath[propagationPath.length - 1];\n    for (let i = propagationPath.length - 2; i >= 0; i--) {\n      const target = propagationPath[i];\n      if (\n        target === this.rootTarget ||\n        (Node.isNode(target) && target.parentNode === currentTarget)\n      ) {\n        currentTarget = propagationPath[i];\n      } else {\n        break;\n      }\n    }\n\n    return currentTarget;\n  }\n\n  private getCursor(target: IEventTarget | null) {\n    let tmp: IEventTarget | null = target;\n    while (tmp) {\n      const cursor = isElement(tmp) && tmp.getAttribute('cursor');\n      if (cursor) {\n        return cursor;\n      }\n      tmp = Node.isNode(tmp) && tmp.parentNode;\n    }\n  }\n}\n","import type { CanvasLike } from '..';\nimport { runtime } from '../global-runtime';\n\n/**\n * used in following scenes:\n * - g `ctx.measureText`\n * - g-plugin-canvas-picker `ctx.isPointInPath`\n * - g-plugin-device-renderer `ctx.createLinearGradient` and generate texture\n *\n * @see https://blog.scottlogic.com/2020/03/19/offscreen-canvas.html\n */\nexport class OffscreenCanvasCreator {\n  private canvas: CanvasLike;\n  private context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D;\n\n  /**\n   * @returns new canvas instance\n   */\n  static createCanvas(): HTMLCanvasElement | OffscreenCanvas | null {\n    try {\n      return new window.OffscreenCanvas(0, 0);\n    } catch {\n      //\n    }\n\n    try {\n      return document.createElement('canvas');\n    } catch {\n      //\n    }\n\n    return null;\n  }\n\n  getOrCreateCanvas(\n    offscreenCanvas: CanvasLike,\n    contextAttributes?: CanvasRenderingContext2DSettings,\n  ): CanvasLike {\n    if (this.canvas) {\n      return this.canvas;\n    }\n\n    // user-defined offscreen canvas\n    if (offscreenCanvas || runtime.offscreenCanvas) {\n      this.canvas = offscreenCanvas || runtime.offscreenCanvas;\n      this.context = this.canvas.getContext('2d', {\n        willReadFrequently: true,\n        ...contextAttributes,\n      });\n    } else {\n      try {\n        // OffscreenCanvas2D measureText can be up to 40% faster.\n        this.canvas = new window.OffscreenCanvas(0, 0) as unknown as CanvasLike;\n        this.context = this.canvas.getContext('2d', {\n          willReadFrequently: true,\n          ...contextAttributes,\n        });\n        if (!this.context || !this.context.measureText) {\n          this.canvas = document.createElement('canvas');\n          this.context = this.canvas.getContext('2d');\n        }\n      } catch {\n        this.canvas = document.createElement('canvas');\n        this.context = this.canvas.getContext('2d', {\n          willReadFrequently: true,\n          ...contextAttributes,\n        });\n      }\n    }\n\n    this.canvas.width = 10;\n    this.canvas.height = 10;\n\n    return this.canvas;\n  }\n\n  getOrCreateContext(\n    offscreenCanvas: CanvasLike,\n    contextAttributes?: CanvasRenderingContext2DSettings,\n  ) {\n    if (this.context) {\n      return this.context;\n    }\n\n    this.getOrCreateCanvas(offscreenCanvas, contextAttributes);\n    return this.context;\n  }\n}\n","import type { DisplayObject, Group } from '../display-objects';\n\n/**\n * why we need re-render\n */\nexport enum RenderReason {\n  CAMERA_CHANGED,\n  DISPLAY_OBJECT_CHANGED,\n  NONE,\n}\nexport interface RenderingContext {\n  /**\n   * root of scenegraph\n   */\n  root: Group;\n\n  /**\n   * force rendering at next frame\n   */\n  force: boolean;\n\n  /**\n   * reason of re-render, reset after every renderred frame\n   */\n  renderReasons: Set<RenderReason>;\n\n  renderListCurrentFrame: DisplayObject[];\n\n  unculledEntities: number[];\n\n  dirty: boolean;\n}\n","import type { ICamera } from '../camera';\nimport { SortReason, Sortable } from '../components';\nimport type { DisplayObject } from '../display-objects';\nimport type { CanvasContext, IChildNode, IElement } from '../dom';\nimport type { GlobalRuntime } from '../global-runtime';\nimport type {\n  CanvasConfig,\n  EventPosition,\n  InteractivePointerEvent,\n} from '../types';\nimport {\n  AsyncParallelHook,\n  AsyncSeriesWaterfallHook,\n  SyncHook,\n  SyncWaterfallHook,\n  sortByZIndex,\n  sortedIndex,\n} from '../utils';\nimport type { RenderingContext } from './RenderingContext';\nimport { RenderReason } from './RenderingContext';\n\nexport type RenderingPluginContext = CanvasContext & GlobalRuntime;\n\nexport interface RenderingPlugin {\n  apply: (context: RenderingPluginContext, runtime: GlobalRuntime) => void;\n}\n\nexport interface PickingResult {\n  /**\n   * position in canvas coordinate\n   */\n  position: EventPosition;\n  picked: DisplayObject[];\n  /**\n   * only return the topmost object if there are multiple objects overlapped\n   */\n  topmost?: boolean;\n}\n\n/**\n * Use frame renderer implemented by `g-canvas/svg/webgl`, in every frame we do followings:\n * * update & merge dirty rectangles\n * * begin frame\n * * filter by visible\n * * sort by z-index in scene graph\n * * culling with strategies registered in `g-canvas/webgl`\n * * end frame\n */\nexport class RenderingService {\n  constructor(\n    private globalRuntime: GlobalRuntime,\n    private context: CanvasContext,\n  ) {}\n\n  private inited = false;\n\n  private stats = {\n    /**\n     * total display objects in scenegraph\n     */\n    total: 0,\n    /**\n     * number of display objects need to render in current frame\n     */\n    rendered: 0,\n  };\n\n  private zIndexCounter = 0;\n\n  hooks = {\n    /**\n     * called before any frame rendered\n     */\n    init: new SyncHook<[]>(),\n    initAsync: new AsyncParallelHook<[]>(),\n    /**\n     * only dirty object which has sth changed will be rendered\n     */\n    dirtycheck: new SyncWaterfallHook<[DisplayObject], DisplayObject>(),\n    /**\n     * do culling\n     */\n    cull: new SyncWaterfallHook<[DisplayObject, ICamera], DisplayObject>(),\n    /**\n     * called at beginning of each frame, won't get called if nothing to re-render\n     */\n    beginFrame: new SyncHook<[XRFrame]>(),\n    /**\n     * called before every dirty object get rendered\n     */\n    beforeRender: new SyncHook<[DisplayObject]>(),\n    /**\n     * called when every dirty object rendering even it's culled\n     */\n    render: new SyncHook<[DisplayObject]>(),\n    /**\n     * called after every dirty object get rendered\n     */\n    afterRender: new SyncHook<[DisplayObject]>(),\n    /**\n     * commit - draw the result on the canvas\n     */\n    endFrame: new SyncHook<[XRFrame]>(),\n    destroy: new SyncHook<[]>(),\n    /**\n     * use async but faster method such as GPU-based picking in `g-plugin-device-renderer`\n     */\n    pick: new AsyncSeriesWaterfallHook<[PickingResult], PickingResult>(),\n\n    /**\n     * Unsafe but sync version of pick.\n     */\n    pickSync: new SyncWaterfallHook<[PickingResult], PickingResult>(),\n    /**\n     * used in event system\n     */\n    pointerDown: new SyncHook<[InteractivePointerEvent]>(),\n    pointerUp: new SyncHook<[InteractivePointerEvent]>(),\n    pointerMove: new SyncHook<[InteractivePointerEvent]>(),\n    pointerOut: new SyncHook<[InteractivePointerEvent]>(),\n    pointerOver: new SyncHook<[InteractivePointerEvent]>(),\n    pointerWheel: new SyncHook<[InteractivePointerEvent]>(),\n    pointerCancel: new SyncHook<[InteractivePointerEvent]>(),\n    click: new SyncHook<[InteractivePointerEvent]>(),\n  };\n\n  init(callback: () => void) {\n    const context = { ...this.globalRuntime, ...this.context };\n\n    // register rendering plugins\n    this.context.renderingPlugins.forEach((plugin) => {\n      plugin.apply(context, this.globalRuntime);\n    });\n    this.hooks.init.call();\n\n    if (this.hooks.initAsync.getCallbacksNum() === 0) {\n      this.inited = true;\n      callback();\n    } else {\n      this.hooks.initAsync\n        .promise()\n        .then(() => {\n          this.inited = true;\n          callback();\n        })\n        .catch((err) => {});\n    }\n  }\n\n  getStats() {\n    return this.stats;\n  }\n\n  /**\n   * Meet the following conditions:\n   * * disable DirtyRectangleRendering\n   * * camera changed\n   */\n  disableDirtyRectangleRendering() {\n    const { renderer } = this.context.config;\n    const { enableDirtyRectangleRendering } = renderer.getConfig();\n    return (\n      !enableDirtyRectangleRendering ||\n      this.context.renderingContext.renderReasons.has(\n        RenderReason.CAMERA_CHANGED,\n      )\n    );\n  }\n\n  render(\n    canvasConfig: Partial<CanvasConfig>,\n    frame: XRFrame,\n    rerenderCallback: () => void,\n  ) {\n    this.stats.total = 0;\n    this.stats.rendered = 0;\n    this.zIndexCounter = 0;\n\n    const { renderingContext } = this.context;\n\n    this.globalRuntime.sceneGraphService.syncHierarchy(renderingContext.root);\n    this.globalRuntime.sceneGraphService.triggerPendingEvents();\n\n    if (renderingContext.renderReasons.size && this.inited) {\n      // @ts-ignore\n      renderingContext.dirtyRectangleRenderingDisabled =\n        this.disableDirtyRectangleRendering();\n\n      const onlyCameraChanged =\n        renderingContext.renderReasons.size === 1 &&\n        renderingContext.renderReasons.has(RenderReason.CAMERA_CHANGED);\n      const shouldTriggerRenderHooks =\n        !canvasConfig.disableRenderHooks || !onlyCameraChanged;\n\n      if (shouldTriggerRenderHooks) {\n        this.renderDisplayObject(\n          renderingContext.root,\n          canvasConfig,\n          renderingContext,\n        );\n      }\n\n      this.hooks.beginFrame.call(frame);\n\n      if (shouldTriggerRenderHooks) {\n        renderingContext.renderListCurrentFrame.forEach((object) => {\n          this.hooks.beforeRender.call(object);\n          this.hooks.render.call(object);\n          this.hooks.afterRender.call(object);\n        });\n      }\n\n      this.hooks.endFrame.call(frame);\n\n      renderingContext.renderListCurrentFrame = [];\n      renderingContext.renderReasons.clear();\n\n      rerenderCallback();\n    }\n  }\n\n  private renderDisplayObject(\n    displayObject: DisplayObject,\n    canvasConfig: Partial<CanvasConfig>,\n    renderingContext: RenderingContext,\n  ) {\n    const self = this;\n    const { enableDirtyCheck, enableCulling } =\n      canvasConfig.renderer.getConfig();\n\n    function internalRenderSingleDisplayObject(object: DisplayObject) {\n      // TODO: relayout\n\n      // dirtycheck first\n      const { renderable, sortable } = object;\n      // eslint-disable-next-line no-nested-ternary\n      const objectChanged = enableDirtyCheck\n        ? // @ts-ignore\n          renderable.dirty || renderingContext.dirtyRectangleRenderingDisabled\n          ? object\n          : null\n        : object;\n      let objectToRender = null as typeof objectChanged;\n\n      if (objectChanged) {\n        objectToRender = enableCulling\n          ? self.hooks.cull.call(objectChanged, self.context.camera)\n          : objectChanged;\n\n        if (objectToRender) {\n          self.stats.rendered += 1;\n          renderingContext.renderListCurrentFrame.push(objectToRender);\n        }\n      }\n\n      object.dirty(false);\n      sortable.renderOrder = self.zIndexCounter;\n\n      self.zIndexCounter += 1;\n      self.stats.total += 1;\n\n      // sort is very expensive, use cached result if possible\n      if (sortable.dirty) {\n        self.sort(object, sortable);\n        sortable.dirty = false;\n        sortable.dirtyChildren = [];\n        sortable.dirtyReason = undefined;\n      }\n    }\n\n    const stack = [displayObject];\n\n    while (stack.length > 0) {\n      const currentObject = stack.pop();\n\n      internalRenderSingleDisplayObject(currentObject);\n\n      // recursive rendering its children\n      const objects =\n        currentObject.sortable?.sorted?.length > 0\n          ? currentObject.sortable.sorted\n          : currentObject.childNodes;\n      for (let i = objects.length - 1; i >= 0; i--) {\n        stack.push(objects[i] as unknown as DisplayObject);\n      }\n    }\n  }\n\n  private sort(displayObject: DisplayObject, sortable: Sortable) {\n    if (\n      sortable?.sorted?.length > 0 &&\n      sortable.dirtyReason !== SortReason.Z_INDEX_CHANGED\n    ) {\n      // avoid re-sorting the whole children list\n      sortable.dirtyChildren.forEach((child) => {\n        // remove from sorted list\n        const sortIndex = sortable.sorted.indexOf(child);\n        if (sortIndex > -1) {\n          sortable.sorted.splice(sortIndex, 1);\n        }\n\n        const index = displayObject.childNodes.indexOf(child as IChildNode);\n        if (index > -1) {\n          if (sortable.sorted.length === 0) {\n            sortable.sorted.push(child);\n          } else {\n            const index = sortedIndex(\n              sortable.sorted as IElement[],\n              child as IElement,\n            );\n            sortable.sorted.splice(index, 0, child);\n          }\n        }\n      });\n    } else {\n      sortable.sorted = displayObject.childNodes.slice().sort(sortByZIndex);\n    }\n\n    // When the child elements are changed and sorted, if there are no more stacked elements in the child elements (i.e. zIndex != 0), clear the sort list\n    if (\n      sortable.sorted?.length > 0 &&\n      displayObject.childNodes.filter(\n        (child: IElement) => child.parsedStyle.zIndex,\n      ).length === 0\n    ) {\n      sortable.sorted = [];\n    }\n  }\n\n  destroy() {\n    this.inited = false;\n    this.hooks.destroy.call();\n    this.globalRuntime.sceneGraphService.clearPendingEvents();\n  }\n\n  dirtify() {\n    // need re-render\n    this.context.renderingContext.renderReasons.add(\n      RenderReason.DISPLAY_OBJECT_CHANGED,\n    );\n  }\n}\n","import { isNil } from '@antv/util';\nimport type { IElement } from '../dom/interfaces';\n\nexport interface SceneGraphSelector {\n  selectOne: <R extends IElement, T extends IElement>(\n    query: string,\n    root: R,\n  ) => T | null;\n  selectAll: <R extends IElement, T extends IElement>(\n    query: string,\n    root: R,\n  ) => T[];\n  is: <T extends IElement>(query: string, element: T) => boolean;\n}\n\nconst ATTRIBUTE_REGEXP = /\\[\\s*(.*)=(.*)\\s*\\]/;\n\n/**\n * support the following DOM API:\n * * getElementById\n * * getElementsByClassName\n * * getElementsByName\n * * getElementsByTag\n * * querySelector\n * * querySelectorAll\n */\nexport class DefaultSceneGraphSelector implements SceneGraphSelector {\n  selectOne<R extends IElement, T extends IElement>(\n    query: string,\n    root: R,\n  ): T | null {\n    if (query.startsWith('.')) {\n      return root.find((node) => {\n        // return !node.shadow && node.id === query.substring(1);\n        return (\n          (node?.classList || []).indexOf(this.getIdOrClassname(query)) > -1\n        );\n      });\n    }\n    if (query.startsWith('#')) {\n      // getElementById('id')\n      return root.find((node) => {\n        // return !node.shadow && node.id === query.substring(1);\n        return node.id === this.getIdOrClassname(query);\n      });\n    }\n    if (query.startsWith('[')) {\n      const { name, value } = this.getAttribute(query);\n      if (name) {\n        // getElementByName();\n        return root.find(\n          (node) =>\n            (root as unknown as T) !== node &&\n            (name === 'name'\n              ? node.name === value\n              : this.attributeToString(node, name) === value),\n        );\n      }\n      return null;\n    }\n    // getElementsByTag('circle');\n    return root.find(\n      (node) => (root as unknown as T) !== node && node.nodeName === query,\n    );\n  }\n\n  selectAll<R extends IElement, T extends IElement>(\n    query: string,\n    root: R,\n  ): T[] {\n    // only support `[name=\"${name}\"]` `.className` `#id`\n    if (query.startsWith('.')) {\n      // getElementsByClassName('className');\n      // should not include itself\n      return root.findAll(\n        (node) =>\n          (root as unknown as T) !== node &&\n          (node?.classList || []).indexOf(this.getIdOrClassname(query)) > -1,\n      );\n    }\n    if (query.startsWith('#')) {\n      return root.findAll(\n        (node) =>\n          (root as unknown as T) !== node &&\n          node.id === this.getIdOrClassname(query),\n      );\n    }\n    if (query.startsWith('[')) {\n      const { name, value } = this.getAttribute(query);\n      if (name) {\n        // getElementsByName();\n        return root.findAll(\n          (node) =>\n            (root as unknown as T) !== node &&\n            (name === 'name'\n              ? node.name === value\n              : this.attributeToString(node, name) === value),\n        );\n      }\n      return [];\n    }\n    // getElementsByTag('circle');\n    return root.findAll(\n      (node) => (root as unknown as T) !== node && node.nodeName === query,\n    );\n  }\n\n  is<T extends IElement>(query: string, node: T): boolean {\n    // a simple `matches` implementation\n    if (query.startsWith('.')) {\n      return node.className === this.getIdOrClassname(query);\n    }\n    if (query.startsWith('#')) {\n      return node.id === this.getIdOrClassname(query);\n    }\n    if (query.startsWith('[')) {\n      const { name, value } = this.getAttribute(query);\n      return name === 'name'\n        ? node.name === value\n        : this.attributeToString(node, name) === value;\n    }\n    return node.nodeName === query;\n  }\n\n  private getIdOrClassname(query: string): string {\n    return query.substring(1);\n  }\n\n  private getAttribute(query: string): Record<string, string> {\n    const matches = query.match(ATTRIBUTE_REGEXP);\n    let name = '';\n    let value = '';\n    if (matches && matches.length > 2) {\n      name = matches[1].replace(/\"/g, '');\n      value = matches[2].replace(/\"/g, '');\n    }\n    return { name, value };\n  }\n\n  private attributeToString(node: IElement, name: string): string {\n    if (!node.getAttribute) {\n      return '';\n    }\n\n    const value = node.getAttribute(name);\n\n    if (isNil(value)) {\n      return '';\n    }\n\n    if (value.toString) {\n      return value.toString();\n    }\n\n    return '';\n  }\n}\n","import type RBush from 'rbush';\nimport EventEmitter from 'eventemitter3';\nimport type { GlobalRuntime } from '..';\nimport type { ICamera } from '../camera';\nimport type { RBushNodeAABB } from '../components';\nimport type { DisplayObject } from '../display-objects';\nimport type {\n  ContextService,\n  EventService,\n  RenderingContext,\n  RenderingPlugin,\n  RenderingService,\n} from '../services';\nimport type { AABB, PointLike, Rectangle } from '../shapes';\nimport type {\n  BaseStyleProps,\n  CanvasConfig,\n  InteractivePointerEvent,\n  Shape,\n  TypeEasingFunction,\n} from '../types';\nimport type { CustomElementRegistry } from './CustomElementRegistry';\nimport type { FederatedEvent } from './FederatedEvent';\n\n/**\n * built-in events for element\n * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationEvent\n *\n * TODO: use MutationObserver instead\n * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\n */\nexport enum ElementEvent {\n  // --- @see https://developer.mozilla.org/en-US/docs/Web/API/MutationEvent\n  /**\n   * @see https://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMAttrModified\n   */\n  ATTR_MODIFIED = 'DOMAttrModified',\n\n  /**\n   * it has been inserted\n   * @see https://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMNodeInserted\n   */\n  INSERTED = 'DOMNodeInserted',\n\n  /**\n   * @see https://www.w3.org/TR/DOM-Level-3-Events/#domnodeinsertedintodocument\n   */\n  MOUNTED = 'DOMNodeInsertedIntoDocument',\n\n  /**\n   * it is being removed\n   * @see https://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMNodeRemoved\n   */\n  REMOVED = 'removed',\n\n  /**\n   * @see https://www.w3.org/TR/DOM-Level-3-Events/#domnoderemovedfromdocument\n   */\n  UNMOUNTED = 'DOMNodeRemovedFromDocument',\n  // ---\n\n  REPARENT = 'reparent',\n\n  DESTROY = 'destroy',\n\n  BOUNDS_CHANGED = 'bounds-changed',\n\n  CULLED = 'culled',\n}\n\n// #region EventTarget\nexport interface IEventTarget {\n  emitter: EventEmitter;\n\n  // on: (\n  //   type: string,\n  //   listener: EventListenerOrEventListenerObject | ((...args: any[]) => void),\n  //   options?: boolean | AddEventListenerOptions,\n  // ) => void;\n  addEventListener: (\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions,\n  ) => void;\n\n  // off: (\n  //   type: string,\n  //   listener: EventListenerOrEventListenerObject | ((...args: any[]) => void),\n  //   options?: boolean | AddEventListenerOptions,\n  // ) => void;\n  removeEventListener: (\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions,\n  ) => void;\n  // removeAllEventListeners: () => void;\n\n  /**\n   * @param skipPropagate - The default value is `false`. If true, the event is only triggered globally (note that the global is not the object itself), skipping the event propagation process. In addition, if the object has been removed from the global, the event is only triggered on the object itself.\n   * @param dispatchToSelf - The default value is `false`. If true, the event will be triggered on the object itself.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent\n   */\n  dispatchEvent: <T extends FederatedEvent>(\n    e: T,\n    skipPropagate?: boolean,\n    dispatchToSelf?: boolean,\n  ) => boolean;\n\n  // emit: (eventName: string, object: object) => void;\n}\n\ninterface EventListener {\n  (evt: FederatedEvent): void;\n}\ninterface EventListenerObject {\n  handleEvent(object: FederatedEvent): void;\n}\n\nexport type EventListenerOrEventListenerObject =\n  | EventListener\n  | EventListenerObject;\n\n// #region Node\nexport interface INode extends IEventTarget {\n  shadow: boolean;\n  /**\n   * Returns node's node document's document base URL.\n   */\n  readonly baseURI: string;\n  /**\n   * Returns the children.\n   */\n  readonly childNodes: IChildNode[];\n  /**\n   * Returns the first child.\n   */\n  readonly firstChild: IChildNode | null;\n  /**\n   * Returns true if node is connected and false otherwise.\n   */\n  isConnected: boolean;\n  /**\n   * Returns the last child.\n   */\n  readonly lastChild: IChildNode | null;\n\n  /**\n   * Returns the next sibling.\n   */\n  readonly nextSibling: IChildNode | null;\n  /**\n   * Returns a string appropriate for the type of node.\n   */\n  readonly nodeName: string;\n  /**\n   * Returns the type of node.\n   */\n  readonly nodeType: number;\n  nodeValue: string | null;\n  /**\n   * Returns the node document. Returns null for documents.\n   */\n  ownerDocument: IDocument | null;\n  /**\n   * Returns the parent element.\n   */\n  readonly parentElement: IElement | null;\n  /**\n   * Returns the parent.\n   */\n  parentNode: (INode & IParentNode) | null;\n  /**\n   * Returns the previous sibling.\n   */\n  readonly previousSibling: IChildNode | null;\n  textContent: string | null;\n  appendChild: <T extends INode>(newChild: T, index?: number) => T;\n  /**\n   * Returns a copy of node. If deep is true, the copy also includes the node's descendants.\n   */\n  cloneNode: (deep?: boolean) => INode;\n  /**\n   * Returns a bitmask indicating the position of other relative to node.\n   */\n  compareDocumentPosition: (other: INode) => number;\n  /**\n   * Returns true if other is an inclusive descendant of node, and false otherwise.\n   */\n  contains: (other: INode | null) => boolean;\n  /**\n   * Returns node's root.\n   */\n  getRootNode: (options?: GetRootNodeOptions) => INode;\n  /**\n   * Returns node's ancestor.\n   */\n  getAncestor: (n: number) => INode | null;\n  /**\n   * iterate current node and its descendants\n   * @param callback - callback to execute for each node, return false to break\n   */\n  forEach: (callback: (o: INode) => void | boolean) => void;\n  /**\n   * Returns whether node has children.\n   */\n  hasChildNodes: () => boolean;\n  insertBefore: <T extends INode>(newChild: T, refChild: INode | null) => T;\n  isDefaultNamespace: (namespace: string | null) => boolean;\n  /**\n   * Returns whether node and otherNode have the same properties.\n   */\n  isEqualNode: (otherNode: INode | null) => boolean;\n  isSameNode: (otherNode: INode | null) => boolean;\n  lookupNamespaceURI: (prefix: string | null) => string | null;\n  lookupPrefix: (namespace: string | null) => string | null;\n  /**\n   * Removes empty exclusive Text nodes and concatenates the data of remaining contiguous exclusive Text nodes into the first of their nodes.\n   */\n  normalize: () => void;\n  removeChild: <T extends INode>(oldChild: T) => T;\n  replaceChild: <T extends INode>(newChild: INode, oldChild: T) => T;\n\n  destroyed: boolean;\n  /**\n   * Destroy itself.\n   */\n  destroy: () => void;\n}\n\nexport interface IParentNode {\n  readonly childElementCount: number;\n  /**\n   * Returns the child elements.\n   */\n  readonly children: IElement[];\n  /**\n   * Returns the first child that is an element, and null otherwise.\n   */\n  readonly firstElementChild: IElement | null;\n  /**\n   * Returns the last child that is an element, and null otherwise.\n   */\n  readonly lastElementChild: IElement | null;\n  /**\n   * Inserts nodes after the last child of node, while replacing strings in nodes with equivalent Text nodes.\n   *\n   * Throws a \"HierarchyRequestError\" DOMException if the constraints of the node tree are violated.\n   */\n  append: (...nodes: INode[]) => void;\n  /**\n   * Inserts nodes before the first child of node, while replacing strings in nodes with equivalent Text nodes.\n   *\n   * Throws a \"HierarchyRequestError\" DOMException if the constraints of the node tree are violated.\n   */\n  prepend: (...nodes: INode[]) => void;\n  /**\n   * Returns the first element that is a descendant of node that matches selectors.\n   */\n  querySelector: <E extends IElement = IElement>(selectors: string) => E | null;\n  /**\n   * Returns all element descendants of node that match selectors.\n   */\n  querySelectorAll: <E extends IElement = IElement>(selectors: string) => E[];\n  /**\n   * Similar to querySelector, use custom filter instead of selectors.\n   */\n  find: <E extends IElement = IElement>(\n    filter: (node: E) => boolean,\n  ) => E | null;\n  /**\n   * Similar to querySelectorAll, use custom filter instead of selectors.\n   */\n  findAll: <E extends IElement = IElement>(filter: (node: E) => boolean) => E[];\n}\n\nexport interface IChildNode extends INode {\n  /**\n   * Inserts nodes just after node, while replacing strings in nodes with equivalent Text nodes.\n   *\n   * Throws a \"HierarchyRequestError\" DOMException if the constraints of the node tree are violated.\n   */\n  after: (...nodes: INode[]) => void;\n  /**\n   * Inserts nodes just before node, while replacing strings in nodes with equivalent Text nodes.\n   *\n   * Throws a \"HierarchyRequestError\" DOMException if the constraints of the node tree are violated.\n   */\n  before: (...nodes: INode[]) => void;\n  /**\n   * Removes node.\n   */\n  remove: () => void;\n  /**\n   * Replaces node with nodes, while replacing strings in nodes with equivalent Text nodes.\n   *\n   * Throws a \"HierarchyRequestError\" DOMException if the constraints of the node tree are violated.\n   */\n  replaceWith: (...nodes: INode[]) => void;\n}\n\nexport interface DisplayObjectConfig<StyleProps> {\n  /**\n   * element's identifier, must be unique in a document.\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/id\n   */\n  id?: string;\n\n  name?: string;\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/className\n   */\n  class?: string;\n  className?: string;\n\n  /**\n   * all styles properties, not read-only\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/style\n   */\n  style?: StyleProps;\n  initialParsedStyle?: any;\n  /**\n   * compatible with G 3.0\n   * @alias style\n   * @deprecated\n   */\n  attrs?: StyleProps;\n\n  type?: Shape | string;\n\n  /**\n   * @deprecated use `style.zIndex` instead\n   */\n  zIndex?: number;\n  /**\n   * @deprecated use `style.visibility = 'visible'` instead\n   */\n  visible?: boolean;\n  /**\n   * compatible with G 3.0\n   * @alias interactive\n   * @deprecated\n   */\n  capture?: boolean;\n\n  /**\n   * enable interaction events for the DisplayObject\n   * @deprecated use `style.pointerEvents = 'auto'` instead\n   */\n  interactive?: boolean;\n}\n\n// #region Element\nexport interface IElement<StyleProps = any, ParsedStyleProps = any>\n  extends INode,\n    IChildNode,\n    IParentNode {\n  /**\n   * Returns the value of element's id content attribute. Can be set to change it.\n   */\n  id: string;\n\n  /**\n   * Returns the qualified name.\n   */\n  tagName: string;\n\n  name: string;\n\n  /**\n   * Returns the value of element's class content attribute. Can be set to change it.\n   */\n  className: string;\n  classList: string[];\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/attributes\n   */\n  attributes: StyleProps;\n\n  /**\n   * compatible with `style`\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/style\n   */\n  style: StyleProps & ICSSStyleDeclaration<StyleProps>;\n  parsedStyle: ParsedStyleProps;\n\n  getElementById: <E extends IElement = IElement>(id: string) => E | null;\n  getElementsByName: <E extends IElement = IElement>(name: string) => E[];\n  getElementsByClassName: <E extends IElement = IElement>(\n    className: string,\n  ) => E[];\n  getElementsByTagName: <E extends IElement = IElement>(tagName: string) => E[];\n\n  scrollLeft: number;\n  scrollTop: number;\n  clientLeft: number;\n  clientTop: number;\n\n  getGeometryBounds(): AABB;\n  getRenderBounds(): AABB;\n  getBounds(): AABB;\n  getLocalBounds(): AABB;\n  getBoundingClientRect(): Rectangle;\n  getClientRects(): Rectangle[];\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute\n   */\n  setAttribute: <Key extends keyof StyleProps>(\n    attributeName: Key,\n    value: StyleProps[Key],\n    force?: boolean,\n    memoize?: boolean,\n  ) => void;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttribute\n   */\n  getAttribute: (\n    attributeName: keyof StyleProps,\n  ) => StyleProps[keyof StyleProps] | undefined;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/removeAttribute\n   */\n  removeAttribute: (attributeName: keyof StyleProps) => void;\n\n  hasAttribute: (qualifiedName: string) => boolean;\n}\n\n// #region AnimationTimeline\nexport interface IAnimationTimeline {\n  currentTime: number | null;\n  destroy: () => void;\n  play: (\n    target: IElement,\n    keyframes: Keyframe[] | PropertyIndexedKeyframes | null,\n    options?: number | KeyframeAnimationOptions,\n  ) => IAnimation;\n  restart: () => boolean;\n  getAnimations: () => IAnimation[];\n}\n\nexport interface IAnimation {\n  effect: IKeyframeEffect;\n  timeline: IAnimationTimeline;\n  id: string;\n  pending: boolean;\n  playState: AnimationPlayState;\n  ready: Promise<this>;\n  finished: Promise<this>;\n  onfinish: ((this: this, ev: AnimationPlaybackEvent) => any) | null;\n  oncancel: ((this: this, ev: AnimationPlaybackEvent) => any) | null;\n  onframe: ((this: this, ev: AnimationPlaybackEvent) => any) | null;\n  currentTime: number;\n  startTime: number;\n  playbackRate: number;\n  totalDuration: number;\n  play: () => void;\n  pause: () => void;\n  finish: () => void;\n  cancel: () => void;\n  reverse: () => void;\n  updatePlaybackRate: (playbackRate: number) => void;\n  tick: (timelineTime: number, isAnimationFrame: boolean) => void;\n}\n\nexport interface IAnimationEffectTiming extends EffectTiming {\n  easingFunction: TypeEasingFunction;\n}\n\nexport interface IKeyframeEffect {\n  composite: CompositeOperation;\n  iterationComposite: IterationCompositeOperation;\n  // pseudoElement: string | null;\n  target: IElement | null;\n\n  animation: IAnimation | null;\n\n  timing: IAnimationEffectTiming;\n\n  normalizedKeyframes: ComputedKeyframe[];\n\n  applyInterpolations: () => void;\n\n  update: (localTime: number | null) => boolean;\n\n  getKeyframes: () => ComputedKeyframe[];\n\n  setKeyframes: (\n    keyframes: Keyframe[] | PropertyIndexedKeyframes | null,\n  ) => void;\n\n  getComputedTiming: () => ComputedEffectTiming;\n\n  getTiming: () => EffectTiming;\n\n  updateTiming: (timing?: OptionalEffectTiming) => void;\n}\n\n// #region Document\nexport interface IDocument extends INode, IParentNode {\n  /**\n   * Returns the Window object of the active document.\n   */\n  readonly defaultView: ICanvas | null;\n\n  /**\n   * Gets a reference to the root node of the document.\n   */\n  readonly documentElement: IElement;\n\n  readonly ownerDocument: null;\n  readonly timeline: IAnimationTimeline;\n\n  /**\n   * Creates an instance of the element for the specified tag.\n   */\n  createElement: <\n    T extends DisplayObject<StyleProps>,\n    StyleProps extends BaseStyleProps,\n  >(\n    tagName: string,\n    options: DisplayObjectConfig<StyleProps>,\n  ) => T;\n\n  elementFromPoint: (x: number, y: number) => Promise<DisplayObject>;\n  elementsFromPoint: (x: number, y: number) => Promise<DisplayObject[]>;\n  elementsFromBBox: (\n    minX: number,\n    minY: number,\n    maxX: number,\n    maxY: number,\n  ) => DisplayObject[];\n}\n\n// #region CSSStyleDeclaration\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/API/CSSStyleDeclaration\n */\nexport interface ICSSStyleDeclaration<StyleProps> {\n  setProperty: <Key extends keyof StyleProps>(\n    propertyName: Key,\n    value: StyleProps[Key],\n    priority?: string,\n  ) => void;\n  getPropertyValue: (\n    propertyName: keyof StyleProps,\n  ) => StyleProps[keyof StyleProps] | undefined;\n  removeProperty: (propertyName: keyof StyleProps) => void;\n  item: (index: number) => string;\n}\n\nexport interface CanvasContext {\n  config: CanvasConfig;\n  camera: ICamera;\n\n  /**\n   * ContextServiceContribution\n   */\n  ContextService: new (\n    context: GlobalRuntime & CanvasContext,\n  ) => ContextService<unknown>;\n\n  contextService: ContextService<unknown>;\n  renderingService: RenderingService;\n  eventService: EventService;\n  rBushRoot: RBush<RBushNodeAABB>;\n  renderingContext: RenderingContext;\n  renderingPlugins: RenderingPlugin[];\n}\n\n// #region Canvas\nexport interface IWindow {\n  /** https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry */\n  customElements: CustomElementRegistry;\n  /** https://developer.mozilla.org/en-US/docs/Web/API/Window/devicePixelRatio */\n  devicePixelRatio: number;\n  /** https://developer.mozilla.org/en-US/docs/Web/API/DedicatedWorkerGlobalScope/requestAnimationFrame  */\n  requestAnimationFrame: typeof requestAnimationFrame;\n  /** https://developer.mozilla.org/en-US/docs/Web/API/DedicatedWorkerGlobalScope/cancelAnimationFrame */\n  cancelAnimationFrame: typeof cancelAnimationFrame;\n  /**\n   * replace `new window.Image()`\n   */\n  createImage: () => HTMLImageElement;\n  /**\n   * whether the runtime supports TouchEvent?\n   * if not, the event system won't trigger touch events like `touchstart`\n   */\n  supportsTouchEvents: boolean;\n  /**\n   * whether the runtime supports PointerEvent?\n   * if not, the event system won't trigger pointer events like `pointerdown`\n   */\n  supportsPointerEvents: boolean;\n  /**\n   * is this native event a TouchEvent?\n   */\n\n  isTouchEvent: (event: InteractivePointerEvent) => event is TouchEvent;\n  /**\n   * is this native event a MouseEvent?\n   */\n  isMouseEvent: (event: InteractivePointerEvent) => event is MouseEvent;\n}\n\nexport interface ICanvas extends IWindow, IEventTarget {\n  document: IDocument;\n  context: CanvasContext;\n\n  getConfig: () => Partial<CanvasConfig>;\n  getCamera: () => ICamera;\n  getContextService: () => ContextService<unknown>;\n  getRenderingService: () => RenderingService;\n  getEventService: () => EventService;\n\n  mountChildren: (parent: INode) => void;\n  unmountChildren: (parent: INode) => void;\n  mountFragment: (fragment: INode) => void;\n\n  client2Viewport: (client: PointLike) => PointLike;\n  viewport2Client: (viewport: PointLike) => PointLike;\n  canvas2Viewport: (canvas: PointLike) => PointLike;\n  viewport2Canvas: (viewport: PointLike) => PointLike;\n\n  render: () => void;\n  destroy: (destroyScenegraph?: boolean) => void;\n  resize: (width: number, height: number) => void;\n}\n","import { FederatedEvent } from './FederatedEvent';\nimport type { ElementEvent, IElement } from './interfaces';\n\nexport class MutationEvent extends FederatedEvent {\n  static readonly ADDITION: number = 2;\n  static readonly MODIFICATION: number = 1;\n  static readonly REMOVAL: number = 3;\n\n  constructor(\n    typeArg: ElementEvent,\n    public relatedNode: IElement,\n    public prevValue: any,\n    public newValue: any,\n    public attrName: string,\n    public attrChange: number,\n    public prevParsedValue: any,\n    public newParsedValue: any,\n  ) {\n    super(null);\n\n    this.type = typeArg;\n  }\n}\n","import { isNumber } from '@antv/util';\nimport { mat4, quat, vec2, vec3 } from 'gl-matrix';\nimport {\n  SortReason,\n  type Transform,\n  updateLocalTransform,\n  updateWorldTransform,\n} from '../components';\nimport type { CustomElement, DisplayObject } from '../display-objects';\nimport type { Element, IChildNode, IElement, INode, IParentNode } from '../dom';\nimport { CustomEvent } from '../dom/CustomEvent';\nimport { ElementEvent } from '../dom/interfaces';\nimport { MutationEvent } from '../dom/MutationEvent';\nimport { GlobalRuntime, runtime } from '../global-runtime';\nimport { AABB, Rectangle } from '../shapes';\nimport { Shape } from '../types';\nimport { findClosestClipPathTarget, isInFragment } from '../utils';\nimport type { SceneGraphService } from './interfaces';\n\nconst reparentEvent = new MutationEvent(\n  ElementEvent.REPARENT,\n  null,\n  '',\n  '',\n  '',\n  0,\n  '',\n  '',\n);\n\n// Object pooling\n/** do not modify this objects */\nconst $vec2Zero = vec2.create();\n/** do not modify this objects */\nconst $vec3Zero = vec3.create();\n/** do not modify this objects */\nconst $vec3One = vec3.fromValues(1, 1, 1);\n/** do not modify this objects */\nconst $mat4Identity = mat4.create();\n\n/** shared objects */\nconst $vec2 = vec2.create();\n/** shared objects */\nconst $vec3 = vec3.create();\n/** shared objects */\nconst $mat4 = mat4.create();\n/** shared objects */\nconst $quat = quat.create();\n\nconst $setLocalTransform_1 = vec3.create();\nconst $setLocalTransform_2 = quat.create();\nconst $setLocalTransform_3 = vec3.create();\nconst $setLocalPosition = vec3.create();\nconst $setPosition_1 = vec3.create();\nconst $setPosition_ParentInvertMatrix = mat4.create();\nconst $setEulerAngles_InvParentRot = quat.create();\nconst $rotateLocal = quat.create();\nconst $rotate_ParentInvertRotation = quat.create();\n\nconst $triggerPendingEvents_detail = { affectChildren: true };\n\n/**\n * update transform in scene graph\n *\n * @see https://community.khronos.org/t/scene-graphs/50542/7\n */\nexport class DefaultSceneGraphService implements SceneGraphService {\n  // target -> affectChildren\n  private pendingEvents = new Map<DisplayObject, boolean>();\n  private boundsChangedEvent = new CustomEvent(ElementEvent.BOUNDS_CHANGED);\n\n  constructor(private runtime: GlobalRuntime) {}\n\n  matches<T extends IElement>(query: string, root: T) {\n    return this.runtime.sceneGraphSelector.is(query, root);\n  }\n\n  querySelector<R extends IElement, T extends IElement>(\n    query: string,\n    root: R,\n  ): T | null {\n    return this.runtime.sceneGraphSelector.selectOne<R, T>(query, root);\n  }\n\n  querySelectorAll<R extends IElement, T extends IElement>(\n    query: string,\n    root: R,\n  ): T[] {\n    return this.runtime.sceneGraphSelector.selectAll<R, T>(query, root);\n    // .filter((node) => !node.shadow);\n  }\n\n  attach<C extends INode, P extends INode & IParentNode>(\n    child: C,\n    parent: P,\n    index?: number,\n  ) {\n    let detached = false;\n    if (child.parentNode) {\n      detached = child.parentNode !== parent;\n      this.detach(child);\n    }\n\n    const isChildFragment = child.nodeName === Shape.FRAGMENT;\n    const isAttachToFragment = isInFragment(parent);\n\n    child.parentNode = parent;\n\n    const nodes = isChildFragment\n      ? (child.childNodes as DisplayObject[])\n      : [child];\n\n    if (isNumber(index)) {\n      nodes.forEach((node) => {\n        parent.childNodes.splice(index, 0, node);\n        node.parentNode = parent;\n      });\n    } else {\n      nodes.forEach((node) => {\n        parent.childNodes.push(node);\n        node.parentNode = parent;\n      });\n    }\n\n    // parent needs re-sort\n    const { sortable } = parent as unknown as Element;\n    if (\n      sortable?.sorted?.length ||\n      sortable.dirty ||\n      (child as unknown as Element).parsedStyle.zIndex\n    ) {\n      if (sortable.dirtyChildren.indexOf(child) === -1) {\n        sortable.dirtyChildren.push(child);\n      }\n      // if (sortable) {\n      // only child has z-Index\n      sortable.dirty = true;\n      sortable.dirtyReason = SortReason.ADDED;\n    }\n\n    if (isAttachToFragment) return;\n\n    if (isChildFragment) {\n      this.dirtifyFragment(child);\n    } else {\n      const transform = (child as unknown as Element).transformable;\n      if (transform) {\n        this.dirtyWorldTransform(child, transform);\n      }\n    }\n\n    if (detached) {\n      const enableCancelEventPropagation =\n        parent.ownerDocument?.defaultView?.getConfig()?.future\n          ?.experimentalCancelEventPropagation === true;\n\n      child.dispatchEvent(\n        reparentEvent,\n        enableCancelEventPropagation,\n        enableCancelEventPropagation,\n      );\n    }\n  }\n\n  detach<C extends INode>(child: C) {\n    if (!child.parentNode) {\n      return;\n    }\n\n    const transform = (child as unknown as Element).transformable;\n    // if (transform) {\n    //   const worldTransform = this.getWorldTransform(child, transform);\n    //   mat4.getScaling(transform.localScale, worldTransform);\n    //   mat4.getTranslation(transform.localPosition, worldTransform);\n    //   mat4.getRotation(transform.localRotation, worldTransform);\n    //   transform.localDirtyFlag = true;\n    // }\n\n    // parent needs re-sort\n    const { sortable } = child.parentNode as Element;\n    // if (sortable) {\n    if (\n      sortable?.sorted?.length ||\n      (child as unknown as Element).style?.zIndex\n    ) {\n      if (sortable.dirtyChildren.indexOf(child) === -1) {\n        sortable.dirtyChildren.push(child);\n      }\n      sortable.dirty = true;\n      sortable.dirtyReason = SortReason.REMOVED;\n    }\n\n    const index = child.parentNode.childNodes.indexOf(\n      child as unknown as IChildNode & INode,\n    );\n    if (index > -1) {\n      child.parentNode.childNodes.splice(index, 1);\n    }\n\n    if (transform) {\n      this.dirtyWorldTransform(child, transform);\n    }\n    child.parentNode = null;\n  }\n\n  // #region local-transform ----------------------------------------------------------------\n\n  getLocalPosition(element: INode) {\n    return (element as Element).transformable.localPosition;\n  }\n\n  getLocalRotation(element: INode) {\n    return (element as Element).transformable.localRotation;\n  }\n\n  getLocalScale(element: INode) {\n    return (element as Element).transformable.localScale;\n  }\n\n  getLocalSkew(element: INode) {\n    return (element as Element).transformable.localSkew;\n  }\n\n  getLocalTransform(element: INode) {\n    const transform = (element as Element).transformable;\n    updateLocalTransform(transform);\n\n    return transform.localTransform;\n  }\n\n  /**\n   * move to position in local space\n   */\n  setLocalPosition(element: INode, position: vec3 | vec2, dirtify = true) {\n    const transform = (element as Element).transformable;\n\n    $setLocalPosition[0] = position[0];\n    $setLocalPosition[1] = position[1];\n    $setLocalPosition[2] = position[2] ?? 0;\n\n    if (vec3.equals(transform.localPosition, $setLocalPosition)) {\n      return;\n    }\n\n    vec3.copy(transform.localPosition, $setLocalPosition);\n    if (dirtify) {\n      this.dirtyLocalTransform(element, transform);\n    }\n  }\n\n  /**\n   * translate in local space\n   *\n   * @example\n   * ```\n   * translateLocal(x, y, z)\n   * translateLocal(vec3(x, y, z))\n   * ```\n   */\n  translateLocal(element: INode, translation: vec3 | number, y = 0, z = 0) {\n    if (typeof translation === 'number') {\n      translation = vec3.fromValues(translation, y, z);\n    }\n    const transform = (element as Element).transformable;\n    if (vec3.equals(translation, $vec3Zero)) return;\n\n    vec3.transformQuat(translation, translation, transform.localRotation);\n    vec3.add(transform.localPosition, transform.localPosition, translation);\n\n    this.dirtyLocalTransform(element, transform);\n  }\n\n  setLocalRotation(\n    element: INode,\n    rotation: quat | number,\n    y?: number,\n    z?: number,\n    w?: number,\n    dirtify = true,\n  ) {\n    if (typeof rotation === 'number') {\n      rotation = quat.set($quat, rotation, y, z, w);\n    }\n    const transform = (element as Element).transformable;\n    quat.copy(transform.localRotation, rotation);\n    if (dirtify) {\n      this.dirtyLocalTransform(element, transform);\n    }\n  }\n\n  /**\n   * rotate in local space\n   * @see @see https://docs.microsoft.com/en-us/windows/win32/api/directxmath/nf-directxmath-xmquaternionrotationrollpitchyaw\n   */\n  rotateLocal(element: INode, degrees: vec3 | number, y = 0, z = 0) {\n    if (typeof degrees === 'number') {\n      degrees = vec3.fromValues(degrees, y, z);\n    }\n    const transform = (element as Element).transformable;\n    quat.fromEuler($rotateLocal, degrees[0], degrees[1], degrees[2]);\n    quat.mul(transform.localRotation, transform.localRotation, $rotateLocal);\n\n    this.dirtyLocalTransform(element, transform);\n  }\n\n  setLocalScale(element: INode, scaling: vec3 | vec2, dirtify = true) {\n    const transform = (element as Element).transformable;\n\n    vec3.set(\n      $vec3,\n      scaling[0],\n      scaling[1],\n      scaling[2] ?? transform.localScale[2],\n    );\n\n    if (vec3.equals($vec3, transform.localScale)) {\n      return;\n    }\n\n    vec3.copy(transform.localScale, $vec3);\n    if (dirtify) {\n      this.dirtyLocalTransform(element, transform);\n    }\n  }\n\n  /**\n   * scale in local space\n   */\n  scaleLocal(element: INode, scaling: vec3 | vec2) {\n    const transform = (element as Element).transformable;\n    vec3.multiply(\n      transform.localScale,\n      transform.localScale,\n      vec3.set($vec3, scaling[0], scaling[1], scaling[2] ?? 1),\n    );\n    this.dirtyLocalTransform(element, transform);\n  }\n\n  setLocalSkew(\n    element: INode,\n    skew: vec2 | number,\n    y?: number,\n    dirtify = true,\n  ) {\n    if (typeof skew === 'number') {\n      skew = vec2.set($vec2, skew, y);\n    }\n    const transform = (element as Element).transformable;\n    vec2.copy(transform.localSkew, skew);\n    if (dirtify) {\n      this.dirtyLocalTransform(element, transform);\n    }\n  }\n\n  /**\n   * set euler angles(degrees) in local space\n   */\n  setLocalEulerAngles(\n    element: INode,\n    degrees: vec3 | number,\n    y = 0,\n    z = 0,\n    dirtify = true,\n  ) {\n    if (typeof degrees === 'number') {\n      degrees = vec3.fromValues(degrees, y, z);\n    }\n    const transform = (element as Element).transformable;\n    quat.fromEuler(transform.localRotation, degrees[0], degrees[1], degrees[2]);\n    if (dirtify) {\n      this.dirtyLocalTransform(element, transform);\n    }\n  }\n\n  setLocalTransform(element: INode, transform: mat4) {\n    const t = mat4.getTranslation($setLocalTransform_1, transform);\n    const r = mat4.getRotation($setLocalTransform_2, transform);\n    const s = mat4.getScaling($setLocalTransform_3, transform);\n    this.setLocalScale(element, s, false);\n    this.setLocalPosition(element, t, false);\n    this.setLocalRotation(element, r, undefined, undefined, undefined, false);\n\n    this.dirtyLocalTransform(element, (element as Element).transformable);\n  }\n\n  resetLocalTransform(element: INode) {\n    this.setLocalScale(element, $vec3One, false);\n    this.setLocalPosition(element, $vec3Zero, false);\n    this.setLocalEulerAngles(element, $vec3Zero, undefined, undefined, false);\n    this.setLocalSkew(element, $vec2Zero, undefined, false);\n\n    this.dirtyLocalTransform(element, (element as Element).transformable);\n  }\n\n  // #endregion local-transform\n  // #region transform ----------------------------------------------------------------\n\n  getPosition(element: INode) {\n    const transform = (element as Element).transformable;\n    return mat4.getTranslation(\n      transform.position,\n      this.getWorldTransform(element, transform),\n    );\n  }\n\n  getRotation(element: INode) {\n    const transform = (element as Element).transformable;\n    return mat4.getRotation(\n      transform.rotation,\n      this.getWorldTransform(element, transform),\n    );\n  }\n\n  getScale(element: INode) {\n    const transform = (element as Element).transformable;\n    return mat4.getScaling(\n      transform.scaling,\n      this.getWorldTransform(element, transform),\n    );\n  }\n\n  getOrigin(element: INode) {\n    (element as Element).getGeometryBounds();\n    return (element as Element).transformable.origin;\n  }\n\n  getWorldTransform(\n    element: INode,\n    transform: Transform = (element as Element).transformable,\n  ) {\n    if (!transform.localDirtyFlag && !transform.dirtyFlag) {\n      return transform.worldTransform;\n    }\n\n    if (element.parentNode && (element.parentNode as Element).transformable) {\n      this.getWorldTransform(element.parentNode);\n    }\n\n    this.internalUpdateTransform(element as Element);\n\n    return transform.worldTransform;\n  }\n\n  /**\n   * move to position in world space\n   *\n   * 对应 g 原版的 move/moveTo\n   * @see https://github.com/antvis/g/blob/master/packages/g-base/src/abstract/element.ts#L684-L689\n   */\n  setPosition(element: INode, position: vec3 | vec2) {\n    const transform = (element as Element).transformable;\n\n    $setPosition_1[0] = position[0];\n    $setPosition_1[1] = position[1];\n    $setPosition_1[2] = position[2] ?? 0;\n\n    if (vec3.equals(this.getPosition(element), $setPosition_1)) {\n      return;\n    }\n\n    vec3.copy(transform.position, $setPosition_1);\n\n    if (\n      element.parentNode === null ||\n      !(element.parentNode as Element).transformable\n    ) {\n      vec3.copy(transform.localPosition, $setPosition_1);\n    } else {\n      const parentTransform = (element.parentNode as Element).transformable;\n      mat4.copy(\n        $setPosition_ParentInvertMatrix,\n        parentTransform.worldTransform,\n      );\n      mat4.invert(\n        $setPosition_ParentInvertMatrix,\n        $setPosition_ParentInvertMatrix,\n      );\n      vec3.transformMat4(\n        transform.localPosition,\n        $setPosition_1,\n        $setPosition_ParentInvertMatrix,\n      );\n    }\n\n    this.dirtyLocalTransform(element, transform);\n  }\n\n  /**\n   * translate in world space\n   *\n   * @example\n   * ```\n   * translate(x, y, z)\n   * translate(vec3(x, y, z))\n   * ```\n   *\n   * 对应 g 原版的 translate 2D\n   * @see https://github.com/antvis/g/blob/master/packages/g-base/src/abstract/element.ts#L665-L676\n   */\n  translate(element: INode, translation: vec3 | number, y = 0, z = 0) {\n    if (typeof translation === 'number') {\n      translation = vec3.set($vec3, translation, y, z);\n    }\n    if (vec3.equals(translation, $vec3Zero)) return;\n\n    vec3.add($vec3, this.getPosition(element), translation);\n\n    this.setPosition(element, $vec3);\n  }\n\n  setRotation(\n    element: INode,\n    rotation: quat | number,\n    y?: number,\n    z?: number,\n    w?: number,\n  ) {\n    const transform = (element as Element).transformable;\n    if (typeof rotation === 'number') {\n      rotation = quat.fromValues(rotation, y, z, w);\n    }\n\n    if (\n      element.parentNode === null ||\n      !(element.parentNode as Element).transformable\n    ) {\n      this.setLocalRotation(element, rotation);\n    } else {\n      const parentRot = this.getRotation(element.parentNode);\n\n      quat.copy($quat, parentRot);\n      quat.invert($quat, $quat);\n      quat.multiply(transform.localRotation, $quat, rotation);\n      quat.normalize(transform.localRotation, transform.localRotation);\n\n      this.dirtyLocalTransform(element, transform);\n    }\n  }\n\n  /**\n   * rotate in world space\n   */\n  rotate(element: INode, degrees: vec3 | number, y = 0, z = 0) {\n    if (typeof degrees === 'number') {\n      degrees = vec3.fromValues(degrees, y, z);\n    }\n\n    const transform = (element as Element).transformable;\n\n    if (\n      element.parentNode === null ||\n      !(element.parentNode as Element).transformable\n    ) {\n      this.rotateLocal(element, degrees);\n    } else {\n      const rotation = $quat;\n      quat.fromEuler(rotation, degrees[0], degrees[1], degrees[2]);\n      const rot = this.getRotation(element);\n      const parentRot = this.getRotation(element.parentNode);\n\n      quat.copy($rotate_ParentInvertRotation, parentRot);\n      quat.invert($rotate_ParentInvertRotation, $rotate_ParentInvertRotation);\n      quat.multiply(rotation, $rotate_ParentInvertRotation, rotation);\n      quat.multiply(transform.localRotation, rotation, rot);\n      quat.normalize(transform.localRotation, transform.localRotation);\n\n      this.dirtyLocalTransform(element, transform);\n    }\n  }\n\n  /**\n   * same as pivot in Pixi.js\n   *\n   * @see https://stackoverflow.com/questions/40748452/how-to-change-css-transform-origin-but-preserve-transformation\n   */\n  setOrigin(element: INode, origin: vec3 | number, y = 0, z = 0) {\n    if (typeof origin === 'number') {\n      origin = [origin, y, z];\n    }\n    const transform = (element as Element).transformable;\n    if (\n      origin[0] === transform.origin[0] &&\n      origin[1] === transform.origin[1] &&\n      origin[2] === transform.origin[2]\n    ) {\n      return;\n    }\n\n    const originVec = transform.origin;\n\n    // const delta = vec3.subtract(vec3.create(), origin, originVec);\n    // vec3.add(transform.localPosition, transform.localPosition, delta);\n\n    // update origin\n    originVec[0] = origin[0];\n    originVec[1] = origin[1];\n    originVec[2] = origin[2] || 0;\n    this.dirtyLocalTransform(element, transform);\n  }\n\n  /**\n   * set euler angles(degrees) in world space\n   */\n  setEulerAngles(element: INode, degrees: vec3 | number, y = 0, z = 0) {\n    if (typeof degrees === 'number') {\n      degrees = vec3.fromValues(degrees, y, z);\n    }\n\n    const transform = (element as Element).transformable;\n\n    if (\n      element.parentNode === null ||\n      !(element.parentNode as Element).transformable\n    ) {\n      this.setLocalEulerAngles(element, degrees);\n    } else {\n      quat.fromEuler(\n        transform.localRotation,\n        degrees[0],\n        degrees[1],\n        degrees[2],\n      );\n      const parentRotation = this.getRotation(element.parentNode);\n      quat.copy(\n        $setEulerAngles_InvParentRot,\n        quat.invert($quat, parentRotation),\n      );\n      quat.mul(\n        transform.localRotation,\n        transform.localRotation,\n        $setEulerAngles_InvParentRot,\n      );\n\n      this.dirtyLocalTransform(element, transform);\n    }\n  }\n\n  // #endregion transform\n  // #region bbox ----------------------------------------------------------------\n\n  private getTransformedGeometryBounds(\n    element: INode,\n    render = false,\n    existedAABB?: AABB,\n  ): AABB | null {\n    const bounds = this.getGeometryBounds(element, render);\n    if (!AABB.isEmpty(bounds)) {\n      const aabb = existedAABB || new AABB();\n      aabb.setFromTransformedAABB(bounds, this.getWorldTransform(element));\n      return aabb;\n    }\n    return null;\n  }\n\n  /**\n   * won't account for children\n   */\n  getGeometryBounds(element: INode, render = false): AABB {\n    const { geometry } = element as Element;\n\n    if (geometry.dirty) {\n      runtime.styleValueRegistry.updateGeometry(element as DisplayObject);\n    }\n\n    const bounds = render\n      ? geometry.renderBounds\n      : geometry.contentBounds || null;\n    // return (bounds && new AABB(bounds.center, bounds.halfExtents)) || new AABB();\n    return bounds || new AABB();\n  }\n\n  /**\n   * account for children in world space\n   */\n  getBounds(element: INode, render = false): AABB {\n    const { renderable } = element as Element;\n\n    if (!renderable.boundsDirty && !render && renderable.bounds) {\n      return renderable.bounds;\n    }\n\n    if (!renderable.renderBoundsDirty && render && renderable.renderBounds) {\n      return renderable.renderBounds;\n    }\n\n    // reuse existed if possible\n    const existedAABB = render ? renderable.renderBounds : renderable.bounds;\n\n    // reset with geometry's aabb\n    let aabb: AABB = this.getTransformedGeometryBounds(\n      element,\n      render,\n      existedAABB,\n    );\n\n    // merge children's aabbs\n    const children = element.childNodes as IElement[];\n    children.forEach((child) => {\n      const childBounds = this.getBounds(child, render);\n      if (childBounds) {\n        if (!aabb) {\n          aabb = existedAABB || new AABB();\n          aabb.update(childBounds.center, childBounds.halfExtents);\n        } else {\n          aabb.add(childBounds);\n        }\n      }\n    });\n\n    if (!aabb) {\n      aabb = new AABB();\n    }\n\n    if (render) {\n      // FIXME: account for clip path\n      const clipped = findClosestClipPathTarget(element as DisplayObject);\n      if (clipped) {\n        // use bounds under world space\n        const clipPathBounds = clipped.parsedStyle.clipPath.getBounds(render);\n        if (!aabb) {\n          aabb.update(clipPathBounds.center, clipPathBounds.halfExtents);\n        } else if (clipPathBounds) {\n          aabb = clipPathBounds.intersection(aabb);\n        }\n      }\n    }\n\n    if (render) {\n      renderable.renderBounds = aabb;\n      renderable.renderBoundsDirty = false;\n    } else {\n      renderable.bounds = aabb;\n      renderable.boundsDirty = false;\n    }\n\n    return aabb;\n  }\n\n  /**\n   * account for children in local space\n   */\n  getLocalBounds(element: INode): AABB {\n    if (element.parentNode) {\n      let parentInvert = $mat4Identity;\n\n      if ((element.parentNode as Element).transformable) {\n        parentInvert = mat4.invert(\n          $mat4,\n          this.getWorldTransform(element.parentNode),\n        );\n      }\n\n      const bounds = this.getBounds(element);\n\n      if (!AABB.isEmpty(bounds)) {\n        const localBounds = new AABB();\n        localBounds.setFromTransformedAABB(bounds, parentInvert);\n        return localBounds;\n      }\n    }\n\n    return this.getBounds(element);\n  }\n\n  getBoundingClientRect(element: INode): Rectangle {\n    let aabb: AABB;\n    const bounds = this.getGeometryBounds(element);\n    if (!AABB.isEmpty(bounds)) {\n      aabb = new AABB();\n      // apply transformation to aabb\n      aabb.setFromTransformedAABB(bounds, this.getWorldTransform(element));\n    }\n\n    // calc context's offset\n    const bbox = element.ownerDocument?.defaultView\n      ?.getContextService()\n      .getBoundingClientRect();\n\n    if (aabb) {\n      const [left, top] = aabb.getMin();\n      const [right, bottom] = aabb.getMax();\n\n      return new Rectangle(\n        left + (bbox?.left || 0),\n        top + (bbox?.top || 0),\n        right - left,\n        bottom - top,\n      );\n    }\n\n    return new Rectangle(bbox?.left || 0, bbox?.top || 0, 0, 0);\n  }\n\n  // #endregion bbox\n  // #region other ----------------------------------------------------------------\n\n  private internalUpdateTransform(element: Element) {\n    const parentTransform = (element.parentNode as Element)?.transformable;\n\n    updateLocalTransform(element.transformable);\n    updateWorldTransform(element.transformable, parentTransform);\n  }\n\n  private internalUpdateElement(\n    element: Element,\n    ancestors: {\n      node: INode;\n      transformDirty: boolean;\n      shapeUpdated: boolean;\n    }[],\n  ): boolean {\n    const enableAttributeUpdateOptimization =\n      element.ownerDocument?.defaultView?.getConfig()?.future\n        ?.experimentalAttributeUpdateOptimization === true;\n    const parent = ancestors[ancestors.length - 1];\n    // parent nodes affect child nodes\n    const transformDirty =\n      parent?.transformDirty || element.transformable?.localDirtyFlag;\n    if (element.transformable) {\n      element.transformable.dirtyFlag ||= transformDirty;\n    }\n\n    this.internalUpdateTransform(element);\n\n    if (transformDirty) {\n      element.dirty?.(true, true);\n    }\n    const shapeUpdated =\n      element.renderable?.boundsDirty || element.renderable?.renderBoundsDirty;\n\n    // The transformation matrix of the child node changes,\n    // which will cause the bounding box data of the ancestor node to become outdated.\n    if (\n      (transformDirty || shapeUpdated) &&\n      parent?.shapeUpdated === false &&\n      enableAttributeUpdateOptimization\n    ) {\n      let tempElIndex = ancestors.length - 1;\n      while (tempElIndex >= 0) {\n        const tempEl = ancestors[tempElIndex];\n        if (tempEl.shapeUpdated) {\n          break;\n        }\n\n        (tempEl.node as Element).dirty?.(true, true);\n        tempEl.shapeUpdated = true;\n\n        tempElIndex -= 1;\n      }\n    }\n\n    return transformDirty;\n  }\n\n  syncHierarchy(rootNode: INode) {\n    // console.log('syncHierarchy');\n    const stack: INode[] = [rootNode];\n    const ancestors: {\n      node: INode;\n      transformDirty: boolean;\n      shapeUpdated: boolean;\n    }[] = rootNode.parentNode\n      ? [\n          {\n            node: rootNode.parentNode,\n            transformDirty:\n              (rootNode.parentNode as Element).transformable?.localDirtyFlag ||\n              (rootNode.parentNode as Element).transformable?.dirtyFlag,\n            shapeUpdated: false,\n          },\n        ]\n      : [];\n\n    while (stack.length > 0) {\n      const node = stack.pop();\n      let parent = ancestors[ancestors.length - 1];\n      while (ancestors.length > 0 && node.parentNode !== parent.node) {\n        parent = ancestors.pop();\n      }\n\n      const transformDirty = this.internalUpdateElement(\n        node as Element,\n        ancestors,\n      );\n\n      if (node.childNodes.length > 0) {\n        for (let i = node.childNodes.length - 1; i >= 0; i--) {\n          stack.push(node.childNodes[i]);\n        }\n\n        ancestors.push({\n          node,\n          transformDirty,\n          shapeUpdated: false,\n        });\n      }\n    }\n  }\n\n  dirtyLocalTransform(element: INode, transform: Transform) {\n    if (isInFragment(element)) return;\n\n    if (!transform.localDirtyFlag) {\n      transform.localDirtyFlag = true;\n      if (!transform.dirtyFlag) {\n        this.dirtyWorldTransform(element, transform);\n      }\n    }\n  }\n\n  dirtyWorldTransform(element: INode, transform: Transform) {\n    this.dirtifyWorldInternal(element, transform);\n    this.dirtyToRoot(element, true);\n  }\n\n  private dirtifyWorldInternal(element: INode, transform: Transform) {\n    const enableAttributeUpdateOptimization =\n      element.ownerDocument?.defaultView?.getConfig()?.future\n        ?.experimentalAttributeUpdateOptimization === true;\n\n    if (!transform.dirtyFlag) {\n      transform.dirtyFlag = true;\n      (element as Element).dirty(true, true);\n\n      if (!enableAttributeUpdateOptimization) {\n        element.childNodes.forEach((child) => {\n          const childTransform = (child as Element).transformable;\n\n          this.dirtifyWorldInternal(child as IElement, childTransform);\n        });\n      }\n    }\n  }\n\n  dirtyToRoot(element: INode, affectChildren = false) {\n    let p = element;\n    const enableAttributeUpdateOptimization =\n      element.ownerDocument?.defaultView?.getConfig()?.future\n        ?.experimentalAttributeUpdateOptimization === true;\n\n    while (p) {\n      (p as Element).dirty?.(true, true);\n\n      if (enableAttributeUpdateOptimization) {\n        break;\n      } else {\n        p = p.parentNode;\n      }\n    }\n\n    if (affectChildren) {\n      element.forEach((e: Element) => {\n        e.dirty?.(true, true);\n      });\n    }\n\n    this.informDependentDisplayObjects(element as DisplayObject);\n\n    this.pendingEvents.set(element as DisplayObject, affectChildren);\n  }\n\n  dirtifyFragment(element: INode) {\n    const transform = (element as Element).transformable;\n    if (transform) {\n      transform.dirtyFlag = true;\n      transform.localDirtyFlag = true;\n    }\n    (element as Element).dirty?.(true, true);\n\n    const length = element.childNodes.length;\n    for (let i = 0; i < length; i++) {\n      this.dirtifyFragment(element.childNodes[i]);\n    }\n\n    if (element.nodeName === Shape.FRAGMENT) {\n      this.pendingEvents.set(element as DisplayObject, false);\n    }\n  }\n\n  triggerPendingEvents() {\n    const triggered = new Set<DisplayObject>();\n    let enableCancelEventPropagation: boolean;\n    let enableAttributeUpdateOptimization: boolean;\n\n    const trigger = (element: DisplayObject, detail) => {\n      if (\n        !element.isConnected ||\n        triggered.has(element) ||\n        (element.nodeName as Shape) === Shape.FRAGMENT\n      ) {\n        return;\n      }\n\n      this.boundsChangedEvent.detail = detail;\n      this.boundsChangedEvent.target = element;\n      if (element.isMutationObserved) {\n        element.dispatchEvent(this.boundsChangedEvent);\n      } else {\n        if (enableCancelEventPropagation === undefined) {\n          enableCancelEventPropagation =\n            element.ownerDocument.defaultView?.getConfig()?.future\n              ?.experimentalCancelEventPropagation === true;\n        }\n\n        element.ownerDocument.defaultView.dispatchEvent(\n          this.boundsChangedEvent,\n          true,\n          enableCancelEventPropagation,\n        );\n      }\n\n      triggered.add(element);\n    };\n\n    this.pendingEvents.forEach((affectChildren, element) => {\n      if ((element.nodeName as Shape) === Shape.FRAGMENT) {\n        return;\n      }\n\n      if (enableAttributeUpdateOptimization === undefined) {\n        enableAttributeUpdateOptimization =\n          element.ownerDocument?.defaultView?.getConfig()?.future\n            ?.experimentalAttributeUpdateOptimization === true;\n      }\n\n      $triggerPendingEvents_detail.affectChildren = affectChildren;\n      if (enableAttributeUpdateOptimization) {\n        trigger(element, $triggerPendingEvents_detail);\n      } else {\n        // eslint-disable-next-line no-lonely-if\n        if (affectChildren) {\n          element.forEach((e: DisplayObject) => {\n            trigger(e, $triggerPendingEvents_detail);\n          });\n        } else {\n          trigger(element, $triggerPendingEvents_detail);\n        }\n      }\n    });\n\n    triggered.clear();\n    this.clearPendingEvents();\n  }\n\n  clearPendingEvents() {\n    this.pendingEvents.clear();\n  }\n\n  private displayObjectDependencyMap: WeakMap<\n    DisplayObject,\n    Record<string, DisplayObject[]>\n  > = new WeakMap();\n  updateDisplayObjectDependency(\n    name: string,\n    oldPath: DisplayObject,\n    newPath: DisplayObject,\n    object: DisplayObject,\n  ) {\n    // clear ref to old clip path\n    if (oldPath && oldPath !== newPath) {\n      const oldDependencyMap = this.displayObjectDependencyMap.get(oldPath);\n      if (oldDependencyMap && oldDependencyMap[name]) {\n        const index = oldDependencyMap[name].indexOf(object);\n        oldDependencyMap[name].splice(index, 1);\n      }\n    }\n\n    if (newPath) {\n      let newDependencyMap = this.displayObjectDependencyMap.get(newPath);\n      if (!newDependencyMap) {\n        this.displayObjectDependencyMap.set(newPath, {});\n        newDependencyMap = this.displayObjectDependencyMap.get(newPath);\n      }\n      if (!newDependencyMap[name]) {\n        newDependencyMap[name] = [];\n      }\n      newDependencyMap[name].push(object);\n    }\n  }\n\n  informDependentDisplayObjects(object: DisplayObject) {\n    const dependencyMap = this.displayObjectDependencyMap.get(object);\n    if (!dependencyMap) {\n      return;\n    }\n\n    const enableCancelEventPropagation =\n      object.ownerDocument?.defaultView?.getConfig()?.future\n        ?.experimentalCancelEventPropagation;\n\n    Object.keys(dependencyMap).forEach((name) => {\n      dependencyMap[name].forEach((target) => {\n        this.dirtyToRoot(target, true);\n\n        target.dispatchEvent(\n          new MutationEvent(\n            ElementEvent.ATTR_MODIFIED,\n            target as IElement,\n            this,\n            this,\n            name,\n            MutationEvent.MODIFICATION,\n            this,\n            this,\n          ),\n          enableCancelEventPropagation,\n          enableCancelEventPropagation,\n        );\n\n        if (target.isCustomElement && target.isConnected) {\n          if ((target as CustomElement<any>).attributeChangedCallback) {\n            (target as CustomElement<any>).attributeChangedCallback(\n              name,\n              this,\n              this,\n            );\n          }\n        }\n      });\n    });\n  }\n}\n","/**\n * A classic LRU (Least Recently Used) cache implementation.\n * It evicts the least recently used item when the cache is full.\n *\n * It uses a Map for O(1) key-based access\n * to maintain the usage order of items.\n *\n * 通过利用 JavaScript 内置 Map 的特性（按插入顺序迭代），我们不再需要手动维护一个双向链表\n */\nexport default class LRU<T> {\n  private readonly capacity: number;\n  private cache: Map<string | number, T>;\n\n  constructor(capacity: number) {\n    if (capacity <= 0) {\n      throw new Error('LRU capacity must be a positive number.');\n    }\n    this.capacity = capacity;\n    // Using a Map directly simplifies the implementation significantly.\n    // A Map in modern JS engines iterates in insertion order, which is exactly what we need.\n    this.cache = new Map<string | number, T>();\n  }\n\n  /**\n   * Retrieves an item from the cache. Marks the item as recently used.\n   * @param key The key of the item to retrieve.\n   * @returns The value of the item, or undefined if not found.\n   */\n  public get(key: string | number): T | undefined {\n    if (!this.cache.has(key)) {\n      return undefined;\n    }\n\n    // Get the value.\n    const value = this.cache.get(key);\n\n    // Mark as recently used by deleting and re-setting the key.\n    // This moves the key to the end of the Map's internal order.\n    this.cache.delete(key);\n    this.cache.set(key, value);\n\n    return value;\n  }\n\n  /**\n   * Adds or updates an item in the cache. Marks the item as recently used.\n   * If the cache is full, it removes the least recently used item.\n   * @param key The key of the item.\n   * @param value The value of the item.\n   */\n  public put(key: string | number, value: T): void {\n    // If the key already exists, delete it first to ensure it's moved to the end.\n    if (this.cache.has(key)) {\n      this.cache.delete(key);\n    }\n\n    // Add the new item. It will be the most recently used.\n    this.cache.set(key, value);\n\n    // Check if the cache has exceeded its capacity.\n    if (this.cache.size > this.capacity) {\n      // Evict the least recently used item, which is the first one in the Map's iteration order.\n      const leastRecentlyUsedKey = this.cache.keys().next().value;\n      this.cache.delete(leastRecentlyUsedKey);\n    }\n  }\n\n  /**\n   * Returns the current number of items in the cache.\n   */\n  public len(): number {\n    return this.cache.size;\n  }\n\n  /**\n   * Clears all items from the cache.\n   */\n  public clear(): void {\n    this.cache.clear();\n  }\n}\n","import { CanvasLike, GlobalRuntime } from '..';\nimport type { ParsedTextStyleProps } from '../display-objects';\nimport { Rectangle } from '../shapes';\nimport { toFontString } from '../utils';\nimport LRU from '../utils/LRU';\n\nexport interface TextMetrics {\n  font: string;\n  width: number;\n  height: number;\n  lines: string[];\n  lineWidths: number[];\n  lineHeight: number;\n  maxLineWidth: number;\n  fontProperties: IFontMetrics;\n  lineMetrics: Rectangle[];\n}\n\ninterface IFontMetrics {\n  ascent: number;\n  descent: number;\n  fontSize: number;\n}\n\nconst TEXT_METRICS = {\n  MetricsString: '|ÉqÅ',\n  BaselineSymbol: 'M',\n  BaselineMultiplier: 1.4,\n  HeightMultiplier: 2,\n  Newlines: [\n    0x000a, // line feed\n    0x000d, // carriage return\n  ],\n  BreakingSpaces: [\n    0x0009, // character tabulation\n    0x0020, // space\n    0x2000, // en quad\n    0x2001, // em quad\n    0x2002, // en space\n    0x2003, // em space\n    0x2004, // three-per-em space\n    0x2005, // four-per-em space\n    0x2006, // six-per-em space\n    0x2008, // punctuation space\n    0x2009, // thin space\n    0x200a, // hair space\n    0x205f, // medium mathematical space\n    0x3000, // ideographic space\n  ],\n};\n\nconst LATIN_REGEX =\n  /[a-zA-Z0-9\\u00C0-\\u00D6\\u00D8-\\u00f6\\u00f8-\\u00ff!\"#$%&'()*+,-./:;]/;\n\n// Line breaking rules in CJK (Kinsoku Shori)\n// Refer from https://en.wikipedia.org/wiki/Line_breaking_rules_in_East_Asian_languages\nconst regexCannotStartZhCn =\n  /[!%),.:;?\\]}¢°·'\"\"†‡›℃∶、。〃〆〕〗〞﹚﹜！＂％＇），．：；？！］｝～]/;\nconst regexCannotEndZhCn = /[$(£¥·'\"〈《「『【〔〖〝﹙﹛＄（．［｛￡￥]/;\nconst regexCannotStartZhTw =\n  /[!),.:;?\\]}¢·–—'\"•\"、。〆〞〕〉》」︰︱︲︳﹐﹑﹒﹓﹔﹕﹖﹘﹚﹜！），．：；？︶︸︺︼︾﹀﹂﹗］｜｝､]/;\nconst regexCannotEndZhTw = /[([{£¥'\"‵〈《「『〔〝︴﹙﹛（｛︵︷︹︻︽︿﹁﹃﹏]/;\nconst regexCannotStartJaJp =\n  /[)\\]｝〕〉》」』】〙〗〟'\"｠»ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻‐゠–〜?!‼⁇⁈⁉・、:;,。.]/;\nconst regexCannotEndJaJp = /[([｛〔〈《「『【〘〖〝'\"｟«—...‥〳〴〵]/;\nconst regexCannotStartKoKr =\n  /[!%),.:;?\\]}¢°'\"†‡℃〆〈《「『〕！％），．：；？］｝]/;\nconst regexCannotEndKoKr = /[$([{£¥'\"々〇〉》」〔＄（［｛｠￥￦#]/;\n\nconst regexCannotStart = new RegExp(\n  `${regexCannotStartZhCn.source}|${regexCannotStartZhTw.source}|${regexCannotStartJaJp.source}|${regexCannotStartKoKr.source}`,\n);\nconst regexCannotEnd = new RegExp(\n  `${regexCannotEndZhCn.source}|${regexCannotEndZhTw.source}|${regexCannotEndJaJp.source}|${regexCannotEndKoKr.source}`,\n);\n\n/**\n * Borrow from pixi/packages/text/src/TextMetrics.ts\n */\nexport class TextService {\n  constructor(private runtime: GlobalRuntime) {\n    this.charWidthCache = new LRU<LRU<number>>(100);\n  }\n\n  /**\n   * font metrics cache\n   */\n  private fontMetricsCache: Record<string, IFontMetrics> = {};\n\n  /**\n   * A global cache for character widths, keyed by font string.\n   * e.g. { '16px Arial': { 'a': 8, 'b': 9 } }\n   */\n  private charWidthCache: LRU<LRU<number>>;\n\n  /**\n   * Calculates the ascent, descent and fontSize of a given font-style.\n   */\n  measureFont(font: string, offscreenCanvas: CanvasLike): IFontMetrics {\n    // as this method is used for preparing assets, don't recalculate things if we don't need to\n    if (this.fontMetricsCache[font]) {\n      return this.fontMetricsCache[font];\n    }\n    const properties: IFontMetrics = {\n      ascent: 0,\n      descent: 0,\n      fontSize: 0,\n    };\n\n    const canvas =\n      this.runtime.offscreenCanvasCreator.getOrCreateCanvas(offscreenCanvas);\n    const context = this.runtime.offscreenCanvasCreator.getOrCreateContext(\n      offscreenCanvas,\n      {\n        willReadFrequently: true,\n      },\n    );\n\n    context.font = font;\n    const metricsString =\n      TEXT_METRICS.MetricsString + TEXT_METRICS.BaselineSymbol;\n    const width = Math.ceil(context.measureText(metricsString).width);\n    let baseline = Math.ceil(\n      context.measureText(TEXT_METRICS.BaselineSymbol).width,\n    );\n    const height = TEXT_METRICS.HeightMultiplier * baseline;\n    baseline = (baseline * TEXT_METRICS.BaselineMultiplier) | 0;\n    // @ts-ignore\n    canvas.width = width;\n    // @ts-ignore\n    canvas.height = height;\n    context.fillStyle = '#f00';\n    context.fillRect(0, 0, width, height);\n    context.font = font;\n    context.textBaseline = 'alphabetic';\n    context.fillStyle = '#000';\n    context.fillText(metricsString, 0, baseline);\n    const imagedata = context.getImageData(0, 0, width || 1, height || 1).data;\n    const pixels = imagedata.length;\n    const line = width * 4;\n    let i = 0;\n    let idx = 0;\n    let stop = false;\n    // ascent. scan from top to bottom until we find a non red pixel\n    for (i = 0; i < baseline; ++i) {\n      for (let j = 0; j < line; j += 4) {\n        if (imagedata[idx + j] !== 255) {\n          stop = true;\n          break;\n        }\n      }\n      if (!stop) {\n        idx += line;\n      } else {\n        break;\n      }\n    }\n    properties.ascent = baseline - i;\n    idx = pixels - line;\n    stop = false;\n    // descent. scan from bottom to top until we find a non red pixel\n    for (i = height; i > baseline; --i) {\n      for (let j = 0; j < line; j += 4) {\n        if (imagedata[idx + j] !== 255) {\n          stop = true;\n          break;\n        }\n      }\n      if (!stop) {\n        idx -= line;\n      } else {\n        break;\n      }\n    }\n    properties.descent = i - baseline;\n    properties.fontSize = properties.ascent + properties.descent;\n\n    this.fontMetricsCache[font] = properties;\n    return properties;\n  }\n\n  measureText(\n    text: string,\n    parsedStyle: ParsedTextStyleProps,\n    offscreenCanvas: CanvasLike,\n  ): TextMetrics {\n    const {\n      fontSize = 16,\n      wordWrap = false,\n      lineHeight: strokeHeight,\n      lineWidth = 1,\n      textBaseline = 'alphabetic',\n      textAlign = 'start',\n      letterSpacing = 0,\n      textPath,\n      textPathSide,\n      textPathStartOffset,\n      // dropShadow = 0,\n      // dropShadowDistance = 0,\n      leading = 0,\n    } = parsedStyle;\n\n    const font = toFontString(parsedStyle);\n\n    const fontProperties = this.measureFont(font, offscreenCanvas);\n    // fallback in case UA disallow canvas data extraction\n    if (fontProperties.fontSize === 0) {\n      fontProperties.fontSize = fontSize;\n      fontProperties.ascent = fontSize;\n    }\n\n    const context =\n      this.runtime.offscreenCanvasCreator.getOrCreateContext(offscreenCanvas);\n    context.font = font;\n\n    // no overflowing by default\n    parsedStyle.isOverflowing = false;\n    const outputText = wordWrap\n      ? this.wordWrap(text, parsedStyle, offscreenCanvas)\n      : text;\n\n    const lines = outputText.split(/(?:\\r\\n|\\r|\\n)/);\n    const lineWidths = new Array<number>(lines.length);\n    let maxLineWidth = 0;\n\n    // account for textPath\n    if (textPath) {\n      const totalPathLength = textPath.getTotalLength();\n\n      // const startingPoint = textPath.getPoint(0);\n\n      for (let i = 0; i < lines.length; i++) {\n        let positionInPath: number;\n        const width =\n          context.measureText(lines[i]).width +\n          (lines[i].length - 1) * letterSpacing;\n        const reverse = textPathSide === 'right';\n\n        // TODO: should we support textPathStartOffsetY?\n        switch (textAlign) {\n          case 'left':\n          case 'start':\n            positionInPath = reverse ? totalPathLength - width : 0;\n            break;\n          case 'center':\n          case 'middle':\n            positionInPath = (totalPathLength - width) / 2;\n            break;\n          case 'right':\n          case 'end':\n            positionInPath = reverse ? 0 : totalPathLength - width;\n            break;\n        }\n\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        positionInPath += textPathStartOffset * (reverse ? -1 : 1);\n        // for (\n        //   let i = reverse ? lines[0].length - 1 : 0;\n        //   reverse ? i >= 0 : i < lines[0].length;\n        //   reverse ? i-- : i++\n        // ) {\n        //   graphemeInfo = lineBounds[i];\n        //   if (positionInPath > totalPathLength) {\n        //     positionInPath %= totalPathLength;\n        //   } else if (positionInPath < 0) {\n        //     positionInPath += totalPathLength;\n        //   }\n        //   // it would probably much faster to send all the grapheme position for a line\n        //   // and calculate path position/angle at once.\n        //   this.setGraphemeOnPath(\n        //     positionInPath,\n        //     graphemeInfo,\n        //     startingPoint\n        //   );\n        //   positionInPath += graphemeInfo.kernedWidth;\n        // }\n      }\n    } else {\n      for (let i = 0; i < lines.length; i++) {\n        // char width + letterSpacing\n        const lineWidth =\n          context.measureText(lines[i]).width +\n          (lines[i].length - 1) * letterSpacing;\n        lineWidths[i] = lineWidth;\n        maxLineWidth = Math.max(maxLineWidth, lineWidth);\n      }\n      const width = maxLineWidth + lineWidth;\n\n      // if (dropShadow) {\n      //   width += dropShadowDistance;\n      // }\n      let lineHeight = strokeHeight || fontProperties.fontSize + lineWidth;\n      const height =\n        Math.max(lineHeight, fontProperties.fontSize + lineWidth) +\n        (lines.length - 1) * (lineHeight + leading);\n      // if (dropShadow) {\n      //   height += dropShadowDistance;\n      // }\n      lineHeight += leading;\n\n      // handle vertical text baseline\n      let offsetY = 0;\n      if (textBaseline === 'middle') {\n        offsetY = -height / 2;\n      } else if (\n        textBaseline === 'bottom' ||\n        textBaseline === 'alphabetic' ||\n        textBaseline === 'ideographic'\n      ) {\n        offsetY = -height;\n      } else if (textBaseline === 'top' || textBaseline === 'hanging') {\n        offsetY = 0;\n      }\n\n      return {\n        font,\n        width,\n        height,\n        lines,\n        lineWidths,\n        lineHeight,\n        maxLineWidth,\n        fontProperties,\n        lineMetrics: lineWidths.map((width, i) => {\n          let offsetX = 0;\n          // handle horizontal text align\n          if (textAlign === 'center' || textAlign === 'middle') {\n            offsetX -= width / 2;\n          } else if (textAlign === 'right' || textAlign === 'end') {\n            offsetX -= width;\n          }\n\n          return new Rectangle(\n            offsetX - lineWidth / 2,\n            offsetY + i * lineHeight,\n            width + lineWidth,\n            lineHeight,\n          );\n        }),\n      };\n    }\n  }\n\n  private wordWrap(\n    text: string,\n    parsedStyle: ParsedTextStyleProps,\n    offscreenCanvas: CanvasLike,\n  ): string {\n    const chars = Array.from(text);\n    if (chars.length === 0) {\n      return '';\n    }\n\n    const self = this;\n    const {\n      wordWrapWidth = 0,\n      letterSpacing = 0,\n      maxLines = Infinity,\n      textOverflow,\n    } = parsedStyle;\n    const context =\n      this.runtime.offscreenCanvasCreator.getOrCreateContext(offscreenCanvas);\n    const maxWidth = wordWrapWidth + letterSpacing;\n\n    let ellipsis = '';\n    if (textOverflow === 'ellipsis') {\n      ellipsis = '...';\n    } else if (textOverflow && textOverflow !== 'clip') {\n      ellipsis = textOverflow;\n    }\n\n    let lines: string[] = [''];\n    let currentLineIndex = 0;\n    let currentLineWidth = 0;\n    // @see https://github.com/antvis/G/issues/1932\n    let prevLineLastCharIndex = -1;\n\n    // --- 优化核心 ---\n    // 1. 获取或创建当前字体对应的字符缓存\n    const font = toFontString(parsedStyle);\n    let charCache = this.charWidthCache.get(font);\n    if (!charCache) {\n      charCache = new LRU<number>(500);\n      this.charWidthCache.put(font, charCache);\n    }\n\n    // 2. calcWidth 现在直接使用持久化的 charCache\n    const calcWidth = (char: string): number => {\n      return this.getFromCache(\n        char,\n        letterSpacing,\n        charCache,\n        context as CanvasRenderingContext2D,\n      );\n    };\n    const ellipsisWidth = calcWidth(ellipsis);\n\n    /**\n     * Find text fragments that will take up as much of the given line width as possible when rendered.\n     *\n     * @see https://github.com/antvis/G/issues/1833\n     *\n     * @param lineTxt - Current line of text\n     * @param txtLastCharIndex - The index of the last character of the current line in the entire text\n     * @param txtStartCharIndex - The index of the start character of the current line in the entire text\n     */\n    function findCharIndexClosestWidthThreshold(\n      lineTxt: string,\n      txtLastCharIndex: number,\n      txtStartCharIndex: number,\n      widthThreshold: number,\n    ) {\n      while (\n        calcWidth(lineTxt) < widthThreshold &&\n        txtLastCharIndex < chars.length - 1\n      ) {\n        if (self.isNewline(chars[txtLastCharIndex + 1])) {\n          break;\n        }\n        txtLastCharIndex += 1;\n        lineTxt += chars[txtLastCharIndex];\n      }\n\n      while (\n        calcWidth(lineTxt) > widthThreshold &&\n        // @see https://github.com/antvis/G/issues/1932\n        txtLastCharIndex >= txtStartCharIndex\n      ) {\n        txtLastCharIndex -= 1;\n        lineTxt = lineTxt.slice(0, -1);\n      }\n\n      return {\n        lineTxt,\n        txtLastCharIndex,\n      };\n    }\n\n    function appendEllipsis(lineIndex: number, textCharIndex: number) {\n      // If there is not enough space to display the string itself, it is clipped.\n      // @see https://developer.mozilla.org/en-US/docs/Web/CSS/text-overflow#values\n      if (ellipsisWidth <= 0 || ellipsisWidth > maxWidth) {\n        return;\n      }\n\n      if (!lines[lineIndex]) {\n        lines[lineIndex] = ellipsis;\n\n        return;\n      }\n\n      const result = findCharIndexClosestWidthThreshold(\n        lines[lineIndex],\n        textCharIndex,\n        prevLineLastCharIndex + 1,\n        maxWidth - ellipsisWidth,\n      );\n\n      lines[lineIndex] = result.lineTxt + ellipsis;\n    }\n\n    for (let i = 0; i < chars.length; i++) {\n      let char = chars[i];\n      let prevChar = chars[i - 1];\n      let nextChar = chars[i + 1];\n      let charWidth = calcWidth(char);\n\n      if (this.isNewline(char)) {\n        // exceed maxLines, break immediately\n        if (currentLineIndex + 1 >= maxLines) {\n          if (i < chars.length - 1) {\n            appendEllipsis(currentLineIndex, i - 1);\n          }\n          parsedStyle.isOverflowing = true;\n          break;\n        }\n\n        prevLineLastCharIndex = i - 1;\n        currentLineIndex += 1;\n        currentLineWidth = 0;\n        lines[currentLineIndex] = '';\n\n        continue;\n      }\n\n      // If char width exceeds max width, no need to continue\n      if (charWidth > maxWidth) {\n        appendEllipsis(currentLineIndex, i - 1);\n        parsedStyle.isOverflowing = true;\n        break;\n      }\n\n      if (currentLineWidth > 0 && currentLineWidth + charWidth > maxWidth) {\n        const result = findCharIndexClosestWidthThreshold(\n          lines[currentLineIndex],\n          i - 1,\n          prevLineLastCharIndex + 1,\n          maxWidth,\n        );\n        if (result.txtLastCharIndex !== i - 1) {\n          lines[currentLineIndex] = result.lineTxt;\n\n          if (result.txtLastCharIndex === chars.length - 1) {\n            break;\n          }\n\n          i = result.txtLastCharIndex + 1;\n          char = chars[i];\n          prevChar = chars[i - 1];\n          nextChar = chars[i + 1];\n          charWidth = calcWidth(char);\n        }\n\n        if (currentLineIndex + 1 >= maxLines) {\n          appendEllipsis(currentLineIndex, i - 1);\n          parsedStyle.isOverflowing = true;\n          break;\n        }\n\n        prevLineLastCharIndex = i - 1;\n        currentLineIndex += 1;\n        currentLineWidth = 0;\n        lines[currentLineIndex] = '';\n\n        if (this.isBreakingSpace(char)) {\n          continue;\n        }\n\n        if (!this.canBreakInLastChar(char)) {\n          lines = this.trimToBreakable(lines);\n          currentLineWidth = this.sumTextWidthByCache(\n            lines[currentLineIndex] || '',\n            calcWidth,\n          );\n        }\n\n        if (this.shouldBreakByKinsokuShorui(char, nextChar)) {\n          lines = this.trimByKinsokuShorui(lines);\n          currentLineWidth += calcWidth(prevChar || '');\n        }\n      }\n\n      currentLineWidth += charWidth;\n      lines[currentLineIndex] += char;\n    }\n\n    return lines.join('\\n');\n  }\n\n  private isBreakingSpace(char: string): boolean {\n    if (typeof char !== 'string') {\n      return false;\n    }\n    return TEXT_METRICS.BreakingSpaces.indexOf(char.charCodeAt(0)) >= 0;\n  }\n\n  private isNewline(char: string): boolean {\n    if (typeof char !== 'string') {\n      return false;\n    }\n    return TEXT_METRICS.Newlines.indexOf(char.charCodeAt(0)) >= 0;\n  }\n\n  private trimToBreakable(prev: string[]): string[] {\n    const next = [...prev];\n    const prevLine = next[next.length - 2];\n\n    const index = this.findBreakableIndex(prevLine);\n    if (index === -1 || !prevLine) return next;\n\n    const trimmedChar = prevLine.slice(index, index + 1);\n    const isTrimmedWithSpace = this.isBreakingSpace(trimmedChar);\n\n    const trimFrom = index + 1;\n    const trimTo = index + (isTrimmedWithSpace ? 0 : 1);\n    next[next.length - 1] += prevLine.slice(trimFrom, prevLine.length);\n    next[next.length - 2] = prevLine.slice(0, trimTo);\n\n    return next;\n  }\n\n  private shouldBreakByKinsokuShorui = (\n    char: string | undefined,\n    nextChar: string,\n  ): boolean => {\n    if (this.isBreakingSpace(nextChar)) return false;\n\n    if (char) {\n      // Line breaking rules in CJK (Kinsoku Shori)\n      if (regexCannotEnd.exec(nextChar) || regexCannotStart.exec(char)) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  private trimByKinsokuShorui = (prev: string[]): string[] => {\n    const next = [...prev];\n    const prevLine = next[next.length - 2];\n    if (!prevLine) {\n      return prev;\n    }\n\n    const lastChar = prevLine[prevLine.length - 1];\n\n    next[next.length - 2] = prevLine.slice(0, -1);\n    next[next.length - 1] = lastChar + next[next.length - 1];\n    return next;\n  };\n\n  private canBreakInLastChar(char: string | undefined): boolean {\n    if (char && LATIN_REGEX.test(char)) return false;\n    return true;\n  }\n\n  private sumTextWidthByCache(\n    text: string,\n    calcWidthWithCache: (txt: string) => number,\n  ) {\n    return text.split('').reduce((sum: number, c) => {\n      return sum + calcWidthWithCache(c);\n    }, 0);\n  }\n\n  private findBreakableIndex(line: string): number {\n    for (let i = line.length - 1; i >= 0; i--) {\n      if (!LATIN_REGEX.test(line[i])) return i;\n    }\n    return -1;\n  }\n\n  private getFromCache(\n    key: string,\n    letterSpacing: number,\n    cache: LRU<number>,\n    context: CanvasRenderingContext2D,\n  ): number {\n    let width = cache.get(key);\n    if (typeof width !== 'number') {\n      const spacing = key.length * letterSpacing;\n      const metrics = context.measureText(key);\n\n      width = metrics.width + spacing;\n      cache.put(key, width);\n    }\n    return width;\n  }\n\n  public clearCache() {\n    this.fontMetricsCache = {};\n    this.charWidthCache.clear();\n  }\n}\n","import { Camera } from './camera';\nimport type { LayoutRegistry } from './css';\nimport type { CSSProperty } from './css/CSSProperty';\nimport { DefaultStyleValueRegistry } from './css/StyleValueRegistry';\nimport { PropertySyntax } from './css/interfaces';\nimport {\n  CSSPropertyAngle,\n  CSSPropertyClipPath,\n  CSSPropertyColor,\n  CSSPropertyFilter,\n  CSSPropertyLengthOrPercentage,\n  CSSPropertyLengthOrPercentage12,\n  CSSPropertyLengthOrPercentage14,\n  CSSPropertyMarker,\n  CSSPropertyNumber,\n  CSSPropertyOffsetDistance,\n  CSSPropertyOpacity,\n  CSSPropertyPath,\n  CSSPropertyPoints,\n  CSSPropertyShadowBlur,\n  CSSPropertyText,\n  CSSPropertyTextTransform,\n  CSSPropertyTransform,\n  CSSPropertyTransformOrigin,\n  CSSPropertyZIndex,\n} from './css/properties';\nimport type {\n  GeometryAABBUpdater,\n  SceneGraphSelector,\n  SceneGraphService,\n} from './services';\nimport {\n  CircleUpdater,\n  DefaultSceneGraphSelector,\n  DefaultSceneGraphService,\n  EllipseUpdater,\n  GroupUpdater,\n  HTMLUpdater,\n  LineUpdater,\n  OffscreenCanvasCreator,\n  PathUpdater,\n  PolylineUpdater,\n  RectUpdater,\n  TextService,\n  TextUpdater,\n} from './services';\nimport { CanvasLike, Shape } from './types';\n\nexport const runtime: GlobalRuntime = {} as GlobalRuntime;\n\nexport interface GlobalRuntime {\n  CameraContribution: new () => Camera;\n  // AnimationTimeline: new (doc: IDocument) => IAnimationTimeline;\n  AnimationTimeline: any;\n  EasingFunction: (...args: any[]) => (t: number) => number;\n  offscreenCanvasCreator: OffscreenCanvasCreator;\n  offscreenCanvas: CanvasLike;\n  sceneGraphSelector: SceneGraphSelector;\n  sceneGraphService: SceneGraphService;\n  textService: TextService;\n  geometryUpdaterFactory: Record<Shape, GeometryAABBUpdater<any>>;\n  styleValueRegistry: DefaultStyleValueRegistry;\n  layoutRegistry: LayoutRegistry;\n  CSSPropertySyntaxFactory: Record<\n    PropertySyntax,\n    Partial<CSSProperty<any, any>>\n  >;\n  globalThis: any;\n\n  /**\n   * circle.style.r = 100;\n   */\n  enableStyleSyntax: boolean;\n\n  enableSizeAttenuation: boolean;\n}\n\n/**\n * Replace with IoC container\n */\nconst geometryUpdaterFactory: Record<Shape, GeometryAABBUpdater<any>> = (() => {\n  const rectUpdater = new RectUpdater();\n  const polylineUpdater = new PolylineUpdater();\n  return {\n    [Shape.FRAGMENT]: null,\n    [Shape.CIRCLE]: new CircleUpdater(),\n    [Shape.ELLIPSE]: new EllipseUpdater(),\n    [Shape.RECT]: rectUpdater,\n    [Shape.IMAGE]: rectUpdater,\n    [Shape.GROUP]: new GroupUpdater(),\n    [Shape.LINE]: new LineUpdater(),\n    [Shape.TEXT]: new TextUpdater(runtime),\n    [Shape.POLYLINE]: polylineUpdater,\n    [Shape.POLYGON]: polylineUpdater,\n    [Shape.PATH]: new PathUpdater(),\n    [Shape.HTML]: new HTMLUpdater(),\n    [Shape.MESH]: null,\n  };\n})();\n\nconst CSSPropertySyntaxFactory: Record<\n  PropertySyntax,\n  Partial<CSSProperty<any, any>>\n> = (() => {\n  const color = new CSSPropertyColor();\n  const length = new CSSPropertyLengthOrPercentage();\n  return {\n    [PropertySyntax.PERCENTAGE]: null,\n    [PropertySyntax.NUMBER]: new CSSPropertyNumber(),\n    [PropertySyntax.ANGLE]: new CSSPropertyAngle(),\n    [PropertySyntax.DEFINED_PATH]: new CSSPropertyClipPath(),\n    [PropertySyntax.PAINT]: color,\n    [PropertySyntax.COLOR]: color,\n    [PropertySyntax.FILTER]: new CSSPropertyFilter(),\n    [PropertySyntax.LENGTH]: length,\n    [PropertySyntax.LENGTH_PERCENTAGE]: length,\n    [PropertySyntax.LENGTH_PERCENTAGE_12]:\n      new CSSPropertyLengthOrPercentage12(),\n    [PropertySyntax.LENGTH_PERCENTAGE_14]:\n      new CSSPropertyLengthOrPercentage14(),\n    [PropertySyntax.COORDINATE]: new CSSPropertyLengthOrPercentage(),\n    [PropertySyntax.OFFSET_DISTANCE]: new CSSPropertyOffsetDistance(),\n    [PropertySyntax.OPACITY_VALUE]: new CSSPropertyOpacity(),\n    [PropertySyntax.PATH]: new CSSPropertyPath(),\n    [PropertySyntax.LIST_OF_POINTS]: new CSSPropertyPoints(),\n    [PropertySyntax.SHADOW_BLUR]: new CSSPropertyShadowBlur(),\n    [PropertySyntax.TEXT]: new CSSPropertyText(),\n    [PropertySyntax.TEXT_TRANSFORM]: new CSSPropertyTextTransform(),\n    [PropertySyntax.TRANSFORM]: new CSSPropertyTransform(),\n    [PropertySyntax.TRANSFORM_ORIGIN]: new CSSPropertyTransformOrigin(),\n    [PropertySyntax.Z_INDEX]: new CSSPropertyZIndex(),\n    [PropertySyntax.MARKER]: new CSSPropertyMarker(),\n  };\n})();\n\nconst getGlobalThis = () => {\n  if (typeof globalThis !== 'undefined') return globalThis;\n  if (typeof self !== 'undefined') return self;\n  if (typeof window !== 'undefined') return window;\n  // @ts-ignore\n  if (typeof global !== 'undefined') return global;\n  return {};\n  // [!] Error: The 'this' keyword is equivalent to 'undefined' at the top level of an ES module, and has been rewritten\n  // @see https://rollupjs.org/troubleshooting/#error-this-is-undefined\n  // if (typeof this !== 'undefined') return this;\n};\n\n/**\n * Camera\n * `g-camera-api` will provide an advanced implementation\n */\nruntime.CameraContribution = Camera;\n\n/**\n * `g-web-animations-api` will provide an AnimationTimeline\n */\nruntime.AnimationTimeline = null;\n\nruntime.EasingFunction = null;\n\nruntime.offscreenCanvasCreator = new OffscreenCanvasCreator();\n\nruntime.sceneGraphSelector = new DefaultSceneGraphSelector();\n\nruntime.sceneGraphService = new DefaultSceneGraphService(runtime);\n\nruntime.textService = new TextService(runtime);\n\nruntime.geometryUpdaterFactory = geometryUpdaterFactory;\n\nruntime.CSSPropertySyntaxFactory = CSSPropertySyntaxFactory;\nruntime.styleValueRegistry = new DefaultStyleValueRegistry(runtime);\nruntime.layoutRegistry = null;\nruntime.globalThis = getGlobalThis();\nruntime.enableStyleSyntax = true;\nruntime.enableSizeAttenuation = false;\n","import type {\n  Cullable,\n  Geometry,\n  RBushNode,\n  Renderable,\n  Sortable,\n  Transform,\n} from '../components';\nimport { Strategy } from '../components';\nimport { runtime } from '../global-runtime';\nimport type { AABB, Rectangle } from '../shapes';\nimport {\n  Shape,\n  type BaseStyleProps,\n  type ParsedBaseStyleProps,\n} from '../types';\nimport { isInFragment } from '../utils';\nimport {\n  ERROR_MSG_APPEND_DESTROYED_ELEMENT,\n  ERROR_MSG_METHOD_NOT_IMPLEMENTED,\n} from '../utils/error';\nimport { CustomEvent } from './CustomEvent';\nimport { MutationEvent } from './MutationEvent';\nimport { Node } from './Node';\nimport type {\n  ICSSStyleDeclaration,\n  IChildNode,\n  IElement,\n  INode,\n} from './interfaces';\nimport { ElementEvent } from './interfaces';\n\nlet entityCounter = 0;\nexport function resetEntityCounter() {\n  entityCounter = 0;\n}\n\nexport const insertedEvent = new MutationEvent(\n  ElementEvent.INSERTED,\n  null,\n  '',\n  '',\n  '',\n  0,\n  '',\n  '',\n);\nexport const removedEvent = new MutationEvent(\n  ElementEvent.REMOVED,\n  null,\n  '',\n  '',\n  '',\n  0,\n  '',\n  '',\n);\nexport const destroyEvent = new CustomEvent(ElementEvent.DESTROY);\n\n/**\n * Has following capabilities:\n * * Node insert/remove, eg. appendChild, removeChild, remove...\n * * Query eg. querySelector getElementById...\n * * Animation\n */\nexport class Element<\n    StyleProps extends BaseStyleProps = BaseStyleProps,\n    ParsedStyleProps extends ParsedBaseStyleProps = ParsedBaseStyleProps,\n  >\n  extends Node\n  implements IElement<StyleProps, ParsedStyleProps>\n{\n  /**\n   * Unique id.\n   */\n  entity = entityCounter++;\n\n  transformable: Transform = {\n    dirtyFlag: false,\n    localDirtyFlag: false,\n    localPosition: [0, 0, 0],\n    localRotation: [0, 0, 0, 1],\n    localScale: [1, 1, 1],\n    localTransform: [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\n    localSkew: [0, 0],\n    position: [0, 0, 0],\n    rotation: [0, 0, 0, 1],\n    scaling: [1, 1, 1],\n    worldTransform: [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\n    origin: [0, 0, 0],\n  };\n\n  renderable: Renderable = {\n    bounds: undefined,\n    boundsDirty: true,\n    renderBounds: undefined,\n    renderBoundsDirty: true,\n    dirtyRenderBounds: undefined,\n    dirty: false,\n  };\n\n  /**\n   * @param flag - default `true`, whether the object needs to be updated\n   * @param updateShape - default `false`, whether the bounding box of the object is updated\n   */\n  dirty(flag = true, updateShape = false) {\n    this.renderable.dirty = flag;\n    if (updateShape) {\n      this.renderable.boundsDirty = flag;\n      this.renderable.renderBoundsDirty = flag;\n    }\n  }\n\n  geometry: Geometry = {\n    contentBounds: undefined,\n    renderBounds: undefined,\n    dirty: true,\n  };\n\n  cullable: Cullable = {\n    strategy: Strategy.Standard,\n    visibilityPlaneMask: -1,\n    visible: true,\n    enable: true,\n  };\n\n  sortable: Sortable = {\n    dirty: false,\n    sorted: undefined,\n    renderOrder: 0,\n    dirtyChildren: [],\n    dirtyReason: undefined,\n  };\n\n  rBushNode: RBushNode = {\n    aabb: undefined,\n  };\n\n  /**\n   * used with `getElementById()`\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/id\n   */\n  id: string;\n\n  /**\n   * used in `getElementsByClassName`\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName\n   */\n  get className() {\n    // @ts-ignore\n    return this.getAttribute('class') || '';\n  }\n\n  set className(className: string) {\n    this.setAttribute('class', className);\n  }\n\n  /**\n   * used in `getElementsByName`\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByName\n   */\n  name: string;\n\n  /**\n   * https://developer.mozilla.org/zh-CN/docs/Web/API/Element/namespaceURI\n   */\n  namespaceURI = 'g';\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/classList\n   */\n  get classList() {\n    return this.className.split(' ').filter((c) => c !== '');\n  }\n\n  scrollLeft = 0;\n  scrollTop = 0;\n\n  /**\n   * We don't support border now\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/clientTop\n   */\n  clientTop = 0;\n  clientLeft = 0;\n\n  get tagName(): string {\n    return this.nodeName;\n  }\n\n  get children(): IElement[] {\n    return this.childNodes as IElement[];\n  }\n\n  get childElementCount(): number {\n    return this.childNodes.length;\n  }\n  get firstElementChild(): IElement | null {\n    return this.firstChild as IElement;\n  }\n  get lastElementChild(): IElement | null {\n    return this.lastChild as IElement;\n  }\n\n  get parentElement(): IElement | null {\n    return this.parentNode as IElement;\n  }\n\n  get nextSibling(): IElement | null {\n    if (this.parentNode) {\n      const index = this.parentNode.childNodes.indexOf(this);\n      return (this.parentNode.childNodes[index + 1] as IElement) || null;\n    }\n\n    return null;\n  }\n\n  get previousSibling(): IElement | null {\n    if (this.parentNode) {\n      const index = this.parentNode.childNodes.indexOf(this);\n      return (this.parentNode.childNodes[index - 1] as IElement) || null;\n    }\n\n    return null;\n  }\n\n  cloneNode(deep?: boolean): this {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  appendChild<T extends INode>(child: T, index?: number): T {\n    if ((child as unknown as Element).destroyed) {\n      throw new Error(ERROR_MSG_APPEND_DESTROYED_ELEMENT);\n    }\n\n    runtime.sceneGraphService.attach(child, this, index);\n\n    if (this.ownerDocument?.defaultView) {\n      if (!isInFragment(this) && child.nodeName === Shape.FRAGMENT) {\n        this.ownerDocument.defaultView.mountFragment(child);\n      } else {\n        this.ownerDocument.defaultView.mountChildren(child);\n      }\n    }\n\n    // @ts-ignore\n    if (this.isMutationObserved) {\n      insertedEvent.relatedNode = this as IElement;\n      child.dispatchEvent(insertedEvent);\n    }\n\n    return child;\n  }\n\n  insertBefore<T extends INode>(newChild: T, refChild: INode | null): T {\n    if (!refChild) {\n      this.appendChild(newChild);\n    } else {\n      if (newChild.parentElement) {\n        newChild.parentElement.removeChild(newChild);\n      }\n\n      const index = this.childNodes.indexOf(refChild as IChildNode);\n      if (index === -1) {\n        this.appendChild(newChild);\n      } else {\n        this.appendChild(newChild, index);\n      }\n    }\n    return newChild;\n  }\n\n  replaceChild<T extends INode>(newChild: INode, oldChild: T): T {\n    const index = this.childNodes.indexOf(oldChild as unknown as IChildNode);\n    this.removeChild(oldChild);\n    this.appendChild(newChild, index);\n    return oldChild;\n  }\n\n  removeChild<T extends INode>(child: T): T {\n    const enableCancelEventPropagation =\n      this.ownerDocument?.defaultView?.getConfig().future\n        ?.experimentalCancelEventPropagation === true;\n\n    // should emit on itself before detach\n    removedEvent.relatedNode = this as IElement;\n    child.dispatchEvent(\n      removedEvent,\n      enableCancelEventPropagation,\n      enableCancelEventPropagation,\n    );\n\n    if (child.ownerDocument?.defaultView) {\n      child.ownerDocument.defaultView.unmountChildren(child);\n    }\n\n    // remove from scene graph\n    runtime.sceneGraphService.detach(child);\n    return child;\n  }\n\n  /**\n   * Remove all children which can be appended to its original parent later again.\n   */\n  removeChildren() {\n    for (let i = this.childNodes.length - 1; i >= 0; i--) {\n      const child = this.childNodes[i] as this;\n      this.removeChild(child);\n    }\n  }\n\n  /**\n   * Recursively destroy all children which can not be appended to its original parent later again.\n   */\n  destroyChildren() {\n    for (let i = this.childNodes.length - 1; i >= 0; i--) {\n      const child = this.childNodes[i] as this;\n      if (child.childNodes.length > 0) {\n        child.destroyChildren();\n      }\n      child.destroy();\n    }\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/matches\n   */\n  matches(selector: string): boolean {\n    return runtime.sceneGraphService.matches(selector, this as IElement);\n  }\n  getElementById<E extends IElement = IElement>(id: string): E | null {\n    return runtime.sceneGraphService.querySelector<IElement, E>(\n      `#${id}`,\n      this as IElement,\n    );\n  }\n  getElementsByName<E extends IElement = IElement>(name: string): E[] {\n    return runtime.sceneGraphService.querySelectorAll<IElement, E>(\n      `[name=\"${name}\"]`,\n      this as IElement,\n    );\n  }\n  getElementsByClassName<E extends IElement = IElement>(\n    className: string,\n  ): E[] {\n    return runtime.sceneGraphService.querySelectorAll<IElement, E>(\n      `.${className}`,\n      this as IElement,\n    );\n  }\n  getElementsByTagName<E extends IElement = IElement>(tagName: string): E[] {\n    return runtime.sceneGraphService.querySelectorAll<IElement, E>(\n      tagName,\n      this as IElement,\n    );\n  }\n  querySelector<E extends IElement = IElement>(selectors: string): E | null {\n    return runtime.sceneGraphService.querySelector<IElement, E>(\n      selectors,\n      this as IElement,\n    );\n  }\n  querySelectorAll<E extends IElement = IElement>(selectors: string): E[] {\n    return runtime.sceneGraphService.querySelectorAll<IElement, E>(\n      selectors,\n      this as IElement,\n    );\n  }\n\n  /**\n   * should traverses the element and its parents (heading toward the document root)\n   * until it finds a node that matches the specified CSS selector.\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/closest\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/closest#polyfill\n   */\n  closest<E extends IElement = IElement>(selectors: string): E | null {\n    let el = this as unknown as E;\n    do {\n      if (runtime.sceneGraphService.matches(selectors, el)) return el;\n      el = el.parentElement as E;\n    } while (el !== null);\n    return null;\n  }\n\n  /**\n   * search in scene group, but should not include itself\n   */\n  find<E extends IElement = IElement>(filter: (node: E) => boolean): E | null {\n    let target: E | null = null;\n    this.forEach((object) => {\n      if (object !== this && filter(object as E)) {\n        target = object as E;\n        return false;\n      }\n      return true;\n    });\n    return target;\n  }\n  findAll<E extends IElement = IElement>(filter: (node: E) => boolean): E[] {\n    const objects: E[] = [];\n    this.forEach((object) => {\n      if (object !== this && filter(object as E)) {\n        objects.push(object as E);\n      }\n    });\n    return objects;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/after\n   */\n  after(...nodes: INode[]) {\n    if (this.parentNode) {\n      const index = this.parentNode.childNodes.indexOf(this);\n      nodes.forEach((node, i) =>\n        this.parentNode?.appendChild(node, index + i + 1),\n      );\n    }\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/before\n   */\n  before(...nodes: INode[]) {\n    if (this.parentNode) {\n      const index = this.parentNode.childNodes.indexOf(this);\n      const [first, ...rest] = nodes;\n      this.parentNode.appendChild(first, index);\n      (first as IChildNode).after(...rest);\n    }\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/replaceWith\n   */\n  replaceWith(...nodes: INode[]) {\n    this.after(...nodes);\n    this.remove();\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/append\n   */\n  append(...nodes: INode[]) {\n    nodes.forEach((node) => this.appendChild(node));\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/prepend\n   */\n  prepend(...nodes: INode[]) {\n    nodes.forEach((node, i) => this.appendChild(node, i));\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/replaceChildren\n   */\n  replaceChildren(...nodes: INode[]) {\n    while (this.childNodes.length && this.firstChild) {\n      this.removeChild(this.firstChild);\n    }\n    this.append(...nodes);\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/remove\n   */\n  remove(): this {\n    if (this.parentNode) {\n      return this.parentNode.removeChild(this);\n    }\n    return this;\n  }\n\n  destroy() {\n    const enableCancelEventPropagation =\n      this.ownerDocument?.defaultView?.getConfig().future\n        ?.experimentalCancelEventPropagation === true;\n\n    // fix https://github.com/antvis/G/issues/1813\n    this.destroyChildren();\n\n    // destroy itself before remove\n    this.dispatchEvent(\n      destroyEvent,\n      enableCancelEventPropagation,\n      enableCancelEventPropagation,\n    );\n\n    // remove from scenegraph first\n    this.remove();\n\n    // remove event listeners\n    this.emitter.removeAllListeners();\n\n    this.destroyed = true;\n  }\n\n  getGeometryBounds(): AABB {\n    return runtime.sceneGraphService.getGeometryBounds(this);\n  }\n\n  getRenderBounds(): AABB {\n    return runtime.sceneGraphService.getBounds(this, true);\n  }\n\n  /**\n   * get bounds in world space, account for children\n   */\n  getBounds(): AABB {\n    return runtime.sceneGraphService.getBounds(this);\n  }\n\n  /**\n   * get bounds in local space, account for children\n   */\n  getLocalBounds(): AABB {\n    return runtime.sceneGraphService.getLocalBounds(this);\n  }\n\n  /**\n   * account for context's bounds in client space,\n   * but not accounting for children\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n   */\n  getBoundingClientRect(): Rectangle {\n    return runtime.sceneGraphService.getBoundingClientRect(this);\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/getClientRects\n   */\n  getClientRects() {\n    return [this.getBoundingClientRect()];\n  }\n\n  /**\n   * compatible with `style`\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/style\n   */\n  style: StyleProps & ICSSStyleDeclaration<StyleProps> = {} as StyleProps &\n    ICSSStyleDeclaration<StyleProps>;\n  computedStyle = {};\n\n  /**\n   * Renderers will use these used values.\n   */\n  parsedStyle: ParsedStyleProps = {\n    // opacity: '',\n    // fillOpacity: '',\n    // strokeOpacity: '',\n    // transformOrigin: '',\n    // visibility: '',\n    // pointerEvents: '',\n    // lineWidth: '',\n    // lineCap: '',\n    // lineJoin: '',\n    // increasedLineWidthForHitTesting: '',\n    // fontSize: '',\n    // fontFamily: '',\n    // fontStyle: '',\n    // fontWeight: '',\n    // fontVariant: '',\n    // textAlign: '',\n    // textBaseline: '',\n    // textTransform: '',\n  } as ParsedStyleProps;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/computedStyleMap\n   * eg. circle.computedStyleMap().get('fill');\n   */\n  computedStyleMap() {\n    return new Map(Object.entries(this.computedStyle));\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/attributes\n   */\n  readonly attributes: StyleProps = {} as StyleProps;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttributeNames\n   */\n  getAttributeNames(): string[] {\n    return Object.keys(this.attributes);\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttribute\n   */\n  getAttribute(name: keyof StyleProps) {\n    // @see https://github.com/antvis/G/issues/1267\n    if (typeof name === 'symbol') {\n      return undefined;\n    }\n\n    const value = this.attributes[name];\n    if (value === undefined) {\n      // if the given attribute does not exist, the value returned will either be null or \"\"\n      return value;\n    }\n\n    return value;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/hasAttribute\n   */\n  hasAttribute(qualifiedName: string): boolean {\n    return this.getAttributeNames().includes(qualifiedName);\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/hasAttributes\n   */\n  hasAttributes(): boolean {\n    return !!this.getAttributeNames().length;\n  }\n\n  /**\n   * should use removeAttribute() instead of setting the attribute value to null either directly or using setAttribute(). Many attributes will not behave as expected if you set them to null.\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/removeAttribute\n   */\n  removeAttribute(attributeName: keyof StyleProps) {\n    this.setAttribute(attributeName, null);\n    delete this.attributes[attributeName];\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute\n   */\n  setAttribute<Key extends keyof StyleProps>(\n    attributeName: Key,\n    value: StyleProps[Key],\n    force?: boolean,\n    memoize?: boolean,\n  ) {\n    this.attributes[attributeName] = value;\n  }\n\n  getAttributeNS(namespace: string, localName: string): string {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  getAttributeNode(qualifiedName: string): Attr {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  getAttributeNodeNS(namespace: string, localName: string): Attr {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  hasAttributeNS(namespace: string, localName: string): boolean {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  removeAttributeNS(namespace: string, localName: string): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  removeAttributeNode(attr: Attr): Attr {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  setAttributeNS(\n    namespace: string,\n    qualifiedName: string,\n    value: string,\n  ): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  setAttributeNode(attr: Attr): Attr {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  setAttributeNodeNS(attr: Attr): Attr {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  toggleAttribute(qualifiedName: string, force?: boolean): boolean {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n}\n","import { isNil, isObject, isUndefined } from '@antv/util';\nimport type { mat3, vec2 } from 'gl-matrix';\nimport { mat4, quat, vec3 } from 'gl-matrix';\nimport type { PropertyParseOptions } from '../css';\nimport type {\n  DisplayObjectConfig,\n  IAnimation,\n  ICSSStyleDeclaration,\n  IChildNode,\n  IElement,\n} from '../dom';\nimport { Element } from '../dom/Element';\nimport { MutationEvent } from '../dom/MutationEvent';\nimport { ElementEvent } from '../dom/interfaces';\nimport { runtime } from '../global-runtime';\nimport { Rectangle } from '../shapes';\nimport type { BaseStyleProps, ParsedBaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport {\n  createVec3,\n  decompose,\n  fromRotationTranslationScale,\n  getEuler,\n  rad2deg,\n} from '../utils';\nimport type { CustomElement } from './CustomElement';\n\nexport function isDisplayObject(value: any): value is DisplayObject {\n  return !!(value as DisplayObject)?.nodeName;\n}\n\nconst Proxy: ProxyConstructor = runtime.globalThis.Proxy\n  ? runtime.globalThis.Proxy\n  : function () {};\n\ntype ConstructorTypeOf<T> = new (...args: any[]) => T;\n\nexport const attrModifiedEvent: MutationEvent = new MutationEvent(\n  ElementEvent.ATTR_MODIFIED,\n  null,\n  null,\n  null,\n  null,\n  MutationEvent.MODIFICATION,\n  null,\n  null,\n);\n\nconst $vec3 = vec3.create();\nconst $quat = quat.create();\n\n/**\n * prototype chains: DisplayObject -> Element -> Node -> EventTarget\n *\n * mixins: Animatable, Transformable, Visible\n * @see https://github.com/tannerntannern/ts-mixer/blob/master/README.md#mixing-generic-classes\n *\n * Provide abilities in scene graph, such as:\n * * transform `translate/rotate/scale`\n * * add/remove child\n * * visibility and z-index\n *\n * Those abilities are implemented with those components: `Transform/Sortable/Visible`.\n *\n * Emit following events:\n * * init\n * * destroy\n * * attributeChanged\n */\nexport class DisplayObject<\n  StyleProps extends BaseStyleProps = any,\n  ParsedStyleProps extends ParsedBaseStyleProps = any,\n> extends Element<StyleProps, ParsedStyleProps> {\n  static PARSED_STYLE_LIST = new Set([\n    'class',\n    'className',\n    'clipPath',\n    'cursor',\n    'display',\n    'draggable',\n    'droppable',\n    'fill',\n    'fillOpacity',\n    'fillRule',\n    'filter',\n    'increasedLineWidthForHitTesting',\n    'lineCap',\n    'lineDash',\n    'lineDashOffset',\n    'lineJoin',\n    'lineWidth',\n    'miterLimit',\n    'hitArea',\n    'offsetDistance',\n    'offsetPath',\n    'offsetX',\n    'offsetY',\n    'opacity',\n    'pointerEvents',\n    'shadowColor',\n    'shadowType',\n    'shadowBlur',\n    'shadowOffsetX',\n    'shadowOffsetY',\n    'stroke',\n    'strokeOpacity',\n    'strokeWidth',\n    'strokeLinecap',\n    'strokeLineJoin',\n    'strokeDasharray',\n    'strokeDashoffset',\n    'transform',\n    'transformOrigin',\n    'textTransform',\n    'visibility',\n    'zIndex',\n  ]);\n\n  /**\n   * contains style props in constructor's params, eg. fill, stroke...\n   */\n  config: DisplayObjectConfig<StyleProps>;\n\n  isCustomElement = false;\n\n  isMutationObserved = false;\n\n  /**\n   * push to active animations after calling `animate()`\n   */\n  private activeAnimations: IAnimation[] = [];\n\n  constructor(config: DisplayObjectConfig<StyleProps>) {\n    super();\n\n    // assign name, id to config\n    // eg. group.get('name')\n    this.config = config;\n\n    // init scene graph node\n    this.id = config.id || '';\n    this.name = config.name || '';\n    if (config.className || config.class) {\n      this.className = config.className || config.class;\n    }\n    this.nodeName = config.type || Shape.GROUP;\n\n    if (config.initialParsedStyle) {\n      Object.assign(this.parsedStyle, config.initialParsedStyle);\n    }\n\n    // start to process attributes\n    this.initAttributes(config.style);\n\n    if (runtime.enableStyleSyntax) {\n      this.style = new Proxy<StyleProps & ICSSStyleDeclaration<StyleProps>>(\n        // @ts-ignore\n        {\n          // ...this.attributes,\n          setProperty: <Key extends keyof StyleProps>(\n            propertyName: Key,\n            value: StyleProps[Key],\n            // priority?: string,\n          ) => {\n            this.setAttribute(propertyName, value);\n          },\n          getPropertyValue: (propertyName: keyof StyleProps) => {\n            return this.getAttribute(propertyName);\n          },\n          removeProperty: (propertyName: keyof StyleProps) => {\n            this.removeAttribute(propertyName);\n          },\n          item: () => {\n            return '';\n          },\n        },\n        {\n          get: (target, name: string) => {\n            if (target[name] !== undefined) {\n              // if (name in target) {\n              return target[name];\n            }\n            return this.getAttribute(name as keyof StyleProps);\n          },\n          set: (_, prop, value) => {\n            this.setAttribute(prop as keyof StyleProps, value);\n            return true;\n          },\n        },\n      );\n    }\n  }\n\n  destroy() {\n    super.destroy();\n\n    // stop all active animations\n    this.getAnimations().forEach((animation) => {\n      animation.cancel();\n    });\n  }\n\n  cloneNode(\n    deep?: boolean,\n    customCloneFunc?: (name: string, attribute: any) => any,\n  ): this {\n    const clonedStyle = { ...this.attributes };\n    for (const attributeName in clonedStyle) {\n      const attribute = clonedStyle[attributeName];\n\n      // @see https://github.com/antvis/G/issues/1095\n      if (\n        isDisplayObject(attribute) &&\n        // share the same clipPath if possible\n        attributeName !== 'clipPath' &&\n        attributeName !== 'offsetPath' &&\n        attributeName !== 'textPath'\n      ) {\n        clonedStyle[attributeName] = attribute.cloneNode(deep);\n      }\n      // TODO: clone other type\n      if (customCloneFunc) {\n        clonedStyle[attributeName] = customCloneFunc(attributeName, attribute);\n      }\n    }\n\n    const cloned = new (this.constructor as ConstructorTypeOf<DisplayObject>)({\n      // copy id & name\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/Node/cloneNode#notes\n      ...this.config,\n      style: clonedStyle,\n    });\n\n    // apply transform\n    cloned.setLocalTransform(this.getLocalTransform());\n\n    if (deep) {\n      this.children.forEach((child) => {\n        // skip marker\n        if (!child.style.isMarker) {\n          const clonedChild = child.cloneNode(deep);\n          cloned.appendChild(clonedChild);\n        }\n      });\n    }\n\n    return cloned as this;\n  }\n\n  private initAttributes(attributes: StyleProps = {} as StyleProps) {\n    const options = {\n      forceUpdateGeometry: true,\n    };\n\n    runtime.styleValueRegistry.processProperties(this, attributes, options);\n\n    // redraw at next frame\n    this.dirty();\n  }\n\n  setAttribute<Key extends keyof StyleProps>(\n    name: Key,\n    value: StyleProps[Key],\n    force = false,\n    memoize = true,\n  ) {\n    // ignore undefined value\n    if (isUndefined(value)) {\n      return;\n    }\n\n    if (force || value !== this.attributes[name]) {\n      this.internalSetAttribute(name, value, { memoize });\n      super.setAttribute(name, value);\n    }\n  }\n\n  /**\n   * called when attributes get changed or initialized\n   */\n  internalSetAttribute<Key extends keyof StyleProps>(\n    name: Key,\n    value: StyleProps[Key],\n    parseOptions: Partial<PropertyParseOptions> = {},\n  ) {\n    const oldValue = this.attributes[name];\n    const oldParsedValue = this.parsedStyle[name as string];\n\n    runtime.styleValueRegistry.processProperties(\n      this as unknown as DisplayObject,\n      {\n        [name]: value,\n      },\n      parseOptions,\n    );\n\n    // redraw at next frame\n    this.dirty();\n\n    // return;\n\n    const newParsedValue = this.parsedStyle[name as string];\n    if (this.isConnected) {\n      attrModifiedEvent.relatedNode = this as IElement;\n      attrModifiedEvent.prevValue = oldValue;\n      attrModifiedEvent.newValue = value;\n      attrModifiedEvent.attrName = name as string;\n      attrModifiedEvent.prevParsedValue = oldParsedValue;\n      attrModifiedEvent.newParsedValue = newParsedValue;\n      if (this.isMutationObserved) {\n        this.dispatchEvent(attrModifiedEvent);\n      } else {\n        const enableCancelEventPropagation =\n          this.ownerDocument.defaultView.getConfig().future\n            ?.experimentalCancelEventPropagation === true;\n\n        attrModifiedEvent.target = this;\n        this.ownerDocument.defaultView.dispatchEvent(\n          attrModifiedEvent,\n          true,\n          enableCancelEventPropagation,\n        );\n      }\n    }\n\n    if ((this.isCustomElement && this.isConnected) || !this.isCustomElement) {\n      (this as unknown as CustomElement<any>).attributeChangedCallback?.(\n        name,\n        oldValue,\n        value,\n        oldParsedValue,\n        newParsedValue,\n      );\n    }\n  }\n\n  // #region transformable\n  /**\n   * returns different values than getBoundingClientRect(), as the latter returns value relative to the viewport\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGGraphicsElement/getBBox\n   *\n   * FIXME: It is worth noting that getBBox responds to original untransformed values of a drawn object.\n   * @see https://www.w3.org/Graphics/SVG/IG/resources/svgprimer.html#getBBox\n   */\n  getBBox(): DOMRect {\n    const aabb = this.getBounds();\n    const [left, top] = aabb.getMin();\n    const [right, bottom] = aabb.getMax();\n    return new Rectangle(left, top, right - left, bottom - top);\n  }\n\n  setOrigin(position: vec3 | vec2 | number, y = 0, z = 0) {\n    runtime.sceneGraphService.setOrigin(\n      this,\n      createVec3(position, y, z, false),\n    );\n    return this;\n  }\n\n  getOrigin(): vec3 {\n    return runtime.sceneGraphService.getOrigin(this);\n  }\n\n  /**\n   * set position in world space\n   */\n  setPosition(position: vec3 | vec2 | number, y = 0, z = 0) {\n    runtime.sceneGraphService.setPosition(\n      this,\n      createVec3(position, y, z, false),\n    );\n    return this;\n  }\n\n  /**\n   * set position in local space\n   */\n  setLocalPosition(position: vec3 | vec2 | number, y = 0, z = 0) {\n    runtime.sceneGraphService.setLocalPosition(\n      this,\n      createVec3(position, y, z, false),\n    );\n    return this;\n  }\n\n  /**\n   * translate in world space\n   */\n  translate(position: vec3 | vec2 | number, y = 0, z = 0) {\n    runtime.sceneGraphService.translate(\n      this,\n      createVec3(position, y, z, false),\n    );\n    return this;\n  }\n\n  /**\n   * translate in local space\n   */\n  translateLocal(position: vec3 | vec2 | number, y = 0, z = 0) {\n    runtime.sceneGraphService.translateLocal(\n      this,\n      createVec3(position, y, z, false),\n    );\n    return this;\n  }\n\n  getPosition(): vec3 {\n    return runtime.sceneGraphService.getPosition(this);\n  }\n\n  getLocalPosition(): vec3 {\n    return runtime.sceneGraphService.getLocalPosition(this);\n  }\n\n  /**\n   * compatible with G 3.0\n   *\n   * scaling in local space\n   * scale(10) = scale(10, 10, 10)\n   *\n   * we can't set scale in world space\n   */\n  scale(scaling: vec3 | vec2 | number, y?: number, z?: number) {\n    return this.scaleLocal(scaling, y, z);\n  }\n  scaleLocal(scaling: vec3 | vec2 | number, y?: number, z?: number) {\n    if (typeof scaling === 'number') {\n      y = y || scaling;\n      z = z || scaling;\n      scaling = createVec3(scaling, y, z, false);\n    }\n    runtime.sceneGraphService.scaleLocal(this, scaling);\n    return this;\n  }\n\n  /**\n   * set scaling in local space\n   */\n  setLocalScale(scaling: vec3 | vec2 | number, y?: number, z?: number) {\n    if (typeof scaling === 'number') {\n      y = y || scaling;\n      z = z || scaling;\n      scaling = createVec3(scaling, y, z, false);\n    }\n\n    runtime.sceneGraphService.setLocalScale(this, scaling);\n    return this;\n  }\n\n  /**\n   * get scaling in local space\n   */\n  getLocalScale(): vec3 {\n    return runtime.sceneGraphService.getLocalScale(this);\n  }\n\n  /**\n   * get scaling in world space\n   */\n  getScale(): vec3 {\n    return runtime.sceneGraphService.getScale(this);\n  }\n\n  /**\n   * only return degrees of Z axis in world space\n   */\n  getEulerAngles() {\n    const [, , ez] = getEuler(\n      $vec3,\n      runtime.sceneGraphService.getWorldTransform(this),\n    );\n    return rad2deg(ez);\n  }\n\n  /**\n   * only return degrees of Z axis in local space\n   */\n  getLocalEulerAngles() {\n    const [, , ez] = getEuler(\n      $vec3,\n      runtime.sceneGraphService.getLocalRotation(this),\n    );\n    return rad2deg(ez);\n  }\n\n  /**\n   * set euler angles(degrees) in world space\n   */\n  setEulerAngles(z: number) {\n    runtime.sceneGraphService.setEulerAngles(this, 0, 0, z);\n    return this;\n  }\n\n  /**\n   * set euler angles(degrees) in local space\n   */\n  setLocalEulerAngles(z: number) {\n    runtime.sceneGraphService.setLocalEulerAngles(this, 0, 0, z);\n    return this;\n  }\n\n  rotateLocal(x: number, y?: number, z?: number) {\n    if (isNil(y) && isNil(z)) {\n      runtime.sceneGraphService.rotateLocal(this, 0, 0, x);\n    } else {\n      runtime.sceneGraphService.rotateLocal(this, x, y, z);\n    }\n\n    return this;\n  }\n\n  rotate(x: number, y?: number, z?: number) {\n    if (isNil(y) && isNil(z)) {\n      runtime.sceneGraphService.rotate(this, 0, 0, x);\n    } else {\n      runtime.sceneGraphService.rotate(this, x, y, z);\n    }\n\n    return this;\n  }\n\n  setRotation(rotation: quat | number, y?: number, z?: number, w?: number) {\n    runtime.sceneGraphService.setRotation(this, rotation, y, z, w);\n    return this;\n  }\n\n  setLocalRotation(\n    rotation: quat | number,\n    y?: number,\n    z?: number,\n    w?: number,\n  ) {\n    runtime.sceneGraphService.setLocalRotation(this, rotation, y, z, w);\n    return this;\n  }\n\n  setLocalSkew(skew: vec2 | number, y?: number) {\n    runtime.sceneGraphService.setLocalSkew(this, skew, y);\n    return this;\n  }\n\n  getRotation(): quat {\n    return runtime.sceneGraphService.getRotation(this);\n  }\n\n  getLocalRotation(): quat {\n    return runtime.sceneGraphService.getLocalRotation(this);\n  }\n\n  getLocalSkew(): vec2 {\n    return runtime.sceneGraphService.getLocalSkew(this);\n  }\n\n  getLocalTransform(): mat4 {\n    return runtime.sceneGraphService.getLocalTransform(this);\n  }\n\n  getWorldTransform(): mat4 {\n    return runtime.sceneGraphService.getWorldTransform(this);\n  }\n\n  setLocalTransform(transform: mat4) {\n    runtime.sceneGraphService.setLocalTransform(this, transform);\n    return this;\n  }\n\n  resetLocalTransform(): void {\n    runtime.sceneGraphService.resetLocalTransform(this);\n  }\n  // #endregion transformable\n\n  // #region animatable\n  /**\n   * returns an array of all Animation objects affecting this element\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAnimations\n   */\n  getAnimations(): IAnimation[] {\n    return this.activeAnimations;\n  }\n  /**\n   * create an animation with WAAPI\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/animate\n   */\n  animate(\n    keyframes: Keyframe[] | PropertyIndexedKeyframes | null,\n    options?: number | KeyframeAnimationOptions,\n  ): IAnimation | null {\n    const timeline = this.ownerDocument?.timeline;\n\n    if (timeline) {\n      return timeline.play(this as IElement, keyframes, options);\n    }\n    return null;\n  }\n  // #endregion animatable\n\n  // #region visible\n  /**\n   * shortcut for Used value of `visibility`\n   */\n  isVisible() {\n    return this.parsedStyle?.visibility !== 'hidden';\n  }\n\n  get interactive() {\n    return this.isInteractive();\n  }\n  set interactive(b: boolean) {\n    this.style.pointerEvents = b ? 'auto' : 'none';\n  }\n\n  isInteractive() {\n    return this.parsedStyle?.pointerEvents !== 'none';\n  }\n\n  isCulled() {\n    return !!(this.cullable && this.cullable.enable && !this.cullable.visible);\n  }\n\n  /**\n   * bring to front in current group\n   */\n  toFront() {\n    if (this.parentNode) {\n      this.style.zIndex =\n        Math.max(\n          ...this.parentNode.children.map((child) =>\n            Number(child.style.zIndex),\n          ),\n        ) + 1;\n    }\n    return this;\n  }\n\n  /**\n   * send to back in current group\n   */\n  toBack() {\n    if (this.parentNode) {\n      this.style.zIndex =\n        Math.min(\n          ...this.parentNode.children.map((child) =>\n            Number(child.style.zIndex),\n          ),\n        ) - 1;\n    }\n    return this;\n  }\n  // #endregion visible\n\n  // #region deprecated\n\n  /**\n   * compatible with G 3.0\n   * @alias object.config\n   * @deprecated\n   */\n  getConfig() {\n    return this.config;\n  }\n\n  /**\n   * @alias style\n   * @example\n   * circle.style.r = 10;\n   * const r = circle.style;\n   * @deprecated\n   */\n  attr(): StyleProps;\n  attr(name: Partial<StyleProps>): DisplayObject<StyleProps>;\n  attr<Key extends keyof StyleProps>(name: Key): StyleProps[Key];\n  attr<Key extends keyof StyleProps>(\n    name: Key,\n    value: StyleProps[Key],\n  ): DisplayObject<StyleProps>;\n  attr(...args: any): any {\n    const [name, value] = args;\n    if (!name) {\n      return this.attributes;\n    }\n    if (isObject(name)) {\n      Object.keys(name).forEach((key) => {\n        this.setAttribute(\n          key as keyof StyleProps,\n          (name as unknown as StyleProps)[key as keyof StyleProps],\n        );\n      });\n      return this;\n    }\n    if (args.length === 2) {\n      this.setAttribute(name, value);\n      return this;\n    }\n    return this.attributes[name as keyof StyleProps];\n  }\n\n  /**\n   * return 3x3 matrix in world space\n   * @deprecated\n   */\n  getMatrix(transformMat4?: mat4): mat3 {\n    const transform = transformMat4 || this.getWorldTransform();\n    const [tx, ty] = mat4.getTranslation($vec3, transform);\n    const [sx, sy] = mat4.getScaling($vec3, transform);\n    const rotation = mat4.getRotation($quat, transform);\n    const [eux, , euz] = getEuler($vec3, rotation);\n    // gimbal lock at 90 degrees\n    return fromRotationTranslationScale(eux || euz, tx, ty, sx, sy);\n  }\n\n  /**\n   * return 3x3 matrix in local space\n   * @deprecated\n   */\n  getLocalMatrix(): mat3 {\n    return this.getMatrix(this.getLocalTransform());\n  }\n\n  /**\n   * set 3x3 matrix in world space\n   * @deprecated\n   */\n  setMatrix(mat: mat3) {\n    const [tx, ty, scalingX, scalingY, angle] = decompose(mat);\n    this.setEulerAngles(angle)\n      .setPosition(tx, ty)\n      .setLocalScale(scalingX, scalingY);\n  }\n\n  /**\n   * set 3x3 matrix in local space\n   * @deprecated\n   */\n  setLocalMatrix(mat: mat3) {\n    const [tx, ty, scalingX, scalingY, angle] = decompose(mat);\n    this.setLocalEulerAngles(angle)\n      .setLocalPosition(tx, ty)\n      .setLocalScale(scalingX, scalingY);\n  }\n\n  /**\n   * Use `visibility: visible` instead.\n   * @deprecated\n   */\n  show() {\n    this.forEach((object: DisplayObject) => {\n      object.style.visibility = 'visible';\n    });\n  }\n\n  /**\n   * Use `visibility: hidden` instead.\n   * @deprecated\n   */\n  hide() {\n    this.forEach((object: DisplayObject) => {\n      object.style.visibility = 'hidden';\n    });\n  }\n\n  /**\n   * Use `childElementCount` instead.\n   * @deprecated\n   */\n  getCount() {\n    return this.childElementCount;\n  }\n\n  /**\n   * Use `parentElement` instead.\n   * @deprecated\n   */\n  getParent(): DisplayObject | null {\n    return this.parentElement as DisplayObject;\n  }\n\n  /**\n   * Use `children` instead.\n   * @deprecated\n   */\n  getChildren(): DisplayObject[] {\n    return this.children as DisplayObject[];\n  }\n\n  /**\n   * Use `firstElementChild` instead.\n   * @deprecated\n   */\n  getFirst(): DisplayObject | null {\n    return this.firstElementChild as DisplayObject;\n  }\n\n  /**\n   * Use `lastElementChild` instead.\n   * @deprecated\n   */\n  getLast(): DisplayObject | null {\n    return this.lastElementChild as DisplayObject;\n  }\n\n  /**\n   * Use `this.children[index]` instead.\n   * @deprecated\n   */\n  getChildByIndex(index: number): DisplayObject | null {\n    return (this.children[index] as DisplayObject) || null;\n  }\n\n  /**\n   * Use `appendChild` instead.\n   * @deprecated\n   */\n  add<T extends IChildNode>(child: T, index?: number): T {\n    return this.appendChild(child, index);\n  }\n\n  /**\n   * @deprecated\n   */\n  set<\n    StyleProps extends BaseStyleProps,\n    Key extends keyof DisplayObjectConfig<StyleProps>,\n  >(name: Key, value: DisplayObjectConfig<StyleProps>[Key]) {\n    // @ts-ignore\n    this.config[name] = value;\n  }\n\n  /**\n   * @deprecated\n   */\n  get<StyleProps extends BaseStyleProps>(\n    name: keyof DisplayObjectConfig<StyleProps>,\n  ) {\n    return this.config[name];\n  }\n\n  /**\n   * Use `setPosition` instead.\n   * @deprecated\n   */\n  moveTo(position: vec3 | vec2 | number, y = 0, z = 0) {\n    (this as unknown as DisplayObject).setPosition(position, y, z);\n    return this;\n  }\n\n  /**\n   * Use `setPosition` instead.\n   * @deprecated\n   */\n  move(position: vec3 | vec2 | number, y = 0, z = 0) {\n    (this as unknown as DisplayObject).setPosition(position, y, z);\n    return this;\n  }\n\n  /**\n   * Use `this.style.zIndex` instead.\n   * @deprecated\n   */\n  setZIndex(zIndex: number) {\n    this.style.zIndex = zIndex;\n    return this;\n  }\n\n  // #endregion deprecated\n}\n","import type { DisplayObjectConfig } from '../dom/interfaces';\nimport type { BaseStyleProps, ParsedBaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport { DisplayObject } from './DisplayObject';\n\nexport interface CircleStyleProps extends BaseStyleProps {\n  /**\n   * X coordinate of the center of the circle.\n   */\n  cx?: number | string | null;\n  /**\n   * Y coordinate of the center of the circle.\n   */\n  cy?: number | string | null;\n  /**\n   * Z coordinate of the center of the circle.\n   */\n  cz?: number | string | null;\n  /**\n   * Radius of the circle.\n   */\n  r: number | string | null;\n  /**\n   * Whether the circle is billboard.\n   */\n  isBillboard?: boolean;\n  /**\n   * Whether the circle is size attenuation.\n   */\n  isSizeAttenuation?: boolean;\n}\nexport interface ParsedCircleStyleProps extends ParsedBaseStyleProps {\n  cx: number;\n  cy: number;\n  cz?: number;\n  r: number;\n  isBillboard?: boolean;\n  isSizeAttenuation?: boolean;\n}\nexport class Circle extends DisplayObject<\n  CircleStyleProps,\n  ParsedCircleStyleProps\n> {\n  static PARSED_STYLE_LIST: Set<string> = new Set([\n    ...DisplayObject.PARSED_STYLE_LIST,\n    'cx',\n    'cy',\n    'cz',\n    'r',\n    'isBillboard',\n    'isSizeAttenuation',\n  ]);\n\n  constructor(options: DisplayObjectConfig<CircleStyleProps> = {}) {\n    super({\n      type: Shape.CIRCLE,\n      ...options,\n    });\n  }\n}\n","import type { DisplayObjectConfig } from '../dom';\nimport type { BaseStyleProps } from '../types';\nimport { DisplayObject } from './DisplayObject';\n\nexport interface BaseCustomElementStyleProps extends BaseStyleProps {}\n\n/**\n * shadow root\n * @see https://yuque.antfin-inc.com/antv/czqvg5/pgqipg\n */\nexport abstract class CustomElement<\n  CustomElementStyleProps,\n> extends DisplayObject<CustomElementStyleProps & BaseCustomElementStyleProps> {\n  static PARSED_STYLE_LIST: Set<string> = new Set([\n    'class',\n    'className',\n    'clipPath',\n    'cursor',\n    'draggable',\n    'droppable',\n    'opacity',\n    'pointerEvents',\n    'transform',\n    'transformOrigin',\n    'zIndex',\n    'visibility',\n  ]);\n\n  isCustomElement = true;\n\n  // private shadowNodes: DisplayObject[] = [];\n\n  constructor({\n    style,\n    ...rest\n  }: DisplayObjectConfig<CustomElementStyleProps> = {}) {\n    super({\n      style,\n      ...rest,\n    });\n  }\n\n  /**\n   * fired after element insert into DOM tree\n   */\n  connectedCallback?(): void;\n\n  /**\n   * fired before element removed from DOM tree\n   */\n  disconnectedCallback?(): void;\n\n  attributeChangedCallback?<Key extends keyof CustomElementStyleProps>(\n    name: Key,\n    oldValue: CustomElementStyleProps[Key],\n    newValue: CustomElementStyleProps[Key],\n    oldParsedValue?: any,\n    newParsedValue?: any,\n  ): void;\n}\n","import type { DisplayObjectConfig } from '../dom/interfaces';\nimport type { BaseStyleProps, ParsedBaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport { DisplayObject } from './DisplayObject';\n\nexport interface EllipseStyleProps extends BaseStyleProps {\n  cx?: number | string;\n  cy?: number | string;\n  cz?: number | string;\n  rx: number | string;\n  ry: number | string;\n  isBillboard?: boolean;\n  isSizeAttenuation?: boolean;\n}\nexport interface ParsedEllipseStyleProps extends ParsedBaseStyleProps {\n  cx: number;\n  cy: number;\n  cz?: number;\n  rx: number;\n  ry: number;\n  isBillboard?: boolean;\n  isSizeAttenuation?: boolean;\n}\nexport class Ellipse extends DisplayObject<\n  EllipseStyleProps,\n  ParsedEllipseStyleProps\n> {\n  static PARSED_STYLE_LIST: Set<string> = new Set([\n    ...DisplayObject.PARSED_STYLE_LIST,\n    'cx',\n    'cy',\n    'cz',\n    'rx',\n    'ry',\n    'isBillboard',\n    'isSizeAttenuation',\n  ]);\n\n  constructor(options: DisplayObjectConfig<EllipseStyleProps> = {}) {\n    super({\n      type: Shape.ELLIPSE,\n      ...options,\n    });\n  }\n}\n","import { Shape } from '../types';\nimport { DisplayObject } from './DisplayObject';\n\n/**\n * 节点片段，用于包裹多个节点并批量操作\n *\n *  向 Fragment 或者根节点为 Fragment 的节点添加子节点时，不会触发渲染和事件。\n *\n * 当 Fragment 被挂载到 Canvas 中的节点时，其子节点会一次性被渲染，并触发合并事件。\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\n */\nexport class Fragment extends DisplayObject {\n  static PARSED_STYLE_LIST = new Set<string>(['class', 'className']);\n\n  constructor() {\n    super({ type: Shape.FRAGMENT });\n  }\n}\n","import type { CSSUnitValue } from '../css';\nimport type { DisplayObjectConfig } from '../dom';\nimport type { BaseStyleProps, ParsedBaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport { DisplayObject } from './DisplayObject';\n\nexport interface GroupStyleProps extends BaseStyleProps {\n  width?: number | string;\n  height?: number | string;\n}\n\nexport interface ParsedGroupStyleProps extends ParsedBaseStyleProps {\n  width?: CSSUnitValue;\n  height?: CSSUnitValue;\n}\n\n/**\n * its attributes are inherited by its children.\n * @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Element/g\n * \n * @example\n * <g fill=\"white\" stroke=\"green\" stroke-width=\"5\">\n    <circle cx=\"40\" cy=\"40\" r=\"25\" />\n    <circle cx=\"60\" cy=\"60\" r=\"25\" />\n  </g>\n */\nexport class Group extends DisplayObject {\n  static PARSED_STYLE_LIST: Set<string> = new Set([\n    'class',\n    'className',\n    'clipPath',\n    'cursor',\n    'draggable',\n    'droppable',\n    'opacity',\n    'pointerEvents',\n    'transform',\n    'transformOrigin',\n    'zIndex',\n    'visibility',\n  ]);\n\n  constructor(options: DisplayObjectConfig<GroupStyleProps> = {}) {\n    super({\n      type: Shape.GROUP,\n      ...options,\n    });\n  }\n}\n","import { mat4 } from 'gl-matrix';\nimport type { DisplayObjectConfig } from '../dom';\nimport { AABB } from '../shapes';\nimport type { BaseStyleProps, ParsedBaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport { DisplayObject } from './DisplayObject';\n\nexport interface HTMLStyleProps extends BaseStyleProps {\n  x?: number | string;\n  y?: number | string;\n  innerHTML: string | HTMLElement;\n  width?: number | string;\n  height?: number | string;\n}\n\nexport interface ParsedHTMLStyleProps extends ParsedBaseStyleProps {\n  x: number;\n  y: number;\n  $el: HTMLElement;\n  innerHTML: string | HTMLElement;\n  width: number;\n  height: number;\n}\n\n/**\n * HTML container\n * @see https://github.com/pmndrs/drei#html\n */\nexport class HTML extends DisplayObject<HTMLStyleProps, ParsedHTMLStyleProps> {\n  static PARSED_STYLE_LIST: Set<string> = new Set([\n    ...DisplayObject.PARSED_STYLE_LIST,\n    'x',\n    'y',\n    '$el',\n    'innerHTML',\n    'width',\n    'height',\n  ]);\n\n  constructor({ style, ...rest }: DisplayObjectConfig<HTMLStyleProps> = {}) {\n    super({\n      type: Shape.HTML,\n      style,\n      ...rest,\n    });\n\n    this.cullable.enable = false;\n  }\n\n  /**\n   * return wrapper HTMLElement\n   * * <div> in g-webgl/canvas\n   * * <foreignObject> in g-svg\n   */\n  getDomElement() {\n    return this.parsedStyle.$el;\n  }\n\n  /**\n   * override with $el.getBoundingClientRect\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/getBoundingClientRect\n   *\n   * ! The calculation logic of the html element should be consistent with that of the canvas element\n   */\n  // getBoundingClientRect(): Rectangle {\n  //   if (this.parsedStyle.$el) {\n  //     return this.parsedStyle.$el.getBoundingClientRect();\n  //   } else {\n  //     const { x, y, width, height } = this.parsedStyle;\n  //     return new Rectangle(x, y, width, height);\n  //   }\n  // }\n\n  getClientRects() {\n    return [this.getBoundingClientRect()];\n  }\n\n  // getBounds() {\n  //   const clientRect = this.getBoundingClientRect();\n  //   // calc context's offset\n  //   // @ts-ignore\n  //   const canvasRect = this.ownerDocument?.defaultView\n  //     ?.getContextService()\n  //     .getBoundingClientRect();\n\n  //   const aabb = new AABB();\n  //   const minX = clientRect.left - (canvasRect?.left || 0);\n  //   const minY = clientRect.top - (canvasRect?.top || 0);\n  //   aabb.setMinMax(\n  //     [minX, minY, 0],\n  //     [minX + clientRect.width, minY + clientRect.height, 0],\n  //   );\n  //   return aabb;\n  // }\n\n  getLocalBounds() {\n    if (this.parentNode) {\n      const parentInvert = mat4.invert(\n        mat4.create(),\n        (this.parentNode as DisplayObject).getWorldTransform(),\n      );\n      const bounds = this.getBounds();\n\n      if (!AABB.isEmpty(bounds)) {\n        const localBounds = new AABB();\n        localBounds.setFromTransformedAABB(bounds, parentInvert);\n        return localBounds;\n      }\n    }\n\n    return this.getBounds();\n  }\n}\n","import type { DisplayObjectConfig } from '../dom';\nimport type { BaseStyleProps, ParsedBaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport { DisplayObject } from './DisplayObject';\n\nexport interface ImageStyleProps extends BaseStyleProps {\n  x?: number | string;\n  y?: number | string;\n  z?: number;\n  src?: string | HTMLImageElement;\n  width?: number | string;\n  height?: number | string;\n  /**\n   * Whether the circle is billboard.\n   */\n  isBillboard?: boolean;\n  /**\n   * When isBillboard enabled, whether the circle is size attenuation.\n   */\n  isSizeAttenuation?: boolean;\n  /**\n   * When isBillboard enabled, the rotation.\n   */\n  billboardRotation?: number;\n  /**\n   * Whether to keep the aspect ratio of the image, under such circumstances, either the width or height can be omitted.\n   */\n  keepAspectRatio?: boolean;\n}\nexport interface ParsedImageStyleProps extends ParsedBaseStyleProps {\n  x: number;\n  y: number;\n  z?: number;\n  src?: string | HTMLImageElement;\n  width?: number;\n  height?: number;\n  isBillboard?: boolean;\n  billboardRotation?: number;\n  isSizeAttenuation?: boolean;\n  keepAspectRatio?: boolean;\n}\nexport class Image extends DisplayObject<\n  ImageStyleProps,\n  ParsedImageStyleProps\n> {\n  static PARSED_STYLE_LIST: Set<string> = new Set([\n    ...DisplayObject.PARSED_STYLE_LIST,\n    'x',\n    'y',\n    'z',\n    'src',\n    'width',\n    'height',\n    'isBillboard',\n    'billboardRotation',\n    'isSizeAttenuation',\n    'keepAspectRatio',\n  ]);\n\n  constructor(options: DisplayObjectConfig<ImageStyleProps> = {}) {\n    super({\n      type: Shape.IMAGE,\n      ...options,\n    });\n  }\n}\n","import { lineLength, linePointAt } from '@antv/g-math';\nimport { vec3 } from 'gl-matrix';\nimport type { DisplayObjectConfig } from '../dom';\nimport { Point } from '../shapes';\nimport type { BaseStyleProps, ParsedBaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport { DisplayObject, isDisplayObject } from './DisplayObject';\n\nexport interface LineStyleProps extends BaseStyleProps {\n  /**\n   * X coordinate of the start of the line.\n   */\n  x1: number;\n  /**\n   * Y coordinate of the start of the line.\n   */\n  y1: number;\n  /**\n   * X coordinate of the end of the line.\n   */\n  x2: number;\n  /**\n   * Y coordinate of the end of the line.\n   */\n  y2: number;\n  /**\n   * Z coordinate of the start of the line.\n   */\n  z1?: number;\n  /**\n   * Z coordinate of the end of the line.\n   */\n  z2?: number;\n  /**\n   * Whether the line is billboard.\n   */\n  isBillboard?: boolean;\n  /**\n   * Whether the line is size attenuation.\n   */\n  isSizeAttenuation?: boolean;\n  /**\n   * marker will be positioned at x1/y1\n   */\n  markerStart?: DisplayObject | null;\n\n  /**\n   * marker will be positioned at x2/y2\n   */\n  markerEnd?: DisplayObject | null;\n\n  /**\n   * offset relative to original position\n   */\n  markerStartOffset?: number;\n\n  /**\n   * offset relative to original position\n   */\n  markerEndOffset?: number;\n}\nexport interface ParsedLineStyleProps extends ParsedBaseStyleProps {\n  x1: number;\n  y1: number;\n  x2: number;\n  y2: number;\n  z1?: number;\n  z2?: number;\n  isBillboard?: boolean;\n  isSizeAttenuation?: boolean;\n  markerStart?: DisplayObject | null;\n  markerEnd?: DisplayObject | null;\n  markerStartOffset?: number;\n  markerEndOffset?: number;\n}\n\n/**\n * Create a line connecting two points.\n * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Element/line\n *\n * Also support for using marker.\n */\nexport class Line extends DisplayObject<LineStyleProps, ParsedLineStyleProps> {\n  static PARSED_STYLE_LIST: Set<string> = new Set([\n    ...DisplayObject.PARSED_STYLE_LIST,\n    'x1',\n    'y1',\n    'x2',\n    'y2',\n    'z1',\n    'z2',\n    'isBillboard',\n    'isSizeAttenuation',\n    'markerStart',\n    'markerEnd',\n    'markerStartOffset',\n    'markerEndOffset',\n  ]);\n\n  private markerStartAngle = 0;\n  private markerEndAngle = 0;\n\n  constructor({ style, ...rest }: DisplayObjectConfig<LineStyleProps> = {}) {\n    super({\n      type: Shape.LINE,\n      style: {\n        x1: 0,\n        y1: 0,\n        x2: 0,\n        y2: 0,\n        z1: 0,\n        z2: 0,\n        ...style,\n      },\n      ...rest,\n    });\n\n    const { markerStart, markerEnd } = this.parsedStyle;\n\n    if (markerStart && isDisplayObject(markerStart)) {\n      this.markerStartAngle = markerStart.getLocalEulerAngles();\n      this.appendChild(markerStart);\n    }\n\n    if (markerEnd && isDisplayObject(markerEnd)) {\n      this.markerEndAngle = markerEnd.getLocalEulerAngles();\n      this.appendChild(markerEnd);\n    }\n\n    this.transformMarker(true);\n    this.transformMarker(false);\n  }\n\n  attributeChangedCallback<Key extends keyof LineStyleProps>(\n    attrName: Key,\n    oldValue: LineStyleProps[Key],\n    newValue: LineStyleProps[Key],\n    prevParsedValue: ParsedLineStyleProps[Key],\n    newParsedValue: ParsedLineStyleProps[Key],\n  ) {\n    if (\n      attrName === 'x1' ||\n      attrName === 'y1' ||\n      attrName === 'x2' ||\n      attrName === 'y2' ||\n      attrName === 'markerStartOffset' ||\n      attrName === 'markerEndOffset'\n    ) {\n      this.transformMarker(true);\n      this.transformMarker(false);\n    } else if (attrName === 'markerStart') {\n      if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n        this.markerStartAngle = 0;\n        prevParsedValue.remove();\n      }\n\n      // CSSKeyword 'unset'\n      if (newParsedValue && isDisplayObject(newParsedValue)) {\n        this.markerStartAngle = newParsedValue.getLocalEulerAngles();\n        this.appendChild(newParsedValue);\n        this.transformMarker(true);\n      }\n    } else if (attrName === 'markerEnd') {\n      if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n        this.markerEndAngle = 0;\n        prevParsedValue.remove();\n      }\n\n      if (newParsedValue && isDisplayObject(newParsedValue)) {\n        this.markerEndAngle = newParsedValue.getLocalEulerAngles();\n        this.appendChild(newParsedValue);\n        this.transformMarker(false);\n      }\n    }\n  }\n\n  private transformMarker(isStart: boolean) {\n    const {\n      markerStart,\n      markerEnd,\n      markerStartOffset,\n      markerEndOffset,\n      x1,\n      x2,\n      y1,\n      y2,\n    } = this.parsedStyle;\n    const marker = isStart ? markerStart : markerEnd;\n\n    if (!marker || !isDisplayObject(marker)) {\n      return;\n    }\n\n    let rad = 0;\n    let x: number;\n    let y: number;\n    let ox: number;\n    let oy: number;\n    let offset: number;\n    let originalAngle: number;\n\n    if (isStart) {\n      ox = x1;\n      oy = y1;\n      x = x2 - x1;\n      y = y2 - y1;\n      offset = markerStartOffset || 0;\n      originalAngle = this.markerStartAngle;\n    } else {\n      ox = x2;\n      oy = y2;\n      x = x1 - x2;\n      y = y1 - y2;\n      offset = markerEndOffset || 0;\n      originalAngle = this.markerEndAngle;\n    }\n    rad = Math.atan2(y, x);\n\n    // account for markerOffset\n    marker.setLocalEulerAngles((rad * 180) / Math.PI + originalAngle);\n    marker.setLocalPosition(\n      ox + Math.cos(rad) * offset,\n      oy + Math.sin(rad) * offset,\n    );\n  }\n\n  getPoint(ratio: number, inWorldSpace = false): Point {\n    // TODO: account for z1/z2 in 3D line\n    const { x1, y1, x2, y2 } = this.parsedStyle;\n    const { x, y } = linePointAt(x1, y1, x2, y2, ratio);\n\n    const transformed = vec3.transformMat4(\n      vec3.create(),\n      vec3.fromValues(x, y, 0),\n      inWorldSpace ? this.getWorldTransform() : this.getLocalTransform(),\n    );\n\n    // apply local transformation\n    return new Point(transformed[0], transformed[1]);\n  }\n\n  getPointAtLength(distance: number, inWorldSpace = false): Point {\n    return this.getPoint(distance / this.getTotalLength(), inWorldSpace);\n  }\n\n  getTotalLength() {\n    // TODO: account for z1/z2 in 3D line\n    const { x1, y1, x2, y2 } = this.parsedStyle;\n    return lineLength(x1, y1, x2, y2);\n  }\n}\n","import type {\n  AbsoluteArray,\n  AbsoluteSegment,\n  CurveArray,\n  PathArray,\n} from '@antv/util';\nimport { getPointAtLength } from '@antv/util';\nimport { vec3 } from 'gl-matrix';\nimport type { DisplayObjectConfig } from '../dom';\nimport { Point } from '../shapes';\nimport { Rectangle } from '../shapes/Rectangle';\nimport type { BaseStyleProps, ParsedBaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport { getOrCalculatePathTotalLength } from '../utils';\nimport { DisplayObject, isDisplayObject } from './DisplayObject';\nimport { EMPTY_PARSED_PATH } from './constants';\n\nexport interface PathStyleProps extends BaseStyleProps {\n  d?: string | PathArray;\n  /**\n   * marker will be positioned at the first point\n   */\n  markerStart?: DisplayObject | null;\n\n  /**\n   * marker will be positioned at the last point\n   */\n  markerEnd?: DisplayObject | null;\n\n  markerMid?: DisplayObject | null;\n\n  /**\n   * offset relative to original position\n   */\n  markerStartOffset?: number;\n\n  /**\n   * offset relative to original position\n   */\n  markerEndOffset?: number;\n\n  /**\n   * Whether the circle is billboard.\n   */\n  isBillboard?: boolean;\n  /**\n   * Whether the circle is size attenuation.\n   */\n  isSizeAttenuation?: boolean;\n}\n\nexport interface PathSegmentBBox {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\nexport interface PathSegment {\n  command: 'M' | 'L' | 'V' | 'H' | 'C' | 'S' | 'Q' | 'T' | 'A' | 'Z';\n  currentPoint: [number, number];\n  prePoint: [number, number];\n  nextPoint: [number, number];\n  startTangent: [number, number];\n  endTangent: [number, number];\n  params: AbsoluteSegment;\n  arcParams: PathArcParams;\n  /**\n   * Used for hit test.\n   */\n  box: PathSegmentBBox;\n  /**\n   * Convert A to C.\n   */\n  cubicParams: [number, number, number, number, number, number];\n}\n\nexport interface PathArcParams {\n  cx: number;\n  cy: number;\n  // 弧形的起点和终点相同时，长轴和短轴的长度按 0 处理\n  rx: number;\n  ry: number;\n  startAngle: number;\n  endAngle: number;\n  xRotation: number;\n  arcFlag: number;\n  sweepFlag: number;\n}\nexport interface ParsedPathStyleProps extends ParsedBaseStyleProps {\n  d: {\n    absolutePath: AbsoluteArray;\n    hasArc: boolean;\n    segments: PathSegment[];\n    polygons: [number, number][][];\n    polylines: [number, number][][];\n    curve: CurveArray;\n    totalLength: number;\n    rect: Rectangle;\n  };\n  markerStart?: DisplayObject | null;\n  markerMid?: DisplayObject | null;\n  markerEnd?: DisplayObject | null;\n  markerStartOffset?: number;\n  markerEndOffset?: number;\n  isBillboard?: boolean;\n  isSizeAttenuation?: boolean;\n}\nexport class Path extends DisplayObject<PathStyleProps, ParsedPathStyleProps> {\n  static PARSED_STYLE_LIST: Set<string> = new Set([\n    ...DisplayObject.PARSED_STYLE_LIST,\n    'd',\n    'markerStart',\n    'markerMid',\n    'markerEnd',\n    'markerStartOffset',\n    'markerEndOffset',\n    'isBillboard',\n    'isSizeAttenuation',\n  ]);\n\n  private markerStartAngle = 0;\n  private markerEndAngle = 0;\n\n  /**\n   * markers placed at the mid\n   */\n  private markerMidList: DisplayObject[] = [];\n\n  constructor({ style, ...rest }: DisplayObjectConfig<PathStyleProps> = {}) {\n    super({\n      type: Shape.PATH,\n      style,\n      initialParsedStyle: {\n        miterLimit: 4,\n        d: {\n          ...EMPTY_PARSED_PATH,\n        },\n      },\n      ...rest,\n    });\n\n    const { markerStart, markerEnd, markerMid } = this.parsedStyle;\n\n    if (markerStart && isDisplayObject(markerStart)) {\n      this.markerStartAngle = markerStart.getLocalEulerAngles();\n      this.appendChild(markerStart);\n    }\n\n    if (markerMid && isDisplayObject(markerMid)) {\n      this.placeMarkerMid(markerMid);\n    }\n\n    if (markerEnd && isDisplayObject(markerEnd)) {\n      this.markerEndAngle = markerEnd.getLocalEulerAngles();\n      this.appendChild(markerEnd);\n    }\n\n    this.transformMarker(true);\n    this.transformMarker(false);\n  }\n\n  attributeChangedCallback<Key extends keyof PathStyleProps>(\n    attrName: Key,\n    oldValue: PathStyleProps[Key],\n    newValue: PathStyleProps[Key],\n    prevParsedValue: ParsedPathStyleProps[Key],\n    newParsedValue: ParsedPathStyleProps[Key],\n  ) {\n    if (attrName === 'd') {\n      // recalc markers\n      this.transformMarker(true);\n      this.transformMarker(false);\n      this.placeMarkerMid(this.parsedStyle.markerMid);\n    } else if (\n      attrName === 'markerStartOffset' ||\n      attrName === 'markerEndOffset'\n    ) {\n      this.transformMarker(true);\n      this.transformMarker(false);\n    } else if (attrName === 'markerStart') {\n      if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n        this.markerStartAngle = 0;\n        prevParsedValue.remove();\n      }\n\n      // CSSKeyword 'unset'\n      if (newParsedValue && isDisplayObject(newParsedValue)) {\n        this.markerStartAngle = newParsedValue.getLocalEulerAngles();\n        this.appendChild(newParsedValue);\n        this.transformMarker(true);\n      }\n    } else if (attrName === 'markerEnd') {\n      if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n        this.markerEndAngle = 0;\n        prevParsedValue.remove();\n      }\n\n      if (newParsedValue && isDisplayObject(newParsedValue)) {\n        this.markerEndAngle = newParsedValue.getLocalEulerAngles();\n        this.appendChild(newParsedValue);\n        this.transformMarker(false);\n      }\n    } else if (attrName === 'markerMid') {\n      this.placeMarkerMid(newParsedValue as DisplayObject);\n    }\n  }\n\n  private transformMarker(isStart: boolean) {\n    const { markerStart, markerEnd, markerStartOffset, markerEndOffset } =\n      this.parsedStyle;\n    const marker = isStart ? markerStart : markerEnd;\n\n    if (!marker || !isDisplayObject(marker)) {\n      return;\n    }\n\n    let rad = 0;\n    let x: number;\n    let y: number;\n    let ox: number;\n    let oy: number;\n    let offset: number;\n    let originalAngle: number;\n\n    if (isStart) {\n      const [p1, p2] = this.getStartTangent();\n      ox = p2[0];\n      oy = p2[1];\n      x = p1[0] - p2[0];\n      y = p1[1] - p2[1];\n      offset = markerStartOffset || 0;\n      originalAngle = this.markerStartAngle;\n    } else {\n      const [p1, p2] = this.getEndTangent();\n      ox = p2[0];\n      oy = p2[1];\n      x = p1[0] - p2[0];\n      y = p1[1] - p2[1];\n      offset = markerEndOffset || 0;\n      originalAngle = this.markerEndAngle;\n    }\n    rad = Math.atan2(y, x);\n\n    // account for markerOffset\n    marker.setLocalEulerAngles((rad * 180) / Math.PI + originalAngle);\n    marker.setLocalPosition(\n      ox + Math.cos(rad) * offset,\n      oy + Math.sin(rad) * offset,\n    );\n  }\n\n  private placeMarkerMid(marker: DisplayObject) {\n    const {\n      d: { segments },\n    } = this.parsedStyle;\n    // clear all existed markers\n    this.markerMidList.forEach((marker) => {\n      marker.remove();\n    });\n    if (marker && isDisplayObject(marker)) {\n      for (let i = 1; i < segments.length - 1; i++) {\n        const [ox, oy] = segments[i].currentPoint;\n        const cloned = i === 1 ? marker : marker.cloneNode(true);\n        this.markerMidList.push(cloned);\n        this.appendChild(cloned);\n        cloned.setLocalPosition(ox, oy);\n        // TODO: orient of marker\n      }\n    }\n  }\n\n  /**\n   * Returns the total length of the path.\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGGeometryElement/getTotalLength\n   */\n  getTotalLength() {\n    return getOrCalculatePathTotalLength(this);\n  }\n\n  /**\n   * Returns the point at a given distance along the path.\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGGeometryElement/getPointAtLength\n   */\n  getPointAtLength(distance: number, inWorldSpace = false): Point {\n    const {\n      d: { absolutePath },\n    } = this.parsedStyle;\n    const { x, y } = getPointAtLength(absolutePath, distance);\n\n    const transformed = vec3.transformMat4(\n      vec3.create(),\n      vec3.fromValues(x, y, 0),\n      inWorldSpace ? this.getWorldTransform() : this.getLocalTransform(),\n    );\n\n    // apply local transformation\n    return new Point(transformed[0], transformed[1]);\n  }\n\n  /**\n   * Returns the point at a given ratio of the total length in path.\n   */\n  getPoint(ratio: number, inWorldSpace = false): Point {\n    return this.getPointAtLength(\n      ratio * getOrCalculatePathTotalLength(this),\n      inWorldSpace,\n    );\n  }\n\n  /**\n   * Get start tangent vector\n   */\n  getStartTangent(): number[][] {\n    const { segments } = this.parsedStyle.d;\n    let result: number[][] = [];\n    if (segments.length > 1) {\n      const startPoint = segments[0].currentPoint;\n      const endPoint = segments[1].currentPoint;\n      const tangent = segments[1].startTangent;\n      result = [];\n      if (tangent) {\n        result.push([startPoint[0] - tangent[0], startPoint[1] - tangent[1]]);\n        result.push([startPoint[0], startPoint[1]]);\n      } else {\n        result.push([endPoint[0], endPoint[1]]);\n        result.push([startPoint[0], startPoint[1]]);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Get end tangent vector\n   */\n  getEndTangent(): number[][] {\n    const { segments } = this.parsedStyle.d;\n    const { length } = segments;\n    let result: number[][] = [];\n    if (length > 1) {\n      const startPoint = segments[length - 2].currentPoint;\n      const endPoint = segments[length - 1].currentPoint;\n      const tangent = segments[length - 1].endTangent;\n      result = [];\n      if (tangent) {\n        result.push([endPoint[0] - tangent[0], endPoint[1] - tangent[1]]);\n        result.push([endPoint[0], endPoint[1]]);\n      } else {\n        result.push([startPoint[0], startPoint[1]]);\n        result.push([endPoint[0], endPoint[1]]);\n      }\n    }\n    return result;\n  }\n}\n","import type { DisplayObjectConfig } from '../dom';\nimport type { BaseStyleProps, ParsedBaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport { DisplayObject, isDisplayObject } from './DisplayObject';\n\nexport interface PolygonStyleProps extends BaseStyleProps {\n  points: ([number, number] | [number, number, number])[];\n  /**\n   * marker will be positioned at the first point\n   */\n  markerStart?: DisplayObject | null;\n\n  /**\n   * marker will be positioned at the last point\n   */\n  markerEnd?: DisplayObject | null;\n\n  markerMid?: DisplayObject | null;\n\n  /**\n   * offset relative to original position\n   */\n  markerStartOffset?: number;\n\n  /**\n   * offset relative to original position\n   */\n  markerEndOffset?: number;\n  isClosed?: boolean;\n  isBillboard?: boolean;\n  isSizeAttenuation?: boolean;\n}\nexport interface ParsedPolygonStyleProps extends ParsedBaseStyleProps {\n  points: {\n    points: ([number, number] | [number, number, number])[];\n    segments: [number, number][];\n    totalLength: number;\n  };\n  markerStart?: DisplayObject | null;\n  markerMid?: DisplayObject | null;\n  markerEnd?: DisplayObject | null;\n  markerStartOffset?: number;\n  markerEndOffset?: number;\n  isClosed?: boolean;\n  isBillboard?: boolean;\n  isSizeAttenuation?: boolean;\n}\n\nexport class Polygon extends DisplayObject<\n  PolygonStyleProps,\n  ParsedPolygonStyleProps\n> {\n  static PARSED_STYLE_LIST: Set<string> = new Set([\n    ...DisplayObject.PARSED_STYLE_LIST,\n    'points',\n    'markerStart',\n    'markerMid',\n    'markerEnd',\n    'markerStartOffset',\n    'markerEndOffset',\n    'isClosed',\n    'isBillboard',\n    'isSizeAttenuation',\n  ]);\n\n  private markerStartAngle = 0;\n  private markerEndAngle = 0;\n\n  /**\n   * markers placed at the mid\n   */\n  private markerMidList: DisplayObject[] = [];\n\n  constructor({ style, ...rest }: DisplayObjectConfig<PolygonStyleProps> = {}) {\n    super({\n      type: Shape.POLYGON,\n      style,\n      initialParsedStyle: {\n        points: {\n          points: [],\n          totalLength: 0,\n          segments: [],\n        },\n        miterLimit: 4,\n        isClosed: true,\n      },\n      ...rest,\n    });\n\n    const { markerStart, markerEnd, markerMid } = this.parsedStyle;\n\n    if (markerStart && isDisplayObject(markerStart)) {\n      this.markerStartAngle = markerStart.getLocalEulerAngles();\n      this.appendChild(markerStart);\n    }\n\n    if (markerMid && isDisplayObject(markerMid)) {\n      this.placeMarkerMid(markerMid);\n    }\n\n    if (markerEnd && isDisplayObject(markerEnd)) {\n      this.markerEndAngle = markerEnd.getLocalEulerAngles();\n      this.appendChild(markerEnd);\n    }\n\n    this.transformMarker(true);\n    this.transformMarker(false);\n  }\n\n  attributeChangedCallback<Key extends keyof PolygonStyleProps>(\n    attrName: Key,\n    oldValue: PolygonStyleProps[Key],\n    newValue: PolygonStyleProps[Key],\n    prevParsedValue: ParsedPolygonStyleProps[Key],\n    newParsedValue: ParsedPolygonStyleProps[Key],\n  ) {\n    if (attrName === 'points') {\n      // recalc markers\n      this.transformMarker(true);\n      this.transformMarker(false);\n      this.placeMarkerMid(this.parsedStyle.markerMid);\n    } else if (\n      attrName === 'markerStartOffset' ||\n      attrName === 'markerEndOffset'\n    ) {\n      this.transformMarker(true);\n      this.transformMarker(false);\n    } else if (attrName === 'markerStart') {\n      if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n        this.markerStartAngle = 0;\n        prevParsedValue.remove();\n      }\n\n      // CSSKeyword 'unset'\n      if (newParsedValue && isDisplayObject(newParsedValue)) {\n        this.markerStartAngle = newParsedValue.getLocalEulerAngles();\n        this.appendChild(newParsedValue);\n        this.transformMarker(true);\n      }\n    } else if (attrName === 'markerEnd') {\n      if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n        this.markerEndAngle = 0;\n        prevParsedValue.remove();\n      }\n\n      if (newParsedValue && isDisplayObject(newParsedValue)) {\n        this.markerEndAngle = newParsedValue.getLocalEulerAngles();\n        this.appendChild(newParsedValue);\n        this.transformMarker(false);\n      }\n    } else if (attrName === 'markerMid') {\n      this.placeMarkerMid(newParsedValue as DisplayObject);\n    }\n  }\n\n  private transformMarker(isStart: boolean) {\n    const {\n      markerStart,\n      markerEnd,\n      markerStartOffset,\n      markerEndOffset,\n      points: P,\n    } = this.parsedStyle;\n    const { points } = P || {};\n    const marker = isStart ? markerStart : markerEnd;\n\n    if (!marker || !isDisplayObject(marker) || !points) {\n      return;\n    }\n\n    let rad = 0;\n    let x: number;\n    let y: number;\n    let ox: number;\n    let oy: number;\n    let offset: number;\n    let originalAngle: number;\n\n    ox = points[0][0];\n    oy = points[0][1];\n\n    if (isStart) {\n      x = points[1][0] - points[0][0];\n      y = points[1][1] - points[0][1];\n      offset = markerStartOffset || 0;\n      originalAngle = this.markerStartAngle;\n    } else {\n      const { length } = points;\n\n      if (!this.parsedStyle.isClosed) {\n        ox = points[length - 1][0];\n        oy = points[length - 1][1];\n        x = points[length - 2][0] - points[length - 1][0];\n        y = points[length - 2][1] - points[length - 1][1];\n      } else {\n        x = points[length - 1][0] - points[0][0];\n        y = points[length - 1][1] - points[0][1];\n      }\n      offset = markerEndOffset || 0;\n      originalAngle = this.markerEndAngle;\n    }\n    rad = Math.atan2(y, x);\n\n    // account for markerOffset\n    marker.setLocalEulerAngles((rad * 180) / Math.PI + originalAngle);\n    marker.setLocalPosition(\n      ox + Math.cos(rad) * offset,\n      oy + Math.sin(rad) * offset,\n    );\n  }\n\n  private placeMarkerMid(marker: DisplayObject) {\n    const { points: P } = this.parsedStyle;\n    const { points } = P || {};\n\n    // clear all existed markers\n    this.markerMidList.forEach((marker) => {\n      marker.remove();\n    });\n    this.markerMidList = [];\n\n    if (marker && isDisplayObject(marker) && points) {\n      for (\n        let i = 1;\n        i < (this.parsedStyle.isClosed ? points.length : points.length - 1);\n        i++\n      ) {\n        const ox = points[i][0];\n        const oy = points[i][1];\n\n        const cloned = i === 1 ? marker : marker.cloneNode(true);\n        this.markerMidList.push(cloned);\n\n        this.appendChild(cloned);\n        cloned.setLocalPosition(ox, oy);\n\n        // TODO: orient of marker\n      }\n    }\n  }\n}\n","import { lineLength, linePointAt } from '@antv/g-math';\nimport { vec3 } from 'gl-matrix';\nimport type { DisplayObjectConfig } from '../dom';\nimport { Point } from '../shapes';\nimport type { BaseStyleProps, ParsedBaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport type { DisplayObject } from './DisplayObject';\nimport { Polygon } from './Polygon';\nimport { getOrCalculatePolylineTotalLength } from '../utils';\n\nexport interface PolylineStyleProps extends BaseStyleProps {\n  points: ([number, number] | [number, number, number])[];\n  /**\n   * marker will be positioned at the first point\n   */\n  markerStart?: DisplayObject | null;\n\n  /**\n   * marker will be positioned at the last point\n   */\n  markerEnd?: DisplayObject | null;\n\n  markerMid?: DisplayObject | null;\n\n  /**\n   * offset relative to original position\n   */\n  markerStartOffset?: number;\n\n  /**\n   * offset relative to original position\n   */\n  markerEndOffset?: number;\n  /**\n   * Whether the circle is billboard.\n   */\n  isBillboard?: boolean;\n  /**\n   * Whether the circle is size attenuation.\n   */\n  isSizeAttenuation?: boolean;\n}\nexport interface ParsedPolylineStyleProps extends ParsedBaseStyleProps {\n  points: {\n    points: ([number, number] | [number, number, number])[];\n    segments: [number, number][];\n    totalLength: number;\n  };\n  markerStart?: DisplayObject | null;\n  markerMid?: DisplayObject | null;\n  markerEnd?: DisplayObject | null;\n  markerStartOffset?: number;\n  markerEndOffset?: number;\n  isBillboard?: boolean;\n}\n\n/**\n * Polyline inherits the marker-related capabilities of Polygon.\n */\nexport class Polyline extends Polygon {\n  static PARSED_STYLE_LIST = new Set([\n    ...Polygon.PARSED_STYLE_LIST,\n    'points',\n    'markerStart',\n    'markerMid',\n    'markerEnd',\n    'markerStartOffset',\n    'markerEndOffset',\n    'isBillboard',\n  ]);\n\n  constructor({\n    style,\n    ...rest\n  }: DisplayObjectConfig<PolylineStyleProps> = {}) {\n    super({\n      type: Shape.POLYLINE,\n      style,\n      initialParsedStyle: {\n        points: {\n          points: [],\n          totalLength: 0,\n          segments: [],\n        },\n        miterLimit: 4,\n        isClosed: false,\n      },\n      ...rest,\n    });\n  }\n\n  getTotalLength() {\n    return getOrCalculatePolylineTotalLength(this);\n  }\n\n  getPointAtLength(distance: number, inWorldSpace = false): Point {\n    return this.getPoint(distance / this.getTotalLength(), inWorldSpace);\n  }\n\n  getPoint(ratio: number, inWorldSpace = false): Point {\n    const {\n      points: { points },\n    } = this.parsedStyle;\n\n    if (this.parsedStyle.points.segments.length === 0) {\n      const segments: [number, number][] = [];\n      let tempLength = 0;\n      let segmentT: [number, number];\n      let segmentL: number;\n\n      const totalLength = this.getTotalLength();\n\n      points.forEach((p, i) => {\n        if (points[i + 1]) {\n          segmentT = [0, 0];\n          segmentT[0] = tempLength / totalLength;\n          segmentL = lineLength(p[0], p[1], points[i + 1][0], points[i + 1][1]);\n          tempLength += segmentL;\n          segmentT[1] = tempLength / totalLength;\n          segments.push(segmentT);\n        }\n      });\n\n      this.parsedStyle.points.segments = segments;\n    }\n\n    let subt = 0;\n    let index = 0;\n    this.parsedStyle.points.segments.forEach((v, i) => {\n      if (ratio >= v[0] && ratio <= v[1]) {\n        subt = (ratio - v[0]) / (v[1] - v[0]);\n        index = i;\n      }\n    });\n\n    const { x, y } = linePointAt(\n      points[index][0],\n      points[index][1],\n      points[index + 1][0],\n      points[index + 1][1],\n      subt,\n    );\n\n    const transformed = vec3.transformMat4(\n      vec3.create(),\n      vec3.fromValues(x, y, 0),\n      inWorldSpace ? this.getWorldTransform() : this.getLocalTransform(),\n    );\n\n    // apply local transformation\n    return new Point(transformed[0], transformed[1]);\n  }\n\n  getStartTangent(): number[][] {\n    const { points } = this.parsedStyle.points;\n    const result = [];\n    result.push([points[1][0], points[1][1]]);\n    result.push([points[0][0], points[0][1]]);\n    return result;\n  }\n\n  getEndTangent(): number[][] {\n    const { points } = this.parsedStyle.points;\n    const l = points.length - 1;\n    const result = [];\n    result.push([points[l - 1][0], points[l - 1][1]]);\n    result.push([points[l][0], points[l][1]]);\n    return result;\n  }\n}\n","import type { DisplayObjectConfig } from '../dom';\nimport type { BaseStyleProps, ParsedBaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport { DisplayObject } from './DisplayObject';\n\nexport interface RectStyleProps extends BaseStyleProps {\n  x?: number | string;\n  y?: number | string;\n  z?: number;\n  width: number | string;\n  height: number | string;\n  isBillboard?: boolean;\n  isSizeAttenuation?: boolean;\n  /**\n   * top-left, top-right, bottom-right, bottom-left\n   */\n  radius?: number | string | number[];\n}\n\nexport interface ParsedRectStyleProps extends ParsedBaseStyleProps {\n  x?: number;\n  y?: number;\n  z?: number;\n  width: number;\n  height: number;\n  isBillboard?: boolean;\n  isSizeAttenuation?: boolean;\n  radius?: [number, number, number, number];\n}\n\nexport class Rect extends DisplayObject<RectStyleProps, ParsedRectStyleProps> {\n  static PARSED_STYLE_LIST: Set<string> = new Set([\n    ...DisplayObject.PARSED_STYLE_LIST,\n    'x',\n    'y',\n    'z',\n    'width',\n    'height',\n    'isBillboard',\n    'isSizeAttenuation',\n    'radius',\n  ]);\n\n  constructor(options: DisplayObjectConfig<RectStyleProps> = {}) {\n    super({\n      type: Shape.RECT,\n      ...options,\n    });\n  }\n}\n","import { CSSGlobalKeywords, CSSRGB } from '../css';\nimport type { DisplayObjectConfig } from '../dom/interfaces';\nimport type { TextMetrics } from '../services';\nimport type {\n  BaseStyleProps,\n  ParsedBaseStyleProps,\n  TextDecorationStyle,\n  TextOverflow,\n  TextDecorationLine,\n} from '../types';\nimport { Shape } from '../types';\nimport { DisplayObject } from './DisplayObject';\nimport type { Path } from './Path';\n\nexport interface TextStyleProps extends BaseStyleProps {\n  x?: number | string;\n  y?: number | string;\n  z?: number | string;\n\n  /**\n   * Always face the camera.\n   */\n  isBillboard?: boolean;\n\n  /**\n   * The rotation of the billboard in radians.\n   */\n  billboardRotation?: number;\n\n  /**\n   * Whether the size of the sprite is attenuated by the camera depth. (Perspective camera only.)\n   */\n  isSizeAttenuation?: boolean;\n\n  text: number | string;\n\n  /**\n   * The text-align property sets the horizontal alignment of the inline-level content.\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/text-align\n   */\n  textAlign?:\n    | CSSGlobalKeywords\n    | 'start'\n    | 'center'\n    | 'middle'\n    | 'end'\n    | 'left'\n    | 'right';\n\n  /**\n   * It specifies the current text baseline used when drawing text.\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/textBaseline\n   */\n  textBaseline?:\n    | CSSGlobalKeywords\n    | 'top'\n    | 'hanging'\n    | 'middle'\n    | 'alphabetic'\n    | 'ideographic'\n    | 'bottom';\n\n  /**\n   * The text-overflow property sets how hidden overflow content is signaled to users.\n   * It can be clipped, display an ellipsis ('…'), or display a custom string.\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/text-overflow#values\n   */\n  textOverflow?: TextOverflow;\n\n  /**\n   * Borrow from CanvasKit ParagraphStyle.\n   */\n  maxLines?: number;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Element/textPath\n   */\n  textPath?: Path;\n\n  /**\n   * The side attribute determines the side of a path the text is placed on (relative to the path direction).\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/side\n   */\n  textPathSide?: 'left' | 'right';\n\n  /**\n   * The startOffset attribute defines an offset from the start of the path for the initial current text position along the path after converting the path to the \\<textPath\\> element's coordinate system.\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/startOffset\n   */\n  textPathStartOffset?: number | string;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/text-decoration-line\n   */\n  textDecorationLine?: TextDecorationLine;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/text-decoration-color\n   */\n  textDecorationColor?: string;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/text-decoration-style\n   */\n  textDecorationStyle?: TextDecorationStyle;\n\n  /**\n   * The font-style property sets whether a font should be styled with a normal, italic, or oblique face from its font-family.\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/font-style\n   */\n  fontStyle?: CSSGlobalKeywords | 'normal' | 'italic' | 'oblique';\n\n  /**\n   * The font-size property sets the size of the font.\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/font-size\n   */\n  fontSize?: number | string;\n\n  /**\n   * The font-family property specifies a prioritized list of one or more font family names and/or generic family names for the selected element.\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/font-family\n   */\n  fontFamily?: string;\n\n  /**\n   * The font-weight property sets the weight (or boldness) of the font. The weights available depend on the font-family that is currently set.\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight\n   */\n  fontWeight?:\n    | CSSGlobalKeywords\n    | 'normal'\n    | 'bold'\n    | 'bolder'\n    | 'lighter'\n    | number;\n\n  /**\n   * The font-variant shorthand property allows you to set all the font variants for a font.\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/font-variant\n   */\n  fontVariant?: CSSGlobalKeywords | 'normal' | 'small-caps' | string;\n\n  /**\n   * The line-height property sets the height of a line box.\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/line-height\n   */\n  lineHeight?: number | string;\n\n  /**\n   * It specifies the spacing between letters when drawing text.\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/letterSpacing\n   */\n  letterSpacing?: number | string;\n\n  /**\n   * The white-space property sets how white space inside an element is handled.\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/white-space\n   */\n  // whiteSpace?: 'pre';\n\n  /**\n   * There is no \"CSS leading\" property\n   * @see https://css-tricks.com/how-to-tame-line-height-in-css/\n   */\n  leading?: number;\n\n  /**\n   * The overflow-wrap CSS property applies to inline elements,\n   * setting whether the browser should insert line breaks within an otherwise unbreakable string to prevent text from overflowing its line box.\n   *\n   * The overflow-wrap property acts in the same way as the non-standard property word-wrap.\n   * The word-wrap property is now treated by browsers as an alias of the standard property.\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/overflow-wrap\n   */\n  wordWrap?: boolean;\n\n  /**\n   * Max width of overflowing box.\n   */\n  wordWrapWidth?: number;\n  // dropShadow?: boolean;\n  // dropShadowDistance?: number;\n\n  /**\n   * The dx attribute indicates a shift along the x-axis on the position of an element or its content.\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/dx\n   */\n  dx?: number | string;\n\n  /**\n   * The dy attribute indicates a shift along the y-axis on the position of an element or its content.\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/dy\n   */\n  dy?: number | string;\n}\nexport interface ParsedTextStyleProps extends ParsedBaseStyleProps {\n  x: number;\n  y: number;\n  z?: number;\n  isBillboard?: boolean;\n  billboardRotation?: number;\n  isSizeAttenuation?: boolean;\n  text: string;\n  textAlign?: 'start' | 'center' | 'middle' | 'end' | 'left' | 'right';\n  textBaseline?:\n    | 'top'\n    | 'hanging'\n    | 'middle'\n    | 'alphabetic'\n    | 'ideographic'\n    | 'bottom';\n  fontStyle?: 'normal' | 'italic' | 'oblique';\n  fontSize?: number;\n  fontFamily?: string;\n  fontWeight?: 'normal' | 'bold' | 'bolder' | 'lighter' | number;\n  fontVariant?: 'normal' | 'small-caps' | string;\n  lineHeight?: number;\n  letterSpacing?: number;\n  leading?: number;\n  wordWrap?: boolean;\n  wordWrapWidth?: number;\n  maxLines?: number;\n  textOverflow?: TextOverflow;\n  isOverflowing?: boolean;\n  textPath?: Path;\n  textDecorationLine?: TextDecorationLine;\n  textDecorationColor?: CSSRGB;\n  textDecorationStyle?: TextDecorationStyle | string;\n  textPathSide?: 'left' | 'right';\n  textPathStartOffset?: number;\n  metrics?: TextMetrics;\n  dx?: number;\n  dy?: number;\n}\n\n/**\n * <text> @see https://developer.mozilla.org/en-US/docs/Web/API/SVGTextElement\n */\nexport class Text extends DisplayObject<TextStyleProps, ParsedTextStyleProps> {\n  static PARSED_STYLE_LIST: Set<string> = new Set([\n    ...DisplayObject.PARSED_STYLE_LIST,\n    'x',\n    'y',\n    'z',\n    'isBillboard',\n    'billboardRotation',\n    'isSizeAttenuation',\n    'text',\n    'textAlign',\n    'textBaseline',\n    'fontStyle',\n    'fontSize',\n    'fontFamily',\n    'fontWeight',\n    'fontVariant',\n    'lineHeight',\n    'letterSpacing',\n    'leading',\n    'wordWrap',\n    'wordWrapWidth',\n    'maxLines',\n    'textOverflow',\n    'isOverflowing',\n    'textPath',\n    'textDecorationLine',\n    'textDecorationColor',\n    'textDecorationStyle',\n    'textPathSide',\n    'textPathStartOffset',\n    'metrics',\n    'dx',\n    'dy',\n  ]);\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGTextContentElement#constants\n   */\n  // LENGTHADJUST_SPACING: number = 1;\n  // LENGTHADJUST_SPACINGANDGLYPHS: number = 2;\n  // LENGTHADJUST_UNKNOWN: number = 0;\n\n  constructor({ style, ...rest }: DisplayObjectConfig<TextStyleProps> = {}) {\n    super({\n      type: Shape.TEXT,\n      style: {\n        fill: 'black',\n        ...style,\n      },\n      ...rest,\n    });\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGTextContentElement\n   */\n  getComputedTextLength(): number {\n    this.getGeometryBounds();\n    return this.parsedStyle.metrics?.maxLineWidth || 0;\n  }\n\n  getLineBoundingRects() {\n    this.getGeometryBounds();\n    return this.parsedStyle.metrics?.lineMetrics || [];\n  }\n\n  isOverflowing() {\n    this.getGeometryBounds();\n    return !!this.parsedStyle.isOverflowing;\n  }\n}\n","import type { DisplayObject } from '../display-objects';\nimport {\n  Circle,\n  Ellipse,\n  Group,\n  HTML,\n  Image,\n  Line,\n  Path,\n  Polygon,\n  Polyline,\n  Rect,\n  Text,\n} from '../display-objects';\nimport { Shape } from '../types';\n\n/**\n * canvas.customElements\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry\n */\nexport class CustomElementRegistry {\n  private registry: Record<string, new (...args: any[]) => DisplayObject> = {};\n\n  constructor() {\n    this.define(Shape.CIRCLE, Circle);\n    this.define(Shape.ELLIPSE, Ellipse);\n    this.define(Shape.RECT, Rect);\n    this.define(Shape.IMAGE, Image);\n    this.define(Shape.LINE, Line);\n    this.define(Shape.GROUP, Group);\n    this.define(Shape.PATH, Path);\n    this.define(Shape.POLYGON, Polygon);\n    this.define(Shape.POLYLINE, Polyline);\n    this.define(Shape.TEXT, Text);\n    this.define(Shape.HTML, HTML);\n  }\n\n  define<T extends DisplayObject>(\n    name: string,\n    constructor: new (...args: any[]) => T,\n  ) {\n    this.registry[name] = constructor;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry/get\n   */\n  get<T extends DisplayObject>(name: string): new (...args: any[]) => T {\n    return this.registry[name] as new (...args: any[]) => T;\n  }\n}\n","import { runtime } from '../global-runtime';\nimport { CSSUnitValue } from './cssom';\nimport type { PropertySyntax } from './interfaces';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CSS/RegisterProperty#parameters\n */\nexport interface PropertyDefinition {\n  name: string;\n  /**\n   * representing the expected syntax of the defined property. Defaults to \"*\".\n   */\n  syntax: PropertySyntax;\n  /**\n   * A boolean value defining whether the defined property should be inherited (true), or not (false). Defaults to false.\n   */\n  inherits?: boolean;\n  interpolable?: boolean;\n  initialValue?: string;\n}\n\n/**\n * holds useful CSS-related methods.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CSS\n *\n * * CSS Typed OM @see https://developer.mozilla.org/en-US/docs/Web/API/CSS/factory_functions\n * * register property @see https://developer.mozilla.org/en-US/docs/Web/API/CSS/RegisterProperty\n * * CSS Layout API\n */\nexport const CSS = {\n  /**\n   * <number>\n   * @see https://drafts.csswg.org/css-values-4/#number-value\n   */\n  number: (n: number) => {\n    return new CSSUnitValue(n);\n  },\n\n  /**\n   * <percentage>\n   * @see https://drafts.csswg.org/css-values-4/#percentage-value\n   */\n  percent: (n: number) => {\n    return new CSSUnitValue(n, '%');\n  },\n\n  /**\n   * <length>\n   */\n  px: (n: number) => {\n    return new CSSUnitValue(n, 'px');\n  },\n\n  /**\n   * <length>\n   */\n  em: (n: number) => {\n    return new CSSUnitValue(n, 'em');\n  },\n\n  rem: (n: number) => {\n    return new CSSUnitValue(n, 'rem');\n  },\n\n  /**\n   * <angle>\n   */\n  deg: (n: number) => {\n    return new CSSUnitValue(n, 'deg');\n  },\n\n  /**\n   * <angle>\n   */\n  grad: (n: number) => {\n    return new CSSUnitValue(n, 'grad');\n  },\n\n  /**\n   * <angle>\n   */\n  rad: (n: number) => {\n    return new CSSUnitValue(n, 'rad');\n  },\n\n  /**\n   * <angle>\n   */\n  turn: (n: number) => {\n    return new CSSUnitValue(n, 'turn');\n  },\n\n  /**\n   * <time>\n   */\n  s: (n: number) => {\n    return new CSSUnitValue(n, 's');\n  },\n\n  /**\n   * <time>\n   */\n  ms: (n: number) => {\n    return new CSSUnitValue(n, 'ms');\n  },\n\n  /**\n   * CSS Properties & Values API\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CSS_Properties_and_Values_API\n   * @see https://drafts.css-houdini.org/css-properties-values-api/#registering-custom-properties\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CSS/RegisterProperty\n   */\n  registerProperty: (definition: PropertyDefinition) => {\n    const { name, inherits, interpolable, initialValue, syntax } = definition;\n    runtime.styleValueRegistry.registerMetadata({\n      n: name,\n      inh: inherits,\n      int: interpolable,\n      d: initialValue,\n      syntax,\n    });\n  },\n\n  /**\n   * CSS Layout API\n   * register layout\n   *\n   * @see https://github.com/w3c/css-houdini-drafts/blob/main/css-layout-api/EXPLAINER.md\n   * @see https://developer.mozilla.org/en-US/docs/Web/Guide/Houdini#css_layout_api\n   */\n  registerLayout: (name: string, clazz: any) => {\n    runtime.layoutRegistry.registerLayout(name, clazz);\n  },\n};\n","import { isFunction } from '@antv/util';\nimport { runtime } from '../global-runtime';\nimport { BUILT_IN_PROPERTIES } from '../css';\nimport { Group, Text } from '../display-objects';\nimport type { DisplayObject } from '../display-objects';\nimport type { BaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport {\n  ERROR_MSG_METHOD_NOT_IMPLEMENTED,\n  ERROR_MSG_USE_DOCUMENT_ELEMENT,\n} from '../utils';\nimport type {\n  DisplayObjectConfig,\n  IAnimationTimeline,\n  ICanvas,\n  IDocument,\n  IElement,\n  INode,\n} from './interfaces';\nimport { Node } from './Node';\n\n/**\n * the entry of DOM tree\n * Document -> Node -> EventTarget\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Document\n */\nexport class Document extends Node implements IDocument {\n  constructor() {\n    super();\n\n    this.nodeName = 'document';\n\n    // create timeline\n    try {\n      this.timeline = new runtime.AnimationTimeline(this);\n    } catch {}\n\n    /**\n     * for inherited properties, the initial value is used on the root element only,\n     * as long as no specified value is supplied.\n     * @see https://developer.mozilla.org/en-US/docs/Web/CSS/initial_value\n     */\n    const initialStyle = {};\n    BUILT_IN_PROPERTIES.forEach(({ n, inh, d }) => {\n      if (inh && d) {\n        initialStyle[n] = isFunction(d) ? d(Shape.GROUP) : d;\n      }\n    });\n\n    // like <html> in DOM tree\n    this.documentElement = new Group({\n      id: 'g-root',\n      style: initialStyle,\n    });\n    this.documentElement.ownerDocument = this;\n    this.documentElement.parentNode = this;\n    this.childNodes = [this.documentElement];\n  }\n\n  get children(): IElement[] {\n    return this.childNodes as IElement[];\n  }\n  get childElementCount(): number {\n    return this.childNodes.length;\n  }\n  get firstElementChild(): IElement | null {\n    return this.firstChild as IElement;\n  }\n  get lastElementChild(): IElement | null {\n    return this.lastChild as IElement;\n  }\n\n  /**\n   * only document has defaultView, points to canvas,\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/defaultView\n   */\n  defaultView: ICanvas | null = null;\n\n  /**\n   * the root element of document, eg. <html>\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/documentElement\n   */\n  readonly documentElement: Group;\n\n  /**\n   * document.timeline in WAAPI\n   */\n  readonly timeline: IAnimationTimeline;\n\n  readonly ownerDocument = null;\n\n  /**\n   * @example const circle = document.createElement('circle', { style: { r: 10 } });\n   */\n  createElement<\n    T extends DisplayObject<StyleProps>,\n    StyleProps extends BaseStyleProps,\n  >(tagName: string, options: DisplayObjectConfig<StyleProps>): T {\n    // @observablehq/plot will create <svg>\n    if (tagName === 'svg') {\n      return this.documentElement as unknown as T;\n    }\n\n    // d3 will use <tspan>\n    let clazz = this.defaultView.customElements.get(tagName);\n\n    if (!clazz) {\n      console.warn('Unsupported tagName: ', tagName);\n      clazz = tagName === 'tspan' ? Text : Group;\n    }\n\n    const shape = new clazz(options) as unknown as T;\n    shape.ownerDocument = this;\n    return shape;\n  }\n\n  createElementNS<\n    T extends DisplayObject<StyleProps>,\n    StyleProps extends BaseStyleProps,\n  >(\n    namespaceURI: string,\n    tagName: string,\n    options: DisplayObjectConfig<StyleProps>,\n  ): T {\n    return this.createElement(tagName, options);\n  }\n\n  cloneNode(deep?: boolean): this {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  destroy(): void {\n    try {\n      this.documentElement.destroyChildren();\n      this.timeline.destroy();\n    } catch {}\n  }\n\n  /**\n   * Picking 2D graphics with RBush based on BBox, fast but inaccurate.\n   */\n  elementsFromBBox(\n    minX: number,\n    minY: number,\n    maxX: number,\n    maxY: number,\n  ): DisplayObject[] {\n    const rBush = this.defaultView.context.rBushRoot;\n    const rBushNodes = rBush.search({ minX, minY, maxX, maxY });\n\n    const hitTestList: DisplayObject[] = [];\n    rBushNodes.forEach(({ displayObject }) => {\n      const { pointerEvents = 'auto' } = displayObject.parsedStyle;\n\n      // account for `visibility`\n      // @see https://developer.mozilla.org/en-US/docs/Web/CSS/pointer-events\n      const isVisibilityAffected = [\n        'auto',\n        'visiblepainted',\n        'visiblefill',\n        'visiblestroke',\n        'visible',\n      ].includes(pointerEvents);\n\n      if (\n        (!isVisibilityAffected ||\n          (isVisibilityAffected && displayObject.isVisible())) &&\n        !displayObject.isCulled() &&\n        displayObject.isInteractive()\n      ) {\n        hitTestList.push(displayObject);\n      }\n    });\n    // find group with max z-index\n    hitTestList.sort((a, b) => b.sortable.renderOrder - a.sortable.renderOrder);\n\n    return hitTestList;\n  }\n\n  elementFromPointSync(x: number, y: number): DisplayObject {\n    const { x: viewportX, y: viewportY } = this.defaultView.canvas2Viewport({\n      x,\n      y,\n    });\n    const { width, height } = this.defaultView.getConfig();\n    // outside canvas' viewport\n    if (\n      viewportX < 0 ||\n      viewportY < 0 ||\n      viewportX > width ||\n      viewportY > height\n    ) {\n      return null;\n    }\n\n    const { x: clientX, y: clientY } = this.defaultView.viewport2Client({\n      x: viewportX,\n      y: viewportY,\n    });\n\n    const { picked } = this.defaultView\n      .getRenderingService()\n      .hooks.pickSync.call({\n        topmost: true,\n        position: {\n          x,\n          y,\n          viewportX,\n          viewportY,\n          clientX,\n          clientY,\n        },\n        picked: [],\n      });\n    return (picked && picked[0]) || this.documentElement;\n  }\n\n  /**\n   * Do picking with API instead of triggering interactive events.\n   *\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/elementFromPoint\n   */\n  async elementFromPoint(x: number, y: number): Promise<DisplayObject> {\n    const { x: viewportX, y: viewportY } = this.defaultView.canvas2Viewport({\n      x,\n      y,\n    });\n    const { width, height } = this.defaultView.getConfig();\n    // outside canvas' viewport\n    if (\n      viewportX < 0 ||\n      viewportY < 0 ||\n      viewportX > width ||\n      viewportY > height\n    ) {\n      return null;\n    }\n\n    const { x: clientX, y: clientY } = this.defaultView.viewport2Client({\n      x: viewportX,\n      y: viewportY,\n    });\n\n    const { picked } = await this.defaultView\n      .getRenderingService()\n      .hooks.pick.promise({\n        topmost: true,\n        position: {\n          x,\n          y,\n          viewportX,\n          viewportY,\n          clientX,\n          clientY,\n        },\n        picked: [],\n      });\n    return (picked && picked[0]) || this.documentElement;\n  }\n\n  elementsFromPointSync(x: number, y: number): DisplayObject[] {\n    const { x: viewportX, y: viewportY } = this.defaultView.canvas2Viewport({\n      x,\n      y,\n    });\n    const { width, height } = this.defaultView.getConfig();\n    // outside canvas' viewport\n    if (\n      viewportX < 0 ||\n      viewportY < 0 ||\n      viewportX > width ||\n      viewportY > height\n    ) {\n      return [];\n    }\n\n    const { x: clientX, y: clientY } = this.defaultView.viewport2Client({\n      x: viewportX,\n      y: viewportY,\n    });\n\n    const { picked } = this.defaultView\n      .getRenderingService()\n      .hooks.pickSync.call({\n        topmost: false,\n        position: {\n          x,\n          y,\n          viewportX,\n          viewportY,\n          clientX,\n          clientY,\n        },\n        picked: [],\n      });\n\n    if (picked[picked.length - 1] !== this.documentElement) {\n      picked.push(this.documentElement);\n    }\n    return picked;\n  }\n\n  /**\n   * Do picking with API instead of triggering interactive events.\n   *\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/elementsFromPoint\n   */\n  async elementsFromPoint(x: number, y: number): Promise<DisplayObject[]> {\n    const { x: viewportX, y: viewportY } = this.defaultView.canvas2Viewport({\n      x,\n      y,\n    });\n    const { width, height } = this.defaultView.getConfig();\n    // outside canvas' viewport\n    if (\n      viewportX < 0 ||\n      viewportY < 0 ||\n      viewportX > width ||\n      viewportY > height\n    ) {\n      return [];\n    }\n\n    const { x: clientX, y: clientY } = this.defaultView.viewport2Client({\n      x: viewportX,\n      y: viewportY,\n    });\n\n    const { picked } = await this.defaultView\n      .getRenderingService()\n      .hooks.pick.promise({\n        topmost: false,\n        position: {\n          x,\n          y,\n          viewportX,\n          viewportY,\n          clientX,\n          clientY,\n        },\n        picked: [],\n      });\n\n    if (picked[picked.length - 1] !== this.documentElement) {\n      picked.push(this.documentElement);\n    }\n    return picked;\n  }\n\n  /**\n   * eg. Uncaught DOMException: Failed to execute 'appendChild' on 'Node': Only one element on document allowed.\n   */\n\n  appendChild<T extends INode>(newChild: T, index?: number): T {\n    throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n  }\n\n  insertBefore<T extends INode>(newChild: T, refChild: INode | null): T {\n    throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n  }\n\n  removeChild<T extends INode>(oldChild: T, destroy?: boolean): T {\n    throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n  }\n\n  replaceChild<T extends INode>(\n    newChild: INode,\n    oldChild: T,\n    destroy?: boolean,\n  ): T {\n    throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n  }\n\n  append(...nodes: INode[]): void {\n    throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n  }\n\n  prepend(...nodes: INode[]): void {\n    throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n  }\n\n  /**\n   * Execute query on documentElement.\n   */\n  getElementById<E extends IElement = IElement>(id: string): E | null {\n    return this.documentElement.getElementById(id);\n  }\n  getElementsByName<E extends IElement = IElement>(name: string): E[] {\n    return this.documentElement.getElementsByName(name);\n  }\n  getElementsByTagName<E extends IElement = IElement>(tagName: string): E[] {\n    return this.documentElement.getElementsByTagName(tagName);\n  }\n  getElementsByClassName<E extends IElement = IElement>(\n    className: string,\n  ): E[] {\n    return this.documentElement.getElementsByClassName(className);\n  }\n  querySelector<E extends IElement = IElement>(selectors: string): E | null {\n    return this.documentElement.querySelector(selectors);\n  }\n  querySelectorAll<E extends IElement = IElement>(selectors: string): E[] {\n    return this.documentElement.querySelectorAll(selectors);\n  }\n  find<E extends IElement = IElement>(filter: (node: E) => boolean): E | null {\n    return this.documentElement.find(filter);\n  }\n  findAll<E extends IElement = IElement>(filter: (node: E) => boolean): E[] {\n    return this.documentElement.findAll(filter);\n  }\n}\n","import type { ICamera } from '../camera';\nimport type { DisplayObject } from '../display-objects/DisplayObject';\nimport { CustomEvent, ElementEvent } from '../dom';\nimport type {\n  RenderingPlugin,\n  RenderingPluginContext,\n} from '../services/RenderingService';\n\nexport interface CullingStrategyContribution {\n  isVisible: (camera: ICamera, object: DisplayObject) => boolean;\n}\n\n/**\n * apply following rules:\n * 1. `visibility` in scenegraph node\n * 2. other custom culling strategies, eg. frustum culling\n */\nexport class CullingPlugin implements RenderingPlugin {\n  static tag = 'Culling';\n\n  constructor(private strategies: CullingStrategyContribution[]) {}\n\n  apply(context: RenderingPluginContext) {\n    const { config, camera, renderingService, renderingContext } = context;\n    const { strategies } = this;\n\n    renderingService.hooks.cull.tap(\n      CullingPlugin.tag,\n      (object: DisplayObject | null) => {\n        if (object) {\n          const { cullable } = object;\n          // cullable.visible = true;\n          // const renderBounds = object.getRenderBounds();\n          // if (AABB.isEmpty(renderBounds)) {\n          //   cullable.visible = false;\n          // } else {\n          //   const isShape2D = shape2D.indexOf(object.nodeName as Shape) > -1;\n          //   const [p0, p1, p2, p3] = camera.getFrustum().planes;\n          //   tmpAABB.setMinMax([-p1.distance, -p3.distance, 0], [p0.distance, p2.distance, 0]);\n\n          //   cullable.visible = isShape2D ? renderBounds.intersects(tmpAABB) : true;\n          // }\n\n          if (strategies.length === 0) {\n            cullable.visible =\n              renderingContext.unculledEntities.indexOf(object.entity) > -1;\n          } else {\n            // eg. implemented by g-webgl(frustum culling)\n            cullable.visible = strategies.every((strategy) =>\n              strategy.isVisible(camera, object),\n            );\n          }\n\n          if (!object.isCulled() && object.isVisible()) {\n            return object;\n          }\n\n          const enableCancelEventPropagation =\n            config.future?.experimentalCancelEventPropagation === true;\n\n          // if (this.renderingContext.renderListLastFrame.indexOf(object) > -1) {\n          object.dispatchEvent(\n            new CustomEvent(ElementEvent.CULLED),\n            enableCancelEventPropagation,\n            enableCancelEventPropagation,\n          );\n          // }\n\n          return null;\n        }\n\n        return object;\n      },\n    );\n\n    renderingService.hooks.afterRender.tap(\n      CullingPlugin.tag,\n      (object: DisplayObject) => {\n        object.cullable.visibilityPlaneMask = -1;\n      },\n    );\n  }\n}\n","import { isUndefined } from '@antv/util';\nimport type { FederatedMouseEvent, ICanvas, IEventTarget } from '../dom';\nimport { FederatedPointerEvent } from '../dom/FederatedPointerEvent';\nimport { FederatedWheelEvent } from '../dom/FederatedWheelEvent';\nimport type { RenderingPlugin, RenderingPluginContext } from '../services';\nimport type { Cursor, EventPosition, InteractivePointerEvent } from '../types';\nimport type { FormattedPointerEvent, FormattedTouch } from '../utils/event';\nimport { MOUSE_POINTER_ID, TOUCH_TO_POINTER, clock } from '../utils/event';\n\n/**\n * support mouse & touch events\n * @see https://github.com/pixijs/pixi.js/blob/dev/packages/interaction/README.md\n *\n * also provide some extra events such as `drag`\n */\nexport class EventPlugin implements RenderingPlugin {\n  static tag = 'Event';\n\n  private autoPreventDefault = false;\n  private rootPointerEvent = new FederatedPointerEvent(null);\n  private rootWheelEvent = new FederatedWheelEvent(null);\n\n  private context: RenderingPluginContext;\n\n  apply(context: RenderingPluginContext) {\n    this.context = context;\n    const { renderingService } = context;\n\n    const canvas = this.context.renderingContext.root.ownerDocument.defaultView;\n\n    this.context.eventService.setPickHandler((position: EventPosition) => {\n      const { picked } = this.context.renderingService.hooks.pickSync.call({\n        position,\n        picked: [],\n        topmost: true, // we only concern the topmost element\n      });\n      return picked[0] || null;\n    });\n\n    renderingService.hooks.pointerWheel.tap(\n      EventPlugin.tag,\n      (nativeEvent: InteractivePointerEvent) => {\n        const wheelEvent = this.normalizeWheelEvent(nativeEvent as WheelEvent);\n\n        this.context.eventService.mapEvent(wheelEvent);\n      },\n    );\n\n    renderingService.hooks.pointerDown.tap(\n      EventPlugin.tag,\n      (nativeEvent: InteractivePointerEvent) => {\n        if (\n          canvas.supportsTouchEvents &&\n          (nativeEvent as PointerEvent).pointerType === 'touch'\n        )\n          return;\n\n        const events = this.normalizeToPointerEvent(nativeEvent, canvas);\n\n        if (this.autoPreventDefault && (events[0] as any).isNormalized) {\n          const cancelable =\n            nativeEvent.cancelable || !('cancelable' in nativeEvent);\n\n          if (cancelable) {\n            nativeEvent.preventDefault();\n          }\n        }\n\n        for (const event of events) {\n          const federatedEvent = this.bootstrapEvent(\n            this.rootPointerEvent,\n            event,\n            canvas,\n            nativeEvent,\n          );\n          this.context.eventService.mapEvent(federatedEvent);\n        }\n\n        this.setCursor(this.context.eventService.cursor);\n      },\n    );\n\n    renderingService.hooks.pointerUp.tap(\n      EventPlugin.tag,\n      (nativeEvent: InteractivePointerEvent) => {\n        if (\n          canvas.supportsTouchEvents &&\n          (nativeEvent as PointerEvent).pointerType === 'touch'\n        )\n          return;\n\n        // account for element in SVG\n        const $element =\n          this.context.contextService.getDomElement() as HTMLCanvasElement;\n\n        const isNativeEventFromCanvas =\n          this.context.eventService.isNativeEventFromCanvas(\n            $element,\n            nativeEvent,\n          );\n        const outside = !isNativeEventFromCanvas ? 'outside' : '';\n        const normalizedEvents = this.normalizeToPointerEvent(\n          nativeEvent,\n          canvas,\n        );\n\n        for (const normalizedEvent of normalizedEvents) {\n          const event = this.bootstrapEvent(\n            this.rootPointerEvent,\n            normalizedEvent,\n            canvas,\n            nativeEvent,\n          );\n          event.type += outside;\n          this.context.eventService.mapEvent(event);\n        }\n\n        this.setCursor(this.context.eventService.cursor);\n      },\n    );\n\n    renderingService.hooks.pointerMove.tap(EventPlugin.tag, this.onPointerMove);\n\n    renderingService.hooks.pointerOver.tap(EventPlugin.tag, this.onPointerMove);\n\n    renderingService.hooks.pointerOut.tap(EventPlugin.tag, this.onPointerMove);\n\n    renderingService.hooks.click.tap(EventPlugin.tag, this.onClick);\n\n    renderingService.hooks.pointerCancel.tap(\n      EventPlugin.tag,\n      (nativeEvent: InteractivePointerEvent) => {\n        const normalizedEvents = this.normalizeToPointerEvent(\n          nativeEvent,\n          canvas,\n        );\n\n        for (const normalizedEvent of normalizedEvents) {\n          const event = this.bootstrapEvent(\n            this.rootPointerEvent,\n            normalizedEvent,\n            canvas,\n            nativeEvent,\n          );\n          this.context.eventService.mapEvent(event);\n        }\n        this.setCursor(this.context.eventService.cursor);\n      },\n    );\n  }\n\n  private onPointerMove = (nativeEvent: InteractivePointerEvent) => {\n    const canvas =\n      this.context.renderingContext.root?.ownerDocument?.defaultView;\n    if (\n      canvas.supportsTouchEvents &&\n      (nativeEvent as PointerEvent).pointerType === 'touch'\n    )\n      return;\n\n    const normalizedEvents = this.normalizeToPointerEvent(nativeEvent, canvas);\n\n    for (const normalizedEvent of normalizedEvents) {\n      const event = this.bootstrapEvent(\n        this.rootPointerEvent,\n        normalizedEvent,\n        canvas,\n        nativeEvent,\n      );\n\n      this.context.eventService.mapEvent(event);\n    }\n\n    this.setCursor(this.context.eventService.cursor);\n  };\n\n  private onClick = (nativeEvent: InteractivePointerEvent) => {\n    const canvas =\n      this.context.renderingContext.root?.ownerDocument?.defaultView;\n\n    const normalizedEvents = this.normalizeToPointerEvent(nativeEvent, canvas);\n\n    for (const normalizedEvent of normalizedEvents) {\n      const event = this.bootstrapEvent(\n        this.rootPointerEvent,\n        normalizedEvent,\n        canvas,\n        nativeEvent,\n      );\n\n      this.context.eventService.mapEvent(event);\n    }\n\n    this.setCursor(this.context.eventService.cursor);\n  };\n\n  private bootstrapEvent(\n    event: FederatedPointerEvent,\n    normalizedEvent: PointerEvent,\n    view: ICanvas,\n    nativeEvent: PointerEvent | MouseEvent | TouchEvent,\n  ): FederatedPointerEvent {\n    event.view = view;\n    event.originalEvent = null;\n    event.nativeEvent = nativeEvent;\n\n    event.pointerId = normalizedEvent.pointerId;\n    event.width = normalizedEvent.width;\n    event.height = normalizedEvent.height;\n    event.isPrimary = normalizedEvent.isPrimary;\n    event.pointerType = normalizedEvent.pointerType;\n    event.pressure = normalizedEvent.pressure;\n    event.tangentialPressure = normalizedEvent.tangentialPressure;\n    event.tiltX = normalizedEvent.tiltX;\n    event.tiltY = normalizedEvent.tiltY;\n    event.twist = normalizedEvent.twist;\n    this.transferMouseData(event, normalizedEvent);\n\n    const { x, y } = this.context.eventService.client2Viewport({\n      x: normalizedEvent.clientX,\n      y: normalizedEvent.clientY,\n    });\n    event.viewport.x = x;\n    event.viewport.y = y;\n    const { x: canvasX, y: canvasY } =\n      this.context.eventService.viewport2Canvas(event.viewport);\n    event.canvas.x = canvasX;\n    event.canvas.y = canvasY;\n    event.global.copyFrom(event.canvas);\n    event.offset.copyFrom(event.canvas);\n\n    event.isTrusted = nativeEvent.isTrusted;\n    if (event.type === 'pointerleave') {\n      event.type = 'pointerout';\n    }\n    if (event.type.startsWith('mouse')) {\n      event.type = event.type.replace('mouse', 'pointer');\n    }\n    if (event.type.startsWith('touch')) {\n      event.type = TOUCH_TO_POINTER[event.type] || event.type;\n    }\n    return event;\n  }\n\n  private normalizeWheelEvent(nativeEvent: WheelEvent): FederatedWheelEvent {\n    const event = this.rootWheelEvent;\n\n    this.transferMouseData(event, nativeEvent);\n\n    event.deltaMode = nativeEvent.deltaMode;\n    event.deltaX = nativeEvent.deltaX;\n    event.deltaY = nativeEvent.deltaY;\n    event.deltaZ = nativeEvent.deltaZ;\n\n    const { x, y } = this.context.eventService.client2Viewport({\n      x: nativeEvent.clientX,\n      y: nativeEvent.clientY,\n    });\n    event.viewport.x = x;\n    event.viewport.y = y;\n    const { x: canvasX, y: canvasY } =\n      this.context.eventService.viewport2Canvas(event.viewport);\n    event.canvas.x = canvasX;\n    event.canvas.y = canvasY;\n    event.global.copyFrom(event.canvas);\n    event.offset.copyFrom(event.canvas);\n\n    event.nativeEvent = nativeEvent;\n    event.type = nativeEvent.type;\n\n    return event;\n  }\n\n  /**\n   * Transfers base & mouse event data from the nativeEvent to the federated event.\n   */\n  private transferMouseData(\n    event: FederatedMouseEvent,\n    nativeEvent: MouseEvent,\n  ): void {\n    event.isTrusted = nativeEvent.isTrusted;\n    event.srcElement = nativeEvent.srcElement as IEventTarget;\n    event.timeStamp = clock.now();\n    event.type = nativeEvent.type;\n\n    event.altKey = nativeEvent.altKey;\n    event.metaKey = nativeEvent.metaKey;\n    event.shiftKey = nativeEvent.shiftKey;\n    event.ctrlKey = nativeEvent.ctrlKey;\n    event.button = nativeEvent.button;\n    event.buttons = nativeEvent.buttons;\n    event.client.x = nativeEvent.clientX;\n    event.client.y = nativeEvent.clientY;\n    event.movement.x = nativeEvent.movementX;\n    event.movement.y = nativeEvent.movementY;\n    event.page.x = nativeEvent.pageX;\n    event.page.y = nativeEvent.pageY;\n    event.screen.x = nativeEvent.screenX;\n    event.screen.y = nativeEvent.screenY;\n    event.relatedTarget = null;\n  }\n\n  private setCursor(cursor: Cursor | null) {\n    this.context.contextService.applyCursorStyle(\n      cursor || this.context.config.cursor || 'default',\n    );\n  }\n\n  private normalizeToPointerEvent(\n    event: InteractivePointerEvent,\n    canvas: ICanvas,\n  ): PointerEvent[] {\n    const normalizedEvents = [];\n    if (canvas.isTouchEvent(event)) {\n      for (let i = 0; i < event.changedTouches.length; i++) {\n        const touch = event.changedTouches[i] as FormattedTouch;\n\n        // use changedTouches instead of touches since touchend has no touches\n        // @see https://stackoverflow.com/a/10079076\n        if (isUndefined(touch.button)) touch.button = 0;\n        if (isUndefined(touch.buttons)) touch.buttons = 1;\n        if (isUndefined(touch.isPrimary)) {\n          touch.isPrimary =\n            event.touches.length === 1 && event.type === 'touchstart';\n        }\n        if (isUndefined(touch.width)) touch.width = touch.radiusX || 1;\n        if (isUndefined(touch.height)) touch.height = touch.radiusY || 1;\n        if (isUndefined(touch.tiltX)) touch.tiltX = 0;\n        if (isUndefined(touch.tiltY)) touch.tiltY = 0;\n        if (isUndefined(touch.pointerType)) touch.pointerType = 'touch';\n        // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Touch/identifier\n        if (isUndefined(touch.pointerId))\n          touch.pointerId = touch.identifier || 0;\n        if (isUndefined(touch.pressure)) touch.pressure = touch.force || 0.5;\n        if (isUndefined(touch.twist)) touch.twist = 0;\n        if (isUndefined(touch.tangentialPressure)) touch.tangentialPressure = 0;\n        touch.isNormalized = true;\n        touch.type = event.type;\n\n        normalizedEvents.push(touch);\n      }\n    } else if (canvas.isMouseEvent(event)) {\n      const tempEvent = event as FormattedPointerEvent;\n      if (isUndefined(tempEvent.isPrimary)) tempEvent.isPrimary = true;\n      if (isUndefined(tempEvent.width)) tempEvent.width = 1;\n      if (isUndefined(tempEvent.height)) tempEvent.height = 1;\n      if (isUndefined(tempEvent.tiltX)) tempEvent.tiltX = 0;\n      if (isUndefined(tempEvent.tiltY)) tempEvent.tiltY = 0;\n      if (isUndefined(tempEvent.pointerType)) tempEvent.pointerType = 'mouse';\n      if (isUndefined(tempEvent.pointerId))\n        tempEvent.pointerId = MOUSE_POINTER_ID;\n      if (isUndefined(tempEvent.pressure)) tempEvent.pressure = 0.5;\n      if (isUndefined(tempEvent.twist)) tempEvent.twist = 0;\n      if (isUndefined(tempEvent.tangentialPressure))\n        tempEvent.tangentialPressure = 0;\n      tempEvent.isNormalized = true;\n\n      normalizedEvents.push(tempEvent);\n    } else {\n      normalizedEvents.push(event);\n    }\n\n    return normalizedEvents as PointerEvent[];\n  }\n}\n","import { vec3 } from 'gl-matrix';\nimport type { ICamera } from '../camera';\nimport type { DisplayObject } from '../display-objects/DisplayObject';\nimport type { Element } from '../dom';\nimport type { Plane } from '../shapes';\nimport { AABB, Mask } from '../shapes';\nimport { Shape } from '../types';\nimport type { CullingStrategyContribution } from './CullingPlugin';\n\n// group is not a 2d shape\nconst shape2D = [\n  Shape.CIRCLE,\n  Shape.ELLIPSE,\n  Shape.IMAGE,\n  Shape.RECT,\n  Shape.LINE,\n  Shape.POLYLINE,\n  Shape.POLYGON,\n  Shape.TEXT,\n  Shape.PATH,\n  Shape.HTML,\n];\n\nexport class FrustumCullingStrategy implements CullingStrategyContribution {\n  isVisible(camera: ICamera, object: DisplayObject) {\n    // return true;\n\n    const { cullable } = object;\n    if (!cullable.enable) {\n      return true;\n    }\n\n    const renderBounds = object.getRenderBounds();\n\n    if (AABB.isEmpty(renderBounds)) {\n      return false;\n    }\n\n    // get VP matrix from camera\n    const frustum = camera.getFrustum();\n\n    const parentVisibilityPlaneMask = (object.parentNode as Element)?.cullable\n      ?.visibilityPlaneMask;\n    cullable.visibilityPlaneMask = this.computeVisibilityWithPlaneMask(\n      object,\n      renderBounds,\n      parentVisibilityPlaneMask || Mask.INDETERMINATE,\n      frustum.planes,\n    );\n\n    cullable.visible = cullable.visibilityPlaneMask !== Mask.OUTSIDE;\n\n    return cullable.visible;\n  }\n\n  /**\n   *\n   * @see「Optimized View Frustum Culling Algorithms for Bounding Boxes」\n   * @see https://github.com/antvis/GWebGPUEngine/issues/3\n   *\n   * * 基础相交测试 the basic intersection test\n   * * 标记 masking @see https://cesium.com/blog/2015/08/04/fast-hierarchical-culling/\n   * * TODO: 平面一致性测试 the plane-coherency test\n   * * TODO: 支持 mesh 指定自身的剔除策略，参考 Babylon.js @see https://doc.babylonjs.com/how_to/optimizing_your_scene#changing-mesh-culling-strategy\n   *\n   * @param aabb aabb\n   * @param parentPlaneMask mask of parent\n   * @param planes planes of frustum\n   */\n  private computeVisibilityWithPlaneMask(\n    object: DisplayObject,\n    aabb: AABB,\n    parentPlaneMask: Mask,\n    planes: Plane[],\n  ) {\n    if (parentPlaneMask === Mask.OUTSIDE || parentPlaneMask === Mask.INSIDE) {\n      // 父节点完全位于视锥内或者外部，直接返回\n      return parentPlaneMask;\n    }\n\n    // Start with MASK_INSIDE (all zeros) so that after the loop, the return value can be compared with MASK_INSIDE.\n    // (Because if there are fewer than 31 planes, the upper bits wont be changed.)\n    let mask = Mask.INSIDE;\n\n    const isShape2D = shape2D.indexOf(object.nodeName as Shape) > -1;\n\n    // Use viewport culling for 2D shapes\n    // @see https://github.com/antvis/g/issues/914\n    for (let k = 0, len = planes.length; k < len; ++k) {\n      // For k greater than 31 (since 31 is the maximum number of INSIDE/INTERSECTING bits we can store), skip the optimization.\n      const flag = 1 << k;\n\n      if ((parentPlaneMask & flag) === 0) {\n        // 父节点处于当前面内部，可以跳过\n        continue;\n      }\n\n      // skip near & far planes when testing 2D shapes\n      if (isShape2D && (k === 4 || k === 5)) {\n        continue;\n      }\n\n      // p-vertex n-vertex <-|plane p-vertex n-vertex\n      // 使用 p-vertex 和 n-vertex 加速，避免进行平面和 aabb 全部顶点的相交检测\n      const { normal, distance } = planes[k];\n      if (\n        vec3.dot(normal, aabb.getPositiveFarPoint(planes[k])) + distance <\n        0\n      ) {\n        return Mask.OUTSIDE;\n      }\n      if (\n        vec3.dot(normal, aabb.getNegativeFarPoint(planes[k])) + distance <\n        0\n      ) {\n        // 和当前面相交，对应位置为1，继续检测下一个面\n        mask |= flag;\n      }\n    }\n\n    return mask;\n  }\n}\n","import type RBush from 'rbush';\nimport { runtime } from '../global-runtime';\nimport type { RBushNodeAABB } from '../components';\nimport { DisplayObject } from '../display-objects';\nimport type { FederatedEvent } from '../dom';\nimport { ElementEvent } from '../dom';\nimport type { RenderingPlugin, RenderingPluginContext } from '../services';\nimport { raf } from '../utils';\nimport { AABB } from '../shapes';\n\nexport class PrepareRendererPlugin implements RenderingPlugin {\n  static tag = 'Prepare';\n  private rBush: RBush<RBushNodeAABB>;\n\n  private syncTasks = new Map<DisplayObject, boolean>();\n  private ricSyncRTreeId: number;\n  private isFirstTimeRendering = true;\n  private syncing = false;\n\n  isFirstTimeRenderingFinished = false;\n\n  apply(context: RenderingPluginContext) {\n    const { config, renderingService, renderingContext, rBushRoot } = context;\n    const canvas = renderingContext.root.ownerDocument.defaultView;\n\n    this.rBush = rBushRoot;\n\n    const handleAttributeChanged = (e: FederatedEvent) => {\n      renderingService.dirtify();\n    };\n\n    const handleBoundsChanged = (e: FederatedEvent) => {\n      this.syncTasks.set(e.target as DisplayObject, e.detail.affectChildren);\n\n      renderingService.dirtify();\n    };\n\n    const handleMounted = (e: FederatedEvent) => {\n      const object = e.target as DisplayObject;\n\n      if (runtime.enableSizeAttenuation) {\n        runtime.styleValueRegistry.updateSizeAttenuation(\n          object,\n          canvas.getCamera().getZoom(),\n        );\n      }\n    };\n\n    const handleUnmounted = (e: FederatedEvent) => {\n      const object = e.target as DisplayObject;\n      const { rBushNode } = object;\n\n      if (rBushNode?.aabb) {\n        this.rBush.remove(rBushNode.aabb);\n      }\n\n      this.syncTasks.delete(object);\n\n      runtime.sceneGraphService.dirtyToRoot(object);\n      renderingService.dirtify();\n    };\n\n    renderingService.hooks.init.tap(PrepareRendererPlugin.tag, () => {\n      canvas.addEventListener(ElementEvent.MOUNTED, handleMounted);\n      canvas.addEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n      canvas.addEventListener(\n        ElementEvent.ATTR_MODIFIED,\n        handleAttributeChanged,\n      );\n      canvas.addEventListener(ElementEvent.BOUNDS_CHANGED, handleBoundsChanged);\n    });\n\n    renderingService.hooks.destroy.tap(PrepareRendererPlugin.tag, () => {\n      canvas.removeEventListener(ElementEvent.MOUNTED, handleMounted);\n      canvas.removeEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n      canvas.removeEventListener(\n        ElementEvent.ATTR_MODIFIED,\n        handleAttributeChanged,\n      );\n      canvas.removeEventListener(\n        ElementEvent.BOUNDS_CHANGED,\n        handleBoundsChanged,\n      );\n      this.syncTasks.clear();\n    });\n\n    const ric =\n      runtime.globalThis.requestIdleCallback ?? raf.bind(runtime.globalThis);\n    const enableRICSyncRTree = config.future?.experimentalRICSyncRTree === true;\n\n    renderingService.hooks.endFrame.tap(PrepareRendererPlugin.tag, () => {\n      if (this.isFirstTimeRendering) {\n        this.isFirstTimeRendering = false;\n        this.syncing = true;\n        ric(() => {\n          this.syncRTree(true);\n          this.isFirstTimeRenderingFinished = true;\n        });\n      } else if (\n        enableRICSyncRTree &&\n        runtime.globalThis.requestIdleCallback &&\n        runtime.globalThis.cancelIdleCallback\n      ) {\n        runtime.globalThis.cancelIdleCallback(this.ricSyncRTreeId);\n        this.ricSyncRTreeId = runtime.globalThis.requestIdleCallback(() =>\n          this.syncRTree(),\n        );\n      } else {\n        this.syncRTree();\n      }\n    });\n  }\n\n  private syncNode(node: DisplayObject, force = false) {\n    if (!node.isConnected) return;\n\n    const rBushNode = node.rBushNode;\n\n    // clear dirty node\n    if (rBushNode.aabb) this.rBush.remove(rBushNode.aabb);\n\n    const renderBounds = node.getRenderBounds();\n    if (renderBounds) {\n      const renderable = node.renderable;\n\n      if (force) {\n        if (!renderable.dirtyRenderBounds) {\n          renderable.dirtyRenderBounds = new AABB();\n        }\n        // save last dirty aabb\n        renderable.dirtyRenderBounds.update(\n          renderBounds.center,\n          renderBounds.halfExtents,\n        );\n      }\n\n      const [minX, minY] = renderBounds.getMin();\n      const [maxX, maxY] = renderBounds.getMax();\n\n      if (!rBushNode.aabb) {\n        rBushNode.aabb = {} as RBushNodeAABB;\n      }\n      rBushNode.aabb.displayObject = node;\n      rBushNode.aabb.minX = minX;\n      rBushNode.aabb.minY = minY;\n      rBushNode.aabb.maxX = maxX;\n      rBushNode.aabb.maxY = maxY;\n    }\n\n    if (rBushNode.aabb) {\n      // TODO: NaN occurs when width/height of Rect is 0\n      if (\n        !isNaN(rBushNode.aabb.maxX) &&\n        !isNaN(rBushNode.aabb.maxX) &&\n        !isNaN(rBushNode.aabb.minX) &&\n        !isNaN(rBushNode.aabb.minY)\n      ) {\n        return rBushNode.aabb;\n      }\n    }\n  }\n\n  private syncRTree(force = false) {\n    if (!force && (this.syncing || this.syncTasks.size === 0)) {\n      return;\n    }\n\n    this.syncing = true;\n\n    // bounds changed, need re-inserting its children\n    const bulk: RBushNodeAABB[] = [];\n    const synced = new Set<DisplayObject>();\n\n    const sync = (node: DisplayObject) => {\n      if (!synced.has(node) && node.renderable) {\n        const aabb = this.syncNode(node, force);\n        if (aabb) {\n          bulk.push(aabb);\n          synced.add(node);\n        }\n      }\n    };\n\n    this.syncTasks.forEach((affectChildren, node) => {\n      if (affectChildren) {\n        node.forEach(sync);\n      }\n\n      let parent = node;\n      while (parent) {\n        sync(parent);\n        parent = parent.parentElement as DisplayObject;\n      }\n    });\n\n    // use bulk inserting, which is ~2-3 times faster\n    // @see https://github.com/mourner/rbush#bulk-inserting-data\n    this.rBush.load(bulk);\n\n    bulk.length = 0;\n    this.syncing = false;\n  }\n}\n","// eslint-disable-next-line import/extensions\nimport RBush from 'rbush/rbush.js';\nimport type { IRenderer } from './AbstractRenderer';\nimport {\n  CameraEvent,\n  CameraProjectionMode,\n  CameraTrackingMode,\n  CameraType,\n} from './camera';\nimport type { RBushNodeAABB } from './components';\nimport type { CustomElement } from './display-objects';\nimport type { MutationEvent } from './dom/MutationEvent';\nimport {\n  DisplayObject,\n  attrModifiedEvent as attrModifiedEventCache,\n} from './display-objects/DisplayObject';\nimport {\n  insertedEvent as insertedEventCache,\n  removedEvent as removedEventCache,\n  destroyEvent as destroyEventCache,\n} from './dom/Element';\nimport type { CanvasContext, Element, IChildNode } from './dom';\nimport { CustomEvent, Document, ElementEvent, EventTarget } from './dom';\nimport { CustomElementRegistry } from './dom/CustomElementRegistry';\nimport type { ICanvas } from './dom/interfaces';\nimport { runtime } from './global-runtime';\nimport { CullingPlugin } from './plugins/CullingPlugin';\nimport { EventPlugin } from './plugins/EventPlugin';\nimport { FrustumCullingStrategy } from './plugins/FrustumCullingStrategy';\nimport { PrepareRendererPlugin } from './plugins/PrepareRendererPlugin';\nimport { EventService, RenderReason, RenderingService } from './services';\nimport type { PointLike } from './shapes';\nimport {\n  type CanvasConfig,\n  type ClipSpaceNearZ,\n  type Cursor,\n  type InteractivePointerEvent,\n} from './types';\nimport {\n  caf,\n  cleanExistedCanvas,\n  getHeight,\n  getWidth,\n  isBrowser,\n  isInFragment,\n  raf,\n  memoize,\n} from './utils';\n\nexport function isCanvas(value: any): value is Canvas {\n  return !!(value as Canvas).document;\n}\n\nexport enum CanvasEvent {\n  READY = 'ready',\n  BEFORE_RENDER = 'beforerender',\n  RERENDER = 'rerender',\n  AFTER_RENDER = 'afterrender',\n  BEFORE_DESTROY = 'beforedestroy',\n  AFTER_DESTROY = 'afterdestroy',\n  RESIZE = 'resize',\n  DIRTY_RECTANGLE = 'dirtyrectangle',\n  RENDERER_CHANGED = 'rendererchanged',\n}\n\nconst DEFAULT_CAMERA_Z = 500;\nconst DEFAULT_CAMERA_NEAR = 0.1;\nconst DEFAULT_CAMERA_FAR = 1000;\n\n/**\n * reuse custom event preventing from re-create them in every frame\n */\nconst mountedEvent = new CustomEvent(ElementEvent.MOUNTED);\nconst unmountedEvent = new CustomEvent(ElementEvent.UNMOUNTED);\nconst beforeRenderEvent = new CustomEvent(CanvasEvent.BEFORE_RENDER);\nconst rerenderEvent = new CustomEvent(CanvasEvent.RERENDER);\nconst afterRenderEvent = new CustomEvent(CanvasEvent.AFTER_RENDER);\n\n/**\n * can be treated like Window in DOM\n * provide some extra methods like `window`, such as:\n * * `window.requestAnimationFrame`\n * * `window.devicePixelRatio`\n *\n * prototype chains: Canvas(Window) -> EventTarget\n *\n * @docs https://g.antv.antgroup.com/api/canvas/intro\n */\nexport class Canvas extends EventTarget implements ICanvas {\n  // #region environment\n  customElements: ICanvas['customElements'];\n  devicePixelRatio: ICanvas['devicePixelRatio'];\n  requestAnimationFrame: ICanvas['requestAnimationFrame'];\n  cancelAnimationFrame: ICanvas['cancelAnimationFrame'];\n  createImage: ICanvas['createImage'];\n  supportsTouchEvents: ICanvas['supportsTouchEvents'];\n  supportsPointerEvents: ICanvas['supportsPointerEvents'];\n  isTouchEvent: ICanvas['isTouchEvent'];\n  isMouseEvent: ICanvas['isMouseEvent'];\n\n  /**\n   * window.document\n   */\n  document: Document;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element\n   */\n  Element = DisplayObject;\n  // #endregion environment\n\n  /**\n   * rAF in auto rendering\n   */\n  private frameId?: number;\n\n  private inited = false;\n  private readyPromise: Promise<any> | undefined;\n  private resolveReadyPromise: () => void;\n\n  context = {} as CanvasContext;\n\n  constructor(config: CanvasConfig) {\n    super();\n\n    const {\n      container,\n      canvas,\n      renderer,\n      width,\n      height,\n      background,\n      cursor,\n      supportsMutipleCanvasesInOneContainer,\n      cleanUpOnDestroy = true,\n      offscreenCanvas,\n      devicePixelRatio,\n      requestAnimationFrame,\n      cancelAnimationFrame,\n      createImage,\n      supportsTouchEvents,\n      supportsPointerEvents,\n      isTouchEvent,\n      isMouseEvent,\n      dblClickSpeed,\n    } = config;\n    let canvasWidth = width;\n    let canvasHeight = height;\n    let dpr = devicePixelRatio || (isBrowser && window.devicePixelRatio) || 1;\n    dpr = dpr >= 1 ? Math.ceil(dpr) : 1;\n\n    // use user-defined <canvas> or OffscreenCanvas\n    if (canvas) {\n      // infer width & height with dpr\n      canvasWidth = width || getWidth(canvas) || canvas.width / dpr;\n      canvasHeight = height || getHeight(canvas) || canvas.height / dpr;\n    }\n\n    /**\n     * implements `Window` interface\n     */\n    this.customElements = new CustomElementRegistry();\n    this.devicePixelRatio = dpr;\n    this.requestAnimationFrame =\n      requestAnimationFrame ?? (raf.bind(runtime.globalThis) as typeof raf);\n    this.cancelAnimationFrame =\n      cancelAnimationFrame ?? (caf.bind(runtime.globalThis) as typeof caf);\n    this.createImage = createImage ?? (() => new window.Image());\n    // the following feature-detect from hammer.js\n    // @see https://github.com/hammerjs/hammer.js/blob/master/src/inputjs/input-consts.js#L5\n    this.supportsTouchEvents =\n      supportsTouchEvents ?? 'ontouchstart' in runtime.globalThis;\n    this.supportsPointerEvents =\n      supportsPointerEvents ?? !!runtime.globalThis.PointerEvent;\n    this.isTouchEvent =\n      isTouchEvent ??\n      ((event: InteractivePointerEvent): event is TouchEvent =>\n        this.supportsTouchEvents &&\n        event instanceof runtime.globalThis.TouchEvent);\n    this.isMouseEvent =\n      isMouseEvent ??\n      ((event: InteractivePointerEvent): event is MouseEvent =>\n        !runtime.globalThis.MouseEvent ||\n        (event instanceof runtime.globalThis.MouseEvent &&\n          (!this.supportsPointerEvents ||\n            !(event instanceof runtime.globalThis.PointerEvent))));\n\n    // override it in runtime\n    if (offscreenCanvas) {\n      runtime.offscreenCanvas = offscreenCanvas;\n    }\n\n    // create document\n    this.document = new Document();\n    this.document.defaultView = this;\n\n    if (!supportsMutipleCanvasesInOneContainer) {\n      cleanExistedCanvas(container, this, cleanUpOnDestroy);\n    }\n\n    this.initRenderingContext({\n      ...config,\n      width: canvasWidth,\n      height: canvasHeight,\n      background: background ?? 'transparent',\n      cursor: cursor ?? ('default' as Cursor),\n      cleanUpOnDestroy,\n      devicePixelRatio: dpr,\n      requestAnimationFrame: this.requestAnimationFrame,\n      cancelAnimationFrame: this.cancelAnimationFrame,\n      createImage: this.createImage,\n      supportsTouchEvents: this.supportsTouchEvents,\n      supportsPointerEvents: this.supportsPointerEvents,\n      isTouchEvent: this.isTouchEvent,\n      isMouseEvent: this.isMouseEvent,\n      dblClickSpeed: dblClickSpeed ?? 200,\n    });\n\n    this.initDefaultCamera(canvasWidth, canvasHeight, renderer.clipSpaceNearZ);\n\n    this.initRenderer(renderer, true);\n  }\n\n  private initRenderingContext(mergedConfig: CanvasConfig) {\n    this.context.config = mergedConfig;\n\n    // bind rendering context, shared by all renderers\n    this.context.renderingContext = {\n      /**\n       * the root node in scene graph\n       */\n      root: this.document.documentElement,\n\n      unculledEntities: [],\n\n      renderListCurrentFrame: [],\n\n      renderReasons: new Set(),\n\n      force: false,\n      dirty: false,\n    };\n  }\n\n  private initDefaultCamera(\n    width: number,\n    height: number,\n    clipSpaceNearZ: ClipSpaceNearZ,\n  ) {\n    // set a default ortho camera\n    const camera = new runtime.CameraContribution();\n    camera.clipSpaceNearZ = clipSpaceNearZ;\n\n    camera\n      .setType(CameraType.EXPLORING, CameraTrackingMode.DEFAULT)\n      .setPosition(width / 2, height / 2, DEFAULT_CAMERA_Z)\n      .setFocalPoint(width / 2, height / 2, 0)\n      .setOrthographic(\n        width / -2,\n        width / 2,\n        height / 2,\n        height / -2,\n        DEFAULT_CAMERA_NEAR,\n        DEFAULT_CAMERA_FAR,\n      );\n\n    // keep ref since it will use raf in camera animation\n    camera.canvas = this;\n\n    // redraw when camera changed\n    camera.eventEmitter.on(CameraEvent.UPDATED, () => {\n      this.context.renderingContext.renderReasons.add(\n        RenderReason.CAMERA_CHANGED,\n      );\n\n      if (\n        runtime.enableSizeAttenuation &&\n        this.getConfig().renderer.getConfig().enableSizeAttenuation\n      ) {\n        this.updateSizeAttenuation();\n      }\n    });\n\n    // bind camera\n    this.context.camera = camera;\n  }\n\n  private updateSizeAttenuation() {\n    const zoom = this.getCamera().getZoom();\n    this.document.documentElement.forEach((node: DisplayObject) => {\n      runtime.styleValueRegistry.updateSizeAttenuation(node, zoom);\n    });\n  }\n\n  getConfig() {\n    return this.context.config;\n  }\n\n  /**\n   * get the root displayObject in scenegraph\n   * @alias this.document.documentElement\n   */\n  getRoot() {\n    return this.document.documentElement;\n  }\n\n  /**\n   * get the camera of canvas\n   */\n  getCamera() {\n    return this.context.camera;\n  }\n\n  getContextService() {\n    return this.context.contextService;\n  }\n\n  getEventService() {\n    return this.context.eventService;\n  }\n\n  getRenderingService() {\n    return this.context.renderingService;\n  }\n\n  getRenderingContext() {\n    return this.context.renderingContext;\n  }\n\n  getStats() {\n    return this.getRenderingService().getStats();\n  }\n\n  // /**\n  //  * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Window/getComputedStyle\n  //  */\n  // getComputedStyle(node: DisplayObject) {\n  //   return node.computedStyle;\n  // }\n\n  get ready() {\n    if (!this.readyPromise) {\n      this.readyPromise = new Promise((resolve) => {\n        this.resolveReadyPromise = () => {\n          resolve(this);\n        };\n      });\n      if (this.inited) {\n        this.resolveReadyPromise();\n      }\n    }\n    return this.readyPromise;\n  }\n\n  /**\n   * @param cleanUp - whether to clean up all the internal services of Canvas\n   * @param skipTriggerEvent - whether to skip trigger destroy event\n   */\n  destroy(cleanUp = true, skipTriggerEvent?: boolean) {\n    memoize.clearCache();\n\n    const enableCancelEventPropagation =\n      this.getConfig().future?.experimentalCancelEventPropagation === true;\n\n    if (!skipTriggerEvent) {\n      this.dispatchEvent(\n        new CustomEvent(CanvasEvent.BEFORE_DESTROY),\n        enableCancelEventPropagation,\n        enableCancelEventPropagation,\n      );\n    }\n    if (this.frameId) {\n      this.cancelAnimationFrame(this.frameId);\n    }\n\n    // unmount all children\n    const root = this.getRoot();\n\n    if (cleanUp) {\n      this.unmountChildren(root);\n      // destroy Document\n      this.document.destroy();\n      this.getEventService().destroy();\n    }\n\n    // destroy services\n    this.getRenderingService().destroy();\n    this.getContextService().destroy();\n\n    // clear root after render service destroyed\n    if (this.context.rBushRoot) {\n      // clear rbush\n      this.context.rBushRoot.clear();\n    }\n\n    if (!skipTriggerEvent) {\n      this.dispatchEvent(\n        new CustomEvent(CanvasEvent.AFTER_DESTROY),\n        enableCancelEventPropagation,\n        enableCancelEventPropagation,\n      );\n    }\n\n    const clearEventRetain = (event: CustomEvent | MutationEvent) => {\n      event.currentTarget = null;\n      event.manager = null;\n      event.target = null;\n      (event as MutationEvent).relatedNode = null;\n    };\n\n    clearEventRetain(mountedEvent);\n    clearEventRetain(unmountedEvent);\n    clearEventRetain(beforeRenderEvent);\n    clearEventRetain(rerenderEvent);\n    clearEventRetain(afterRenderEvent);\n    clearEventRetain(attrModifiedEventCache);\n    clearEventRetain(insertedEventCache);\n    clearEventRetain(removedEventCache);\n    clearEventRetain(destroyEventCache);\n    runtime.textService.clearCache();\n  }\n\n  /**\n   * compatible with G 3.0\n   * @deprecated\n   * @alias resize\n   */\n  changeSize(width: number, height: number) {\n    this.resize(width, height);\n  }\n  resize(width: number, height: number) {\n    // update canvas' config\n    const canvasConfig = this.context.config;\n    canvasConfig.width = width;\n    canvasConfig.height = height;\n\n    // resize context\n    this.getContextService().resize(width, height);\n\n    // resize camera\n    const { camera } = this.context;\n    const projectionMode = camera.getProjectionMode();\n    camera\n      .setPosition(width / 2, height / 2, DEFAULT_CAMERA_Z)\n      .setFocalPoint(width / 2, height / 2, 0);\n    if (projectionMode === CameraProjectionMode.ORTHOGRAPHIC) {\n      camera.setOrthographic(\n        width / -2,\n        width / 2,\n        height / 2,\n        height / -2,\n        camera.getNear(),\n        camera.getFar(),\n      );\n    } else {\n      camera.setAspect(width / height);\n    }\n\n    const enableCancelEventPropagation =\n      canvasConfig.future?.experimentalCancelEventPropagation === true;\n\n    this.dispatchEvent(\n      new CustomEvent(CanvasEvent.RESIZE, { width, height }),\n      enableCancelEventPropagation,\n      enableCancelEventPropagation,\n    );\n  }\n\n  // proxy to document.documentElement\n  appendChild<T extends IChildNode>(child: T, index?: number): T {\n    return this.document.documentElement.appendChild(child, index);\n  }\n  insertBefore<T extends IChildNode, N extends IChildNode>(\n    newChild: T,\n    refChild: N | null,\n  ): T {\n    return this.document.documentElement.insertBefore(newChild, refChild);\n  }\n  removeChild<T extends IChildNode>(child: T): T {\n    return this.document.documentElement.removeChild(child);\n  }\n\n  /**\n   * Remove all children which can be appended to its original parent later again.\n   */\n  removeChildren() {\n    this.document.documentElement.removeChildren();\n  }\n\n  /**\n   * Recursively destroy all children which can not be appended to its original parent later again.\n   * But the canvas remains running which means display objects can be appended later.\n   */\n  destroyChildren() {\n    this.document.documentElement.destroyChildren();\n  }\n\n  render(frame?: XRFrame) {\n    // console.log('render ----------------------');\n    if (frame) {\n      beforeRenderEvent.detail = frame;\n      afterRenderEvent.detail = frame;\n    }\n\n    const enableCancelEventPropagation =\n      this.getConfig().future?.experimentalCancelEventPropagation === true;\n\n    this.dispatchEvent(\n      beforeRenderEvent,\n      enableCancelEventPropagation,\n      enableCancelEventPropagation,\n    );\n\n    const renderingService = this.getRenderingService();\n    renderingService.render(this.getConfig(), frame, () => {\n      // trigger actual rerender event\n      // @see https://github.com/antvis/G/issues/1268\n      this.dispatchEvent(\n        rerenderEvent,\n        enableCancelEventPropagation,\n        enableCancelEventPropagation,\n      );\n    });\n\n    this.dispatchEvent(\n      afterRenderEvent,\n      enableCancelEventPropagation,\n      enableCancelEventPropagation,\n    );\n  }\n\n  private run() {\n    const tick = (time: number, frame?: XRFrame) => {\n      this.render(frame);\n      this.frameId = this.requestAnimationFrame(tick);\n    };\n    tick(0);\n  }\n\n  private initRenderer(renderer: IRenderer, firstContentfullPaint = false) {\n    if (!renderer) {\n      throw new Error('Renderer is required.');\n    }\n\n    // reset\n    this.inited = false;\n    this.readyPromise = undefined;\n\n    // FIXME: should re-create here?\n    this.context.rBushRoot = new RBush<RBushNodeAABB>();\n\n    // reset rendering plugins\n    this.context.renderingPlugins = [];\n    this.context.renderingPlugins.push(\n      new EventPlugin(),\n      new PrepareRendererPlugin(),\n      // new DirtyCheckPlugin(),\n      new CullingPlugin([new FrustumCullingStrategy()]),\n    );\n\n    //\n    this.loadRendererContainerModule(renderer);\n\n    // init context service\n    this.context.contextService = new this.context.ContextService({\n      ...runtime,\n      ...this.context,\n    });\n\n    // init rendering service\n    this.context.renderingService = new RenderingService(runtime, this.context);\n\n    // init event service\n    this.context.eventService = new EventService(runtime, this.context);\n    this.context.eventService.init();\n\n    if (this.context.contextService.init) {\n      this.context.contextService.init();\n      this.initRenderingService(renderer, firstContentfullPaint, true);\n    } else {\n      this.context.contextService\n        .initAsync()\n        .then(() => {\n          this.initRenderingService(renderer, firstContentfullPaint);\n        })\n        .catch((err) => {\n          console.error(err);\n        });\n    }\n  }\n\n  private initRenderingService(\n    renderer: IRenderer,\n    firstContentfullPaint = false,\n    async = false,\n  ) {\n    this.context.renderingService.init(() => {\n      this.inited = true;\n\n      const enableCancelEventPropagation =\n        this.getConfig().future?.experimentalCancelEventPropagation === true;\n\n      if (firstContentfullPaint) {\n        if (async) {\n          this.requestAnimationFrame(() => {\n            this.dispatchEvent(\n              new CustomEvent(CanvasEvent.READY),\n              enableCancelEventPropagation,\n              enableCancelEventPropagation,\n            );\n          });\n        } else {\n          this.dispatchEvent(\n            new CustomEvent(CanvasEvent.READY),\n            enableCancelEventPropagation,\n            enableCancelEventPropagation,\n          );\n        }\n      } else {\n        this.dispatchEvent(\n          new CustomEvent(CanvasEvent.RENDERER_CHANGED),\n          enableCancelEventPropagation,\n          enableCancelEventPropagation,\n        );\n      }\n\n      if (this.readyPromise) {\n        this.resolveReadyPromise();\n      }\n\n      if (!firstContentfullPaint) {\n        this.getRoot().forEach((node) => {\n          (node as Element).dirty?.(true, true);\n        });\n      }\n\n      // keep current scenegraph unchanged, just trigger mounted event\n      this.mountChildren(this.getRoot());\n\n      if (renderer.getConfig().enableAutoRendering) {\n        this.run();\n      }\n    });\n  }\n\n  private loadRendererContainerModule(renderer: IRenderer) {\n    // load other container modules provided by g-canvas/g-svg/g-webgl\n    const plugins = renderer.getPlugins();\n    plugins.forEach((plugin) => {\n      plugin.context = this.context;\n      plugin.init(runtime);\n    });\n  }\n\n  setRenderer(renderer: IRenderer) {\n    // update canvas' config\n    const canvasConfig = this.getConfig();\n    if (canvasConfig.renderer === renderer) {\n      return;\n    }\n\n    const oldRenderer = canvasConfig.renderer;\n    canvasConfig.renderer = renderer;\n\n    // keep all children undestroyed\n    this.destroy(false, true);\n\n    // destroy all plugins, reverse will mutate origin array\n    [...(oldRenderer?.getPlugins() || [])].reverse().forEach((plugin) => {\n      plugin.destroy(runtime);\n    });\n\n    this.initRenderer(renderer);\n  }\n\n  setCursor(cursor: Cursor) {\n    const canvasConfig = this.getConfig();\n    canvasConfig.cursor = cursor;\n    this.getContextService().applyCursorStyle(cursor);\n  }\n\n  unmountChildren(parent: DisplayObject) {\n    // unmountChildren recursively\n    parent.childNodes.forEach((child: DisplayObject) => {\n      this.unmountChildren(child);\n    });\n\n    if (this.inited) {\n      if (parent.isMutationObserved) {\n        parent.dispatchEvent(unmountedEvent);\n      } else {\n        const enableCancelEventPropagation =\n          this.getConfig().future?.experimentalCancelEventPropagation === true;\n\n        unmountedEvent.target = parent;\n        this.dispatchEvent(unmountedEvent, true, enableCancelEventPropagation);\n      }\n\n      // skip document.documentElement\n      if (parent !== this.document.documentElement) {\n        parent.ownerDocument = null;\n      }\n      parent.isConnected = false;\n    }\n\n    // trigger after unmounted\n    if (parent.isCustomElement) {\n      if ((parent as CustomElement<any>).disconnectedCallback) {\n        (parent as CustomElement<any>).disconnectedCallback();\n      }\n    }\n  }\n\n  mountChildren(\n    child: DisplayObject,\n    skipTriggerEvent: boolean = isInFragment(child),\n  ) {\n    if (this.inited) {\n      if (!child.isConnected) {\n        child.ownerDocument = this.document;\n        child.isConnected = true;\n\n        if (!skipTriggerEvent) {\n          if (child.isMutationObserved) {\n            child.dispatchEvent(mountedEvent);\n          } else {\n            const enableCancelEventPropagation =\n              this.getConfig().future?.experimentalCancelEventPropagation ===\n              true;\n\n            mountedEvent.target = child;\n            this.dispatchEvent(\n              mountedEvent,\n              true,\n              enableCancelEventPropagation,\n            );\n          }\n        }\n      }\n    } else {\n      console.warn(\n        \"[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.\",\n        'appended child: ',\n        child.nodeName,\n      );\n    }\n\n    // recursively mount children\n    child.childNodes.forEach((c: DisplayObject) => {\n      this.mountChildren(c, skipTriggerEvent);\n    });\n\n    // trigger after mounted\n    if (child.isCustomElement) {\n      if ((child as CustomElement<any>).connectedCallback) {\n        (child as CustomElement<any>).connectedCallback();\n      }\n    }\n  }\n\n  mountFragment(child: DisplayObject) {\n    this.mountChildren(child, false);\n  }\n\n  client2Viewport(client: PointLike): PointLike {\n    return this.getEventService().client2Viewport(client);\n  }\n\n  viewport2Client(canvas: PointLike): PointLike {\n    return this.getEventService().viewport2Client(canvas);\n  }\n\n  viewport2Canvas(viewport: PointLike): PointLike {\n    return this.getEventService().viewport2Canvas(viewport);\n  }\n\n  canvas2Viewport(canvas: PointLike): PointLike {\n    return this.getEventService().canvas2Viewport(canvas);\n  }\n\n  /**\n   * @deprecated\n   * @alias client2Viewport\n   */\n  getPointByClient(clientX: number, clientY: number): PointLike {\n    return this.client2Viewport({ x: clientX, y: clientY });\n  }\n\n  /**\n   * @deprecated\n   * @alias viewport2Client\n   */\n  getClientByPoint(x: number, y: number): PointLike {\n    return this.viewport2Client({ x, y });\n  }\n}\n"],"names":["this","Shape","ClipSpaceNearZ","AbstractRendererPlugin","_classCallCheck","plugins","_createClass","key","value","addRenderingPlugin","plugin","push","context","renderingPlugins","removeAllRenderingPlugins","_this","forEach","index","indexOf","splice","AbstractRenderer","config","clipSpaceNearZ","NEGATIVE_ONE","_objectSpread","enableDirtyCheck","enableCulling","enableAutoRendering","enableDirtyRectangleRendering","enableDirtyRectangleRenderingDebug","enableSizeAttenuation","enableRenderingOptimization","registerPlugin","findIndex","p","unregisterPlugin","getPlugins","getPlugin","name","find","getConfig","setConfig","Object","assign","addVec3","vec3","add","copyVec3","copy","maxVec3","max","minVec3","min","scaleVec3","scale","subVec3","sub","AABB","center","halfExtents","update","setMinMax","getMin","getMax","aabb","isEmpty","tc","tcx","tcy","tcz","th","thx","thy","thz","tminx","tmaxx","tminy","tmaxy","tminz","tmaxz","oc","ocx","ocy","ocz","oh","ohx","ohy","ohz","ominx","omaxx","ominy","omaxy","ominz","omaxz","setFromTransformedAABB","m","bc","br","ac","ar","mx0","mx1","mx2","my0","my1","my2","mz0","mz1","mz2","mx0a","Math","abs","mx1a","mx2a","my0a","my1a","my2a","mz0a","mz1a","mz2a","intersects","aMax","aMin","bMax","bMin","intersection","getNegativeFarPoint","plane","pnVertexFlag","getPositiveFarPoint","Plane","distance","normal","fromValues","updatePNVertexFlag","Number","distanceToPoint","point","dot","normalize","invLen","len","intersectsLine","start","end","d0","d1","t","lerp","Mask","Frustum","planes","i","extractFromVPMatrix","projectionMatrix","_projectionMatrix","_slicedToArray","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","set","Point","x","arguments","length","undefined","y","clone","copyFrom","Rectangle","width","height","left","right","top","bottom","toJSON","fromRect","rect","applyTransform","matrix","topLeft","vec4","topRight","bottomLeft","bottomRight","transformedTopLeft","create","transformedTopRight","transformedBottomLeft","transformedBottomRight","transformMat4","minX","minY","maxX","maxY","ERROR_MSG_METHOD_NOT_IMPLEMENTED","ERROR_MSG_USE_DOCUMENT_ELEMENT","ERROR_MSG_APPEND_DESTROYED_ELEMENT","getAngle","angle","$vec3","createVec3","z","Array","isArray","isNumber","DEG_RAD","PI","deg2rad","deg","RAD_DEG","rad2deg","rad","GRAD_DEG","grad2deg","grads","deg2turn","turn2deg","turn","HALF_PI","getEulerFromQuat","out","quat","w","x2","y2","z2","w2","unit","test","atan2","asin","getEulerFromMat4","_mat4$getScaling","mat4","getScaling","_mat4$getScaling2","sx","sy","sz","getEuler","fromRotationTranslationScale","rotation","scaleX","scaleY","cos","sin","mat3","makePerspective","near","far","zero","twoNear","rightMinusLeft","topMinusBottom","a","b","c","d","farMinusNear","farMulNear","decompose","mat","row0x","row0y","row1x","row1y","scalingX","sqrt","scalingY","determinant","invScalingX","invScalingY","tmp","perspectiveMatrix","tmpVec4","row","pdum3","decomposeMat4","translation","skew","perspective","quaternion","a03","a13","a23","a30","a31","a32","a33","ret","invert","transpose","mat3from4","combine","cross","m44","mat4x4","scale1","scale2","CameraType","CameraTrackingMode","CameraProjectionMode","CameraEvent","UPDATED","MIN_DISTANCE","Camera","eventEmitter","EventEmitter","up","forward","position","focalPoint","distanceVector","azimuth","elevation","roll","relAzimuth","relElevation","relRoll","dollyingStep","maxDistance","Infinity","minDistance","zoom","rotateWorld","fov","aspect","projectionMatrixInverse","jitteredProjectionMatrix","enableUpdate","type","EXPLORING","trackingMode","DEFAULT","projectionMode","PERSPECTIVE","frustum","orthoMatrix","isOrtho","ORTHOGRAPHIC","getProjectionMode","getPerspective","getPerspectiveInverse","getFrustum","getPosition","getFocalPoint","getDollyingStep","getNear","getFar","getZoom","getOrthoMatrix","getView","view","setEnableUpdate","enabled","setType","setWorldRotation","_getAngles","TRACKING","setTrackingMode","setProjectionMode","Error","flag","getViewTransform","getWorldTransform","jitterProjectionMatrix","fromTranslation","multiply","clearJitterProjectionMatrix","setMatrix","_update","setProjectionMatrix","setFov","setPerspective","setAspect","setNear","setOrthographic","rright","setFar","setViewOffset","fullWidth","fullHeight","offsetX","offsetY","clearViewOffset","setZoom","setZoomByViewportPoint","viewportPoint","_this$canvas$viewport","canvas","viewport2Canvas","ox","oy","rotate","setPosition","setFocalPoint","_this$canvas$viewport2","cx","cy","dvec","dx","dy","_this$getPosition","_this$getPosition2","px","py","_this$getFocalPoint","_this$getFocalPoint2","fx","fy","_this$view","tan","ZERO","triggerUpdate","l","r","_this$view2","scaleW","scaleH","ortho","orthoZO","_getOrthoMatrix","_setPosition","CINEMATIC","subtract","el","az","rotateY","rotateX","lookAt","_getAxes","_getDistance","getDistance","getDistanceVector","setDistance","pos","n","f","setMaxDistance","setMinDistance","setAzimuth","computeMatrix","ORBITING","_getPosition","_getFocalPoint","getAzimuth","setElevation","getElevation","setRoll","getRoll","rotZ","setAxisAngle","identity","rotX","rotY","rotQ","rotMatrix","fromQuat","translate","transformMat3","fromMat4","fromRotationTranslationScaleOrigin","viewMatrix","vpMatrix","emit","pan","tx","ty","dolly","createLandmark","params","gotoLandmark","options","cancelLandmarkAnimation","Strategy","SortReason","$mat4","$quat","updateLocalTransform","transform","localDirtyFlag","hasSkew","localSkew","localTransform","localRotation","localPosition","origin","scaling","localScale","hasPosition","hasRotation","hasScale","hasOrigin","updateWorldTransform","parentTransform","dirtyFlag","worldTransform","EMPTY_PARSED_PATH","absolutePath","hasArc","segments","polygons","polylines","curve","totalLength","PropertySyntax","memoize","func","resolver","TypeError","memoized","_len","args","_key","apply","cache","has","get","result","Cache","Map","cacheList","clearCache","clear","UnitType","UnitCategory","Nested","ParenLess","data","unit_type","kEms","kPixels","kDegrees","kRadians","kGradians","kMilliseconds","kSeconds","kRems","kTurns","CSSStyleValueType","stringToUnitType","item","unitFromName","kUnknown","kNumber","kPercentage","unitTypeToUnitCategory","kInteger","kUNumber","kUPercent","kULength","kUTime","kUAngle","kUOther","canonicalUnitTypeForCategory","category","conversionToCanonicalUnitsScaleFactor","factor","unitTypeToString","CSSStyleValue","toString","buildCSSText","kNo","isNumericValue","getType","kUnitType","kClampType","isAngle","isLength","isRelativeUnit","isTime","CSSColorValue","_CSSStyleValue","colorSpace","_callSuper","_inherits","kColorType","to","GradientType","CSSGradientValue","CSSKeywordValue","kKeywordType","formatInfinityOrNaN","number","suffix","isFinite","toCanonicalUnit","CSSUnitValue","unitOrName","equals","other","other_unit_value","convertTo","target_unit","canonical_unit","scale_factor","text","toFixed","kMinInteger","kMaxInteger","isNaN","concat","Opx","Odeg","CSSRGB","_CSSColorValue","g","alpha","isNone","unsetKeywordValue","initialKeywordValue","inheritKeywordValue","keywordCache","unset","initial","inherit","getOrCreateKeyword","noneColor","transparentColor","getOrCreateRGBA","getOrCreateUnitValue","colorStopToString","colorStop","join","parseGradient","tokens","linearGradient","repeatingLinearGradient","radialGradient","repeatingRadialGradient","conicGradient","sideOrCorner","extentKeywords","positionKeywords","pixelValue","percentageValue","emValue","angleValue","startCall","endCall","comma","hexColor","literalColor","rgbColor","rgbaColor","input","error","msg","getAST","ast","matchListDefinitions","matchListing","matchDefinition","matchGradient","matchLinearOrientation","matchListRadialOrientations","gradientType","pattern","orientationMatcher","matchCall","captures","orientation","scan","colorStops","matchColorStop","callback","matchSideOrCorner","matchAngle","match","radialOrientations","radialOrientation","matchRadialOrientation","lookaheadCache","radialType","matchCircle","matchEllipse","at","matchAtPosition","extent","matchExtentKeyword","positionAt","defaultPosition","matchPositioning","circle","style","matchLength","ellipse","matchDistance","positioning","location","matchCoordinates","matcher","color","matchColor","matchHexColor","matchRGBAColor","matchRGBColor","matchLiteralColor","matchNumber","matchPositionKeyword","captureIndex","regexp","blankCaptures","exec","consume","size","substring","code","computeLinearGradient","rx","ry","rcx","rcy","x1","y1","computeRadialGradient","distanceSquareRoot","regexLG","regexRG","regexPR","regexColorStop","spaceColorStops","_colorStops$length","_colorStops$0$length","previousIndex","previousOffset","_colorStops$i$length","offset","isNil","j","SideOrCornerToDegMap","angleToDeg","positonToCSSUnitValue","unitX","unitY","_position$value","colorStr","parse","map","_ref","steps","LinearGradient","_positonToCSSUnitValu","_orientation$0$style","RadialGradient","arr","_arr$2$match","stop","split","parseFloat","_ref2","_ref3","parsedRadialGradient","parseRadialGradient","isString","parsePattern","gradientStr","_arr$4$match","_ref4","_ref5","patternStr","repetition","src","image","isCSSGradientValue","object","isPattern","isCSSRGB","parseColor","d3","rgba","opacity","mergeColors","slice","round","clamp","parseDimension","unitRegExp","string","trim","toLowerCase","search","matchedUnits","replace","taggedUnitRegExp","source","RegExp","parseLengthUnmemoize","css","parseLength","parserPercentageUnmemoize","parseLengthOrPercentageUnmemoize","parseLengthOrPercentage","parseAngleUnmemoize","parseAngle","mergeDimensions","target","nonNegative","leftValue","rightValue","canonicalUnit","leftCanonicalUnitValue","rightCanonicalUnitValue","convertPercentUnit","convertAngleUnit","parseDimensionArrayFormat","parsed","segment","_toConsumableArray","valueWithUnit","vec3Index","useMin","bounds","nodeName","GROUP","getLocalBounds","getGeometryBounds","parseParam","supportedFilters","parseFilter","filterStr","filterRegExp","prevLastIndex","lastIndex","numberToString","parseNumberUnmemoize","parseNumber","mergeNumbers","clampedMergeNumbers","mergeNumberLists","numberList","getOrCalculatePathTotalLength","path","parsedStyle","getTotalLength","getOrCalculatePolylineTotalLength","polyline","points","polylineLength","removeRedundantMCommand","prevSegment","cmd","prevCmd","srcPoint","destPoint","isSamePoint","hasArcOrBezier","count","extractPolygons","pathArray","point1","point2","getPathBBox","lineWidth","xArr","yArr","segmentsWithAngle","currentPoint","prePoint","box","command","quadBox","cubicBox","arcParams","arcBox","xRotation","startAngle","endAngle","nextPoint","filter","extra","getExtraFromSegmentWithAngle","xExtra","yExtra","currentAndPre","pow","currentAndNext","preAndNext","currentAngle","acos","isNumberEqual","xAngle","yAngle","toSymmetry","angleBetween","v0","v1","sign","pointOnEllipticalArc","p0","xAxisRotation","largeArcFlag","sweepFlag","p1","mod","xAxisRotationRadians","ellipticalArcAngle","transformedPoint","radiiCheck","cSquareNumerator","cSquareRootDenom","cRadicand","cCoef","transformedCenter","startVector","endVector","sweepAngle","ellipseComponentX","ellipseComponentY","ellipticalArcStartAngle","ellipticalArcEndAngle","ellipticalArcCenter","resultantRx","resultantRy","path2Segments","nextParams","startMovePoint","lastStartMovePointIndex","startTangent","endTangent","cubicParams","getArcParams","includes","cp","preSegment","cp1","cp2","_getTangentAtRatio","getTangentAtRatio","dx1","dy1","_getTangentAtRatio2","dx2","dy2","ratio","_segment$arcParams","_segment$arcParams$rx","_segment$arcParams$ry","arcFlag","p2","xDist","yDist","dist","vMag","v","vRatio","u","vAngle","startPoint","xp","yp","lambda","diff","cxp","cyp","theta","dTheta","commandsToPathString","commands","reduce","prev","cur","p3","lineToCommands","ellipseToCommands","polygonToCommands","closed","rectToCommands","radius","_radius","tlr","trr","brr","blr","signX","signY","convertToPath","getLocalTransform","LINE","_parsedStyle","_parsedStyle$x","_parsedStyle$y","_parsedStyle$x2","_parsedStyle$y2","CIRCLE","_parsedStyle2","_parsedStyle2$r","_parsedStyle2$cx","_parsedStyle2$cy","ELLIPSE","_parsedStyle3","_parsedStyle3$rx","_parsedStyle3$ry","_parsedStyle3$cx","_parsedStyle3$cy","POLYLINE","POLYGON","RECT","_parsedStyle4","_parsedStyle4$width","_parsedStyle4$height","_parsedStyle4$x","_parsedStyle4$y","hasRadius","some","PATH","translatePathToString","startOffsetX","startOffsetY","endOffsetX","endOffsetY","newValue","nextSegment","useStartOffset","useEndOffset","startOffsetXTemp","startOffsetYTemp","endOffsetXTemp","endOffsetYTemp","internalParsePath","normalizePath","_unused","console","_extractPolygons","_getPathBBox","memoizedParsePath","parsePath","mergePaths","curve1","curve2","path2Curve","curves","equalizeSegments","curve0","getDrawDirection","reverseCurve","clonePath","getRotatedCurve","parsePoints","pointsOrStr","pointStr","_pointStr$split","_pointStr$split2","mergePoints","_","TRANSFORM_REGEXP","cast","contents","id","transformFunctions","matrix3d","rotateZ","rotate3d","scaleZ","scale3d","skewX","skewY","translateX","translateY","translateZ","translate3d","parseArrayTransform","functionData","parsedArgs","parseTransform","functionName","argTypes","arg","parsedArg","A","s","N","T","L","toUpperCase","parseTransformUnmemoize","convertItemToMatrix","sqrLength","sc","sq","multiplyMatrices","convertToMatrix","transformList","makeMatrixDecomposition","composeMatrix","k","is2D","temp","numberToLongString","mergeMatrices","leftArgs","rightArgs","decompositionPair","list","q","stringifiedArgs","v2","fromQ","toQ","product","typeTo2D","typeTo3D","isMatrixOrPerspective","lt","rt","mergeTransforms","flipResults","_loop","_left$i","defaultValue","leftResult","rightResult","types","merged","leftType","rightType","leftFunctionData","rightFunctionData","leftArgsCopy","rightArgsCopy","stringConversions","parseTransformOrigin","values","convertKeyword2Percent","keyword","BUILT_IN_PROPERTIES","inh","syntax","OPACITY_VALUE","PAINT","COLOR","LENGTH_PERCENTAGE","SHADOW_BLUR","LENGTH_PERCENTAGE_12","DEFINED_PATH","OFFSET_DISTANCE","ind","Z_INDEX","FILTER","TRANSFORM","TRANSFORM_ORIGIN","COORDINATE","LENGTH_PERCENTAGE_14","LIST_OF_POINTS","TEXT","TEXT_TRANSFORM","LENGTH","NUMBER","MARKER","GEOMETRY_ATTRIBUTE_NAMES","Set","propertyMetadataCache","DefaultStyleValueRegistry","runtime","property","registerMetadata","metadata","getPropertySyntax","CSSPropertySyntaxFactory","processProperties","attributes","skipUpdateAttribute","skipParse","forceUpdateGeometry","usedAttributes","oldClipPath","clipPath","oldOffsetPath","offsetPath","assignParsedStyle","needUpdateGeometry","getParsedStyleListOf","fill","stroke","shadowColor","lineDash","textTransform","calculator","isUndefined","transformOrigin","markerStart","markerEnd","markerMid","zIndex","postProcessor","offsetDistance","geometry","dirty","sceneGraphService","dirtyToRoot","updateGeometry","geometryUpdater","geometryUpdaterFactory","contentBounds","renderBounds","_geometryUpdater$upda","_geometryUpdater$upda2","_geometryUpdater$upda3","_geometryUpdater$upda4","cz","_geometryUpdater$upda5","hwidth","_geometryUpdater$upda6","hheight","_geometryUpdater$upda7","hdepth","_parsedStyle$lineWidt","_parsedStyle$increase","increasedLineWidthForHitTesting","_parsedStyle$shadowTy","shadowType","_parsedStyle$filter","expansion","SQRT2","hasStroke","halfLineWidth","_geometry$renderBound","shadowBlur","shadowOffsetX","shadowOffsetY","shadowBlurInPixels","shadowOffsetXInPixels","shadowOffsetYInPixels","shadowLeft","shadowRight","shadowTop","shadowBottom","blurRadius","_geometry$renderBound2","flipY","flipX","usedOriginXValue","usedOriginYValue","setOrigin","updateSizeAttenuation","node","isSizeAttenuation","rawLineWidth","rawR","constructor","PARSED_STYLE_LIST","CSSPropertyAngle","mixer","oldParsed","CSSPropertyClipPath","oldPath","newPath","updateDisplayObjectDependency","leaf","childNodes","CSSPropertyColor","parser","CSSPropertyFilter","getFontSize","fontSize","CSSPropertyLengthOrPercentage","computed","parentNode","_object$ownerDocument","ownerDocument","documentElement","CSSPropertyLengthOrPercentage12","CSSPropertyLengthOrPercentage14","CSSPropertyMarker","oldMarker","newMarker","_newMarker","cloned","cloneNode","isMarker","CSSPropertyNumber","CSSPropertyOffsetDistance","_object$parsedStyle","getPoint","setLocalPosition","CSSPropertyOpacity","CSSPropertyPath","CSSPropertyPoints","CSSPropertyShadowBlur","_CSSPropertyLengthOrP","CSSPropertyText","nodeValue","CSSPropertyTextTransform","rawText","getAttribute","transformedText","charAt","definedProps","obj","fromEntries","entries","CANVAS_Map","WeakMap","cleanExistedCanvas","container","cleanUp","$dom","document","getElementById","destroy","isBrowser","window","isElement","sortedIndex","array","low","high","mid","sortByZIndex","o1","o2","zIndex1","zIndex2","parent","children","findClosestClipPathTarget","_el$parsedStyle","parentElement","PX_SUFFIX","setDOMSize","$el","getStyle","defaultView","getComputedStyle","getPropertyValue","getWidth","offsetWidth","getHeight","offsetHeight","MOUSE_POINTER_ID","TOUCH_TO_POINTER","touchstart","touchend","touchendoutside","touchmove","touchcancel","clock","performance","now","Date","isInFragment","FRAGMENT","getRootNode","isFillOrStrokeAffected","pointerEvents","hasFill","isFillOtherThanNone","isStrokeOtherThanNone","uId","uniqueId","root","self","global","nowOffset","pnow","reservedCBs","lastTime","polyfillRaf","currentTime","gap","delay","keys","setTimeout","copied","polyfillCaf","vendorPrefixes","getRequestAnimationFrame","vp","requestAnimationFrame","getCancelAnimationFrame","cancelAnimationFrame","predicate","raf","caf","AsyncParallelHook","callbacks","getCallbacksNum","tapPromise","fn","promise","Promise","all","AsyncSeriesWaterfallHook","_promise","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_this$callbacks","_args","wrap","_context","next","sent","abrupt","SyncHook","tap","call","argsArr","SyncWaterfallHook","genericFontFamilies","stringRegExp","getFontAttr","_attributes$fontSize","_attributes$fontFamil","fontFamily","_attributes$fontStyle","fontStyle","_attributes$fontVaria","fontVariant","_attributes$fontWeigh","fontWeight","toFontString","toFontStringRaw","_getFontAttr","fontSizeString","fontFamilies","_getFontAttr2","MIN_SCALE","clampScale","createSkewMatrix","skewMatrix","$mat4_1","$mat4_2","fromScaling","fromZRotation","fromXRotation","fromYRotation","fromRotation","$vec3One","$vec3Zero","optimizer","setLocalScale","setLocalEulerAngles","dirtyLocalTransform","transformable","parsedTransformToMat4","_transform$i","mul","setLocalTransform","resetLocalTransform","CSSPropertyTransform","CSSPropertyTransformOrigin","CSSPropertyZIndex","parentEntity","parentRenderable","renderable","parentSortable","sortable","dirtyReason","Z_INDEX_CHANGED","CircleUpdater","_parsedStyle$cx","_parsedStyle$cy","_parsedStyle$r","EllipseUpdater","_parsedStyle$rx","_parsedStyle$ry","LineUpdater","PathUpdater","_d$rect","PolylineUpdater","RectUpdater","_parsedStyle$width","_parsedStyle$height","contentWidth","contentHeight","TextUpdater","globalRuntime","isReadyToMeasure","_parsedStyle$textAlig","textAlign","_parsedStyle$textBase","textBaseline","_parsedStyle$dx","_parsedStyle$dy","metrics","font","lines","lineWidths","lineHeight","maxLineWidth","fontProperties","ascent","descent","lineMetrics","offscreenCanvas","textService","measureText","lineXOffset","lineYOffset","GroupUpdater","HTMLUpdater","isFederatedEvent","FederatedEvent","manager","eventPhase","prototype","NONE","bubbles","cancelBubble","cancelable","defaultPrevented","propagationStopped","propagationImmediatelyStopped","layer","page","viewport","composed","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE","composedPath","propagationPath","preventDefault","nativeEvent","Event","stopImmediatePropagation","stopPropagation","initEvent","initUIEvent","FederatedMouseEvent","client","movement","screen","getModifierState","initMouseEvent","FederatedPointerEvent","_FederatedMouseEvent","isPrimary","getCoalescedEvents","getPredictedEvents","clonePointerEvent","FederatedWheelEvent","cloneWheelEvent","CustomEvent","_FederatedEvent","eventName","detail","EventTarget","emitter","on","listener","addEventListener","capture","once","isBoolean","_options$capture","_options$once","isFunction","handleEvent","off","removeEventListener","removeAllEventListeners","_this$emitter","removeAllListeners","_listener","dispatchEvent","dispatchEventToSelf","e","currentTarget","skipPropagate","dispatchToSelf","_ownerDocument","getEventService","Node","_EventTarget","shadow","isConnected","baseURI","nodeType","destroyed","_iterator","_createForOfIteratorHelper","_step","done","child","textContent","err","content","_this2","removeChild","opts","host","hasChildNodes","isDefaultNamespace","namespace","lookupNamespaceURI","prefix","lookupPrefix","isEqualNode","otherNode","isSameNode","compareDocumentPosition","node1Root","node2Root","node1Hierarchy","node2Hierarchy","_node1Root$parentNode","DOCUMENT_POSITION_DISCONNECTED","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","DOCUMENT_POSITION_PRECEDING","longerHierarchy","shorterHierarchy","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_CONTAINS","longerStart","shorterHierarchyNode","longerHierarchyNode","siblings","contain","contains","getAncestor","stack","pop","isNode","PROPAGATION_LIMIT","EventService","nativeHTMLMap","cursor","mappingTable","mappingState","trackingData","eventPool","tmpMatrix","tmpVec3","onPointerDown","from","createPointerEvent","pointerType","isRightButton","button","pointerId","pressTargetsByButton","freeEvent","onPointerUp","alwaysTriggerPointerEventOnCanvas","rootTarget","pressTarget","findMountedTarget","clickTarget","notifyTarget","_e$detail","clickEvent","clicksByButton","clickCount","timeStamp","renderingContext","clickHistory","dblClickSpeed","preventClick","useNativeClickEvent","onPointerMove","isMouse","outTarget","overTargets","outType","outEvent","leaveEvent","overType","overEvent","overTargetAncestor","didPointerEnter","enterEvent","getCursor","onPointerOut","onPointerOver","onPointerUpOutside","onWheel","wheelEvent","createWheelEvent","onClick","onPointerCancel","init","addEventMapping","getScale","bbox","contextService","getBoundingClientRect","getDomElement","client2Viewport","_this$getScale","viewport2Client","_this$getScale2","camera","getCamera","_this$context$config","worldMatrix","canvas2Viewport","canvasP","clip","_this$context$config2","setPickHandler","pickHandler","priority","sort","mapEvent","mappers","warn","propagate","notifyListeners","unshift","hitTest","viewportX","viewportY","_this$context$config3","disableHitTesting","isNativeEventFromCanvas","_target","shadowRoot","getExistedHTML","event","_i2","_arr","eventTarget","existed","pickTarget","clientX","clientY","canvasX","canvasY","fallbackTarget","allocateEvent","copyPointerData","copyMouseData","copyData","originalEvent","existedHTML","copyWheelData","overTarget","pressure","tangentialPressure","tiltX","tiltY","twist","altKey","buttons","ctrlKey","metaKey","shiftKey","deltaMode","deltaX","deltaY","deltaZ","isTrusted","listeners","_events","removeListener","OffscreenCanvasCreator","getOrCreateCanvas","contextAttributes","getContext","willReadFrequently","OffscreenCanvas","createElement","getOrCreateContext","createCanvas","_unused2","_unused3","RenderReason","RenderingService","inited","stats","total","rendered","zIndexCounter","hooks","initAsync","dirtycheck","cull","beginFrame","beforeRender","render","afterRender","endFrame","pick","pickSync","pointerDown","pointerUp","pointerMove","pointerOut","pointerOver","pointerWheel","pointerCancel","click","then","getStats","disableDirtyRectangleRendering","renderer","_renderer$getConfig","renderReasons","CAMERA_CHANGED","canvasConfig","frame","rerenderCallback","syncHierarchy","triggerPendingEvents","dirtyRectangleRenderingDisabled","onlyCameraChanged","shouldTriggerRenderHooks","disableRenderHooks","renderDisplayObject","renderListCurrentFrame","displayObject","_canvasConfig$rendere","internalRenderSingleDisplayObject","objectChanged","objectToRender","renderOrder","dirtyChildren","_currentObject$sortab","currentObject","objects","sorted","_sortable$sorted","_sortable$sorted2","sortIndex","clearPendingEvents","dirtify","DISPLAY_OBJECT_CHANGED","ATTRIBUTE_REGEXP","DefaultSceneGraphSelector","selectOne","query","startsWith","classList","getIdOrClassname","_this$getAttribute","attributeToString","selectAll","findAll","_this$getAttribute2","is","className","_this$getAttribute3","matches","ElementEvent","MutationEvent","typeArg","relatedNode","prevValue","attrName","attrChange","prevParsedValue","newParsedValue","ADDITION","MODIFICATION","REMOVAL","reparentEvent","REPARENT","$vec2Zero","vec2","$mat4Identity","$vec2","$setLocalTransform_1","$setLocalTransform_2","$setLocalTransform_3","$setLocalPosition","$setPosition_1","$setPosition_ParentInvertMatrix","$setEulerAngles_InvParentRot","$rotateLocal","$rotate_ParentInvertRotation","$triggerPendingEvents_detail","affectChildren","DefaultSceneGraphService","pendingEvents","boundsChangedEvent","BOUNDS_CHANGED","displayObjectDependencyMap","sceneGraphSelector","querySelector","querySelectorAll","attach","detached","detach","isChildFragment","isAttachToFragment","nodes","ADDED","dirtifyFragment","dirtyWorldTransform","_parent$ownerDocument","enableCancelEventPropagation","future","experimentalCancelEventPropagation","_style","REMOVED","getLocalPosition","element","getLocalRotation","getLocalScale","getLocalSkew","_position$","translateLocal","transformQuat","setLocalRotation","rotateLocal","degrees","fromEuler","_scaling$","scaleLocal","_scaling$2","setLocalSkew","getTranslation","getRotation","getOrigin","internalUpdateTransform","_position$2","setRotation","parentRot","rot","originVec","setEulerAngles","parentRotation","getTransformedGeometryBounds","existedAABB","styleValueRegistry","getBounds","boundsDirty","renderBoundsDirty","childBounds","clipped","clipPathBounds","parentInvert","localBounds","_element$ownerDocumen","getContextService","_aabb$getMin","_aabb$getMin2","_aabb$getMax","_aabb$getMax2","_element$parentNode","internalUpdateElement","ancestors","_element$ownerDocumen2","_element$transformabl","_element$renderable","_element$renderable2","enableAttributeUpdateOptimization","experimentalAttributeUpdateOptimization","transformDirty","_element$transformabl2","_element$dirty","shapeUpdated","tempElIndex","_dirty","tempEl","rootNode","_transformable","_transformable2","dirtifyWorldInternal","_element$ownerDocumen3","childTransform","_element$ownerDocumen4","_dirty2","_ref6","_e$dirty","informDependentDisplayObjects","_dirty3","_ref7","_this3","triggered","trigger","isMutationObserved","_element$ownerDocumen5","_element$ownerDocumen6","oldDependencyMap","newDependencyMap","_this4","dependencyMap","ATTR_MODIFIED","isCustomElement","attributeChangedCallback","LRU","capacity","put","leastRecentlyUsedKey","TEXT_METRICS","MetricsString","BaselineSymbol","BaselineMultiplier","HeightMultiplier","Newlines","BreakingSpaces","LATIN_REGEX","regexCannotStartZhCn","regexCannotEndZhCn","regexCannotStartZhTw","regexCannotEndZhTw","regexCannotStartJaJp","regexCannotEndJaJp","regexCannotStartKoKr","regexCannotEndKoKr","regexCannotStart","regexCannotEnd","TextService","fontMetricsCache","shouldBreakByKinsokuShorui","char","nextChar","isBreakingSpace","trimByKinsokuShorui","prevLine","lastChar","charWidthCache","measureFont","properties","offscreenCanvasCreator","metricsString","ceil","baseline","fillStyle","fillRect","fillText","imagedata","getImageData","pixels","line","idx","_parsedStyle$fontSize","_parsedStyle$wordWrap","wordWrap","strokeHeight","_parsedStyle$letterSp","letterSpacing","textPath","textPathSide","textPathStartOffset","_parsedStyle$leading","leading","isOverflowing","outputText","chars","_parsedStyle$wordWrap2","wordWrapWidth","_parsedStyle$letterSp2","_parsedStyle$maxLines","maxLines","textOverflow","maxWidth","ellipsis","currentLineIndex","currentLineWidth","prevLineLastCharIndex","charCache","calcWidth","getFromCache","ellipsisWidth","findCharIndexClosestWidthThreshold","lineTxt","txtLastCharIndex","txtStartCharIndex","widthThreshold","isNewline","appendEllipsis","lineIndex","textCharIndex","prevChar","charWidth","canBreakInLastChar","trimToBreakable","sumTextWidthByCache","charCodeAt","findBreakableIndex","trimmedChar","isTrimmedWithSpace","trimFrom","trimTo","calcWidthWithCache","sum","spacing","rectUpdater","polylineUpdater","_defineProperty","IMAGE","HTML","MESH","PERCENTAGE","ANGLE","getGlobalThis","globalThis","CameraContribution","AnimationTimeline","EasingFunction","layoutRegistry","enableStyleSyntax","entityCounter","resetEntityCounter","insertedEvent","INSERTED","removedEvent","destroyEvent","DESTROY","Element","_Node","entity","dirtyRenderBounds","cullable","strategy","Standard","visibilityPlaneMask","visible","enable","rBushNode","namespaceURI","scrollLeft","scrollTop","clientTop","clientLeft","computedStyle","updateShape","setAttribute","firstChild","lastChild","deep","appendChild","_this$ownerDocument","mountFragment","mountChildren","insertBefore","newChild","refChild","replaceChild","oldChild","_this$ownerDocument2","_child$ownerDocument","unmountChildren","removeChildren","destroyChildren","selector","getElementsByName","getElementsByClassName","getElementsByTagName","tagName","selectors","closest","after","_len2","_key2","_this4$parentNode","before","_len3","_key3","first","rest","replaceWith","remove","append","_this5","_len4","_key4","prepend","_this6","_len5","_key5","replaceChildren","_this$ownerDocument3","getRenderBounds","getClientRects","computedStyleMap","getAttributeNames","hasAttribute","qualifiedName","hasAttributes","removeAttribute","attributeName","force","getAttributeNS","localName","getAttributeNode","getAttributeNodeNS","hasAttributeNS","removeAttributeNS","removeAttributeNode","attr","setAttributeNS","setAttributeNode","setAttributeNodeNS","toggleAttribute","isDisplayObject","Proxy","attrModifiedEvent","DisplayObject","_Element","activeAnimations","initialParsedStyle","initAttributes","setProperty","propertyName","removeProperty","prop","_superPropGet","getAnimations","animation","cancel","customCloneFunc","clonedStyle","attribute","clonedChild","internalSetAttribute","parseOptions","oldValue","oldParsedValue","_this$ownerDocument$d","_attributeChangedCall","getBBox","getEulerAngles","_getEuler","_getEuler2","ez","getLocalEulerAngles","_getEuler3","_getEuler4","animate","keyframes","timeline","play","isVisible","_this$parsedStyle","visibility","isInteractive","_this$parsedStyle2","isCulled","toFront","toBack","isObject","getMatrix","_mat4$getTranslation","_mat4$getTranslation2","_getEuler5","_getEuler6","eux","euz","getLocalMatrix","_decompose","_decompose2","setLocalMatrix","_decompose3","_decompose4","show","hide","getCount","childElementCount","getParent","getChildren","getFirst","firstElementChild","getLast","lastElementChild","getChildByIndex","moveTo","move","setZIndex","Circle","_DisplayObject","CustomElement","_objectWithoutProperties","_excluded","Ellipse","Fragment","Group","Image","Line","z1","markerStartAngle","markerEndAngle","transformMarker","isStart","markerStartOffset","markerEndOffset","marker","originalAngle","inWorldSpace","_this$parsedStyle3","_linePointAt","linePointAt","transformed","getPointAtLength","_this$parsedStyle4","lineLength","Path","miterLimit","markerMidList","placeMarkerMid","_this$getStartTangent","getStartTangent","_this$getStartTangent2","_this$getEndTangent","getEndTangent","_this$getEndTangent2","_segments$i$currentPo","_getPointAtLength2","endPoint","tangent","Polygon","isClosed","P","Polyline","_Polygon","tempLength","segmentT","segmentL","subt","Rect","Text","getComputedTextLength","_this$parsedStyle$met","getLineBoundingRects","_this$parsedStyle$met2","CustomElementRegistry","registry","define","CSS","percent","em","rem","grad","ms","registerProperty","definition","inherits","interpolable","initialValue","registerLayout","clazz","Document","initialStyle","customElements","shape","createElementNS","elementsFromBBox","rBush","rBushRoot","rBushNodes","hitTestList","_displayObject$parsed","isVisibilityAffected","elementFromPointSync","_this$defaultView$can","_this$defaultView$get","_this$defaultView$vie","_this$defaultView$get2","getRenderingService","topmost","picked","_elementFromPoint","_this$defaultView$can2","_this$defaultView$get3","_this$defaultView$vie2","_yield$this$defaultVi","elementFromPoint","_x","_x2","elementsFromPointSync","_this$defaultView$can3","_this$defaultView$get4","_this$defaultView$vie3","_this$defaultView$get5","_elementsFromPoint","_callee2","_this$defaultView$can4","_this$defaultView$get6","_this$defaultView$vie4","_yield$this$defaultVi2","_context2","elementsFromPoint","_x3","_x4","CullingPlugin","strategies","renderingService","tag","_config$future","unculledEntities","every","CULLED","EventPlugin","autoPreventDefault","rootPointerEvent","rootWheelEvent","_this$context$renderi","supportsTouchEvents","normalizedEvents","normalizeToPointerEvent","normalizedEvent","bootstrapEvent","eventService","setCursor","_this$context$renderi2","_iterator2","_step2","_this2$context$render","normalizeWheelEvent","events","isNormalized","_iterator3","_step3","federatedEvent","$element","outside","_iterator4","_step4","_iterator5","_step5","transferMouseData","_this$context$eventSe","_this$context$eventSe2","_this$context$eventSe3","_this$context$eventSe4","srcElement","movementX","movementY","pageX","pageY","screenX","screenY","relatedTarget","applyCursorStyle","isTouchEvent","changedTouches","touch","touches","radiusX","radiusY","identifier","isMouseEvent","tempEvent","shape2D","FrustumCullingStrategy","_object$parentNode","parentVisibilityPlaneMask","computeVisibilityWithPlaneMask","INDETERMINATE","OUTSIDE","parentPlaneMask","INSIDE","mask","isShape2D","_planes$k","PrepareRendererPlugin","syncTasks","isFirstTimeRendering","syncing","isFirstTimeRenderingFinished","_runtime$globalThis$r","handleAttributeChanged","handleBoundsChanged","handleMounted","handleUnmounted","MOUNTED","UNMOUNTED","ric","requestIdleCallback","bind","enableRICSyncRTree","experimentalRICSyncRTree","syncRTree","cancelIdleCallback","ricSyncRTreeId","syncNode","_renderBounds$getMin","_renderBounds$getMin2","_renderBounds$getMax","_renderBounds$getMax2","bulk","synced","sync","load","isCanvas","CanvasEvent","DEFAULT_CAMERA_Z","DEFAULT_CAMERA_NEAR","DEFAULT_CAMERA_FAR","mountedEvent","unmountedEvent","beforeRenderEvent","BEFORE_RENDER","rerenderEvent","RERENDER","afterRenderEvent","AFTER_RENDER","Canvas","background","supportsMutipleCanvasesInOneContainer","_config$cleanUpOnDest","cleanUpOnDestroy","devicePixelRatio","createImage","supportsPointerEvents","canvasWidth","canvasHeight","dpr","PointerEvent","TouchEvent","MouseEvent","initRenderingContext","initDefaultCamera","initRenderer","mergedConfig","getRoot","getRenderingContext","readyPromise","resolve","resolveReadyPromise","_this$getConfig$futur","skipTriggerEvent","BEFORE_DESTROY","frameId","AFTER_DESTROY","clearEventRetain","attrModifiedEventCache","insertedEventCache","removedEventCache","destroyEventCache","changeSize","resize","_canvasConfig$future","RESIZE","_this$getConfig$futur2","run","tick","time","firstContentfullPaint","RBush","loadRendererContainerModule","ContextService","initRenderingService","_this7","async","_this7$getConfig$futu","READY","RENDERER_CHANGED","_this8","setRenderer","oldRenderer","reverse","_this9","_this$getConfig$futur3","disconnectedCallback","_this0","_this$getConfig$futur4","connectedCallback","getPointByClient","getClientByPoint"],"mappings":"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;AAATA,EAAAA,SAAS,CAATA,SAAS,CAAA,KAAA,CAAA,GAAA,CAAA,CAAA,GAAA,KAAA,CAAA;AAAA,EAAA,OAATA,SAAS,CAAA;AAAA,CAAA,CAAA,EAAA,CAAA;;AC9FrB;AACA,IAAMC,IAAI,GAAG,CACX;AACEzf,EAAAA,IAAI,EAAE,IAAI;EACV0f,SAAS,EAAEL,QAAQ,CAACM,IAAAA;AACtB,CAAC;AACD;AACA;AACA;AACA;AACA;AACE3f,EAAAA,IAAI,EAAE,IAAI;EACV0f,SAAS,EAAEL,QAAQ,CAACO,OAAAA;AACtB,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE5f,EAAAA,IAAI,EAAE,KAAK;EACX0f,SAAS,EAAEL,QAAQ,CAACQ,QAAAA;AACtB,CAAC,EACD;AACE7f,EAAAA,IAAI,EAAE,KAAK;EACX0f,SAAS,EAAEL,QAAQ,CAACS,QAAAA;AACtB,CAAC,EACD;AACE9f,EAAAA,IAAI,EAAE,MAAM;EACZ0f,SAAS,EAAEL,QAAQ,CAACU,SAAAA;AACtB,CAAC,EACD;AACE/f,EAAAA,IAAI,EAAE,IAAI;EACV0f,SAAS,EAAEL,QAAQ,CAACW,aAAAA;AACtB,CAAC,EACD;AACEhgB,EAAAA,IAAI,EAAE,GAAG;EACT0f,SAAS,EAAEL,QAAQ,CAACY,QAAAA;AACtB,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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C,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,EACtDD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,EACtDD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,EACvDD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,EAEvDD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,EACxDD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,EACxDD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,EACzDD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,EAEzDD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,EAC1DD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,EAC1DD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,EAC3DD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,GAAGD,CAAC,CAAC,EAAE,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","x_google_ignoreList":[0,17,18]}