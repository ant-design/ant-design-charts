function t(t,e,i,n="height"){const h=t[n],r=e[n];return"center"===i?(h+r)/2:t.height}const e=Object.assign,i={getId:t=>t.id||t.name,getPreH:t=>t.preH||0,getPreV:t=>t.preV||0,getHGap:t=>t.hgap||18,getVGap:t=>t.vgap||18,getChildren:t=>t.children,getHeight:t=>t.height||36,getWidth(t){const e=t.label||" ";return t.width||18*e.split("").length}};class n{constructor(t,e){if(this.x=0,this.y=0,this.depth=0,this.children=[],this.hgap=0,this.vgap=0,t instanceof n||"x"in t&&"y"in t&&"children"in t){const e=t;return this.data=e.data,this.id=e.id,this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this.depth=e.depth,this.children=e.children,this.parent=e.parent,this.hgap=e.hgap,this.vgap=e.vgap,this.preH=e.preH,void(this.preV=e.preV)}this.data=t;const i=e.getHGap(t),h=e.getVGap(t);this.preH=e.getPreH(t),this.preV=e.getPreV(t),this.width=e.getWidth(t),this.height=e.getHeight(t),this.width+=this.preH,this.height+=this.preV,this.id=e.getId(t),this.addGap(i,h)}isRoot(){return 0===this.depth}isLeaf(){return 0===this.children.length}addGap(t,e){this.hgap+=t,this.vgap+=e,this.width+=2*t,this.height+=2*e}eachNode(t){let e,i=[this];for(;e=i.shift();)t(e),i=e.children.concat(i)}DFTraverse(t){this.eachNode(t)}BFTraverse(t){let e,i=[this];for(;e=i.shift();)t(e),i=i.concat(e.children)}getBoundingBox(){const t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(e=>{t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.width=Math.max(t.width,e.x+e.width),t.height=Math.max(t.height,e.y+e.height)}),t}translate(t=0,e=0){this.eachNode(i=>{i.x+=t,i.y+=e,i.x+=i.preH,i.y+=i.preV})}right2left(){const t=this.getBoundingBox();this.eachNode(e=>{e.x=e.x-2*(e.x-t.left)-e.width}),this.translate(t.width,0)}bottom2top(){const t=this.getBoundingBox();this.eachNode(e=>{e.y=e.y-2*(e.y-t.top)-e.height}),this.translate(0,t.height)}}function h(t,h={},r){h=e({},i,h);const o=new n(t,h),s=[o];let c;if(!r&&!t.collapsed)for(;c=s.shift();)if(!c.data.collapsed){const t=h.getChildren(c.data),e=t?t.length:0;if(c.children=new Array(e),t&&e)for(let i=0;i<e;i++){const e=new n(t[i],h);c.children[i]=e,s.push(e),e.parent=c,e.depth=c.depth+1}}return o}class r{constructor(t,e={}){this.options=e,this.rootNode=h(t,e)}execute(){throw new Error("please override this method")}}let o=class t{constructor(t=0,e=0,i=0,n=[]){this.x=0,this.prelim=0,this.mod=0,this.shift=0,this.change=0,this.tl=null,this.tr=null,this.el=null,this.er=null,this.msel=0,this.mser=0,this.w=t||0,this.h=e||0,this.y=i||0,this.c=n||[],this.cs=n.length}static fromNode(e,i){if(!e)return null;const n=[];return e.children.forEach(e=>{const h=t.fromNode(e,i);h&&n.push(h)}),i?new t(e.height,e.width,e.x,n):new t(e.width,e.height,e.y,n)}};function s(t,e,i){i?t.y+=e:t.x+=e,t.children.forEach(t=>{s(t,e,i)})}function c(t,e){let i=e?t.y:t.x;return t.children.forEach(t=>{i=Math.min(c(t,e),i)}),i}function l(t,e){s(t,-c(t,e),e)}function a(t,e,i){i?e.y=t.x:e.x=t.x,t.c.forEach((t,n)=>{a(t,e.children[n],i)})}function d(t,e,i=0){e?(t.x=i,i+=t.width):(t.y=i,i+=t.height),t.children.forEach(t=>{d(t,e,i)})}function f(t,e={}){const i=e.isHorizontal;function n(t){0===t.cs?(t.el=t,t.er=t,t.msel=t.mser=0):(t.el=t.c[0].el,t.msel=t.c[0].msel,t.er=t.c[t.cs-1].er,t.mser=t.c[t.cs-1].mser)}function h(t,e,i){let n=t.c[e-1],h=n.mod,o=t.c[e],l=o.mod;for(;null!==n&&null!==o;){i&&f(n)>i.low&&(i=i.nxt);const a=h+n.prelim+n.w-(l+o.prelim);a>0&&(l+=a,i&&r(t,e,i.index,a));const d=f(n),g=f(o);d<=g&&(n=c(n),null!==n&&(h+=n.mod)),d>=g&&(o=s(o),null!==o&&(l+=o.mod))}!n&&o?function(t,e,i,n){const h=t.c[0].el;h.tl=i;const r=n-i.mod-t.c[0].msel;h.mod+=r,h.prelim-=r,t.c[0].el=t.c[e].el,t.c[0].msel=t.c[e].msel}(t,e,o,l):n&&!o&&function(t,e,i,n){const h=t.c[e].er;h.tr=i;const r=n-i.mod-t.c[e].mser;h.mod+=r,h.prelim-=r,t.c[e].er=t.c[e-1].er,t.c[e].mser=t.c[e-1].mser}(t,e,n,h)}function r(t,e,i,n){t.c[e].mod+=n,t.c[e].msel+=n,t.c[e].mser+=n,function(t,e,i,n){if(i!==e-1){const h=e-i;t.c[i+1].shift+=n/h,t.c[e].shift-=n/h,t.c[e].change-=n-n/h}}(t,e,i,n)}function s(t){return 0===t.cs?t.tl:t.c[0]}function c(t){return 0===t.cs?t.tr:t.c[t.cs-1]}function f(t){return t.y+t.h}function g(t,e,i){for(;null!==i&&t>=i.low;)i=i.nxt;return{low:t,index:e,nxt:i}}d(t,i);const u=o.fromNode(t,i);return u&&(!function t(e){if(0===e.cs)return void n(e);t(e.c[0]);let i=g(f(e.c[0].el),0,null);for(let n=1;n<e.cs;++n){t(e.c[n]);const r=f(e.c[n].er);h(e,n,i),i=g(r,n,i)}!function(t){t.prelim=(t.c[0].prelim+t.c[0].mod+t.c[t.cs-1].mod+t.c[t.cs-1].prelim+t.c[t.cs-1].w)/2-t.w/2}(e),n(e)}(u),function t(e,i){i+=e.mod,e.x=e.prelim+i,function(t){let e=0,i=0;for(let n=0;n<t.cs;n++)e+=t.c[n].shift,i+=e+t.c[n].change,t.c[n].mod+=i}(e);for(let n=0;n<e.cs;n++)t(e.c[n],i)}(u,0),a(u,t,i),l(t,i)),t}function g(t,e){const i=h(t.data,e,!0),n=h(t.data,e,!0),r=t.children.length,o=Math.round(r/2),s=e.getSide||function(t,e){return e<o?"right":"left"};for(let h=0;h<r;h++){const e=t.children[h];"right"===s(e,h)?n.children.push(e):i.children.push(e)}return i.eachNode(t=>{t.isRoot()||(t.side="left")}),n.eachNode(t=>{t.isRoot()||(t.side="right")}),{left:i,right:n}}const u=["LR","RL","TB","BT","H","V"],p=["LR","RL","H"],x=u[0];function y(t,e,i){const n=e.direction||x;if(e.isHorizontal=(t=>p.indexOf(t)>-1)(n),n&&-1===u.indexOf(n))throw new TypeError(`Invalid direction: ${n}`);if(n===u[0])i(t,e);else if(n===u[1])i(t,e),t.right2left();else if(n===u[2])i(t,e);else if(n===u[3])i(t,e),t.bottom2top();else if(n===u[4]||n===u[5]){const{left:n,right:h}=g(t,e);i(n,e),i(h,e),e.isHorizontal?n.right2left():n.bottom2top(),h.translate(n.x-h.x,n.y-h.y),t.x=n.x,t.y=h.y;const r=t.getBoundingBox();e.isHorizontal?r.top<0&&t.translate(0,-r.top):r.left<0&&t.translate(-r.left,0)}let h=e.fixedRoot;return void 0===h&&(h=!0),h&&t.translate(-(t.x+t.width/2+t.hgap),-(t.y+t.height/2+t.vgap)),function(t,e){if(e.radial){const[i,n]=e.isHorizontal?["x","y"]:["y","x"],h={x:1/0,y:1/0},r={x:-1/0,y:-1/0};let o=0;t.DFTraverse(t=>{o++;const{x:e,y:i}=t;h.x=Math.min(h.x,e),h.y=Math.min(h.y,i),r.x=Math.max(r.x,e),r.y=Math.max(r.y,i)});const s=r[n]-h[n];if(0===s)return;const c=2*Math.PI/o;t.DFTraverse(e=>{const r=e[n],o=h[n],l=e[i],a=t[i],d=(r-o)/s*(2*Math.PI-c)+c,f=l-a;e.x=Math.cos(d)*f,e.y=Math.sin(d)*f})}}(t,e),t}class m extends r{execute(){return y(this.rootNode,this.options,f)}}const w={};function H(t,i){const n=e({},w,i);return new m(t,n).execute()}class N{constructor(t=0,e=[]){this.x=0,this.y=0,this.leftChild=null,this.rightChild=null,this.isLeaf=!1,this.height=t,this.children=e}}const v={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function M(t,e,i){i?(e.x=t.x,e.y=t.y):(e.x=t.y,e.y=t.x),t.children.forEach((t,n)=>{M(t,e.children[n],i)})}function E(t,i={}){const n=e({},v,i);let h=0;let r=null;const o=function t(e){e.width=0,e.depth&&e.depth>h&&(h=e.depth);const i=e.children,n=i.length,r=new N(0,[]);return i.forEach((e,i)=>{const h=t(e);r.children.push(h),0===i&&(r.leftChild=h),i===n-1&&(r.rightChild=h)}),r.originNode=e,r.isLeaf=e.isLeaf(),r}(t);return function t(e){if(e.isLeaf||0===e.children.length)e.drawingDepth=h;else{const i=e.children.map(e=>t(e)),n=Math.min(...i);e.drawingDepth=n-1}return e.drawingDepth}(o),function t(e){e.x=e.drawingDepth*n.rankSep,e.isLeaf?(e.y=0,r&&(e.y=r.y+r.height+n.nodeSep,e.originNode.parent!==r.originNode.parent&&(e.y+=n.subTreeSep)),r=e):(e.children.forEach(e=>{t(e)}),e.y=(e.leftChild.y+e.rightChild.y)/2)}(o),M(o,t,n.isHorizontal),t}class B extends r{execute(){return this.rootNode.width=0,y(this.rootNode,this.options,E)}}const T={};function S(t,i){const n=e({},T,i);return new B(t,n).execute()}function b(e,i,n,h){let r=null;e.eachNode(e=>{!function(e,i,n,h,r){const o=("function"==typeof n?n(e):n)*e.depth;if(!h)try{if(e.parent&&e.id===e.parent.children[0].id)return e.x+=o,void(e.y=i?i.y:0)}catch{}if(e.x+=o,i){if(e.y=i.y+t(i,e,r),i.parent&&e.parent&&e.parent.id!==i.parent.id){const n=i.parent,h=n.y+t(n,e,r);e.y=h>e.y?h:e.y}}else e.y=0}(e,r,i,n,h),r=e})}const L=["LR","RL","H"],V=L[0];class R extends r{execute(){const t=this.options,e=this.rootNode;t.isHorizontal=!0;const{indent:i=20,dropCap:n=!0,direction:h=V,align:r}=t;if(h&&-1===L.indexOf(h))throw new TypeError(`Invalid direction: ${h}`);if(h===L[0])b(e,i,n,r);else if(h===L[1])b(e,i,n,r),e.right2left();else if(h===L[2]){const{left:h,right:o}=g(e,t);b(h,i,n,r),h.right2left(),b(o,i,n,r);const s=h.getBoundingBox();o.translate(s.width,0),e.x=o.x-e.width/2}return e}}const z={};function C(t,i){const n=e({},z,i);return new R(t,n).execute()}function D(t,e){let i=0;return t.children.length?t.children.forEach(t=>{i+=D(t,e)}):i=t.height,t._subTreeSep=e.getSubTreeSep(t.data),t.totalHeight=Math.max(t.height,i)+2*t._subTreeSep,t.totalHeight}function Y(t){const e=t.children,i=e.length;if(i){e.forEach(t=>{Y(t)});const n=e[0],h=e[i-1],r=h.y-n.y+h.height;let o=0;if(e.forEach(t=>{o+=t.totalHeight}),r>t.height)t.y=n.y+r/2-t.height/2;else if(1!==e.length||t.height>o){const i=t.y+(t.height-r)/2-n.y;e.forEach(t=>{t.translate(0,i)})}else t.y=(n.y+n.height/2+h.y+h.height/2)/2-t.height/2}}const G={getSubTreeSep:()=>0};function I(t,i={}){return i=e({},G,i),t.parent={x:0,width:0,height:0,y:0},t.BFTraverse(t=>{t.x=t.parent.x+t.parent.width}),t.parent=void 0,D(t,i),t.startY=0,t.y=t.totalHeight/2-t.height/2,t.eachNode(t=>{const e=t.children,i=e.length;if(i){const n=e[0];if(n.startY=t.startY+t._subTreeSep,1===i)n.y=t.y+t.height/2-n.height/2;else{n.y=n.startY+n.totalHeight/2-n.height/2;for(let t=1;t<i;t++){const i=e[t];i.startY=e[t-1].startY+e[t-1].totalHeight,i.y=i.startY+i.totalHeight/2-i.height/2}}}}),Y(t),t}class P extends r{execute(){return y(this.rootNode,this.options,I)}}const A={};function F(t,i){const n=e({},A,i);return new P(t,n).execute()}const _={compactBox:H,dendrogram:S,indented:C,mindmap:F},O="0.7.0";export{H as compactBox,_ as default,S as dendrogram,C as indented,F as mindmap,O as version};
//# sourceMappingURL=hierarchy.es.js.map
